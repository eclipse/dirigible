<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ttyd - Terminal</title>
    <link rel="icon" type="image/png"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAAAwr0iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTgyRjc1RjA3MTZEMTFFNjg2M0NCOEY3RjJBMEY3N0EiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTgyRjc1RUY3MTZEMTFFNjg2M0NCOEY3RjJBMEY3N0EiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjU3YmQxNjhjLWI5ZDctMTE3OS1hM2RlLWZmNjQyYTM4NTJmMCIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjU3YmQxNjhjLWI5ZDctMTE3OS1hM2RlLWZmNjQyYTM4NTJmMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhsssMYAAALDSURBVHjaxFa9jxJBFH8zDMdCYrhIAppgIjaG5C5RQ+zO2Gty5gpbY2KsbOyu1MrGGEtj/A9stLPXs6CjJ5GYIF6AE5IDBHZmfG92F4ZzvQAnyyO7O8zX+73f+5gRd3bvvSgffN4/l948YgASFhQ9aWhqM6+pYfrVjD5WH9NK8f7x8ebNnVtvWC6b/RaPxy8zxsxmbB5lIfNsIDMggreezqG1o9GIGj8E45zFNzYgnU4D5xyUUkBglpFAKfgWa5gFY89rNVvgJJMgSBkpjcViIISA4XAI4/EYkBXTdyYQ9LOUU9sw7bmG2lqgPwwAKSV9D/P5/G2csNtoNJ71+32HFjqOszyQkDY9xLbrjkEorSe+wYGc67o72Wz2dSqV+tjr9e4iiAfdbnfL+G4B10wtDV/nBSYAN5O053eivVqtvq1UKr/RDaVCofCyVCo9ogXE0qISppgsJ3GlCzzGkQHcOEgT8n2xWLyfy+XeDwaDK7Va7Xm73X4YUHaaRfMwcbIPdTNBGWBSwkP3Ewdr9Xr9FcbAUwpICkyKAXuTRdkIAxH4QThOEn61W2YSKruAVpeJiUQiYRQjqHImk9nDjDiPijnO+d7pdN5hXOwRuGXdYRggANIdM9sy2tTeGPsuNpvNJwgkRVUMpYPdV5dJURsIZZ9WBEB6aRhKkeeWSzi2j9kxk8vLFqsABFkvlWSYhoqdni6zY2dRfHJfYoErvxBFLb5expVUDFlYCwDpM8CU0pEDoADUGH9YCf8dgKuQSRagXoo/Lg0Da3CBVwm9syBKBv46FfHNIlc+BYFZQHe0yBnQPgN0HFtV8H8VmXko8ABgEOo1uIDZMbCWALRiQAR/gkvpqsU+Rcl4gW9zR6JLCXXQ5XTVAKR/sqIvGODl89BnJfLHcRJNceP6tQ9fDr4+RmRHmAUqoiLEkOnM1vb2pz8CDACUMgcHE3VMqAAAAABJRU5ErkJggg==" />
    <style type="text/css">
        .xterm {
            cursor: text;
            position: relative;
            user-select: none;
            -ms-user-select: none;
            -webkit-user-select: none
        }

        .xterm.focus,
        .xterm:focus {
            outline: none
        }

        .xterm .xterm-helpers {
            position: absolute;
            top: 0;
            z-index: 5
        }

        .xterm .xterm-helper-textarea {
            border: 0;
            height: 0;
            left: -9999em;
            margin: 0;
            opacity: 0;
            overflow: hidden;
            padding: 0;
            position: absolute;
            resize: none;
            top: 0;
            white-space: nowrap;
            width: 0;
            z-index: -5
        }

        .xterm .composition-view {
            background: #000;
            color: #fff;
            display: none;
            position: absolute;
            white-space: nowrap;
            z-index: 1
        }

        .xterm .composition-view.active {
            display: block
        }

        .xterm .xterm-viewport {
            background-color: #000;
            bottom: 0;
            cursor: default;
            left: 0;
            overflow-y: scroll;
            position: absolute;
            right: 0;
            top: 0
        }

        .xterm .xterm-screen {
            position: relative
        }

        .xterm .xterm-screen canvas {
            left: 0;
            position: absolute;
            top: 0
        }

        .xterm .xterm-scroll-area {
            visibility: hidden
        }

        .xterm-char-measure-element {
            display: inline-block;
            left: -9999em;
            line-height: normal;
            position: absolute;
            top: 0;
            visibility: hidden
        }

        .xterm.enable-mouse-events {
            cursor: default
        }

        .xterm .xterm-cursor-pointer,
        .xterm.xterm-cursor-pointer {
            cursor: pointer
        }

        .xterm.column-select.focus {
            cursor: crosshair
        }

        .xterm .xterm-accessibility:not(.debug),
        .xterm .xterm-message {
            bottom: 0;
            color: transparent;
            left: 0;
            pointer-events: none;
            position: absolute;
            right: 0;
            top: 0;
            z-index: 10
        }

        .xterm .xterm-accessibility-tree:not(.debug) ::selection {
            color: transparent
        }

        .xterm .xterm-accessibility-tree {
            user-select: text;
            white-space: pre
        }

        .xterm .live-region {
            height: 1px;
            left: -9999px;
            overflow: hidden;
            position: absolute;
            width: 1px
        }

        .xterm-dim {
            opacity: 1 !important
        }

        .xterm-underline-1 {
            text-decoration: underline
        }

        .xterm-underline-2 {
            text-decoration: double underline
        }

        .xterm-underline-3 {
            text-decoration: wavy underline
        }

        .xterm-underline-4 {
            text-decoration: dotted underline
        }

        .xterm-underline-5 {
            text-decoration: dashed underline
        }

        .xterm-overline {
            text-decoration: overline
        }

        .xterm-overline.xterm-underline-1 {
            text-decoration: overline underline
        }

        .xterm-overline.xterm-underline-2 {
            text-decoration: overline double underline
        }

        .xterm-overline.xterm-underline-3 {
            text-decoration: overline wavy underline
        }

        .xterm-overline.xterm-underline-4 {
            text-decoration: overline dotted underline
        }

        .xterm-overline.xterm-underline-5 {
            text-decoration: overline dashed underline
        }

        .xterm-strikethrough {
            text-decoration: line-through
        }

        .xterm-screen .xterm-decoration-container .xterm-decoration {
            position: absolute;
            z-index: 6
        }

        .xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer {
            z-index: 7
        }

        .xterm-decoration-overview-ruler {
            pointer-events: none;
            position: absolute;
            right: 0;
            top: 0;
            z-index: 8
        }

        .xterm-decoration-top {
            position: relative;
            z-index: 2
        }

        .modal {
            align-items: center;
            display: flex;
            overflow: hidden;
            position: fixed;
            z-index: 40
        }

        .modal,
        .modal-background {
            bottom: 0;
            left: 0;
            right: 0;
            top: 0
        }

        .modal-background {
            background-color: rgba(74, 74, 74, .8);
            position: absolute
        }

        .modal-content {
            margin: 0 20px;
            max-height: calc(100vh - 160px);
            overflow: auto;
            position: relative;
            width: 100%
        }

        .modal-content .box {
            background-color: #fff;
            color: #4a4a4a;
            display: block;
            padding: 1.25rem
        }

        .modal-content header {
            border-bottom: 1px solid #ddd;
            font-weight: 700;
            margin-bottom: 10px;
            padding-bottom: 10px;
            text-align: center
        }

        .modal-content .file-input {
            height: .01em;
            left: 0;
            outline: none;
            position: absolute;
            top: 0;
            width: .01em
        }

        .modal-content .file-cta {
            align-items: center;
            background-color: #f5f5f5;
            border-color: #dbdbdb;
            border-radius: 3px;
            box-shadow: none;
            color: #6200ee;
            cursor: pointer;
            display: inline-flex;
            font-size: 1em;
            font-weight: 500;
            height: 2.25em;
            justify-content: flex-start;
            line-height: 1.5;
            outline: none;
            padding: calc(.375em - 1px) 1em;
            position: relative;
            vertical-align: top;
            white-space: nowrap
        }

        @media print,
        screen and (min-width:769px) {
            .modal-content {
                margin: 0 auto;
                max-height: calc(100vh - 40px);
                width: 640px
            }
        }

        body,
        html {
            height: 100%;
            margin: 0;
            min-height: 100%;
            overflow: hidden
        }

        #terminal-container {
            height: 100%;
            margin: 0 auto;
            padding: 0;
            width: auto
        }

        #terminal-container .terminal {
            height: calc(100% - 10px);
            padding: 5px
        }

        /*# sourceMappingURL=app.180babeee880c26cc052.css.map*/
    </style>
</head>

<body>
    <script type="text/javascript">
(() => {
    var e = {
            852: e => {
                var t;
                self, t = () => (() => {
                    "use strict";
                    var e = {
                            903: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BaseRenderLayer = void 0;
                                const s = i(274),
                                    r = i(627),
                                    n = i(237),
                                    o = i(860),
                                    a = i(374),
                                    h = i(296),
                                    l = i(345),
                                    c = i(859),
                                    d = i(399),
                                    _ = i(855);
                                class u extends c.Disposable {
                                    get canvas() {
                                        return this._canvas
                                    }
                                    get cacheCanvas() {
                                        return this._charAtlas?.pages[0].canvas
                                    }
                                    constructor(e, t, i, r, n, o, a, d, _, u) {
                                        super(), this._terminal = e, this._container = t, this._alpha = n, this._themeService = o, this._bufferService = a, this._optionsService = d, this._decorationService = _, this._coreBrowserService = u, this._deviceCharWidth = 0, this._deviceCharHeight = 0, this._deviceCellWidth = 0, this._deviceCellHeight = 0, this._deviceCharLeft = 0, this._deviceCharTop = 0, this._selectionModel = (0, h.createSelectionRenderModel)(), this._bitmapGenerator = [], this._charAtlasDisposable = this.register(new c.MutableDisposable), this._onAddTextureAtlasCanvas = this.register(new l.EventEmitter), this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event, this._cellColorResolver = new s.CellColorResolver(this._terminal, this._optionsService, this._selectionModel, this._decorationService, this._coreBrowserService, this._themeService), this._canvas = this._coreBrowserService.mainDocument.createElement("canvas"), this._canvas.classList.add(`xterm-${i}-layer`), this._canvas.style.zIndex = r.toString(), this._initCanvas(), this._container.appendChild(this._canvas), this._refreshCharAtlas(this._themeService.colors), this.register(this._themeService.onChangeColors((e => {
                                            this._refreshCharAtlas(e), this.reset(), this.handleSelectionChanged(this._selectionModel.selectionStart, this._selectionModel.selectionEnd, this._selectionModel.columnSelectMode)
                                        }))), this.register((0, c.toDisposable)((() => {
                                            this._canvas.remove()
                                        })))
                                    }
                                    _initCanvas() {
                                        this._ctx = (0, a.throwIfFalsy)(this._canvas.getContext("2d", {
                                            alpha: this._alpha
                                        })), this._alpha || this._clearAll()
                                    }
                                    handleBlur() {}
                                    handleFocus() {}
                                    handleCursorMove() {}
                                    handleGridChanged(e, t) {}
                                    handleSelectionChanged(e, t, i = !1) {
                                        this._selectionModel.update(this._terminal._core, e, t, i)
                                    }
                                    _setTransparency(e) {
                                        if (e === this._alpha) return;
                                        const t = this._canvas;
                                        this._alpha = e, this._canvas = this._canvas.cloneNode(), this._initCanvas(), this._container.replaceChild(this._canvas, t), this._refreshCharAtlas(this._themeService.colors), this.handleGridChanged(0, this._bufferService.rows - 1)
                                    }
                                    _refreshCharAtlas(e) {
                                        if (!(this._deviceCharWidth <= 0 && this._deviceCharHeight <= 0)) {
                                            this._charAtlas = (0, r.acquireTextureAtlas)(this._terminal, this._optionsService.rawOptions, e, this._deviceCellWidth, this._deviceCellHeight, this._deviceCharWidth, this._deviceCharHeight, this._coreBrowserService.dpr), this._charAtlasDisposable.value = (0, l.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas), this._charAtlas.warmUp();
                                            for (let e = 0; e < this._charAtlas.pages.length; e++) this._bitmapGenerator[e] = new f(this._charAtlas.pages[e].canvas)
                                        }
                                    }
                                    resize(e) {
                                        this._deviceCellWidth = e.device.cell.width, this._deviceCellHeight = e.device.cell.height, this._deviceCharWidth = e.device.char.width, this._deviceCharHeight = e.device.char.height, this._deviceCharLeft = e.device.char.left, this._deviceCharTop = e.device.char.top, this._canvas.width = e.device.canvas.width, this._canvas.height = e.device.canvas.height, this._canvas.style.width = `${e.css.canvas.width}px`, this._canvas.style.height = `${e.css.canvas.height}px`, this._alpha || this._clearAll(), this._refreshCharAtlas(this._themeService.colors)
                                    }
                                    clearTextureAtlas() {
                                        this._charAtlas?.clearTexture()
                                    }
                                    _fillCells(e, t, i, s) {
                                        this._ctx.fillRect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, s * this._deviceCellHeight)
                                    }
                                    _fillMiddleLineAtCells(e, t, i = 1) {
                                        const s = Math.ceil(.5 * this._deviceCellHeight);
                                        this._ctx.fillRect(e * this._deviceCellWidth, (t + 1) * this._deviceCellHeight - s - this._coreBrowserService.dpr, i * this._deviceCellWidth, this._coreBrowserService.dpr)
                                    }
                                    _fillBottomLineAtCells(e, t, i = 1, s = 0) {
                                        this._ctx.fillRect(e * this._deviceCellWidth, (t + 1) * this._deviceCellHeight + s - this._coreBrowserService.dpr - 1, i * this._deviceCellWidth, this._coreBrowserService.dpr)
                                    }
                                    _curlyUnderlineAtCell(e, t, i = 1) {
                                        this._ctx.save(), this._ctx.beginPath(), this._ctx.strokeStyle = this._ctx.fillStyle;
                                        const s = this._coreBrowserService.dpr;
                                        this._ctx.lineWidth = s;
                                        for (let r = 0; r < i; r++) {
                                            const i = (e + r) * this._deviceCellWidth,
                                                n = (e + r + .5) * this._deviceCellWidth,
                                                o = (e + r + 1) * this._deviceCellWidth,
                                                a = (t + 1) * this._deviceCellHeight - s - 1,
                                                h = a - s,
                                                l = a + s;
                                            this._ctx.moveTo(i, a), this._ctx.bezierCurveTo(i, h, n, h, n, a), this._ctx.bezierCurveTo(n, l, o, l, o, a)
                                        }
                                        this._ctx.stroke(), this._ctx.restore()
                                    }
                                    _dottedUnderlineAtCell(e, t, i = 1) {
                                        this._ctx.save(), this._ctx.beginPath(), this._ctx.strokeStyle = this._ctx.fillStyle;
                                        const s = this._coreBrowserService.dpr;
                                        this._ctx.lineWidth = s, this._ctx.setLineDash([2 * s, s]);
                                        const r = e * this._deviceCellWidth,
                                            n = (t + 1) * this._deviceCellHeight - s - 1;
                                        this._ctx.moveTo(r, n);
                                        for (let t = 0; t < i; t++) {
                                            const s = (e + i + t) * this._deviceCellWidth;
                                            this._ctx.lineTo(s, n)
                                        }
                                        this._ctx.stroke(), this._ctx.closePath(), this._ctx.restore()
                                    }
                                    _dashedUnderlineAtCell(e, t, i = 1) {
                                        this._ctx.save(), this._ctx.beginPath(), this._ctx.strokeStyle = this._ctx.fillStyle;
                                        const s = this._coreBrowserService.dpr;
                                        this._ctx.lineWidth = s, this._ctx.setLineDash([4 * s, 3 * s]);
                                        const r = e * this._deviceCellWidth,
                                            n = (e + i) * this._deviceCellWidth,
                                            o = (t + 1) * this._deviceCellHeight - s - 1;
                                        this._ctx.moveTo(r, o), this._ctx.lineTo(n, o), this._ctx.stroke(), this._ctx.closePath(), this._ctx.restore()
                                    }
                                    _fillLeftLineAtCell(e, t, i) {
                                        this._ctx.fillRect(e * this._deviceCellWidth, t * this._deviceCellHeight, this._coreBrowserService.dpr * i, this._deviceCellHeight)
                                    }
                                    _strokeRectAtCell(e, t, i, s) {
                                        const r = this._coreBrowserService.dpr;
                                        this._ctx.lineWidth = r, this._ctx.strokeRect(e * this._deviceCellWidth + r / 2, t * this._deviceCellHeight + r / 2, i * this._deviceCellWidth - r, s * this._deviceCellHeight - r)
                                    }
                                    _clearAll() {
                                        this._alpha ? this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height) : (this._ctx.fillStyle = this._themeService.colors.background.css, this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height))
                                    }
                                    _clearCells(e, t, i, s) {
                                        this._alpha ? this._ctx.clearRect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, s * this._deviceCellHeight) : (this._ctx.fillStyle = this._themeService.colors.background.css, this._ctx.fillRect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, s * this._deviceCellHeight))
                                    }
                                    _fillCharTrueColor(e, t, i) {
                                        this._ctx.font = this._getFont(!1, !1), this._ctx.textBaseline = n.TEXT_BASELINE, this._clipRow(i);
                                        let s = !1;
                                        !1 !== this._optionsService.rawOptions.customGlyphs && (s = (0, o.tryDrawCustomChar)(this._ctx, e.getChars(), t * this._deviceCellWidth, i * this._deviceCellHeight, this._deviceCellWidth, this._deviceCellHeight, this._optionsService.rawOptions.fontSize, this._coreBrowserService.dpr)), s || this._ctx.fillText(e.getChars(), t * this._deviceCellWidth + this._deviceCharLeft, i * this._deviceCellHeight + this._deviceCharTop + this._deviceCharHeight)
                                    }
                                    _drawChars(e, t, i) {
                                        const s = e.getChars();
                                        if (this._cellColorResolver.resolve(e, t, this._bufferService.buffer.ydisp + i, this._deviceCellWidth), !this._charAtlas) return;
                                        let r;
                                        r = s && s.length > 1 ? this._charAtlas.getRasterizedGlyphCombinedChar(s, this._cellColorResolver.result.bg, this._cellColorResolver.result.fg, this._cellColorResolver.result.ext, !0) : this._charAtlas.getRasterizedGlyph(e.getCode() || _.WHITESPACE_CELL_CODE, this._cellColorResolver.result.bg, this._cellColorResolver.result.fg, this._cellColorResolver.result.ext, !0), r.size.x && r.size.y && (this._ctx.save(), this._clipRow(i), this._bitmapGenerator[r.texturePage] && this._charAtlas.pages[r.texturePage].canvas !== this._bitmapGenerator[r.texturePage].canvas && (this._bitmapGenerator[r.texturePage]?.bitmap?.close(), delete this._bitmapGenerator[r.texturePage]), this._charAtlas.pages[r.texturePage].version !== this._bitmapGenerator[r.texturePage]?.version && (this._bitmapGenerator[r.texturePage] || (this._bitmapGenerator[r.texturePage] = new f(this._charAtlas.pages[r.texturePage].canvas)), this._bitmapGenerator[r.texturePage].refresh(), this._bitmapGenerator[r.texturePage].version = this._charAtlas.pages[r.texturePage].version), this._ctx.drawImage(this._bitmapGenerator[r.texturePage]?.bitmap || this._charAtlas.pages[r.texturePage].canvas, r.texturePosition.x, r.texturePosition.y, r.size.x, r.size.y, t * this._deviceCellWidth + this._deviceCharLeft - r.offset.x, i * this._deviceCellHeight + this._deviceCharTop - r.offset.y, r.size.x, r.size.y), this._ctx.restore())
                                    }
                                    _clipRow(e) {
                                        this._ctx.beginPath(), this._ctx.rect(0, e * this._deviceCellHeight, this._bufferService.cols * this._deviceCellWidth, this._deviceCellHeight), this._ctx.clip()
                                    }
                                    _getFont(e, t) {
                                        return `${t ? "italic" : ""} ${e ? this._optionsService.rawOptions.fontWeightBold : this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize * this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`
                                    }
                                }
                                t.BaseRenderLayer = u;
                                class f {
                                    get bitmap() {
                                        return this._bitmap
                                    }
                                    constructor(e) {
                                        this.canvas = e, this._state = 0, this._commitTimeout = void 0, this._bitmap = void 0, this.version = -1
                                    }
                                    refresh() {
                                        this._bitmap?.close(), this._bitmap = void 0, d.isSafari || (void 0 === this._commitTimeout && (this._commitTimeout = window.setTimeout((() => this._generate()), 100)), 1 === this._state && (this._state = 2))
                                    }
                                    _generate() {
                                        0 === this._state && (this._bitmap?.close(), this._bitmap = void 0, this._state = 1, window.createImageBitmap(this.canvas).then((e => {
                                            2 === this._state ? this.refresh() : this._bitmap = e, this._state = 0
                                        })), this._commitTimeout && (this._commitTimeout = void 0))
                                    }
                                }
                            },
                            949: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CanvasRenderer = void 0;
                                const s = i(627),
                                    r = i(56),
                                    n = i(374),
                                    o = i(345),
                                    a = i(859),
                                    h = i(873),
                                    l = i(43),
                                    c = i(630),
                                    d = i(744);
                                class _ extends a.Disposable {
                                    constructor(e, t, i, _, u, f, g, p, v, m, A) {
                                        super(), this._terminal = e, this._screenElement = t, this._bufferService = _, this._charSizeService = u, this._optionsService = f, this._coreBrowserService = v, this._themeService = A, this._observerDisposable = this.register(new a.MutableDisposable), this._onRequestRedraw = this.register(new o.EventEmitter), this.onRequestRedraw = this._onRequestRedraw.event, this._onChangeTextureAtlas = this.register(new o.EventEmitter), this.onChangeTextureAtlas = this._onChangeTextureAtlas.event, this._onAddTextureAtlasCanvas = this.register(new o.EventEmitter), this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event;
                                        const C = this._optionsService.rawOptions.allowTransparency;
                                        this._renderLayers = [new d.TextRenderLayer(this._terminal, this._screenElement, 0, C, this._bufferService, this._optionsService, g, m, this._coreBrowserService, A), new c.SelectionRenderLayer(this._terminal, this._screenElement, 1, this._bufferService, this._coreBrowserService, m, this._optionsService, A), new l.LinkRenderLayer(this._terminal, this._screenElement, 2, i, this._bufferService, this._optionsService, m, this._coreBrowserService, A), new h.CursorRenderLayer(this._terminal, this._screenElement, 3, this._onRequestRedraw, this._bufferService, this._optionsService, p, this._coreBrowserService, m, A)];
                                        for (const e of this._renderLayers)(0, o.forwardEvent)(e.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas);
                                        this.dimensions = (0, n.createRenderDimensions)(), this._devicePixelRatio = this._coreBrowserService.dpr, this._updateDimensions(), this._observerDisposable.value = (0, r.observeDevicePixelDimensions)(this._renderLayers[0].canvas, this._coreBrowserService.window, ((e, t) => this._setCanvasDevicePixelDimensions(e, t))), this.register(this._coreBrowserService.onWindowChange((e => {
                                            this._observerDisposable.value = (0, r.observeDevicePixelDimensions)(this._renderLayers[0].canvas, e, ((e, t) => this._setCanvasDevicePixelDimensions(e, t)))
                                        }))), this.register((0, a.toDisposable)((() => {
                                            for (const e of this._renderLayers) e.dispose();
                                            (0, s.removeTerminalFromCache)(this._terminal)
                                        })))
                                    }
                                    get textureAtlas() {
                                        return this._renderLayers[0].cacheCanvas
                                    }
                                    handleDevicePixelRatioChange() {
                                        this._devicePixelRatio !== this._coreBrowserService.dpr && (this._devicePixelRatio = this._coreBrowserService.dpr, this.handleResize(this._bufferService.cols, this._bufferService.rows))
                                    }
                                    handleResize(e, t) {
                                        this._updateDimensions();
                                        for (const e of this._renderLayers) e.resize(this.dimensions);
                                        this._screenElement.style.width = `${this.dimensions.css.canvas.width}px`, this._screenElement.style.height = `${this.dimensions.css.canvas.height}px`
                                    }
                                    handleCharSizeChanged() {
                                        this.handleResize(this._bufferService.cols, this._bufferService.rows)
                                    }
                                    handleBlur() {
                                        this._runOperation((e => e.handleBlur()))
                                    }
                                    handleFocus() {
                                        this._runOperation((e => e.handleFocus()))
                                    }
                                    handleSelectionChanged(e, t, i = !1) {
                                        this._runOperation((s => s.handleSelectionChanged(e, t, i))), this._themeService.colors.selectionForeground && this._onRequestRedraw.fire({
                                            start: 0,
                                            end: this._bufferService.rows - 1
                                        })
                                    }
                                    handleCursorMove() {
                                        this._runOperation((e => e.handleCursorMove()))
                                    }
                                    clear() {
                                        this._runOperation((e => e.reset()))
                                    }
                                    _runOperation(e) {
                                        for (const t of this._renderLayers) e(t)
                                    }
                                    renderRows(e, t) {
                                        for (const i of this._renderLayers) i.handleGridChanged(e, t)
                                    }
                                    clearTextureAtlas() {
                                        for (const e of this._renderLayers) e.clearTextureAtlas()
                                    }
                                    _updateDimensions() {
                                        if (!this._charSizeService.hasValidSize) return;
                                        const e = this._coreBrowserService.dpr;
                                        this.dimensions.device.char.width = Math.floor(this._charSizeService.width * e), this.dimensions.device.char.height = Math.ceil(this._charSizeService.height * e), this.dimensions.device.cell.height = Math.floor(this.dimensions.device.char.height * this._optionsService.rawOptions.lineHeight), this.dimensions.device.char.top = 1 === this._optionsService.rawOptions.lineHeight ? 0 : Math.round((this.dimensions.device.cell.height - this.dimensions.device.char.height) / 2), this.dimensions.device.cell.width = this.dimensions.device.char.width + Math.round(this._optionsService.rawOptions.letterSpacing), this.dimensions.device.char.left = Math.floor(this._optionsService.rawOptions.letterSpacing / 2), this.dimensions.device.canvas.height = this._bufferService.rows * this.dimensions.device.cell.height, this.dimensions.device.canvas.width = this._bufferService.cols * this.dimensions.device.cell.width, this.dimensions.css.canvas.height = Math.round(this.dimensions.device.canvas.height / e), this.dimensions.css.canvas.width = Math.round(this.dimensions.device.canvas.width / e), this.dimensions.css.cell.height = this.dimensions.css.canvas.height / this._bufferService.rows, this.dimensions.css.cell.width = this.dimensions.css.canvas.width / this._bufferService.cols
                                    }
                                    _setCanvasDevicePixelDimensions(e, t) {
                                        this.dimensions.device.canvas.height = t, this.dimensions.device.canvas.width = e;
                                        for (const e of this._renderLayers) e.resize(this.dimensions);
                                        this._requestRedrawViewport()
                                    }
                                    _requestRedrawViewport() {
                                        this._onRequestRedraw.fire({
                                            start: 0,
                                            end: this._bufferService.rows - 1
                                        })
                                    }
                                }
                                t.CanvasRenderer = _
                            },
                            873: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CursorRenderLayer = void 0;
                                const s = i(457),
                                    r = i(859),
                                    n = i(399),
                                    o = i(782),
                                    a = i(903);
                                class h extends a.BaseRenderLayer {
                                    constructor(e, t, i, s, n, a, h, l, c, d) {
                                        super(e, t, "cursor", i, !0, d, n, a, c, l), this._onRequestRedraw = s, this._coreService = h, this._cursorBlinkStateManager = this.register(new r.MutableDisposable), this._cell = new o.CellData, this._state = {
                                            x: 0,
                                            y: 0,
                                            isFocused: !1,
                                            style: "",
                                            width: 0
                                        }, this._cursorRenderers = {
                                            bar: this._renderBarCursor.bind(this),
                                            block: this._renderBlockCursor.bind(this),
                                            underline: this._renderUnderlineCursor.bind(this),
                                            outline: this._renderOutlineCursor.bind(this)
                                        }, this.register(a.onOptionChange((() => this._handleOptionsChanged()))), this._handleOptionsChanged()
                                    }
                                    resize(e) {
                                        super.resize(e), this._state = {
                                            x: 0,
                                            y: 0,
                                            isFocused: !1,
                                            style: "",
                                            width: 0
                                        }
                                    }
                                    reset() {
                                        this._clearCursor(), this._cursorBlinkStateManager.value?.restartBlinkAnimation(), this._handleOptionsChanged()
                                    }
                                    handleBlur() {
                                        this._cursorBlinkStateManager.value?.pause(), this._onRequestRedraw.fire({
                                            start: this._bufferService.buffer.y,
                                            end: this._bufferService.buffer.y
                                        })
                                    }
                                    handleFocus() {
                                        this._cursorBlinkStateManager.value?.resume(), this._onRequestRedraw.fire({
                                            start: this._bufferService.buffer.y,
                                            end: this._bufferService.buffer.y
                                        })
                                    }
                                    _handleOptionsChanged() {
                                        this._optionsService.rawOptions.cursorBlink ? this._cursorBlinkStateManager.value || (this._cursorBlinkStateManager.value = new s.CursorBlinkStateManager((() => this._render(!0)), this._coreBrowserService)) : this._cursorBlinkStateManager.clear(), this._onRequestRedraw.fire({
                                            start: this._bufferService.buffer.y,
                                            end: this._bufferService.buffer.y
                                        })
                                    }
                                    handleCursorMove() {
                                        this._cursorBlinkStateManager.value?.restartBlinkAnimation()
                                    }
                                    handleGridChanged(e, t) {
                                        !this._cursorBlinkStateManager.value || this._cursorBlinkStateManager.value.isPaused ? this._render(!1) : this._cursorBlinkStateManager.value.restartBlinkAnimation()
                                    }
                                    _render(e) {
                                        if (!this._coreService.isCursorInitialized || this._coreService.isCursorHidden) return void this._clearCursor();
                                        const t = this._bufferService.buffer.ybase + this._bufferService.buffer.y,
                                            i = t - this._bufferService.buffer.ydisp;
                                        if (i < 0 || i >= this._bufferService.rows) return void this._clearCursor();
                                        const s = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1);
                                        if (this._bufferService.buffer.lines.get(t).loadCell(s, this._cell), void 0 !== this._cell.content) {
                                            if (!this._coreBrowserService.isFocused) {
                                                this._clearCursor(), this._ctx.save(), this._ctx.fillStyle = this._themeService.colors.cursor.css;
                                                const e = this._optionsService.rawOptions.cursorStyle,
                                                    t = this._optionsService.rawOptions.cursorInactiveStyle;
                                                return t && "none" !== t && this._cursorRenderers[t](s, i, this._cell), this._ctx.restore(), this._state.x = s, this._state.y = i, this._state.isFocused = !1, this._state.style = e, void(this._state.width = this._cell.getWidth())
                                            }
                                            if (!this._cursorBlinkStateManager.value || this._cursorBlinkStateManager.value.isCursorVisible) {
                                                if (this._state) {
                                                    if (this._state.x === s && this._state.y === i && this._state.isFocused === this._coreBrowserService.isFocused && this._state.style === this._optionsService.rawOptions.cursorStyle && this._state.width === this._cell.getWidth()) return;
                                                    this._clearCursor()
                                                }
                                                this._ctx.save(), this._cursorRenderers[this._optionsService.rawOptions.cursorStyle || "block"](s, i, this._cell), this._ctx.restore(), this._state.x = s, this._state.y = i, this._state.isFocused = !1, this._state.style = this._optionsService.rawOptions.cursorStyle, this._state.width = this._cell.getWidth()
                                            } else this._clearCursor()
                                        }
                                    }
                                    _clearCursor() {
                                        this._state && (n.isFirefox || this._coreBrowserService.dpr < 1 ? this._clearAll() : this._clearCells(this._state.x, this._state.y, this._state.width, 1), this._state = {
                                            x: 0,
                                            y: 0,
                                            isFocused: !1,
                                            style: "",
                                            width: 0
                                        })
                                    }
                                    _renderBarCursor(e, t, i) {
                                        this._ctx.save(), this._ctx.fillStyle = this._themeService.colors.cursor.css, this._fillLeftLineAtCell(e, t, this._optionsService.rawOptions.cursorWidth), this._ctx.restore()
                                    }
                                    _renderBlockCursor(e, t, i) {
                                        this._ctx.save(), this._ctx.fillStyle = this._themeService.colors.cursor.css, this._fillCells(e, t, i.getWidth(), 1), this._ctx.fillStyle = this._themeService.colors.cursorAccent.css, this._fillCharTrueColor(i, e, t), this._ctx.restore()
                                    }
                                    _renderUnderlineCursor(e, t, i) {
                                        this._ctx.save(), this._ctx.fillStyle = this._themeService.colors.cursor.css, this._fillBottomLineAtCells(e, t), this._ctx.restore()
                                    }
                                    _renderOutlineCursor(e, t, i) {
                                        this._ctx.save(), this._ctx.strokeStyle = this._themeService.colors.cursor.css, this._strokeRectAtCell(e, t, i.getWidth(), 1), this._ctx.restore()
                                    }
                                }
                                t.CursorRenderLayer = h
                            },
                            574: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.GridCache = void 0, t.GridCache = class {
                                    constructor() {
                                        this.cache = []
                                    }
                                    resize(e, t) {
                                        for (let i = 0; i < e; i++) {
                                            this.cache.length <= i && this.cache.push([]);
                                            for (let e = this.cache[i].length; e < t; e++) this.cache[i].push(void 0);
                                            this.cache[i].length = t
                                        }
                                        this.cache.length = e
                                    }
                                    clear() {
                                        for (let e = 0; e < this.cache.length; e++)
                                            for (let t = 0; t < this.cache[e].length; t++) this.cache[e][t] = void 0
                                    }
                                }
                            },
                            43: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.LinkRenderLayer = void 0;
                                const s = i(197),
                                    r = i(237),
                                    n = i(903);
                                class o extends n.BaseRenderLayer {
                                    constructor(e, t, i, s, r, n, o, a, h) {
                                        super(e, t, "link", i, !0, h, r, n, o, a), this.register(s.onShowLinkUnderline((e => this._handleShowLinkUnderline(e)))), this.register(s.onHideLinkUnderline((e => this._handleHideLinkUnderline(e))))
                                    }
                                    resize(e) {
                                        super.resize(e), this._state = void 0
                                    }
                                    reset() {
                                        this._clearCurrentLink()
                                    }
                                    _clearCurrentLink() {
                                        if (this._state) {
                                            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
                                            const e = this._state.y2 - this._state.y1 - 1;
                                            e > 0 && this._clearCells(0, this._state.y1 + 1, this._state.cols, e), this._clearCells(0, this._state.y2, this._state.x2, 1), this._state = void 0
                                        }
                                    }
                                    _handleShowLinkUnderline(e) {
                                        if (e.fg === r.INVERTED_DEFAULT_COLOR ? this._ctx.fillStyle = this._themeService.colors.background.css : e.fg && (0, s.is256Color)(e.fg) ? this._ctx.fillStyle = this._themeService.colors.ansi[e.fg].css : this._ctx.fillStyle = this._themeService.colors.foreground.css, e.y1 === e.y2) this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
                                        else {
                                            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
                                            for (let t = e.y1 + 1; t < e.y2; t++) this._fillBottomLineAtCells(0, t, e.cols);
                                            this._fillBottomLineAtCells(0, e.y2, e.x2)
                                        }
                                        this._state = e
                                    }
                                    _handleHideLinkUnderline(e) {
                                        this._clearCurrentLink()
                                    }
                                }
                                t.LinkRenderLayer = o
                            },
                            630: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.SelectionRenderLayer = void 0;
                                const s = i(903);
                                class r extends s.BaseRenderLayer {
                                    constructor(e, t, i, s, r, n, o, a) {
                                        super(e, t, "selection", i, !0, a, s, o, n, r), this._clearState()
                                    }
                                    _clearState() {
                                        this._state = {
                                            start: void 0,
                                            end: void 0,
                                            columnSelectMode: void 0,
                                            ydisp: void 0
                                        }
                                    }
                                    resize(e) {
                                        super.resize(e), this._selectionModel.selectionStart && this._selectionModel.selectionEnd && (this._clearState(), this._redrawSelection(this._selectionModel.selectionStart, this._selectionModel.selectionEnd, this._selectionModel.columnSelectMode))
                                    }
                                    reset() {
                                        this._state.start && this._state.end && (this._clearState(), this._clearAll())
                                    }
                                    handleBlur() {
                                        this.reset(), this._redrawSelection(this._selectionModel.selectionStart, this._selectionModel.selectionEnd, this._selectionModel.columnSelectMode)
                                    }
                                    handleFocus() {
                                        this.reset(), this._redrawSelection(this._selectionModel.selectionStart, this._selectionModel.selectionEnd, this._selectionModel.columnSelectMode)
                                    }
                                    handleSelectionChanged(e, t, i) {
                                        super.handleSelectionChanged(e, t, i), this._redrawSelection(e, t, i)
                                    }
                                    _redrawSelection(e, t, i) {
                                        if (!this._didStateChange(e, t, i, this._bufferService.buffer.ydisp)) return;
                                        if (this._clearAll(), !e || !t) return void this._clearState();
                                        const s = e[1] - this._bufferService.buffer.ydisp,
                                            r = t[1] - this._bufferService.buffer.ydisp,
                                            n = Math.max(s, 0),
                                            o = Math.min(r, this._bufferService.rows - 1);
                                        if (n >= this._bufferService.rows || o < 0) this._state.ydisp = this._bufferService.buffer.ydisp;
                                        else {
                                            if (this._ctx.fillStyle = (this._coreBrowserService.isFocused ? this._themeService.colors.selectionBackgroundTransparent : this._themeService.colors.selectionInactiveBackgroundTransparent).css, i) {
                                                const i = e[0],
                                                    s = t[0] - i,
                                                    r = o - n + 1;
                                                this._fillCells(i, n, s, r)
                                            } else {
                                                const i = s === n ? e[0] : 0,
                                                    a = n === r ? t[0] : this._bufferService.cols;
                                                this._fillCells(i, n, a - i, 1);
                                                const h = Math.max(o - n - 1, 0);
                                                if (this._fillCells(0, n + 1, this._bufferService.cols, h), n !== o) {
                                                    const e = r === o ? t[0] : this._bufferService.cols;
                                                    this._fillCells(0, o, e, 1)
                                                }
                                            }
                                            this._state.start = [e[0], e[1]], this._state.end = [t[0], t[1]], this._state.columnSelectMode = i, this._state.ydisp = this._bufferService.buffer.ydisp
                                        }
                                    }
                                    _didStateChange(e, t, i, s) {
                                        return !this._areCoordinatesEqual(e, this._state.start) || !this._areCoordinatesEqual(t, this._state.end) || i !== this._state.columnSelectMode || s !== this._state.ydisp
                                    }
                                    _areCoordinatesEqual(e, t) {
                                        return !(!e || !t) && e[0] === t[0] && e[1] === t[1]
                                    }
                                }
                                t.SelectionRenderLayer = r
                            },
                            744: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TextRenderLayer = void 0;
                                const s = i(577),
                                    r = i(147),
                                    n = i(782),
                                    o = i(855),
                                    a = i(903),
                                    h = i(574);
                                class l extends a.BaseRenderLayer {
                                    constructor(e, t, i, s, r, o, a, l, c, d) {
                                        super(e, t, "text", i, s, d, r, o, l, c), this._characterJoinerService = a, this._characterWidth = 0, this._characterFont = "", this._characterOverlapCache = {}, this._workCell = new n.CellData, this._state = new h.GridCache, this.register(o.onSpecificOptionChange("allowTransparency", (e => this._setTransparency(e))))
                                    }
                                    resize(e) {
                                        super.resize(e);
                                        const t = this._getFont(!1, !1);
                                        this._characterWidth === e.device.char.width && this._characterFont === t || (this._characterWidth = e.device.char.width, this._characterFont = t, this._characterOverlapCache = {}), this._state.clear(), this._state.resize(this._bufferService.cols, this._bufferService.rows)
                                    }
                                    reset() {
                                        this._state.clear(), this._clearAll()
                                    }
                                    _forEachCell(e, t, i) {
                                        for (let r = e; r <= t; r++) {
                                            const e = r + this._bufferService.buffer.ydisp,
                                                t = this._bufferService.buffer.lines.get(e),
                                                n = this._characterJoinerService.getJoinedCharacters(e);
                                            for (let e = 0; e < this._bufferService.cols; e++) {
                                                t.loadCell(e, this._workCell);
                                                let a = this._workCell,
                                                    h = !1,
                                                    l = e;
                                                if (0 !== a.getWidth()) {
                                                    if (n.length > 0 && e === n[0][0]) {
                                                        h = !0;
                                                        const e = n.shift();
                                                        a = new s.JoinedCellData(this._workCell, t.translateToString(!0, e[0], e[1]), e[1] - e[0]), l = e[1] - 1
                                                    }!h && this._isOverlapping(a) && l < t.length - 1 && t.getCodePoint(l + 1) === o.NULL_CELL_CODE && (a.content &= -12582913, a.content |= 2 << 22), i(a, e, r), e = l
                                                }
                                            }
                                        }
                                    }
                                    _drawBackground(e, t) {
                                        const i = this._ctx,
                                            s = this._bufferService.cols;
                                        let n = 0,
                                            o = 0,
                                            a = null;
                                        i.save(), this._forEachCell(e, t, ((e, t, h) => {
                                            let l = null;
                                            e.isInverse() ? l = e.isFgDefault() ? this._themeService.colors.foreground.css : e.isFgRGB() ? `rgb(${r.AttributeData.toColorRGB(e.getFgColor()).join(",")})` : this._themeService.colors.ansi[e.getFgColor()].css : e.isBgRGB() ? l = `rgb(${r.AttributeData.toColorRGB(e.getBgColor()).join(",")})` : e.isBgPalette() && (l = this._themeService.colors.ansi[e.getBgColor()].css);
                                            let c = !1;
                                            this._decorationService.forEachDecorationAtCell(t, this._bufferService.buffer.ydisp + h, void 0, (e => {
                                                "top" !== e.options.layer && c || (e.backgroundColorRGB && (l = e.backgroundColorRGB.css), c = "top" === e.options.layer)
                                            })), null === a && (n = t, o = h), h !== o ? (i.fillStyle = a || "", this._fillCells(n, o, s - n, 1), n = t, o = h) : a !== l && (i.fillStyle = a || "", this._fillCells(n, o, t - n, 1), n = t, o = h), a = l
                                        })), null !== a && (i.fillStyle = a, this._fillCells(n, o, s - n, 1)), i.restore()
                                    }
                                    _drawForeground(e, t) {
                                        this._forEachCell(e, t, ((e, t, i) => this._drawChars(e, t, i)))
                                    }
                                    handleGridChanged(e, t) {
                                        0 !== this._state.cache.length && (this._charAtlas && this._charAtlas.beginFrame(), this._clearCells(0, e, this._bufferService.cols, t - e + 1), this._drawBackground(e, t), this._drawForeground(e, t))
                                    }
                                    _isOverlapping(e) {
                                        if (1 !== e.getWidth()) return !1;
                                        if (e.getCode() < 256) return !1;
                                        const t = e.getChars();
                                        if (this._characterOverlapCache.hasOwnProperty(t)) return this._characterOverlapCache[t];
                                        this._ctx.save(), this._ctx.font = this._characterFont;
                                        const i = Math.floor(this._ctx.measureText(t).width) > this._characterWidth;
                                        return this._ctx.restore(), this._characterOverlapCache[t] = i, i
                                    }
                                }
                                t.TextRenderLayer = l
                            },
                            274: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CellColorResolver = void 0;
                                const s = i(855),
                                    r = i(160),
                                    n = i(374);
                                let o, a = 0,
                                    h = 0,
                                    l = !1,
                                    c = !1,
                                    d = !1,
                                    _ = 0;
                                t.CellColorResolver = class {
                                    constructor(e, t, i, s, r, n) {
                                        this._terminal = e, this._optionService = t, this._selectionRenderModel = i, this._decorationService = s, this._coreBrowserService = r, this._themeService = n, this.result = {
                                            fg: 0,
                                            bg: 0,
                                            ext: 0
                                        }
                                    }
                                    resolve(e, t, i, u) {
                                        if (this.result.bg = e.bg, this.result.fg = e.fg, this.result.ext = 268435456 & e.bg ? e.extended.ext : 0, h = 0, a = 0, c = !1, l = !1, d = !1, o = this._themeService.colors, _ = 0, e.getCode() !== s.NULL_CELL_CODE && 4 === e.extended.underlineStyle) {
                                            const e = Math.max(1, Math.floor(this._optionService.rawOptions.fontSize * this._coreBrowserService.dpr / 15));
                                            _ = t * u % (2 * Math.round(e))
                                        }
                                        if (this._decorationService.forEachDecorationAtCell(t, i, "bottom", (e => {
                                                e.backgroundColorRGB && (h = e.backgroundColorRGB.rgba >> 8 & 16777215, c = !0), e.foregroundColorRGB && (a = e.foregroundColorRGB.rgba >> 8 & 16777215, l = !0)
                                            })), d = this._selectionRenderModel.isCellSelected(this._terminal, t, i), d) {
                                            if (67108864 & this.result.fg || 0 != (50331648 & this.result.bg)) {
                                                if (67108864 & this.result.fg) switch (50331648 & this.result.fg) {
                                                    case 16777216:
                                                    case 33554432:
                                                        h = this._themeService.colors.ansi[255 & this.result.fg].rgba;
                                                        break;
                                                    case 50331648:
                                                        h = (16777215 & this.result.fg) << 8 | 255;
                                                        break;
                                                    default:
                                                        h = this._themeService.colors.foreground.rgba
                                                } else switch (50331648 & this.result.bg) {
                                                    case 16777216:
                                                    case 33554432:
                                                        h = this._themeService.colors.ansi[255 & this.result.bg].rgba;
                                                        break;
                                                    case 50331648:
                                                        h = (16777215 & this.result.bg) << 8 | 255
                                                }
                                                h = r.rgba.blend(h, 4294967040 & (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba | 128) >> 8 & 16777215
                                            } else h = (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba >> 8 & 16777215;
                                            if (c = !0, o.selectionForeground && (a = o.selectionForeground.rgba >> 8 & 16777215, l = !0), (0, n.treatGlyphAsBackgroundColor)(e.getCode())) {
                                                if (67108864 & this.result.fg && 0 == (50331648 & this.result.bg)) a = (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba >> 8 & 16777215;
                                                else {
                                                    if (67108864 & this.result.fg) switch (50331648 & this.result.bg) {
                                                        case 16777216:
                                                        case 33554432:
                                                            a = this._themeService.colors.ansi[255 & this.result.bg].rgba;
                                                            break;
                                                        case 50331648:
                                                            a = (16777215 & this.result.bg) << 8 | 255
                                                    } else switch (50331648 & this.result.fg) {
                                                        case 16777216:
                                                        case 33554432:
                                                            a = this._themeService.colors.ansi[255 & this.result.fg].rgba;
                                                            break;
                                                        case 50331648:
                                                            a = (16777215 & this.result.fg) << 8 | 255;
                                                            break;
                                                        default:
                                                            a = this._themeService.colors.foreground.rgba
                                                    }
                                                    a = r.rgba.blend(a, 4294967040 & (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba | 128) >> 8 & 16777215
                                                }
                                                l = !0
                                            }
                                        }
                                        this._decorationService.forEachDecorationAtCell(t, i, "top", (e => {
                                            e.backgroundColorRGB && (h = e.backgroundColorRGB.rgba >> 8 & 16777215, c = !0), e.foregroundColorRGB && (a = e.foregroundColorRGB.rgba >> 8 & 16777215, l = !0)
                                        })), c && (h = d ? -16777216 & e.bg & -134217729 | h | 50331648 : -16777216 & e.bg | h | 50331648), l && (a = -16777216 & e.fg & -67108865 | a | 50331648), 67108864 & this.result.fg && (c && !l && (a = 0 == (50331648 & this.result.bg) ? -134217728 & this.result.fg | 16777215 & o.background.rgba >> 8 | 50331648 : -134217728 & this.result.fg | 67108863 & this.result.bg, l = !0), !c && l && (h = 0 == (50331648 & this.result.fg) ? -67108864 & this.result.bg | 16777215 & o.foreground.rgba >> 8 | 50331648 : -67108864 & this.result.bg | 67108863 & this.result.fg, c = !0)), o = void 0, this.result.bg = c ? h : this.result.bg, this.result.fg = l ? a : this.result.fg, this.result.ext &= 536870911, this.result.ext |= _ << 29 & 3758096384
                                    }
                                }
                            },
                            627: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.removeTerminalFromCache = t.acquireTextureAtlas = void 0;
                                const s = i(509),
                                    r = i(197),
                                    n = [];
                                t.acquireTextureAtlas = function(e, t, i, o, a, h, l, c) {
                                    const d = (0, r.generateConfig)(o, a, h, l, t, i, c);
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t],
                                            s = i.ownedBy.indexOf(e);
                                        if (s >= 0) {
                                            if ((0, r.configEquals)(i.config, d)) return i.atlas;
                                            1 === i.ownedBy.length ? (i.atlas.dispose(), n.splice(t, 1)) : i.ownedBy.splice(s, 1);
                                            break
                                        }
                                    }
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t];
                                        if ((0, r.configEquals)(i.config, d)) return i.ownedBy.push(e), i.atlas
                                    }
                                    const _ = e._core,
                                        u = {
                                            atlas: new s.TextureAtlas(document, d, _.unicodeService),
                                            config: d,
                                            ownedBy: [e]
                                        };
                                    return n.push(u), u.atlas
                                }, t.removeTerminalFromCache = function(e) {
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t].ownedBy.indexOf(e);
                                        if (-1 !== i) {
                                            1 === n[t].ownedBy.length ? (n[t].atlas.dispose(), n.splice(t, 1)) : n[t].ownedBy.splice(i, 1);
                                            break
                                        }
                                    }
                                }
                            },
                            197: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.is256Color = t.configEquals = t.generateConfig = void 0;
                                const s = i(160);
                                t.generateConfig = function(e, t, i, r, n, o, a) {
                                    const h = {
                                        foreground: o.foreground,
                                        background: o.background,
                                        cursor: s.NULL_COLOR,
                                        cursorAccent: s.NULL_COLOR,
                                        selectionForeground: s.NULL_COLOR,
                                        selectionBackgroundTransparent: s.NULL_COLOR,
                                        selectionBackgroundOpaque: s.NULL_COLOR,
                                        selectionInactiveBackgroundTransparent: s.NULL_COLOR,
                                        selectionInactiveBackgroundOpaque: s.NULL_COLOR,
                                        ansi: o.ansi.slice(),
                                        contrastCache: o.contrastCache,
                                        halfContrastCache: o.halfContrastCache
                                    };
                                    return {
                                        customGlyphs: n.customGlyphs,
                                        devicePixelRatio: a,
                                        letterSpacing: n.letterSpacing,
                                        lineHeight: n.lineHeight,
                                        deviceCellWidth: e,
                                        deviceCellHeight: t,
                                        deviceCharWidth: i,
                                        deviceCharHeight: r,
                                        fontFamily: n.fontFamily,
                                        fontSize: n.fontSize,
                                        fontWeight: n.fontWeight,
                                        fontWeightBold: n.fontWeightBold,
                                        allowTransparency: n.allowTransparency,
                                        drawBoldTextInBrightColors: n.drawBoldTextInBrightColors,
                                        minimumContrastRatio: n.minimumContrastRatio,
                                        colors: h
                                    }
                                }, t.configEquals = function(e, t) {
                                    for (let i = 0; i < e.colors.ansi.length; i++)
                                        if (e.colors.ansi[i].rgba !== t.colors.ansi[i].rgba) return !1;
                                    return e.devicePixelRatio === t.devicePixelRatio && e.customGlyphs === t.customGlyphs && e.lineHeight === t.lineHeight && e.letterSpacing === t.letterSpacing && e.fontFamily === t.fontFamily && e.fontSize === t.fontSize && e.fontWeight === t.fontWeight && e.fontWeightBold === t.fontWeightBold && e.allowTransparency === t.allowTransparency && e.deviceCharWidth === t.deviceCharWidth && e.deviceCharHeight === t.deviceCharHeight && e.drawBoldTextInBrightColors === t.drawBoldTextInBrightColors && e.minimumContrastRatio === t.minimumContrastRatio && e.colors.foreground.rgba === t.colors.foreground.rgba && e.colors.background.rgba === t.colors.background.rgba
                                }, t.is256Color = function(e) {
                                    return 16777216 == (50331648 & e) || 33554432 == (50331648 & e)
                                }
                            },
                            237: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TEXT_BASELINE = t.DIM_OPACITY = t.INVERTED_DEFAULT_COLOR = void 0;
                                const s = i(399);
                                t.INVERTED_DEFAULT_COLOR = 257, t.DIM_OPACITY = .5, t.TEXT_BASELINE = s.isFirefox || s.isLegacyEdge ? "bottom" : "ideographic"
                            },
                            457: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CursorBlinkStateManager = void 0, t.CursorBlinkStateManager = class {
                                    constructor(e, t) {
                                        this._renderCallback = e, this._coreBrowserService = t, this.isCursorVisible = !0, this._coreBrowserService.isFocused && this._restartInterval()
                                    }
                                    get isPaused() {
                                        return !(this._blinkStartTimeout || this._blinkInterval)
                                    }
                                    dispose() {
                                        this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout && (this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout), this._blinkStartTimeout = void 0), this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0)
                                    }
                                    restartBlinkAnimation() {
                                        this.isPaused || (this._animationTimeRestarted = Date.now(), this.isCursorVisible = !0, this._animationFrame || (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                            this._renderCallback(), this._animationFrame = void 0
                                        }))))
                                    }
                                    _restartInterval(e = 600) {
                                        this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout = this._coreBrowserService.window.setTimeout((() => {
                                            if (this._animationTimeRestarted) {
                                                const e = 600 - (Date.now() - this._animationTimeRestarted);
                                                if (this._animationTimeRestarted = void 0, e > 0) return void this._restartInterval(e)
                                            }
                                            this.isCursorVisible = !1, this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                                this._renderCallback(), this._animationFrame = void 0
                                            })), this._blinkInterval = this._coreBrowserService.window.setInterval((() => {
                                                if (this._animationTimeRestarted) {
                                                    const e = 600 - (Date.now() - this._animationTimeRestarted);
                                                    return this._animationTimeRestarted = void 0, void this._restartInterval(e)
                                                }
                                                this.isCursorVisible = !this.isCursorVisible, this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                                    this._renderCallback(), this._animationFrame = void 0
                                                }))
                                            }), 600)
                                        }), e)
                                    }
                                    pause() {
                                        this.isCursorVisible = !0, this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout && (this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout), this._blinkStartTimeout = void 0), this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0)
                                    }
                                    resume() {
                                        this.pause(), this._animationTimeRestarted = void 0, this._restartInterval(), this.restartBlinkAnimation()
                                    }
                                }
                            },
                            860: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.tryDrawCustomChar = t.powerlineDefinitions = t.boxDrawingDefinitions = t.blockElementDefinitions = void 0;
                                const s = i(374);
                                t.blockElementDefinitions = {
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 5,
                                        w: 8,
                                        h: 3
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 3,
                                        w: 8,
                                        h: 5
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 6
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 1,
                                        w: 8,
                                        h: 7
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 7,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 6,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 5,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 3,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 2,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }, {
                                        x: 4,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 4
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 1,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 3,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 5,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 6,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 1,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 3,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 5,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 3
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 5
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 6
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 7
                                    }],
                                    "": [{
                                        x: 6,
                                        y: 0,
                                        w: 2,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 5,
                                        y: 0,
                                        w: 3,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 3,
                                        y: 0,
                                        w: 5,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 6,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 1,
                                        y: 0,
                                        w: 7,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 2
                                    }]
                                };
                                const r = {
                                    "": [
                                        [1, 0, 0, 0],
                                        [0, 0, 0, 0],
                                        [0, 0, 1, 0],
                                        [0, 0, 0, 0]
                                    ],
                                    "": [
                                        [1, 0],
                                        [0, 0],
                                        [0, 1],
                                        [0, 0]
                                    ],
                                    "": [
                                        [0, 1],
                                        [1, 1],
                                        [1, 0],
                                        [1, 1]
                                    ]
                                };
                                t.boxDrawingDefinitions = {
                                    "": {
                                        1: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,0"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,0 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 - t} L1,${.5 - t} M.5,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},1 L${.5 - e},.5 L1,.5 M${.5 + e},.5 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M1,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L.5,${.5 - t} L.5,1 M0,${.5 + t} L.5,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 + e},1 L${.5 + e},.5 L0,.5 M${.5 - e},.5 L${.5 - e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M0,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 + t} L1,${.5 + t} M.5,${.5 - t} L1,${.5 - t}`
                                    },
                                    "": {
                                        1: (e, t) => `M1,.5 L${.5 - e},.5 L${.5 - e},0 M${.5 + e},.5 L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0 M1,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L.5,${.5 + t} L.5,0 M0,${.5 - t} L.5,${.5 - t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L${.5 + e},.5 L${.5 + e},0 M${.5 - e},.5 L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M0,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M.5,${.5 - t} L1,${.5 - t} M.5,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1 M${.5 + e},.5 L1,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M0,${.5 - t} L.5,${.5 - t} M0,${.5 + t} L.5,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L${.5 - e},.5 M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 + e},0 L${.5 + e},1 M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t} M.5,${.5 + t} L.5,1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},.5 L${.5 - e},1 M${.5 + e},.5 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t} M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},.5 L${.5 - e},0 M${.5 + e},.5 L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L1,${.5 + t} M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1 M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: "M1,0 L0,1"
                                    },
                                    "": {
                                        1: "M0,0 L1,1"
                                    },
                                    "": {
                                        1: "M1,0 L0,1 M0,0 L1,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0 M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0 M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.1,.5 L.4,.5 M.6,.5 L.9,.5"
                                    },
                                    "": {
                                        3: "M.1,.5 L.4,.5 M.6,.5 L.9,.5"
                                    },
                                    "": {
                                        1: "M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"
                                    },
                                    "": {
                                        3: "M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"
                                    },
                                    "": {
                                        1: "M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"
                                    },
                                    "": {
                                        3: "M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"
                                    },
                                    "": {
                                        1: "M.5,.1 L.5,.4 M.5,.6 L.5,.9"
                                    },
                                    "": {
                                        3: "M.5,.1 L.5,.4 M.5,.6 L.5,.9"
                                    },
                                    "": {
                                        1: "M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"
                                    },
                                    "": {
                                        3: "M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"
                                    },
                                    "": {
                                        1: "M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"
                                    },
                                    "": {
                                        3: "M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 + t / .15 * .5} C.5,${.5 + t / .15 * .5},.5,.5,1,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 + t / .15 * .5} C.5,${.5 + t / .15 * .5},.5,.5,0,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t / .15 * .5} C.5,${.5 - t / .15 * .5},.5,.5,0,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t / .15 * .5} C.5,${.5 - t / .15 * .5},.5,.5,1,.5`
                                    }
                                }, t.powerlineDefinitions = {
                                    "": {
                                        d: "M0,0 L1,.5 L0,1",
                                        type: 0,
                                        rightPadding: 2
                                    },
                                    "": {
                                        d: "M-1,-.5 L1,.5 L-1,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1,0 L0,.5 L1,1",
                                        type: 0,
                                        leftPadding: 2
                                    },
                                    "": {
                                        d: "M2,-.5 L0,.5 L2,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",
                                        type: 0,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",
                                        type: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",
                                        type: 0,
                                        leftPadding: 1
                                    },
                                    "": {
                                        d: "M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",
                                        type: 1,
                                        leftPadding: 1
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5 L-.5,1.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5 L1.5,1.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5 L-.5,-.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5 L1.5,-.5",
                                        type: 0
                                    }
                                }, t.powerlineDefinitions[""] = t.powerlineDefinitions[""], t.powerlineDefinitions[""] = t.powerlineDefinitions[""], t.tryDrawCustomChar = function(e, i, o, l, c, d, _, u) {
                                    const f = t.blockElementDefinitions[i];
                                    if (f) return function(e, t, i, s, r, n) {
                                        for (let o = 0; o < t.length; o++) {
                                            const a = t[o],
                                                h = r / 8,
                                                l = n / 8;
                                            e.fillRect(i + a.x * h, s + a.y * l, a.w * h, a.h * l)
                                        }
                                    }(e, f, o, l, c, d), !0;
                                    const g = r[i];
                                    if (g) return function(e, t, i, r, o, a) {
                                        let h = n.get(t);
                                        h || (h = new Map, n.set(t, h));
                                        const l = e.fillStyle;
                                        if ("string" != typeof l) throw new Error(`Unexpected fillStyle type "${l}"`);
                                        let c = h.get(l);
                                        if (!c) {
                                            const i = t[0].length,
                                                r = t.length,
                                                n = e.canvas.ownerDocument.createElement("canvas");
                                            n.width = i, n.height = r;
                                            const o = (0, s.throwIfFalsy)(n.getContext("2d")),
                                                a = new ImageData(i, r);
                                            let d, _, u, f;
                                            if (l.startsWith("#")) d = parseInt(l.slice(1, 3), 16), _ = parseInt(l.slice(3, 5), 16), u = parseInt(l.slice(5, 7), 16), f = l.length > 7 && parseInt(l.slice(7, 9), 16) || 1;
                                            else {
                                                if (!l.startsWith("rgba")) throw new Error(`Unexpected fillStyle color format "${l}" when drawing pattern glyph`);
                                                [d, _, u, f] = l.substring(5, l.length - 1).split(",").map((e => parseFloat(e)))
                                            }
                                            for (let e = 0; e < r; e++)
                                                for (let s = 0; s < i; s++) a.data[4 * (e * i + s)] = d, a.data[4 * (e * i + s) + 1] = _, a.data[4 * (e * i + s) + 2] = u, a.data[4 * (e * i + s) + 3] = t[e][s] * (255 * f);
                                            o.putImageData(a, 0, 0), c = (0, s.throwIfFalsy)(e.createPattern(n, null)), h.set(l, c)
                                        }
                                        e.fillStyle = c, e.fillRect(i, r, o, a)
                                    }(e, g, o, l, c, d), !0;
                                    const p = t.boxDrawingDefinitions[i];
                                    if (p) return function(e, t, i, s, r, n, o) {
                                        e.strokeStyle = e.fillStyle;
                                        for (const [l, c] of Object.entries(t)) {
                                            let t;
                                            e.beginPath(), e.lineWidth = o * Number.parseInt(l), t = "function" == typeof c ? c(.15, .15 / n * r) : c;
                                            for (const l of t.split(" ")) {
                                                const t = l[0],
                                                    c = a[t];
                                                if (!c) {
                                                    console.error(`Could not find drawing instructions for "${t}"`);
                                                    continue
                                                }
                                                const d = l.substring(1).split(",");
                                                d[0] && d[1] && c(e, h(d, r, n, i, s, !0, o))
                                            }
                                            e.stroke(), e.closePath()
                                        }
                                    }(e, p, o, l, c, d, u), !0;
                                    const v = t.powerlineDefinitions[i];
                                    return !!v && (function(e, t, i, s, r, n, o, l) {
                                        const c = new Path2D;
                                        c.rect(i, s, r, n), e.clip(c), e.beginPath();
                                        const d = o / 12;
                                        e.lineWidth = l * d;
                                        for (const o of t.d.split(" ")) {
                                            const c = o[0],
                                                _ = a[c];
                                            if (!_) {
                                                console.error(`Could not find drawing instructions for "${c}"`);
                                                continue
                                            }
                                            const u = o.substring(1).split(",");
                                            u[0] && u[1] && _(e, h(u, r, n, i, s, !1, l, (t.leftPadding ?? 0) * (d / 2), (t.rightPadding ?? 0) * (d / 2)))
                                        }
                                        1 === t.type ? (e.strokeStyle = e.fillStyle, e.stroke()) : e.fill(), e.closePath()
                                    }(e, v, o, l, c, d, _, u), !0)
                                };
                                const n = new Map;

                                function o(e, t, i = 0) {
                                    return Math.max(Math.min(e, t), i)
                                }
                                const a = {
                                    C: (e, t) => e.bezierCurveTo(t[0], t[1], t[2], t[3], t[4], t[5]),
                                    L: (e, t) => e.lineTo(t[0], t[1]),
                                    M: (e, t) => e.moveTo(t[0], t[1])
                                };

                                function h(e, t, i, s, r, n, a, h = 0, l = 0) {
                                    const c = e.map((e => parseFloat(e) || parseInt(e)));
                                    if (c.length < 2) throw new Error("Too few arguments for instruction");
                                    for (let e = 0; e < c.length; e += 2) c[e] *= t - h * a - l * a, n && 0 !== c[e] && (c[e] = o(Math.round(c[e] + .5) - .5, t, 0)), c[e] += s + h * a;
                                    for (let e = 1; e < c.length; e += 2) c[e] *= i, n && 0 !== c[e] && (c[e] = o(Math.round(c[e] + .5) - .5, i, 0)), c[e] += r;
                                    return c
                                }
                            },
                            56: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.observeDevicePixelDimensions = void 0;
                                const s = i(859);
                                t.observeDevicePixelDimensions = function(e, t, i) {
                                    let r = new t.ResizeObserver((t => {
                                        const s = t.find((t => t.target === e));
                                        if (!s) return;
                                        if (!("devicePixelContentBoxSize" in s)) return r?.disconnect(), void(r = void 0);
                                        const n = s.devicePixelContentBoxSize[0].inlineSize,
                                            o = s.devicePixelContentBoxSize[0].blockSize;
                                        n > 0 && o > 0 && i(n, o)
                                    }));
                                    try {
                                        r.observe(e, {
                                            box: ["device-pixel-content-box"]
                                        })
                                    } catch {
                                        r.disconnect(), r = void 0
                                    }
                                    return (0, s.toDisposable)((() => r?.disconnect()))
                                }
                            },
                            374: (e, t) => {
                                function i(e) {
                                    return 57508 <= e && e <= 57558
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.computeNextVariantOffset = t.createRenderDimensions = t.treatGlyphAsBackgroundColor = t.isRestrictedPowerlineGlyph = t.isPowerlineGlyph = t.throwIfFalsy = void 0, t.throwIfFalsy = function(e) {
                                    if (!e) throw new Error("value must not be falsy");
                                    return e
                                }, t.isPowerlineGlyph = i, t.isRestrictedPowerlineGlyph = function(e) {
                                    return 57520 <= e && e <= 57527
                                }, t.treatGlyphAsBackgroundColor = function(e) {
                                    return i(e) || function(e) {
                                        return 9472 <= e && e <= 9631
                                    }(e)
                                }, t.createRenderDimensions = function() {
                                    return {
                                        css: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            }
                                        },
                                        device: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            },
                                            char: {
                                                width: 0,
                                                height: 0,
                                                left: 0,
                                                top: 0
                                            }
                                        }
                                    }
                                }, t.computeNextVariantOffset = function(e, t, i = 0) {
                                    return (e - (2 * Math.round(t) - i)) % (2 * Math.round(t))
                                }
                            },
                            296: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createSelectionRenderModel = void 0;
                                class i {
                                    constructor() {
                                        this.clear()
                                    }
                                    clear() {
                                        this.hasSelection = !1, this.columnSelectMode = !1, this.viewportStartRow = 0, this.viewportEndRow = 0, this.viewportCappedStartRow = 0, this.viewportCappedEndRow = 0, this.startCol = 0, this.endCol = 0, this.selectionStart = void 0, this.selectionEnd = void 0
                                    }
                                    update(e, t, i, s = !1) {
                                        if (this.selectionStart = t, this.selectionEnd = i, !t || !i || t[0] === i[0] && t[1] === i[1]) return void this.clear();
                                        const r = e.buffers.active.ydisp,
                                            n = t[1] - r,
                                            o = i[1] - r,
                                            a = Math.max(n, 0),
                                            h = Math.min(o, e.rows - 1);
                                        a >= e.rows || h < 0 ? this.clear() : (this.hasSelection = !0, this.columnSelectMode = s, this.viewportStartRow = n, this.viewportEndRow = o, this.viewportCappedStartRow = a, this.viewportCappedEndRow = h, this.startCol = t[0], this.endCol = i[0])
                                    }
                                    isCellSelected(e, t, i) {
                                        return !!this.hasSelection && (i -= e.buffer.active.viewportY, this.columnSelectMode ? this.startCol <= this.endCol ? t >= this.startCol && i >= this.viewportCappedStartRow && t < this.endCol && i <= this.viewportCappedEndRow : t < this.startCol && i >= this.viewportCappedStartRow && t >= this.endCol && i <= this.viewportCappedEndRow : i > this.viewportStartRow && i < this.viewportEndRow || this.viewportStartRow === this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportEndRow && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol)
                                    }
                                }
                                t.createSelectionRenderModel = function() {
                                    return new i
                                }
                            },
                            509: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TextureAtlas = void 0;
                                const s = i(237),
                                    r = i(860),
                                    n = i(374),
                                    o = i(160),
                                    a = i(345),
                                    h = i(485),
                                    l = i(385),
                                    c = i(147),
                                    d = i(855),
                                    _ = {
                                        texturePage: 0,
                                        texturePosition: {
                                            x: 0,
                                            y: 0
                                        },
                                        texturePositionClipSpace: {
                                            x: 0,
                                            y: 0
                                        },
                                        offset: {
                                            x: 0,
                                            y: 0
                                        },
                                        size: {
                                            x: 0,
                                            y: 0
                                        },
                                        sizeClipSpace: {
                                            x: 0,
                                            y: 0
                                        }
                                    };
                                let u;
                                class f {
                                    get pages() {
                                        return this._pages
                                    }
                                    constructor(e, t, i) {
                                        this._document = e, this._config = t, this._unicodeService = i, this._didWarmUp = !1, this._cacheMap = new h.FourKeyMap, this._cacheMapCombined = new h.FourKeyMap, this._pages = [], this._activePages = [], this._workBoundingBox = {
                                            top: 0,
                                            left: 0,
                                            bottom: 0,
                                            right: 0
                                        }, this._workAttributeData = new c.AttributeData, this._textureSize = 512, this._onAddTextureAtlasCanvas = new a.EventEmitter, this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event, this._onRemoveTextureAtlasCanvas = new a.EventEmitter, this.onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event, this._requestClearModel = !1, this._createNewPage(), this._tmpCanvas = v(e, 4 * this._config.deviceCellWidth + 4, this._config.deviceCellHeight + 4), this._tmpCtx = (0, n.throwIfFalsy)(this._tmpCanvas.getContext("2d", {
                                            alpha: this._config.allowTransparency,
                                            willReadFrequently: !0
                                        }))
                                    }
                                    dispose() {
                                        for (const e of this.pages) e.canvas.remove();
                                        this._onAddTextureAtlasCanvas.dispose()
                                    }
                                    warmUp() {
                                        this._didWarmUp || (this._doWarmUp(), this._didWarmUp = !0)
                                    }
                                    _doWarmUp() {
                                        const e = new l.IdleTaskQueue;
                                        for (let t = 33; t < 126; t++) e.enqueue((() => {
                                            if (!this._cacheMap.get(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT)) {
                                                const e = this._drawToCache(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT);
                                                this._cacheMap.set(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT, e)
                                            }
                                        }))
                                    }
                                    beginFrame() {
                                        return this._requestClearModel
                                    }
                                    clearTexture() {
                                        if (0 !== this._pages[0].currentRow.x || 0 !== this._pages[0].currentRow.y) {
                                            for (const e of this._pages) e.clear();
                                            this._cacheMap.clear(), this._cacheMapCombined.clear(), this._didWarmUp = !1
                                        }
                                    }
                                    _createNewPage() {
                                        if (f.maxAtlasPages && this._pages.length >= Math.max(4, f.maxAtlasPages)) {
                                            const e = this._pages.filter((e => 2 * e.canvas.width <= (f.maxTextureSize || 4096))).sort(((e, t) => t.canvas.width !== e.canvas.width ? t.canvas.width - e.canvas.width : t.percentageUsed - e.percentageUsed));
                                            let t = -1,
                                                i = 0;
                                            for (let s = 0; s < e.length; s++)
                                                if (e[s].canvas.width !== i) t = s, i = e[s].canvas.width;
                                                else if (s - t == 3) break;
                                            const s = e.slice(t, t + 4),
                                                r = s.map((e => e.glyphs[0].texturePage)).sort(((e, t) => e > t ? 1 : -1)),
                                                n = this.pages.length - s.length,
                                                o = this._mergePages(s, n);
                                            o.version++;
                                            for (let e = r.length - 1; e >= 0; e--) this._deletePage(r[e]);
                                            this.pages.push(o), this._requestClearModel = !0, this._onAddTextureAtlasCanvas.fire(o.canvas)
                                        }
                                        const e = new g(this._document, this._textureSize);
                                        return this._pages.push(e), this._activePages.push(e), this._onAddTextureAtlasCanvas.fire(e.canvas), e
                                    }
                                    _mergePages(e, t) {
                                        const i = 2 * e[0].canvas.width,
                                            s = new g(this._document, i, e);
                                        for (const [r, n] of e.entries()) {
                                            const e = r * n.canvas.width % i,
                                                o = Math.floor(r / 2) * n.canvas.height;
                                            s.ctx.drawImage(n.canvas, e, o);
                                            for (const s of n.glyphs) s.texturePage = t, s.sizeClipSpace.x = s.size.x / i, s.sizeClipSpace.y = s.size.y / i, s.texturePosition.x += e, s.texturePosition.y += o, s.texturePositionClipSpace.x = s.texturePosition.x / i, s.texturePositionClipSpace.y = s.texturePosition.y / i;
                                            this._onRemoveTextureAtlasCanvas.fire(n.canvas);
                                            const a = this._activePages.indexOf(n); - 1 !== a && this._activePages.splice(a, 1)
                                        }
                                        return s
                                    }
                                    _deletePage(e) {
                                        this._pages.splice(e, 1);
                                        for (let t = e; t < this._pages.length; t++) {
                                            const e = this._pages[t];
                                            for (const t of e.glyphs) t.texturePage--;
                                            e.version++
                                        }
                                    }
                                    getRasterizedGlyphCombinedChar(e, t, i, s, r) {
                                        return this._getFromCacheMap(this._cacheMapCombined, e, t, i, s, r)
                                    }
                                    getRasterizedGlyph(e, t, i, s, r) {
                                        return this._getFromCacheMap(this._cacheMap, e, t, i, s, r)
                                    }
                                    _getFromCacheMap(e, t, i, s, r, n = !1) {
                                        return u = e.get(t, i, s, r), u || (u = this._drawToCache(t, i, s, r, n), e.set(t, i, s, r, u)), u
                                    }
                                    _getColorFromAnsiIndex(e) {
                                        if (e >= this._config.colors.ansi.length) throw new Error("No color found for idx " + e);
                                        return this._config.colors.ansi[e]
                                    }
                                    _getBackgroundColor(e, t, i, s) {
                                        if (this._config.allowTransparency) return o.NULL_COLOR;
                                        let r;
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                r = this._getColorFromAnsiIndex(t);
                                                break;
                                            case 50331648:
                                                const e = c.AttributeData.toColorRGB(t);
                                                r = o.channels.toColor(e[0], e[1], e[2]);
                                                break;
                                            default:
                                                r = i ? o.color.opaque(this._config.colors.foreground) : this._config.colors.background
                                        }
                                        return r
                                    }
                                    _getForegroundColor(e, t, i, r, n, a, h, l, d, _) {
                                        const u = this._getMinimumContrastColor(e, t, i, r, n, a, h, d, l, _);
                                        if (u) return u;
                                        let f;
                                        switch (n) {
                                            case 16777216:
                                            case 33554432:
                                                this._config.drawBoldTextInBrightColors && d && a < 8 && (a += 8), f = this._getColorFromAnsiIndex(a);
                                                break;
                                            case 50331648:
                                                const e = c.AttributeData.toColorRGB(a);
                                                f = o.channels.toColor(e[0], e[1], e[2]);
                                                break;
                                            default:
                                                f = h ? this._config.colors.background : this._config.colors.foreground
                                        }
                                        return this._config.allowTransparency && (f = o.color.opaque(f)), l && (f = o.color.multiplyOpacity(f, s.DIM_OPACITY)), f
                                    }
                                    _resolveBackgroundRgba(e, t, i) {
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                return this._getColorFromAnsiIndex(t).rgba;
                                            case 50331648:
                                                return t << 8;
                                            default:
                                                return i ? this._config.colors.foreground.rgba : this._config.colors.background.rgba
                                        }
                                    }
                                    _resolveForegroundRgba(e, t, i, s) {
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                return this._config.drawBoldTextInBrightColors && s && t < 8 && (t += 8), this._getColorFromAnsiIndex(t).rgba;
                                            case 50331648:
                                                return t << 8;
                                            default:
                                                return i ? this._config.colors.background.rgba : this._config.colors.foreground.rgba
                                        }
                                    }
                                    _getMinimumContrastColor(e, t, i, s, r, n, a, h, l, c) {
                                        if (1 === this._config.minimumContrastRatio || c) return;
                                        const d = this._getContrastCache(l),
                                            _ = d.getColor(e, s);
                                        if (void 0 !== _) return _ || void 0;
                                        const u = this._resolveBackgroundRgba(t, i, a),
                                            f = this._resolveForegroundRgba(r, n, a, h),
                                            g = o.rgba.ensureContrastRatio(u, f, this._config.minimumContrastRatio / (l ? 2 : 1));
                                        if (!g) return void d.setColor(e, s, null);
                                        const p = o.channels.toColor(g >> 24 & 255, g >> 16 & 255, g >> 8 & 255);
                                        return d.setColor(e, s, p), p
                                    }
                                    _getContrastCache(e) {
                                        return e ? this._config.colors.halfContrastCache : this._config.colors.contrastCache
                                    }
                                    _drawToCache(e, t, i, o, a = !1) {
                                        const h = "number" == typeof e ? String.fromCharCode(e) : e,
                                            l = Math.min(this._config.deviceCellWidth * Math.max(h.length, 2) + 4, this._textureSize);
                                        this._tmpCanvas.width < l && (this._tmpCanvas.width = l);
                                        const d = Math.min(this._config.deviceCellHeight + 8, this._textureSize);
                                        if (this._tmpCanvas.height < d && (this._tmpCanvas.height = d), this._tmpCtx.save(), this._workAttributeData.fg = i, this._workAttributeData.bg = t, this._workAttributeData.extended.ext = o, this._workAttributeData.isInvisible()) return _;
                                        const u = !!this._workAttributeData.isBold(),
                                            g = !!this._workAttributeData.isInverse(),
                                            v = !!this._workAttributeData.isDim(),
                                            m = !!this._workAttributeData.isItalic(),
                                            A = !!this._workAttributeData.isUnderline(),
                                            C = !!this._workAttributeData.isStrikethrough(),
                                            w = !!this._workAttributeData.isOverline();
                                        let b = this._workAttributeData.getFgColor(),
                                            y = this._workAttributeData.getFgColorMode(),
                                            S = this._workAttributeData.getBgColor(),
                                            E = this._workAttributeData.getBgColorMode();
                                        if (g) {
                                            const e = b;
                                            b = S, S = e;
                                            const t = y;
                                            y = E, E = t
                                        }
                                        const x = this._getBackgroundColor(E, S, g, v);
                                        this._tmpCtx.globalCompositeOperation = "copy", this._tmpCtx.fillStyle = x.css, this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height), this._tmpCtx.globalCompositeOperation = "source-over";
                                        const L = u ? this._config.fontWeightBold : this._config.fontWeight,
                                            I = m ? "italic" : "";
                                        this._tmpCtx.font = `${I} ${L} ${this._config.fontSize * this._config.devicePixelRatio}px ${this._config.fontFamily}`, this._tmpCtx.textBaseline = s.TEXT_BASELINE;
                                        const B = 1 === h.length && (0, n.isPowerlineGlyph)(h.charCodeAt(0)),
                                            D = 1 === h.length && (0, n.isRestrictedPowerlineGlyph)(h.charCodeAt(0)),
                                            k = this._getForegroundColor(t, E, S, i, y, b, g, v, u, (0, n.treatGlyphAsBackgroundColor)(h.charCodeAt(0)));
                                        this._tmpCtx.fillStyle = k.css;
                                        const R = D ? 0 : 4;
                                        let M = !1;
                                        !1 !== this._config.customGlyphs && (M = (0, r.tryDrawCustomChar)(this._tmpCtx, h, R, R, this._config.deviceCellWidth, this._config.deviceCellHeight, this._config.fontSize, this._config.devicePixelRatio));
                                        let T, O = !B;
                                        if (T = "number" == typeof e ? this._unicodeService.wcwidth(e) : this._unicodeService.getStringCellWidth(e), A) {
                                            this._tmpCtx.save();
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15)),
                                                t = e % 2 == 1 ? .5 : 0;
                                            if (this._tmpCtx.lineWidth = e, this._workAttributeData.isUnderlineColorDefault()) this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle;
                                            else if (this._workAttributeData.isUnderlineColorRGB()) O = !1, this._tmpCtx.strokeStyle = `rgb(${c.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;
                                            else {
                                                O = !1;
                                                let e = this._workAttributeData.getUnderlineColor();
                                                this._config.drawBoldTextInBrightColors && this._workAttributeData.isBold() && e < 8 && (e += 8), this._tmpCtx.strokeStyle = this._getColorFromAnsiIndex(e).css
                                            }
                                            this._tmpCtx.beginPath();
                                            const i = R,
                                                s = Math.ceil(R + this._config.deviceCharHeight) - t - (a ? 2 * e : 0),
                                                r = s + e,
                                                o = s + 2 * e;
                                            let l = this._workAttributeData.getUnderlineVariantOffset();
                                            for (let a = 0; a < T; a++) {
                                                this._tmpCtx.save();
                                                const h = i + a * this._config.deviceCellWidth,
                                                    c = i + (a + 1) * this._config.deviceCellWidth,
                                                    d = h + this._config.deviceCellWidth / 2;
                                                switch (this._workAttributeData.extended.underlineStyle) {
                                                    case 2:
                                                        this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s), this._tmpCtx.moveTo(h, o), this._tmpCtx.lineTo(c, o);
                                                        break;
                                                    case 3:
                                                        const i = e <= 1 ? o : Math.ceil(R + this._config.deviceCharHeight - e / 2) - t,
                                                            a = e <= 1 ? s : Math.ceil(R + this._config.deviceCharHeight + e / 2) - t,
                                                            _ = new Path2D;
                                                        _.rect(h, s, this._config.deviceCellWidth, o - s), this._tmpCtx.clip(_), this._tmpCtx.moveTo(h - this._config.deviceCellWidth / 2, r), this._tmpCtx.bezierCurveTo(h - this._config.deviceCellWidth / 2, a, h, a, h, r), this._tmpCtx.bezierCurveTo(h, i, d, i, d, r), this._tmpCtx.bezierCurveTo(d, a, c, a, c, r), this._tmpCtx.bezierCurveTo(c, i, c + this._config.deviceCellWidth / 2, i, c + this._config.deviceCellWidth / 2, r);
                                                        break;
                                                    case 4:
                                                        const u = 0 === l ? 0 : l >= e ? 2 * e - l : e - l;
                                                        0 == !(l >= e) || 0 === u ? (this._tmpCtx.setLineDash([Math.round(e), Math.round(e)]), this._tmpCtx.moveTo(h + u, s), this._tmpCtx.lineTo(c, s)) : (this._tmpCtx.setLineDash([Math.round(e), Math.round(e)]), this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(h + u, s), this._tmpCtx.moveTo(h + u + e, s), this._tmpCtx.lineTo(c, s)), l = (0, n.computeNextVariantOffset)(c - h, e, l);
                                                        break;
                                                    case 5:
                                                        const f = .6,
                                                            g = .3,
                                                            p = c - h,
                                                            v = Math.floor(f * p),
                                                            m = Math.floor(g * p),
                                                            A = p - v - m;
                                                        this._tmpCtx.setLineDash([v, m, A]), this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s);
                                                        break;
                                                    default:
                                                        this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s)
                                                }
                                                this._tmpCtx.stroke(), this._tmpCtx.restore()
                                            }
                                            if (this._tmpCtx.restore(), !M && this._config.fontSize >= 12 && !this._config.allowTransparency && " " !== h) {
                                                this._tmpCtx.save(), this._tmpCtx.textBaseline = "alphabetic";
                                                const t = this._tmpCtx.measureText(h);
                                                if (this._tmpCtx.restore(), "actualBoundingBoxDescent" in t && t.actualBoundingBoxDescent > 0) {
                                                    this._tmpCtx.save();
                                                    const t = new Path2D;
                                                    t.rect(i, s - Math.ceil(e / 2), this._config.deviceCellWidth * T, o - s + Math.ceil(e / 2)), this._tmpCtx.clip(t), this._tmpCtx.lineWidth = 3 * this._config.devicePixelRatio, this._tmpCtx.strokeStyle = x.css, this._tmpCtx.strokeText(h, R, R + this._config.deviceCharHeight), this._tmpCtx.restore()
                                                }
                                            }
                                        }
                                        if (w) {
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15)),
                                                t = e % 2 == 1 ? .5 : 0;
                                            this._tmpCtx.lineWidth = e, this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle, this._tmpCtx.beginPath(), this._tmpCtx.moveTo(R, R + t), this._tmpCtx.lineTo(R + this._config.deviceCharWidth * T, R + t), this._tmpCtx.stroke()
                                        }
                                        if (M || this._tmpCtx.fillText(h, R, R + this._config.deviceCharHeight), "_" === h && !this._config.allowTransparency) {
                                            let e = p(this._tmpCtx.getImageData(R, R, this._config.deviceCellWidth, this._config.deviceCellHeight), x, k, O);
                                            if (e)
                                                for (let t = 1; t <= 5 && (this._tmpCtx.save(), this._tmpCtx.fillStyle = x.css, this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height), this._tmpCtx.restore(), this._tmpCtx.fillText(h, R, R + this._config.deviceCharHeight - t), e = p(this._tmpCtx.getImageData(R, R, this._config.deviceCellWidth, this._config.deviceCellHeight), x, k, O), e); t++);
                                        }
                                        if (C) {
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 10)),
                                                t = this._tmpCtx.lineWidth % 2 == 1 ? .5 : 0;
                                            this._tmpCtx.lineWidth = e, this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle, this._tmpCtx.beginPath(), this._tmpCtx.moveTo(R, R + Math.floor(this._config.deviceCharHeight / 2) - t), this._tmpCtx.lineTo(R + this._config.deviceCharWidth * T, R + Math.floor(this._config.deviceCharHeight / 2) - t), this._tmpCtx.stroke()
                                        }
                                        this._tmpCtx.restore();
                                        const P = this._tmpCtx.getImageData(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
                                        let F;
                                        if (F = this._config.allowTransparency ? function(e) {
                                                for (let t = 0; t < e.data.length; t += 4)
                                                    if (e.data[t + 3] > 0) return !1;
                                                return !0
                                            }(P) : p(P, x, k, O), F) return _;
                                        const H = this._findGlyphBoundingBox(P, this._workBoundingBox, l, D, M, R);
                                        let Q, N;
                                        for (;;) {
                                            if (0 === this._activePages.length) {
                                                const e = this._createNewPage();
                                                Q = e, N = e.currentRow, N.height = H.size.y;
                                                break
                                            }
                                            Q = this._activePages[this._activePages.length - 1], N = Q.currentRow;
                                            for (const e of this._activePages) H.size.y <= e.currentRow.height && (Q = e, N = e.currentRow);
                                            for (let e = this._activePages.length - 1; e >= 0; e--)
                                                for (const t of this._activePages[e].fixedRows) t.height <= N.height && H.size.y <= t.height && (Q = this._activePages[e], N = t);
                                            if (N.y + H.size.y >= Q.canvas.height || N.height > H.size.y + 2) {
                                                let e = !1;
                                                if (Q.currentRow.y + Q.currentRow.height + H.size.y >= Q.canvas.height) {
                                                    let t;
                                                    for (const e of this._activePages)
                                                        if (e.currentRow.y + e.currentRow.height + H.size.y < e.canvas.height) {
                                                            t = e;
                                                            break
                                                        } if (t) Q = t;
                                                    else if (f.maxAtlasPages && this._pages.length >= f.maxAtlasPages && N.y + H.size.y <= Q.canvas.height && N.height >= H.size.y && N.x + H.size.x <= Q.canvas.width) e = !0;
                                                    else {
                                                        const t = this._createNewPage();
                                                        Q = t, N = t.currentRow, N.height = H.size.y, e = !0
                                                    }
                                                }
                                                e || (Q.currentRow.height > 0 && Q.fixedRows.push(Q.currentRow), N = {
                                                    x: 0,
                                                    y: Q.currentRow.y + Q.currentRow.height,
                                                    height: H.size.y
                                                }, Q.fixedRows.push(N), Q.currentRow = {
                                                    x: 0,
                                                    y: N.y + N.height,
                                                    height: 0
                                                })
                                            }
                                            if (N.x + H.size.x <= Q.canvas.width) break;
                                            N === Q.currentRow ? (N.x = 0, N.y += N.height, N.height = 0) : Q.fixedRows.splice(Q.fixedRows.indexOf(N), 1)
                                        }
                                        return H.texturePage = this._pages.indexOf(Q), H.texturePosition.x = N.x, H.texturePosition.y = N.y, H.texturePositionClipSpace.x = N.x / Q.canvas.width, H.texturePositionClipSpace.y = N.y / Q.canvas.height, H.sizeClipSpace.x /= Q.canvas.width, H.sizeClipSpace.y /= Q.canvas.height, N.height = Math.max(N.height, H.size.y), N.x += H.size.x, Q.ctx.putImageData(P, H.texturePosition.x - this._workBoundingBox.left, H.texturePosition.y - this._workBoundingBox.top, this._workBoundingBox.left, this._workBoundingBox.top, H.size.x, H.size.y), Q.addGlyph(H), Q.version++, H
                                    }
                                    _findGlyphBoundingBox(e, t, i, s, r, n) {
                                        t.top = 0;
                                        const o = s ? this._config.deviceCellHeight : this._tmpCanvas.height,
                                            a = s ? this._config.deviceCellWidth : i;
                                        let h = !1;
                                        for (let i = 0; i < o; i++) {
                                            for (let s = 0; s < a; s++) {
                                                const r = i * this._tmpCanvas.width * 4 + 4 * s + 3;
                                                if (0 !== e.data[r]) {
                                                    t.top = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.left = 0, h = !1;
                                        for (let i = 0; i < n + a; i++) {
                                            for (let s = 0; s < o; s++) {
                                                const r = s * this._tmpCanvas.width * 4 + 4 * i + 3;
                                                if (0 !== e.data[r]) {
                                                    t.left = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.right = a, h = !1;
                                        for (let i = n + a - 1; i >= n; i--) {
                                            for (let s = 0; s < o; s++) {
                                                const r = s * this._tmpCanvas.width * 4 + 4 * i + 3;
                                                if (0 !== e.data[r]) {
                                                    t.right = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.bottom = o, h = !1;
                                        for (let i = o - 1; i >= 0; i--) {
                                            for (let s = 0; s < a; s++) {
                                                const r = i * this._tmpCanvas.width * 4 + 4 * s + 3;
                                                if (0 !== e.data[r]) {
                                                    t.bottom = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        return {
                                            texturePage: 0,
                                            texturePosition: {
                                                x: 0,
                                                y: 0
                                            },
                                            texturePositionClipSpace: {
                                                x: 0,
                                                y: 0
                                            },
                                            size: {
                                                x: t.right - t.left + 1,
                                                y: t.bottom - t.top + 1
                                            },
                                            sizeClipSpace: {
                                                x: t.right - t.left + 1,
                                                y: t.bottom - t.top + 1
                                            },
                                            offset: {
                                                x: -t.left + n + (s || r ? Math.floor((this._config.deviceCellWidth - this._config.deviceCharWidth) / 2) : 0),
                                                y: -t.top + n + (s || r ? 1 === this._config.lineHeight ? 0 : Math.round((this._config.deviceCellHeight - this._config.deviceCharHeight) / 2) : 0)
                                            }
                                        }
                                    }
                                }
                                t.TextureAtlas = f;
                                class g {
                                    get percentageUsed() {
                                        return this._usedPixels / (this.canvas.width * this.canvas.height)
                                    }
                                    get glyphs() {
                                        return this._glyphs
                                    }
                                    addGlyph(e) {
                                        this._glyphs.push(e), this._usedPixels += e.size.x * e.size.y
                                    }
                                    constructor(e, t, i) {
                                        if (this._usedPixels = 0, this._glyphs = [], this.version = 0, this.currentRow = {
                                                x: 0,
                                                y: 0,
                                                height: 0
                                            }, this.fixedRows = [], i)
                                            for (const e of i) this._glyphs.push(...e.glyphs), this._usedPixels += e._usedPixels;
                                        this.canvas = v(e, t, t), this.ctx = (0, n.throwIfFalsy)(this.canvas.getContext("2d", {
                                            alpha: !0
                                        }))
                                    }
                                    clear() {
                                        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.currentRow.x = 0, this.currentRow.y = 0, this.currentRow.height = 0, this.fixedRows.length = 0, this.version++
                                    }
                                }

                                function p(e, t, i, s) {
                                    const r = t.rgba >>> 24,
                                        n = t.rgba >>> 16 & 255,
                                        o = t.rgba >>> 8 & 255,
                                        a = i.rgba >>> 24,
                                        h = i.rgba >>> 16 & 255,
                                        l = i.rgba >>> 8 & 255,
                                        c = Math.floor((Math.abs(r - a) + Math.abs(n - h) + Math.abs(o - l)) / 12);
                                    let d = !0;
                                    for (let t = 0; t < e.data.length; t += 4) e.data[t] === r && e.data[t + 1] === n && e.data[t + 2] === o || s && Math.abs(e.data[t] - r) + Math.abs(e.data[t + 1] - n) + Math.abs(e.data[t + 2] - o) < c ? e.data[t + 3] = 0 : d = !1;
                                    return d
                                }

                                function v(e, t, i) {
                                    const s = e.createElement("canvas");
                                    return s.width = t, s.height = i, s
                                }
                            },
                            577: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CharacterJoinerService = t.JoinedCellData = void 0;
                                const n = i(147),
                                    o = i(855),
                                    a = i(782),
                                    h = i(97);
                                class l extends n.AttributeData {
                                    constructor(e, t, i) {
                                        super(), this.content = 0, this.combinedData = "", this.fg = e.fg, this.bg = e.bg, this.combinedData = t, this._width = i
                                    }
                                    isCombined() {
                                        return 2097152
                                    }
                                    getWidth() {
                                        return this._width
                                    }
                                    getChars() {
                                        return this.combinedData
                                    }
                                    getCode() {
                                        return 2097151
                                    }
                                    setFromCharData(e) {
                                        throw new Error("not implemented")
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }
                                t.JoinedCellData = l;
                                let c = t.CharacterJoinerService = class e {
                                    constructor(e) {
                                        this._bufferService = e, this._characterJoiners = [], this._nextCharacterJoinerId = 0, this._workCell = new a.CellData
                                    }
                                    register(e) {
                                        const t = {
                                            id: this._nextCharacterJoinerId++,
                                            handler: e
                                        };
                                        return this._characterJoiners.push(t), t.id
                                    }
                                    deregister(e) {
                                        for (let t = 0; t < this._characterJoiners.length; t++)
                                            if (this._characterJoiners[t].id === e) return this._characterJoiners.splice(t, 1), !0;
                                        return !1
                                    }
                                    getJoinedCharacters(e) {
                                        if (0 === this._characterJoiners.length) return [];
                                        const t = this._bufferService.buffer.lines.get(e);
                                        if (!t || 0 === t.length) return [];
                                        const i = [],
                                            s = t.translateToString(!0);
                                        let r = 0,
                                            n = 0,
                                            a = 0,
                                            h = t.getFg(0),
                                            l = t.getBg(0);
                                        for (let e = 0; e < t.getTrimmedLength(); e++)
                                            if (t.loadCell(e, this._workCell), 0 !== this._workCell.getWidth()) {
                                                if (this._workCell.fg !== h || this._workCell.bg !== l) {
                                                    if (e - r > 1) {
                                                        const e = this._getJoinedRanges(s, a, n, t, r);
                                                        for (let t = 0; t < e.length; t++) i.push(e[t])
                                                    }
                                                    r = e, a = n, h = this._workCell.fg, l = this._workCell.bg
                                                }
                                                n += this._workCell.getChars().length || o.WHITESPACE_CELL_CHAR.length
                                            } if (this._bufferService.cols - r > 1) {
                                            const e = this._getJoinedRanges(s, a, n, t, r);
                                            for (let t = 0; t < e.length; t++) i.push(e[t])
                                        }
                                        return i
                                    }
                                    _getJoinedRanges(t, i, s, r, n) {
                                        const o = t.substring(i, s);
                                        let a = [];
                                        try {
                                            a = this._characterJoiners[0].handler(o)
                                        } catch (e) {
                                            console.error(e)
                                        }
                                        for (let t = 1; t < this._characterJoiners.length; t++) try {
                                            const i = this._characterJoiners[t].handler(o);
                                            for (let t = 0; t < i.length; t++) e._mergeRanges(a, i[t])
                                        } catch (e) {
                                            console.error(e)
                                        }
                                        return this._stringRangesToCellRanges(a, r, n), a
                                    }
                                    _stringRangesToCellRanges(e, t, i) {
                                        let s = 0,
                                            r = !1,
                                            n = 0,
                                            a = e[s];
                                        if (a) {
                                            for (let h = i; h < this._bufferService.cols; h++) {
                                                const i = t.getWidth(h),
                                                    l = t.getString(h).length || o.WHITESPACE_CELL_CHAR.length;
                                                if (0 !== i) {
                                                    if (!r && a[0] <= n && (a[0] = h, r = !0), a[1] <= n) {
                                                        if (a[1] = h, a = e[++s], !a) break;
                                                        a[0] <= n ? (a[0] = h, r = !0) : r = !1
                                                    }
                                                    n += l
                                                }
                                            }
                                            a && (a[1] = this._bufferService.cols)
                                        }
                                    }
                                    static _mergeRanges(e, t) {
                                        let i = !1;
                                        for (let s = 0; s < e.length; s++) {
                                            const r = e[s];
                                            if (i) {
                                                if (t[1] <= r[0]) return e[s - 1][1] = t[1], e;
                                                if (t[1] <= r[1]) return e[s - 1][1] = Math.max(t[1], r[1]), e.splice(s, 1), e;
                                                e.splice(s, 1), s--
                                            } else {
                                                if (t[1] <= r[0]) return e.splice(s, 0, t), e;
                                                if (t[1] <= r[1]) return r[0] = Math.min(t[0], r[0]), e;
                                                t[0] < r[1] && (r[0] = Math.min(t[0], r[0]), i = !0)
                                            }
                                        }
                                        return i ? e[e.length - 1][1] = t[1] : e.push(t), e
                                    }
                                };
                                t.CharacterJoinerService = c = s([r(0, h.IBufferService)], c)
                            },
                            160: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.contrastRatio = t.toPaddedHex = t.rgba = t.rgb = t.css = t.color = t.channels = t.NULL_COLOR = void 0;
                                const s = i(399);
                                let r = 0,
                                    n = 0,
                                    o = 0,
                                    a = 0;
                                var h, l, c, d, _;

                                function u(e) {
                                    const t = e.toString(16);
                                    return t.length < 2 ? "0" + t : t
                                }

                                function f(e, t) {
                                    return e < t ? (t + .05) / (e + .05) : (e + .05) / (t + .05)
                                }
                                t.NULL_COLOR = {
                                        css: "#00000000",
                                        rgba: 0
                                    },
                                    function(e) {
                                        e.toCss = function(e, t, i, s) {
                                            return void 0 !== s ? `#${u(e)}${u(t)}${u(i)}${u(s)}` : `#${u(e)}${u(t)}${u(i)}`
                                        }, e.toRgba = function(e, t, i, s = 255) {
                                            return (e << 24 | t << 16 | i << 8 | s) >>> 0
                                        }, e.toColor = function(t, i, s, r) {
                                            return {
                                                css: e.toCss(t, i, s, r),
                                                rgba: e.toRgba(t, i, s, r)
                                            }
                                        }
                                    }(h || (t.channels = h = {})),
                                    function(e) {
                                        function t(e, t) {
                                            return a = Math.round(255 * t), [r, n, o] = _.toChannels(e.rgba), {
                                                css: h.toCss(r, n, o, a),
                                                rgba: h.toRgba(r, n, o, a)
                                            }
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t.rgba) / 255, 1 === a) return {
                                                css: t.css,
                                                rgba: t.rgba
                                            };
                                            const i = t.rgba >> 24 & 255,
                                                s = t.rgba >> 16 & 255,
                                                l = t.rgba >> 8 & 255,
                                                c = e.rgba >> 24 & 255,
                                                d = e.rgba >> 16 & 255,
                                                _ = e.rgba >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), {
                                                css: h.toCss(r, n, o),
                                                rgba: h.toRgba(r, n, o)
                                            }
                                        }, e.isOpaque = function(e) {
                                            return 255 == (255 & e.rgba)
                                        }, e.ensureContrastRatio = function(e, t, i) {
                                            const s = _.ensureContrastRatio(e.rgba, t.rgba, i);
                                            if (s) return h.toColor(s >> 24 & 255, s >> 16 & 255, s >> 8 & 255)
                                        }, e.opaque = function(e) {
                                            const t = (255 | e.rgba) >>> 0;
                                            return [r, n, o] = _.toChannels(t), {
                                                css: h.toCss(r, n, o),
                                                rgba: t
                                            }
                                        }, e.opacity = t, e.multiplyOpacity = function(e, i) {
                                            return a = 255 & e.rgba, t(e, a * i / 255)
                                        }, e.toColorRGB = function(e) {
                                            return [e.rgba >> 24 & 255, e.rgba >> 16 & 255, e.rgba >> 8 & 255]
                                        }
                                    }(l || (t.color = l = {})),
                                    function(e) {
                                        let t, i;
                                        if (!s.isNode) {
                                            const e = document.createElement("canvas");
                                            e.width = 1, e.height = 1;
                                            const s = e.getContext("2d", {
                                                willReadFrequently: !0
                                            });
                                            s && (t = s, t.globalCompositeOperation = "copy", i = t.createLinearGradient(0, 0, 1, 1))
                                        }
                                        e.toColor = function(e) {
                                            if (e.match(/#[\da-f]{3,8}/i)) switch (e.length) {
                                                case 4:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), h.toColor(r, n, o);
                                                case 5:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), a = parseInt(e.slice(4, 5).repeat(2), 16), h.toColor(r, n, o, a);
                                                case 7:
                                                    return {
                                                        css: e, rgba: (parseInt(e.slice(1), 16) << 8 | 255) >>> 0
                                                    };
                                                case 9:
                                                    return {
                                                        css: e, rgba: parseInt(e.slice(1), 16) >>> 0
                                                    }
                                            }
                                            const s = e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);
                                            if (s) return r = parseInt(s[1]), n = parseInt(s[2]), o = parseInt(s[3]), a = Math.round(255 * (void 0 === s[5] ? 1 : parseFloat(s[5]))), h.toColor(r, n, o, a);
                                            if (!t || !i) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillStyle = i, t.fillStyle = e, "string" != typeof t.fillStyle) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillRect(0, 0, 1, 1), [r, n, o, a] = t.getImageData(0, 0, 1, 1).data, 255 !== a) throw new Error("css.toColor: Unsupported css format");
                                            return {
                                                rgba: h.toRgba(r, n, o, a),
                                                css: e
                                            }
                                        }
                                    }(c || (t.css = c = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e / 255,
                                                r = t / 255,
                                                n = i / 255;
                                            return .2126 * (s <= .03928 ? s / 12.92 : Math.pow((s + .055) / 1.055, 2.4)) + .7152 * (r <= .03928 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4)) + .0722 * (n <= .03928 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4))
                                        }
                                        e.relativeLuminance = function(e) {
                                            return t(e >> 16 & 255, e >> 8 & 255, 255 & e)
                                        }, e.relativeLuminance2 = t
                                    }(d || (t.rgb = d = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o > 0 || a > 0 || h > 0);) o -= Math.max(0, Math.ceil(.1 * o)), a -= Math.max(0, Math.ceil(.1 * a)), h -= Math.max(0, Math.ceil(.1 * h)), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }

                                        function i(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o < 255 || a < 255 || h < 255);) o = Math.min(255, o + Math.ceil(.1 * (255 - o))), a = Math.min(255, a + Math.ceil(.1 * (255 - a))), h = Math.min(255, h + Math.ceil(.1 * (255 - h))), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t) / 255, 1 === a) return t;
                                            const i = t >> 24 & 255,
                                                s = t >> 16 & 255,
                                                l = t >> 8 & 255,
                                                c = e >> 24 & 255,
                                                d = e >> 16 & 255,
                                                _ = e >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), h.toRgba(r, n, o)
                                        }, e.ensureContrastRatio = function(e, s, r) {
                                            const n = d.relativeLuminance(e >> 8),
                                                o = d.relativeLuminance(s >> 8);
                                            if (f(n, o) < r) {
                                                if (o < n) {
                                                    const o = t(e, s, r),
                                                        a = f(n, d.relativeLuminance(o >> 8));
                                                    if (a < r) {
                                                        const t = i(e, s, r);
                                                        return a > f(n, d.relativeLuminance(t >> 8)) ? o : t
                                                    }
                                                    return o
                                                }
                                                const a = i(e, s, r),
                                                    h = f(n, d.relativeLuminance(a >> 8));
                                                if (h < r) {
                                                    const i = t(e, s, r);
                                                    return h > f(n, d.relativeLuminance(i >> 8)) ? a : i
                                                }
                                                return a
                                            }
                                        }, e.reduceLuminance = t, e.increaseLuminance = i, e.toChannels = function(e) {
                                            return [e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e]
                                        }
                                    }(_ || (t.rgba = _ = {})), t.toPaddedHex = u, t.contrastRatio = f
                            },
                            345: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.runAndSubscribe = t.forwardEvent = t.EventEmitter = void 0, t.EventEmitter = class {
                                    constructor() {
                                        this._listeners = [], this._disposed = !1
                                    }
                                    get event() {
                                        return this._event || (this._event = e => (this._listeners.push(e), {
                                            dispose: () => {
                                                if (!this._disposed)
                                                    for (let t = 0; t < this._listeners.length; t++)
                                                        if (this._listeners[t] === e) return void this._listeners.splice(t, 1)
                                            }
                                        })), this._event
                                    }
                                    fire(e, t) {
                                        const i = [];
                                        for (let e = 0; e < this._listeners.length; e++) i.push(this._listeners[e]);
                                        for (let s = 0; s < i.length; s++) i[s].call(void 0, e, t)
                                    }
                                    dispose() {
                                        this.clearListeners(), this._disposed = !0
                                    }
                                    clearListeners() {
                                        this._listeners && (this._listeners.length = 0)
                                    }
                                }, t.forwardEvent = function(e, t) {
                                    return e((e => t.fire(e)))
                                }, t.runAndSubscribe = function(e, t) {
                                    return t(void 0), e((e => t(e)))
                                }
                            },
                            859: (e, t) => {
                                function i(e) {
                                    for (const t of e) t.dispose();
                                    e.length = 0
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getDisposeArrayDisposable = t.disposeArray = t.toDisposable = t.MutableDisposable = t.Disposable = void 0, t.Disposable = class {
                                    constructor() {
                                        this._disposables = [], this._isDisposed = !1
                                    }
                                    dispose() {
                                        this._isDisposed = !0;
                                        for (const e of this._disposables) e.dispose();
                                        this._disposables.length = 0
                                    }
                                    register(e) {
                                        return this._disposables.push(e), e
                                    }
                                    unregister(e) {
                                        const t = this._disposables.indexOf(e); - 1 !== t && this._disposables.splice(t, 1)
                                    }
                                }, t.MutableDisposable = class {
                                    constructor() {
                                        this._isDisposed = !1
                                    }
                                    get value() {
                                        return this._isDisposed ? void 0 : this._value
                                    }
                                    set value(e) {
                                        this._isDisposed || e === this._value || (this._value?.dispose(), this._value = e)
                                    }
                                    clear() {
                                        this.value = void 0
                                    }
                                    dispose() {
                                        this._isDisposed = !0, this._value?.dispose(), this._value = void 0
                                    }
                                }, t.toDisposable = function(e) {
                                    return {
                                        dispose: e
                                    }
                                }, t.disposeArray = i, t.getDisposeArrayDisposable = function(e) {
                                    return {
                                        dispose: () => i(e)
                                    }
                                }
                            },
                            485: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.FourKeyMap = t.TwoKeyMap = void 0;
                                class i {
                                    constructor() {
                                        this._data = {}
                                    }
                                    set(e, t, i) {
                                        this._data[e] || (this._data[e] = {}), this._data[e][t] = i
                                    }
                                    get(e, t) {
                                        return this._data[e] ? this._data[e][t] : void 0
                                    }
                                    clear() {
                                        this._data = {}
                                    }
                                }
                                t.TwoKeyMap = i, t.FourKeyMap = class {
                                    constructor() {
                                        this._data = new i
                                    }
                                    set(e, t, s, r, n) {
                                        this._data.get(e, t) || this._data.set(e, t, new i), this._data.get(e, t).set(s, r, n)
                                    }
                                    get(e, t, i, s) {
                                        return this._data.get(e, t)?.get(i, s)
                                    }
                                    clear() {
                                        this._data.clear()
                                    }
                                }
                            },
                            399: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.isChromeOS = t.isLinux = t.isWindows = t.isIphone = t.isIpad = t.isMac = t.getSafariVersion = t.isSafari = t.isLegacyEdge = t.isFirefox = t.isNode = void 0, t.isNode = "undefined" != typeof process;
                                const i = t.isNode ? "node" : navigator.userAgent,
                                    s = t.isNode ? "node" : navigator.platform;
                                t.isFirefox = i.includes("Firefox"), t.isLegacyEdge = i.includes("Edge"), t.isSafari = /^((?!chrome|android).)*safari/i.test(i), t.getSafariVersion = function() {
                                    if (!t.isSafari) return 0;
                                    const e = i.match(/Version\/(\d+)/);
                                    return null === e || e.length < 2 ? 0 : parseInt(e[1])
                                }, t.isMac = ["Macintosh", "MacIntel", "MacPPC", "Mac68K"].includes(s), t.isIpad = "iPad" === s, t.isIphone = "iPhone" === s, t.isWindows = ["Windows", "Win16", "Win32", "WinCE"].includes(s), t.isLinux = s.indexOf("Linux") >= 0, t.isChromeOS = /\bCrOS\b/.test(i)
                            },
                            385: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DebouncedIdleTask = t.IdleTaskQueue = t.PriorityTaskQueue = void 0;
                                const s = i(399);
                                class r {
                                    constructor() {
                                        this._tasks = [], this._i = 0
                                    }
                                    enqueue(e) {
                                        this._tasks.push(e), this._start()
                                    }
                                    flush() {
                                        for (; this._i < this._tasks.length;) this._tasks[this._i]() || this._i++;
                                        this.clear()
                                    }
                                    clear() {
                                        this._idleCallback && (this._cancelCallback(this._idleCallback), this._idleCallback = void 0), this._i = 0, this._tasks.length = 0
                                    }
                                    _start() {
                                        this._idleCallback || (this._idleCallback = this._requestCallback(this._process.bind(this)))
                                    }
                                    _process(e) {
                                        this._idleCallback = void 0;
                                        let t = 0,
                                            i = 0,
                                            s = e.timeRemaining(),
                                            r = 0;
                                        for (; this._i < this._tasks.length;) {
                                            if (t = Date.now(), this._tasks[this._i]() || this._i++, t = Math.max(1, Date.now() - t), i = Math.max(t, i), r = e.timeRemaining(), 1.5 * i > r) return s - t < -20 && console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s - t))}ms`), void this._start();
                                            s = r
                                        }
                                        this.clear()
                                    }
                                }
                                class n extends r {
                                    _requestCallback(e) {
                                        return setTimeout((() => e(this._createDeadline(16))))
                                    }
                                    _cancelCallback(e) {
                                        clearTimeout(e)
                                    }
                                    _createDeadline(e) {
                                        const t = Date.now() + e;
                                        return {
                                            timeRemaining: () => Math.max(0, t - Date.now())
                                        }
                                    }
                                }
                                t.PriorityTaskQueue = n, t.IdleTaskQueue = !s.isNode && "requestIdleCallback" in window ? class extends r {
                                    _requestCallback(e) {
                                        return requestIdleCallback(e)
                                    }
                                    _cancelCallback(e) {
                                        cancelIdleCallback(e)
                                    }
                                } : n, t.DebouncedIdleTask = class {
                                    constructor() {
                                        this._queue = new t.IdleTaskQueue
                                    }
                                    set(e) {
                                        this._queue.clear(), this._queue.enqueue(e)
                                    }
                                    flush() {
                                        this._queue.flush()
                                    }
                                }
                            },
                            147: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ExtendedAttrs = t.AttributeData = void 0;
                                class i {
                                    constructor() {
                                        this.fg = 0, this.bg = 0, this.extended = new s
                                    }
                                    static toColorRGB(e) {
                                        return [e >>> 16 & 255, e >>> 8 & 255, 255 & e]
                                    }
                                    static fromColorRGB(e) {
                                        return (255 & e[0]) << 16 | (255 & e[1]) << 8 | 255 & e[2]
                                    }
                                    clone() {
                                        const e = new i;
                                        return e.fg = this.fg, e.bg = this.bg, e.extended = this.extended.clone(), e
                                    }
                                    isInverse() {
                                        return 67108864 & this.fg
                                    }
                                    isBold() {
                                        return 134217728 & this.fg
                                    }
                                    isUnderline() {
                                        return this.hasExtendedAttrs() && 0 !== this.extended.underlineStyle ? 1 : 268435456 & this.fg
                                    }
                                    isBlink() {
                                        return 536870912 & this.fg
                                    }
                                    isInvisible() {
                                        return 1073741824 & this.fg
                                    }
                                    isItalic() {
                                        return 67108864 & this.bg
                                    }
                                    isDim() {
                                        return 134217728 & this.bg
                                    }
                                    isStrikethrough() {
                                        return 2147483648 & this.fg
                                    }
                                    isProtected() {
                                        return 536870912 & this.bg
                                    }
                                    isOverline() {
                                        return 1073741824 & this.bg
                                    }
                                    getFgColorMode() {
                                        return 50331648 & this.fg
                                    }
                                    getBgColorMode() {
                                        return 50331648 & this.bg
                                    }
                                    isFgRGB() {
                                        return 50331648 == (50331648 & this.fg)
                                    }
                                    isBgRGB() {
                                        return 50331648 == (50331648 & this.bg)
                                    }
                                    isFgPalette() {
                                        return 16777216 == (50331648 & this.fg) || 33554432 == (50331648 & this.fg)
                                    }
                                    isBgPalette() {
                                        return 16777216 == (50331648 & this.bg) || 33554432 == (50331648 & this.bg)
                                    }
                                    isFgDefault() {
                                        return 0 == (50331648 & this.fg)
                                    }
                                    isBgDefault() {
                                        return 0 == (50331648 & this.bg)
                                    }
                                    isAttributeDefault() {
                                        return 0 === this.fg && 0 === this.bg
                                    }
                                    getFgColor() {
                                        switch (50331648 & this.fg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.fg;
                                            case 50331648:
                                                return 16777215 & this.fg;
                                            default:
                                                return -1
                                        }
                                    }
                                    getBgColor() {
                                        switch (50331648 & this.bg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.bg;
                                            case 50331648:
                                                return 16777215 & this.bg;
                                            default:
                                                return -1
                                        }
                                    }
                                    hasExtendedAttrs() {
                                        return 268435456 & this.bg
                                    }
                                    updateExtended() {
                                        this.extended.isEmpty() ? this.bg &= -268435457 : this.bg |= 268435456
                                    }
                                    getUnderlineColor() {
                                        if (268435456 & this.bg && ~this.extended.underlineColor) switch (50331648 & this.extended.underlineColor) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.extended.underlineColor;
                                            case 50331648:
                                                return 16777215 & this.extended.underlineColor;
                                            default:
                                                return this.getFgColor()
                                        }
                                        return this.getFgColor()
                                    }
                                    getUnderlineColorMode() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 & this.extended.underlineColor : this.getFgColorMode()
                                    }
                                    isUnderlineColorRGB() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 == (50331648 & this.extended.underlineColor) : this.isFgRGB()
                                    }
                                    isUnderlineColorPalette() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 16777216 == (50331648 & this.extended.underlineColor) || 33554432 == (50331648 & this.extended.underlineColor) : this.isFgPalette()
                                    }
                                    isUnderlineColorDefault() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 0 == (50331648 & this.extended.underlineColor) : this.isFgDefault()
                                    }
                                    getUnderlineStyle() {
                                        return 268435456 & this.fg ? 268435456 & this.bg ? this.extended.underlineStyle : 1 : 0
                                    }
                                    getUnderlineVariantOffset() {
                                        return this.extended.underlineVariantOffset
                                    }
                                }
                                t.AttributeData = i;
                                class s {
                                    get ext() {
                                        return this._urlId ? -469762049 & this._ext | this.underlineStyle << 26 : this._ext
                                    }
                                    set ext(e) {
                                        this._ext = e
                                    }
                                    get underlineStyle() {
                                        return this._urlId ? 5 : (469762048 & this._ext) >> 26
                                    }
                                    set underlineStyle(e) {
                                        this._ext &= -469762049, this._ext |= e << 26 & 469762048
                                    }
                                    get underlineColor() {
                                        return 67108863 & this._ext
                                    }
                                    set underlineColor(e) {
                                        this._ext &= -67108864, this._ext |= 67108863 & e
                                    }
                                    get urlId() {
                                        return this._urlId
                                    }
                                    set urlId(e) {
                                        this._urlId = e
                                    }
                                    get underlineVariantOffset() {
                                        const e = (3758096384 & this._ext) >> 29;
                                        return e < 0 ? 4294967288 ^ e : e
                                    }
                                    set underlineVariantOffset(e) {
                                        this._ext &= 536870911, this._ext |= e << 29 & 3758096384
                                    }
                                    constructor(e = 0, t = 0) {
                                        this._ext = 0, this._urlId = 0, this._ext = e, this._urlId = t
                                    }
                                    clone() {
                                        return new s(this._ext, this._urlId)
                                    }
                                    isEmpty() {
                                        return 0 === this.underlineStyle && 0 === this._urlId
                                    }
                                }
                                t.ExtendedAttrs = s
                            },
                            782: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CellData = void 0;
                                const s = i(133),
                                    r = i(855),
                                    n = i(147);
                                class o extends n.AttributeData {
                                    constructor() {
                                        super(...arguments), this.content = 0, this.fg = 0, this.bg = 0, this.extended = new n.ExtendedAttrs, this.combinedData = ""
                                    }
                                    static fromCharData(e) {
                                        const t = new o;
                                        return t.setFromCharData(e), t
                                    }
                                    isCombined() {
                                        return 2097152 & this.content
                                    }
                                    getWidth() {
                                        return this.content >> 22
                                    }
                                    getChars() {
                                        return 2097152 & this.content ? this.combinedData : 2097151 & this.content ? (0, s.stringFromCodePoint)(2097151 & this.content) : ""
                                    }
                                    getCode() {
                                        return this.isCombined() ? this.combinedData.charCodeAt(this.combinedData.length - 1) : 2097151 & this.content
                                    }
                                    setFromCharData(e) {
                                        this.fg = e[r.CHAR_DATA_ATTR_INDEX], this.bg = 0;
                                        let t = !1;
                                        if (e[r.CHAR_DATA_CHAR_INDEX].length > 2) t = !0;
                                        else if (2 === e[r.CHAR_DATA_CHAR_INDEX].length) {
                                            const i = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
                                            if (55296 <= i && i <= 56319) {
                                                const s = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                                                56320 <= s && s <= 57343 ? this.content = 1024 * (i - 55296) + s - 56320 + 65536 | e[r.CHAR_DATA_WIDTH_INDEX] << 22 : t = !0
                                            } else t = !0
                                        } else this.content = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | e[r.CHAR_DATA_WIDTH_INDEX] << 22;
                                        t && (this.combinedData = e[r.CHAR_DATA_CHAR_INDEX], this.content = 2097152 | e[r.CHAR_DATA_WIDTH_INDEX] << 22)
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }
                                t.CellData = o
                            },
                            855: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.WHITESPACE_CELL_CODE = t.WHITESPACE_CELL_WIDTH = t.WHITESPACE_CELL_CHAR = t.NULL_CELL_CODE = t.NULL_CELL_WIDTH = t.NULL_CELL_CHAR = t.CHAR_DATA_CODE_INDEX = t.CHAR_DATA_WIDTH_INDEX = t.CHAR_DATA_CHAR_INDEX = t.CHAR_DATA_ATTR_INDEX = t.DEFAULT_EXT = t.DEFAULT_ATTR = t.DEFAULT_COLOR = void 0, t.DEFAULT_COLOR = 0, t.DEFAULT_ATTR = 256 | t.DEFAULT_COLOR << 9, t.DEFAULT_EXT = 0, t.CHAR_DATA_ATTR_INDEX = 0, t.CHAR_DATA_CHAR_INDEX = 1, t.CHAR_DATA_WIDTH_INDEX = 2, t.CHAR_DATA_CODE_INDEX = 3, t.NULL_CELL_CHAR = "", t.NULL_CELL_WIDTH = 1, t.NULL_CELL_CODE = 0, t.WHITESPACE_CELL_CHAR = " ", t.WHITESPACE_CELL_WIDTH = 1, t.WHITESPACE_CELL_CODE = 32
                            },
                            133: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Utf8ToUtf32 = t.StringToUtf32 = t.utf32ToString = t.stringFromCodePoint = void 0, t.stringFromCodePoint = function(e) {
                                    return e > 65535 ? (e -= 65536, String.fromCharCode(55296 + (e >> 10)) + String.fromCharCode(e % 1024 + 56320)) : String.fromCharCode(e)
                                }, t.utf32ToString = function(e, t = 0, i = e.length) {
                                    let s = "";
                                    for (let r = t; r < i; ++r) {
                                        let t = e[r];
                                        t > 65535 ? (t -= 65536, s += String.fromCharCode(55296 + (t >> 10)) + String.fromCharCode(t % 1024 + 56320)) : s += String.fromCharCode(t)
                                    }
                                    return s
                                }, t.StringToUtf32 = class {
                                    constructor() {
                                        this._interim = 0
                                    }
                                    clear() {
                                        this._interim = 0
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s = 0,
                                            r = 0;
                                        if (this._interim) {
                                            const i = e.charCodeAt(r++);
                                            56320 <= i && i <= 57343 ? t[s++] = 1024 * (this._interim - 55296) + i - 56320 + 65536 : (t[s++] = this._interim, t[s++] = i), this._interim = 0
                                        }
                                        for (let n = r; n < i; ++n) {
                                            const r = e.charCodeAt(n);
                                            if (55296 <= r && r <= 56319) {
                                                if (++n >= i) return this._interim = r, s;
                                                const o = e.charCodeAt(n);
                                                56320 <= o && o <= 57343 ? t[s++] = 1024 * (r - 55296) + o - 56320 + 65536 : (t[s++] = r, t[s++] = o)
                                            } else 65279 !== r && (t[s++] = r)
                                        }
                                        return s
                                    }
                                }, t.Utf8ToUtf32 = class {
                                    constructor() {
                                        this.interim = new Uint8Array(3)
                                    }
                                    clear() {
                                        this.interim.fill(0)
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s, r, n, o, a = 0,
                                            h = 0,
                                            l = 0;
                                        if (this.interim[0]) {
                                            let s = !1,
                                                r = this.interim[0];
                                            r &= 192 == (224 & r) ? 31 : 224 == (240 & r) ? 15 : 7;
                                            let n, o = 0;
                                            for (;
                                                (n = 63 & this.interim[++o]) && o < 4;) r <<= 6, r |= n;
                                            const h = 192 == (224 & this.interim[0]) ? 2 : 224 == (240 & this.interim[0]) ? 3 : 4,
                                                c = h - o;
                                            for (; l < c;) {
                                                if (l >= i) return 0;
                                                if (n = e[l++], 128 != (192 & n)) {
                                                    l--, s = !0;
                                                    break
                                                }
                                                this.interim[o++] = n, r <<= 6, r |= 63 & n
                                            }
                                            s || (2 === h ? r < 128 ? l-- : t[a++] = r : 3 === h ? r < 2048 || r >= 55296 && r <= 57343 || 65279 === r || (t[a++] = r) : r < 65536 || r > 1114111 || (t[a++] = r)), this.interim.fill(0)
                                        }
                                        const c = i - 4;
                                        let d = l;
                                        for (; d < i;) {
                                            for (; !(!(d < c) || 128 & (s = e[d]) || 128 & (r = e[d + 1]) || 128 & (n = e[d + 2]) || 128 & (o = e[d + 3]));) t[a++] = s, t[a++] = r, t[a++] = n, t[a++] = o, d += 4;
                                            if (s = e[d++], s < 128) t[a++] = s;
                                            else if (192 == (224 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (31 & s) << 6 | 63 & r, h < 128) {
                                                    d--;
                                                    continue
                                                }
                                                t[a++] = h
                                            } else if (224 == (240 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (15 & s) << 12 | (63 & r) << 6 | 63 & n, h < 2048 || h >= 55296 && h <= 57343 || 65279 === h) continue;
                                                t[a++] = h
                                            } else if (240 == (248 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, this.interim[2] = n, a;
                                                if (o = e[d++], 128 != (192 & o)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (7 & s) << 18 | (63 & r) << 12 | (63 & n) << 6 | 63 & o, h < 65536 || h > 1114111) continue;
                                                t[a++] = h
                                            }
                                        }
                                        return a
                                    }
                                }
                            },
                            776: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.traceCall = t.setTraceLogger = t.LogService = void 0;
                                const n = i(859),
                                    o = i(97),
                                    a = {
                                        trace: o.LogLevelEnum.TRACE,
                                        debug: o.LogLevelEnum.DEBUG,
                                        info: o.LogLevelEnum.INFO,
                                        warn: o.LogLevelEnum.WARN,
                                        error: o.LogLevelEnum.ERROR,
                                        off: o.LogLevelEnum.OFF
                                    };
                                let h, l = t.LogService = class extends n.Disposable {
                                    get logLevel() {
                                        return this._logLevel
                                    }
                                    constructor(e) {
                                        super(), this._optionsService = e, this._logLevel = o.LogLevelEnum.OFF, this._updateLogLevel(), this.register(this._optionsService.onSpecificOptionChange("logLevel", (() => this._updateLogLevel()))), h = this
                                    }
                                    _updateLogLevel() {
                                        this._logLevel = a[this._optionsService.rawOptions.logLevel]
                                    }
                                    _evalLazyOptionalParams(e) {
                                        for (let t = 0; t < e.length; t++) "function" == typeof e[t] && (e[t] = e[t]())
                                    }
                                    _log(e, t, i) {
                                        this._evalLazyOptionalParams(i), e.call(console, (this._optionsService.options.logger ? "" : "xterm.js: ") + t, ...i)
                                    }
                                    trace(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.TRACE && this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    debug(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.DEBUG && this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    info(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.INFO && this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, e, t)
                                    }
                                    warn(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.WARN && this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, e, t)
                                    }
                                    error(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.ERROR && this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, e, t)
                                    }
                                };
                                t.LogService = l = s([r(0, o.IOptionsService)], l), t.setTraceLogger = function(e) {
                                    h = e
                                }, t.traceCall = function(e, t, i) {
                                    if ("function" != typeof i.value) throw new Error("not supported");
                                    const s = i.value;
                                    i.value = function(...e) {
                                        if (h.logLevel !== o.LogLevelEnum.TRACE) return s.apply(this, e);
                                        h.trace(`GlyphRenderer#${s.name}(${e.map((e => JSON.stringify(e))).join(", ")})`);
                                        const t = s.apply(this, e);
                                        return h.trace(`GlyphRenderer#${s.name} return`, t), t
                                    }
                                }
                            },
                            726: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createDecorator = t.getServiceDependencies = t.serviceRegistry = void 0;
                                const i = "di$target",
                                    s = "di$dependencies";
                                t.serviceRegistry = new Map, t.getServiceDependencies = function(e) {
                                    return e[s] || []
                                }, t.createDecorator = function(e) {
                                    if (t.serviceRegistry.has(e)) return t.serviceRegistry.get(e);
                                    const r = function(e, t, n) {
                                        if (3 !== arguments.length) throw new Error("@IServiceName-decorator can only be used to decorate a parameter");
                                        ! function(e, t, r) {
                                            t[i] === t ? t[s].push({
                                                id: e,
                                                index: r
                                            }) : (t[s] = [{
                                                id: e,
                                                index: r
                                            }], t[i] = t)
                                        }(r, e, n)
                                    };
                                    return r.toString = () => e, t.serviceRegistry.set(e, r), r
                                }
                            },
                            97: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.IDecorationService = t.IUnicodeService = t.IOscLinkService = t.IOptionsService = t.ILogService = t.LogLevelEnum = t.IInstantiationService = t.ICharsetService = t.ICoreService = t.ICoreMouseService = t.IBufferService = void 0;
                                const s = i(726);
                                var r;
                                t.IBufferService = (0, s.createDecorator)("BufferService"), t.ICoreMouseService = (0, s.createDecorator)("CoreMouseService"), t.ICoreService = (0, s.createDecorator)("CoreService"), t.ICharsetService = (0, s.createDecorator)("CharsetService"), t.IInstantiationService = (0, s.createDecorator)("InstantiationService"),
                                    function(e) {
                                        e[e.TRACE = 0] = "TRACE", e[e.DEBUG = 1] = "DEBUG", e[e.INFO = 2] = "INFO", e[e.WARN = 3] = "WARN", e[e.ERROR = 4] = "ERROR", e[e.OFF = 5] = "OFF"
                                    }(r || (t.LogLevelEnum = r = {})), t.ILogService = (0, s.createDecorator)("LogService"), t.IOptionsService = (0, s.createDecorator)("OptionsService"), t.IOscLinkService = (0, s.createDecorator)("OscLinkService"), t.IUnicodeService = (0, s.createDecorator)("UnicodeService"), t.IDecorationService = (0, s.createDecorator)("DecorationService")
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s].call(n.exports, n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.CanvasAddon = void 0;
                        const t = i(345),
                            r = i(859),
                            n = i(776),
                            o = i(949);
                        class a extends r.Disposable {
                            constructor() {
                                super(...arguments), this._onChangeTextureAtlas = this.register(new t.EventEmitter), this.onChangeTextureAtlas = this._onChangeTextureAtlas.event, this._onAddTextureAtlasCanvas = this.register(new t.EventEmitter), this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event
                            }
                            get textureAtlas() {
                                return this._renderer?.textureAtlas
                            }
                            activate(e) {
                                const i = e._core;
                                if (!e.element) return void this.register(i.onWillOpen((() => this.activate(e))));
                                this._terminal = e;
                                const s = i.coreService,
                                    a = i.optionsService,
                                    h = i.screenElement,
                                    l = i.linkifier,
                                    c = i,
                                    d = c._bufferService,
                                    _ = c._renderService,
                                    u = c._characterJoinerService,
                                    f = c._charSizeService,
                                    g = c._coreBrowserService,
                                    p = c._decorationService,
                                    v = c._logService,
                                    m = c._themeService;
                                (0, n.setTraceLogger)(v), this._renderer = new o.CanvasRenderer(e, h, l, d, f, a, u, s, g, p, m), this.register((0, t.forwardEvent)(this._renderer.onChangeTextureAtlas, this._onChangeTextureAtlas)), this.register((0, t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas)), _.setRenderer(this._renderer), _.handleResize(d.cols, d.rows), this.register((0, r.toDisposable)((() => {
                                    _.setRenderer(this._terminal._core._createRenderer()), _.handleResize(e.cols, e.rows), this._renderer?.dispose(), this._renderer = void 0
                                })))
                            }
                            clearTextureAtlas() {
                                this._renderer?.clearTextureAtlas()
                            }
                        }
                        e.CanvasAddon = a
                    })(), s
                })(), e.exports = t()
            },
            308: e => {
                var t;
                self, t = () => (() => {
                    "use strict";
                    var e, t = {};
                    return e = t, Object.defineProperty(e, "__esModule", {
                        value: !0
                    }), e.FitAddon = void 0, e.FitAddon = class {
                        activate(e) {
                            this._terminal = e
                        }
                        dispose() {}
                        fit() {
                            const e = this.proposeDimensions();
                            if (!e || !this._terminal || isNaN(e.cols) || isNaN(e.rows)) return;
                            const t = this._terminal._core;
                            this._terminal.rows === e.rows && this._terminal.cols === e.cols || (t._renderService.clear(), this._terminal.resize(e.cols, e.rows))
                        }
                        proposeDimensions() {
                            if (!this._terminal) return;
                            if (!this._terminal.element || !this._terminal.element.parentElement) return;
                            const e = this._terminal._core,
                                t = e._renderService.dimensions;
                            if (0 === t.css.cell.width || 0 === t.css.cell.height) return;
                            const i = 0 === this._terminal.options.scrollback ? 0 : e.viewport.scrollBarWidth,
                                s = window.getComputedStyle(this._terminal.element.parentElement),
                                r = parseInt(s.getPropertyValue("height")),
                                n = Math.max(0, parseInt(s.getPropertyValue("width"))),
                                o = window.getComputedStyle(this._terminal.element),
                                a = r - (parseInt(o.getPropertyValue("padding-top")) + parseInt(o.getPropertyValue("padding-bottom"))),
                                h = n - (parseInt(o.getPropertyValue("padding-right")) + parseInt(o.getPropertyValue("padding-left"))) - i;
                            return {
                                cols: Math.max(2, Math.floor(h / t.css.cell.width)),
                                rows: Math.max(1, Math.floor(a / t.css.cell.height))
                            }
                        }
                    }, t
                })(), e.exports = t()
            },
            288: e => {
                var t;
                self, t = () => (() => {
                    "use strict";
                    var e = {
                            615: (e, t) => {
                                function i(e) {
                                    if ("undefined" != typeof Buffer) return Buffer.from(e, "base64");
                                    const t = atob(e),
                                        i = new Uint8Array(t.length);
                                    for (let e = 0; e < i.length; ++e) i[e] = t.charCodeAt(e);
                                    return i
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.InWasm = void 0, t.InWasm = function(e) {
                                    if (e.d) {
                                        const {
                                            t,
                                            s,
                                            d: r
                                        } = e;
                                        let n, o;
                                        const a = WebAssembly;
                                        return 2 === t ? s ? () => n || (n = i(r)) : () => Promise.resolve(n || (n = i(r))) : 1 === t ? s ? () => o || (o = new a.Module(n || (n = i(r)))) : () => o ? Promise.resolve(o) : a.compile(n || (n = i(r))).then((e => o = e)) : s ? e => new a.Instance(o || (o = new a.Module(n || (n = i(r)))), e) : e => o ? a.instantiate(o, e) : a.instantiate(n || (n = i(r)), e).then((e => (o = e.module) && e.instance))
                                    }
                                    if ("undefined" == typeof _wasmCtx) throw new Error('must run "inwasm"');
                                    _wasmCtx.add(e)
                                }
                            },
                            477: (e, t) => {
                                function i(e) {
                                    return 255 & e
                                }

                                function s(e) {
                                    return e >>> 8 & 255
                                }

                                function r(e) {
                                    return e >>> 16 & 255
                                }

                                function n(e, t, i, s = 255) {
                                    return ((255 & s) << 24 | (255 & i) << 16 | (255 & t) << 8 | 255 & e) >>> 0
                                }

                                function o(e, t, i) {
                                    return Math.max(e, Math.min(i, t))
                                }

                                function a(e, t, i) {
                                    return i < 0 && (i += 1), i > 1 && (i -= 1), 6 * i < 1 ? t + 6 * (e - t) * i : 2 * i < 1 ? e : 3 * i < 2 ? t + (e - t) * (4 - 6 * i) : t
                                }

                                function h(e, t, i) {
                                    return (4278190080 | Math.round(i / 100 * 255) << 16 | Math.round(t / 100 * 255) << 8 | Math.round(e / 100 * 255)) >>> 0
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DEFAULT_FOREGROUND = t.DEFAULT_BACKGROUND = t.PALETTE_ANSI_256 = t.PALETTE_VT340_GREY = t.PALETTE_VT340_COLOR = t.normalizeHLS = t.normalizeRGB = t.nearestColorIndex = t.fromRGBA8888 = t.toRGBA8888 = t.alpha = t.blue = t.green = t.red = t.BIG_ENDIAN = void 0, t.BIG_ENDIAN = 255 === new Uint8Array(new Uint32Array([4278190080]).buffer)[0], t.BIG_ENDIAN && console.warn("BE platform detected. This version of node-sixel works only on LE properly."), t.red = i, t.green = s, t.blue = r, t.alpha = function(e) {
                                    return e >>> 24 & 255
                                }, t.toRGBA8888 = n, t.fromRGBA8888 = function(e) {
                                    return [255 & e, e >> 8 & 255, e >> 16 & 255, e >>> 24]
                                }, t.nearestColorIndex = function(e, t) {
                                    const n = i(e),
                                        o = s(e),
                                        a = r(e);
                                    let h = Number.MAX_SAFE_INTEGER,
                                        l = -1;
                                    for (let e = 0; e < t.length; ++e) {
                                        const i = n - t[e][0],
                                            s = o - t[e][1],
                                            r = a - t[e][2],
                                            c = i * i + s * s + r * r;
                                        if (!c) return e;
                                        c < h && (h = c, l = e)
                                    }
                                    return l
                                }, t.normalizeRGB = h, t.normalizeHLS = function(e, t, i) {
                                    return function(e, t, i) {
                                        if (!i) {
                                            const e = Math.round(255 * t);
                                            return n(e, e, e)
                                        }
                                        const s = t < .5 ? t * (1 + i) : t + i - t * i,
                                            r = 2 * t - s;
                                        return n(o(0, 255, Math.round(255 * a(s, r, e + 1 / 3))), o(0, 255, Math.round(255 * a(s, r, e))), o(0, 255, Math.round(255 * a(s, r, e - 1 / 3))))
                                    }((e + 240) / 360, t / 100, i / 100)
                                }, t.PALETTE_VT340_COLOR = new Uint32Array([h(0, 0, 0), h(20, 20, 80), h(80, 13, 13), h(20, 80, 20), h(80, 20, 80), h(20, 80, 80), h(80, 80, 20), h(53, 53, 53), h(26, 26, 26), h(33, 33, 60), h(60, 26, 26), h(33, 60, 33), h(60, 33, 60), h(33, 60, 60), h(60, 60, 33), h(80, 80, 80)]), t.PALETTE_VT340_GREY = new Uint32Array([h(0, 0, 0), h(13, 13, 13), h(26, 26, 26), h(40, 40, 40), h(6, 6, 6), h(20, 20, 20), h(33, 33, 33), h(46, 46, 46), h(0, 0, 0), h(13, 13, 13), h(26, 26, 26), h(40, 40, 40), h(6, 6, 6), h(20, 20, 20), h(33, 33, 33), h(46, 46, 46)]), t.PALETTE_ANSI_256 = (() => {
                                    const e = [n(0, 0, 0), n(205, 0, 0), n(0, 205, 0), n(205, 205, 0), n(0, 0, 238), n(205, 0, 205), n(0, 250, 205), n(229, 229, 229), n(127, 127, 127), n(255, 0, 0), n(0, 255, 0), n(255, 255, 0), n(92, 92, 255), n(255, 0, 255), n(0, 255, 255), n(255, 255, 255)],
                                        t = [0, 95, 135, 175, 215, 255];
                                    for (let i = 0; i < 6; ++i)
                                        for (let s = 0; s < 6; ++s)
                                            for (let r = 0; r < 6; ++r) e.push(n(t[i], t[s], t[r]));
                                    for (let t = 8; t <= 238; t += 10) e.push(n(t, t, t));
                                    return new Uint32Array(e)
                                })(), t.DEFAULT_BACKGROUND = n(0, 0, 0, 255), t.DEFAULT_FOREGROUND = n(255, 255, 255, 255)
                            },
                            710: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.decodeAsync = t.decode = t.Decoder = t.DecoderAsync = void 0;
                                const s = i(477),
                                    r = i(343),
                                    n = function(e) {
                                        if ("undefined" != typeof Buffer) return Buffer.from(e, "base64");
                                        const t = atob(e),
                                            i = new Uint8Array(t.length);
                                        for (let e = 0; e < i.length; ++e) i[e] = t.charCodeAt(e);
                                        return i
                                    }(r.LIMITS.BYTES);
                                let o;
                                const a = new Uint32Array;
                                class h {
                                    constructor() {
                                        this.bandHandler = e => 1, this.modeHandler = e => 1
                                    }
                                    handle_band(e) {
                                        return this.bandHandler(e)
                                    }
                                    mode_parsed(e) {
                                        return this.modeHandler(e)
                                    }
                                }
                                const l = {
                                    memoryLimit: 134217728,
                                    sixelColor: s.DEFAULT_FOREGROUND,
                                    fillColor: s.DEFAULT_BACKGROUND,
                                    palette: s.PALETTE_VT340_COLOR,
                                    paletteLimit: r.LIMITS.PALETTE_SIZE,
                                    truncate: !0
                                };

                                function c(e) {
                                    const t = new h,
                                        i = {
                                            env: {
                                                handle_band: t.handle_band.bind(t),
                                                mode_parsed: t.mode_parsed.bind(t)
                                            }
                                        };
                                    return WebAssembly.instantiate(o || n, i).then((i => (o = o || i.module, new d(e, i.instance || i, t))))
                                }
                                t.DecoderAsync = c;
                                class d {
                                    constructor(e, t, i) {
                                        if (this._PIXEL_OFFSET = r.LIMITS.MAX_WIDTH + 4, this._canvas = a, this._bandWidths = [], this._maxWidth = 0, this._minWidth = r.LIMITS.MAX_WIDTH, this._lastOffset = 0, this._currentHeight = 0, this._opts = Object.assign({}, l, e), this._opts.paletteLimit > r.LIMITS.PALETTE_SIZE) throw new Error(`DecoderOptions.paletteLimit must not exceed ${r.LIMITS.PALETTE_SIZE}`);
                                        if (t) i.bandHandler = this._handle_band.bind(this), i.modeHandler = this._initCanvas.bind(this);
                                        else {
                                            const e = o || (o = new WebAssembly.Module(n));
                                            t = new WebAssembly.Instance(e, {
                                                env: {
                                                    handle_band: this._handle_band.bind(this),
                                                    mode_parsed: this._initCanvas.bind(this)
                                                }
                                            })
                                        }
                                        this._instance = t, this._wasm = this._instance.exports, this._chunk = new Uint8Array(this._wasm.memory.buffer, this._wasm.get_chunk_address(), r.LIMITS.CHUNK_SIZE), this._states = new Uint32Array(this._wasm.memory.buffer, this._wasm.get_state_address(), 12), this._palette = new Uint32Array(this._wasm.memory.buffer, this._wasm.get_palette_address(), r.LIMITS.PALETTE_SIZE), this._palette.set(this._opts.palette), this._pSrc = new Uint32Array(this._wasm.memory.buffer, this._wasm.get_p0_address()), this._wasm.init(s.DEFAULT_FOREGROUND, 0, this._opts.paletteLimit, 0)
                                    }
                                    get _fillColor() {
                                        return this._states[0]
                                    }
                                    get _truncate() {
                                        return this._states[8]
                                    }
                                    get _rasterWidth() {
                                        return this._states[6]
                                    }
                                    get _rasterHeight() {
                                        return this._states[7]
                                    }
                                    get _width() {
                                        return this._states[2] ? this._states[2] - 4 : 0
                                    }
                                    get _height() {
                                        return this._states[3]
                                    }
                                    get _level() {
                                        return this._states[9]
                                    }
                                    get _mode() {
                                        return this._states[10]
                                    }
                                    get _paletteLimit() {
                                        return this._states[11]
                                    }
                                    _initCanvas(e) {
                                        if (2 === e) {
                                            const e = this.width * this.height;
                                            if (e > this._canvas.length) {
                                                if (this._opts.memoryLimit && 4 * e > this._opts.memoryLimit) throw this.release(), new Error("image exceeds memory limit");
                                                this._canvas = new Uint32Array(e)
                                            }
                                            this._maxWidth = this._width
                                        } else if (1 === e)
                                            if (2 === this._level) {
                                                const e = Math.min(this._rasterWidth, r.LIMITS.MAX_WIDTH) * this._rasterHeight;
                                                if (e > this._canvas.length) {
                                                    if (this._opts.memoryLimit && 4 * e > this._opts.memoryLimit) throw this.release(), new Error("image exceeds memory limit");
                                                    this._canvas = new Uint32Array(e)
                                                }
                                            } else this._canvas.length < 65536 && (this._canvas = new Uint32Array(65536));
                                        return 0
                                    }
                                    _realloc(e, t) {
                                        const i = e + t;
                                        if (i > this._canvas.length) {
                                            if (this._opts.memoryLimit && 4 * i > this._opts.memoryLimit) throw this.release(), new Error("image exceeds memory limit");
                                            const e = new Uint32Array(65536 * Math.ceil(i / 65536));
                                            e.set(this._canvas), this._canvas = e
                                        }
                                    }
                                    _handle_band(e) {
                                        const t = this._PIXEL_OFFSET;
                                        let i = this._lastOffset;
                                        if (2 === this._mode) {
                                            let s = this.height - this._currentHeight,
                                                r = 0;
                                            for (; r < 6 && s > 0;) this._canvas.set(this._pSrc.subarray(t * r, t * r + e), i + e * r), r++, s--;
                                            this._lastOffset += e * r, this._currentHeight += r
                                        } else if (1 === this._mode) {
                                            this._realloc(i, 6 * e), this._maxWidth = Math.max(this._maxWidth, e), this._minWidth = Math.min(this._minWidth, e);
                                            for (let s = 0; s < 6; ++s) this._canvas.set(this._pSrc.subarray(t * s, t * s + e), i + e * s);
                                            this._bandWidths.push(e), this._lastOffset += 6 * e, this._currentHeight += 6
                                        }
                                        return 0
                                    }
                                    get width() {
                                        return 1 !== this._mode ? this._width : Math.max(this._maxWidth, this._wasm.current_width())
                                    }
                                    get height() {
                                        return 1 !== this._mode ? this._height : this._wasm.current_width() ? 6 * this._bandWidths.length + this._wasm.current_height() : 6 * this._bandWidths.length
                                    }
                                    get palette() {
                                        return this._palette.subarray(0, this._paletteLimit)
                                    }
                                    get memoryUsage() {
                                        return this._canvas.byteLength + this._wasm.memory.buffer.byteLength + 8 * this._bandWidths.length
                                    }
                                    get properties() {
                                        return {
                                            width: this.width,
                                            height: this.height,
                                            mode: this._mode,
                                            level: this._level,
                                            truncate: !!this._truncate,
                                            paletteLimit: this._paletteLimit,
                                            fillColor: this._fillColor,
                                            memUsage: this.memoryUsage,
                                            rasterAttributes: {
                                                numerator: this._states[4],
                                                denominator: this._states[5],
                                                width: this._rasterWidth,
                                                height: this._rasterHeight
                                            }
                                        }
                                    }
                                    init(e = this._opts.fillColor, t = this._opts.palette, i = this._opts.paletteLimit, s = this._opts.truncate) {
                                        this._wasm.init(this._opts.sixelColor, e, i, s ? 1 : 0), t && this._palette.set(t.subarray(0, r.LIMITS.PALETTE_SIZE)), this._bandWidths.length = 0, this._maxWidth = 0, this._minWidth = r.LIMITS.MAX_WIDTH, this._lastOffset = 0, this._currentHeight = 0
                                    }
                                    decode(e, t = 0, i = e.length) {
                                        let s = t;
                                        for (; s < i;) {
                                            const t = Math.min(i - s, r.LIMITS.CHUNK_SIZE);
                                            this._chunk.set(e.subarray(s, s += t)), this._wasm.decode(0, t)
                                        }
                                    }
                                    decodeString(e, t = 0, i = e.length) {
                                        let s = t;
                                        for (; s < i;) {
                                            const t = Math.min(i - s, r.LIMITS.CHUNK_SIZE);
                                            for (let i = 0, r = s; i < t; ++i, ++r) this._chunk[i] = e.charCodeAt(r);
                                            s += t, this._wasm.decode(0, t)
                                        }
                                    }
                                    get data32() {
                                        if (0 === this._mode || !this.width || !this.height) return a;
                                        const e = this._wasm.current_width();
                                        if (2 === this._mode) {
                                            let t = this.height - this._currentHeight;
                                            if (t > 0) {
                                                const i = this._PIXEL_OFFSET;
                                                let s = this._lastOffset,
                                                    r = 0;
                                                for (; r < 6 && t > 0;) this._canvas.set(this._pSrc.subarray(i * r, i * r + e), s + e * r), r++, t--;
                                                t && this._canvas.fill(this._fillColor, s + e * r)
                                            }
                                            return this._canvas.subarray(0, this.width * this.height)
                                        }
                                        if (1 === this._mode) {
                                            if (this._minWidth === this._maxWidth) {
                                                let t = !1;
                                                if (e)
                                                    if (e !== this._minWidth) t = !0;
                                                    else {
                                                        const t = this._PIXEL_OFFSET;
                                                        let i = this._lastOffset;
                                                        this._realloc(i, 6 * e);
                                                        for (let s = 0; s < 6; ++s) this._canvas.set(this._pSrc.subarray(t * s, t * s + e), i + e * s)
                                                    } if (!t) return this._canvas.subarray(0, this.width * this.height)
                                            }
                                            const t = new Uint32Array(this.width * this.height);
                                            t.fill(this._fillColor);
                                            let i = 0,
                                                s = 0;
                                            for (let e = 0; e < this._bandWidths.length; ++e) {
                                                const r = this._bandWidths[e];
                                                for (let e = 0; e < 6; ++e) t.set(this._canvas.subarray(s, s += r), i), i += this.width
                                            }
                                            if (e) {
                                                const s = this._PIXEL_OFFSET,
                                                    r = this._wasm.current_height();
                                                for (let n = 0; n < r; ++n) t.set(this._pSrc.subarray(s * n, s * n + e), i + this.width * n)
                                            }
                                            return t
                                        }
                                        return a
                                    }
                                    get data8() {
                                        return new Uint8ClampedArray(this.data32.buffer, 0, this.width * this.height * 4)
                                    }
                                    release() {
                                        this._canvas = a, this._bandWidths.length = 0, this._maxWidth = 0, this._minWidth = r.LIMITS.MAX_WIDTH, this._wasm.init(s.DEFAULT_FOREGROUND, 0, this._opts.paletteLimit, 0)
                                    }
                                }
                                t.Decoder = d, t.decode = function(e, t) {
                                    const i = new d(t);
                                    return i.init(), "string" == typeof e ? i.decodeString(e) : i.decode(e), {
                                        width: i.width,
                                        height: i.height,
                                        data32: i.data32,
                                        data8: i.data8
                                    }
                                }, t.decodeAsync = async function(e, t) {
                                    const i = await c(t);
                                    return i.init(), "string" == typeof e ? i.decodeString(e) : i.decode(e), {
                                        width: i.width,
                                        height: i.height,
                                        data32: i.data32,
                                        data8: i.data8
                                    }
                                }
                            },
                            343: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.LIMITS = void 0, t.LIMITS = {
                                    CHUNK_SIZE: 16384,
                                    PALETTE_SIZE: 4096,
                                    MAX_WIDTH: 16384,
                                    BYTES: "AGFzbQEAAAABJAdgAAF/YAJ/fwBgA39/fwF/YAF/AX9gAABgBH9/f38AYAF/AAIlAgNlbnYLaGFuZGxlX2JhbmQAAwNlbnYLbW9kZV9wYXJzZWQAAwMTEgQAAAAAAQQBAQUBAAACAgAGAwQFAXABBwcFBAEBBwcGCAF/AUGAihoLB9wBDgZtZW1vcnkCABFnZXRfc3RhdGVfYWRkcmVzcwADEWdldF9jaHVua19hZGRyZXNzAAQOZ2V0X3AwX2FkZHJlc3MABRNnZXRfcGFsZXR0ZV9hZGRyZXNzAAYEaW5pdAALBmRlY29kZQAMDWN1cnJlbnRfd2lkdGgADQ5jdXJyZW50X2hlaWdodAAOGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtfaW5pdGlhbGl6ZQACCXN0YWNrU2F2ZQARDHN0YWNrUmVzdG9yZQASCnN0YWNrQWxsb2MAEwkMAQBBAQsGCgcJDxACDAEBCq5UEgMAAQsFAEGgCAsGAEGQiQELBgBBsIkCCwUAQZAJC+okAQh/QeQIKAIAIQVB4AgoAgAhA0HoCCgCACEIIAFBkIkBaiIJQf8BOgAAIAAgAUgEQCAAQZCJAWohBgNAIAMhBCAGQQFqIQECQCAGLQAAQf8AcSIDQTBrQQlLBEAgASEGDAELQewIKAIAQQJ0QewIaiICKAIAIQADQCACIAMgAEEKbGpBMGsiADYCACABLQAAIQMgAUEBaiIGIQEgA0H/AHEiA0Ewa0EKSQ0ACwsCQAJAAkACQAJAAkACQAJ/AkACQCADQT9rIgBBP00EQCAERQ0BIARBIUYEQAJAQfAIKAIAIgFBASABGyIHIAhqIgFB1AgoAgAiA0gNACADQf//AEoNAANAIANBAnQiAkGgiQJqIgRBoAgpAwA3AwAgAkGoiQJqQaAIKQMANwMAIAJBsIkCakGgCCkDADcDACACQbiJAmpBoAgpAwA3AwAgAkHAiQJqQaAIKQMANwMAIAJByIkCakGgCCkDADcDACACQdCJAmpBoAgpAwA3AwAgAkHYiQJqQaAIKQMANwMAIAJB4IkCakGgCCkDADcDACACQeiJAmpBoAgpAwA3AwAgAkHwiQJqQaAIKQMANwMAIAJB+IkCakGgCCkDADcDACACQYCKAmpBoAgpAwA3AwAgAkGIigJqQaAIKQMANwMAIAJBkIoCakGgCCkDADcDACACQZiKAmpBoAgpAwA3AwAgAkGgigJqQaAIKQMANwMAIAJBqIoCakGgCCkDADcDACACQbCKAmpBoAgpAwA3AwAgAkG4igJqQaAIKQMANwMAIAJBwIoCakGgCCkDADcDACACQciKAmpBoAgpAwA3AwAgAkHQigJqQaAIKQMANwMAIAJB2IoCakGgCCkDADcDACACQeCKAmpBoAgpAwA3AwAgAkHoigJqQaAIKQMANwMAIAJB8IoCakGgCCkDADcDACACQfiKAmpBoAgpAwA3AwAgAkGAiwJqQaAIKQMANwMAIAJBiIsCakGgCCkDADcDACACQZCLAmpBoAgpAwA3AwAgAkGYiwJqQaAIKQMANwMAIAJBoIsCakGgCCkDADcDACACQaiLAmpBoAgpAwA3AwAgAkGwiwJqQaAIKQMANwMAIAJBuIsCakGgCCkDADcDACACQcCLAmpBoAgpAwA3AwAgAkHIiwJqQaAIKQMANwMAIAJB0IsCakGgCCkDADcDACACQdiLAmpBoAgpAwA3AwAgAkHgiwJqQaAIKQMANwMAIAJB6IsCakGgCCkDADcDACACQfCLAmpBoAgpAwA3AwAgAkH4iwJqQaAIKQMANwMAIAJBgIwCakGgCCkDADcDACACQYiMAmpBoAgpAwA3AwAgAkGQjAJqQaAIKQMANwMAIAJBmIwCakGgCCkDADcDACACQaCMAmpBoAgpAwA3AwAgAkGojAJqQaAIKQMANwMAIAJBsIwCakGgCCkDADcDACACQbiMAmpBoAgpAwA3AwAgAkHAjAJqQaAIKQMANwMAIAJByIwCakGgCCkDADcDACACQdCMAmpBoAgpAwA3AwAgAkHYjAJqQaAIKQMANwMAIAJB4IwCakGgCCkDADcDACACQeiMAmpBoAgpAwA3AwAgAkHwjAJqQaAIKQMANwMAIAJB+IwCakGgCCkDADcDACACQYCNAmpBoAgpAwA3AwAgAkGIjQJqQaAIKQMANwMAIAJBkI0CakGgCCkDADcDACACQZiNAmpBoAgpAwA3AwAgAkGwiQZqIARBgAT8CgAAQdQIKAIAQQJ0QcCJCmogBEGABPwKAABB1AgoAgBBAnRB0IkOaiAEQYAE/AoAAEHUCCgCAEECdEHgiRJqIARBgAT8CgAAQdQIKAIAQQJ0QfCJFmogBEGABPwKAABB1AhB1AgoAgAiAkGAAWoiAzYCACABIANIDQEgAkGA/wBIDQALCwJAIABFDQAgCEH//wBLDQBBgIABIAhrIAcgAUH//wBLGyECAkAgAEEBcUUNACACRQ0AIAhBAnRBoIkCaiEDIAIhBCACQQdxIgcEQANAIAMgBTYCACADQQRqIQMgBEEBayEEIAdBAWsiBw0ACwsgAkEBa0EHSQ0AA0AgAyAFNgIcIAMgBTYCGCADIAU2AhQgAyAFNgIQIAMgBTYCDCADIAU2AgggAyAFNgIEIAMgBTYCACADQSBqIQMgBEEIayIEDQALCwJAIABBAnFFDQAgAkUNACAIQQJ0QbCJBmohAyACIQQgAkEHcSIHBEADQCADIAU2AgAgA0EEaiEDIARBAWshBCAHQQFrIgcNAAsLIAJBAWtBB0kNAANAIAMgBTYCHCADIAU2AhggAyAFNgIUIAMgBTYCECADIAU2AgwgAyAFNgIIIAMgBTYCBCADIAU2AgAgA0EgaiEDIARBCGsiBA0ACwsCQCAAQQRxRQ0AIAJFDQAgCEECdEHAiQpqIQMgAiEEIAJBB3EiBwRAA0AgAyAFNgIAIANBBGohAyAEQQFrIQQgB0EBayIHDQALCyACQQFrQQdJDQADQCADIAU2AhwgAyAFNgIYIAMgBTYCFCADIAU2AhAgAyAFNgIMIAMgBTYCCCADIAU2AgQgAyAFNgIAIANBIGohAyAEQQhrIgQNAAsLAkAgAEEIcUUNACACRQ0AIAhBAnRB0IkOaiEDIAIhBCACQQdxIgcEQANAIAMgBTYCACADQQRqIQMgBEEBayEEIAdBAWsiBw0ACwsgAkEBa0EHSQ0AA0AgAyAFNgIcIAMgBTYCGCADIAU2AhQgAyAFNgIQIAMgBTYCDCADIAU2AgggAyAFNgIEIAMgBTYCACADQSBqIQMgBEEIayIEDQALCwJAIABBEHFFDQAgAkUNACAIQQJ0QeCJEmohAyACIQQgAkEHcSIHBEADQCADIAU2AgAgA0EEaiEDIARBAWshBCAHQQFrIgcNAAsLIAJBAWtBB0kNAANAIAMgBTYCHCADIAU2AhggAyAFNgIUIAMgBTYCECADIAU2AgwgAyAFNgIIIAMgBTYCBCADIAU2AgAgA0EgaiEDIARBCGsiBA0ACwsgAEEgcUUNACACRQ0AIAJBAWshByAIQQJ0QfCJFmohAyACQQdxIgQEQANAIAMgBTYCACADQQRqIQMgAkEBayECIARBAWsiBA0ACwsgB0EHSQ0AA0AgAyAFNgIcIAMgBTYCGCADIAU2AhQgAyAFNgIQIAMgBTYCDCADIAU2AgggAyAFNgIEIAMgBTYCACADQSBqIQMgAkEIayICDQALC0HcCEHcCCgCACAAcjYCACAGQQFqIgIgBi0AAEH/AHEiA0E/ayIAQT9LDQQaDAMLAkBB7AgoAgAiBEEBRgRAQfAIKAIAIgNBzAgoAgAiAUkNASADIAFwIQMMAQtB+AgoAgAhAkH0CCgCACEBAkACQCAEQQVHDQAgAUEBRw0AIAJB6QJODQQMAQsgAkHkAEoNA0H8CCgCAEHkAEoNA0GACSgCAEHkAEoNAwsCQCABRQ0AIAFBAkoNACACQfwIKAIAQYAJKAIAIAFBAnRBiAhqKAIAEQIAIQFB8AgoAgAiA0HMCCgCACICTwR/IAMgAnAFIAMLQQJ0QZAJaiABNgIAC0HwCCgCACIDQcwIKAIAIgFJDQAgAyABcCEDCyADQQJ0QZAJaigCACEFDAELIANB/QBxQSFHBEAgCCEBIAYhAgwECyAEQSNHDQQCQEHsCCgCACICQQFGBEBB8AgoAgAiAUHMCCgCACIASQ0BIAEgAHAhAQwBC0H4CCgCACEBQfQIKAIAIQACQAJAIAJBBUcNACAAQQFHDQAgAUHpAkgNAQwHCyABQeQASg0GQfwIKAIAQeQASg0GQYAJKAIAQeQASg0GCwJAIABFDQAgAEECSg0AIAFB/AgoAgBBgAkoAgAgAEECdEGICGooAgARAgAhAEHwCCgCACIBQcwIKAIAIgJPBH8gASACcAUgAQtBAnRBkAlqIAA2AgALQfAIKAIAIgFBzAgoAgAiAEkNACABIABwIQELIAFBAnRBkAlqKAIAIQUMBAsgCCEBIAYhAgtB1AgoAgAhBgNAAkAgASAGSA0AIAZB//8ASg0AIAZBAnQiBEGgiQJqIgZBoAgpAwA3AwAgBEGoiQJqQaAIKQMANwMAIARBsIkCakGgCCkDADcDACAEQbiJAmpBoAgpAwA3AwAgBEHAiQJqQaAIKQMANwMAIARByIkCakGgCCkDADcDACAEQdCJAmpBoAgpAwA3AwAgBEHYiQJqQaAIKQMANwMAIARB4IkCakGgCCkDADcDACAEQeiJAmpBoAgpAwA3AwAgBEHwiQJqQaAIKQMANwMAIARB+IkCakGgCCkDADcDACAEQYCKAmpBoAgpAwA3AwAgBEGIigJqQaAIKQMANwMAIARBkIoCakGgCCkDADcDACAEQZiKAmpBoAgpAwA3AwAgBEGgigJqQaAIKQMANwMAIARBqIoCakGgCCkDADcDACAEQbCKAmpBoAgpAwA3AwAgBEG4igJqQaAIKQMANwMAIARBwIoCakGgCCkDADcDACAEQciKAmpBoAgpAwA3AwAgBEHQigJqQaAIKQMANwMAIARB2IoCakGgCCkDADcDACAEQeCKAmpBoAgpAwA3AwAgBEHoigJqQaAIKQMANwMAIARB8IoCakGgCCkDADcDACAEQfiKAmpBoAgpAwA3AwAgBEGAiwJqQaAIKQMANwMAIARBiIsCakGgCCkDADcDACAEQZCLAmpBoAgpAwA3AwAgBEGYiwJqQaAIKQMANwMAIARBoIsCakGgCCkDADcDACAEQaiLAmpBoAgpAwA3AwAgBEGwiwJqQaAIKQMANwMAIARBuIsCakGgCCkDADcDACAEQcCLAmpBoAgpAwA3AwAgBEHIiwJqQaAIKQMANwMAIARB0IsCakGgCCkDADcDACAEQdiLAmpBoAgpAwA3AwAgBEHgiwJqQaAIKQMANwMAIARB6IsCakGgCCkDADcDACAEQfCLAmpBoAgpAwA3AwAgBEH4iwJqQaAIKQMANwMAIARBgIwCakGgCCkDADcDACAEQYiMAmpBoAgpAwA3AwAgBEGQjAJqQaAIKQMANwMAIARBmIwCakGgCCkDADcDACAEQaCMAmpBoAgpAwA3AwAgBEGojAJqQaAIKQMANwMAIARBsIwCakGgCCkDADcDACAEQbiMAmpBoAgpAwA3AwAgBEHAjAJqQaAIKQMANwMAIARByIwCakGgCCkDADcDACAEQdCMAmpBoAgpAwA3AwAgBEHYjAJqQaAIKQMANwMAIARB4IwCakGgCCkDADcDACAEQeiMAmpBoAgpAwA3AwAgBEHwjAJqQaAIKQMANwMAIARB+IwCakGgCCkDADcDACAEQYCNAmpBoAgpAwA3AwAgBEGIjQJqQaAIKQMANwMAIARBkI0CakGgCCkDADcDACAEQZiNAmpBoAgpAwA3AwAgBEGwiQZqIAZBgAT8CgAAQdQIKAIAQQJ0QcCJCmogBkGABPwKAABB1AgoAgBBAnRB0IkOaiAGQYAE/AoAAEHUCCgCAEECdEHgiRJqIAZBgAT8CgAAQdQIKAIAQQJ0QfCJFmogBkGABPwKAABB1AhB1AgoAgBBgAFqIgY2AgALIAFB//8ATQRAIABBAXEgAWxBAnRBoIkCaiAFNgIAIABBAXZBAXEgAWxBAnRBsIkGaiAFNgIAIABBAnZBAXEgAWxBAnRBwIkKaiAFNgIAIABBA3ZBAXEgAWxBAnRB0IkOaiAFNgIAIABBBHZBAXEgAWxBAnRB4IkSaiAFNgIAIABBBXYgAWxBAnRB8IkWaiAFNgIAQdQIKAIAIQYLIAFBAWohAUHcCEHcCCgCACAAcjYCACACLQAAIQAgAkEBaiIEIQIgAEH/AHEiA0E/ayIAQcAASQ0ACyAECyECQQAhBCACIQYgASEIIANB/QBxQSFGDQELIANBJGsOCgEDAwMDAwMDAwIDC0HsCEIBNwIADAQLQdgIIAFB2AgoAgAiACAAIAFIGyIAQYCAASAAQYCAAUgbNgIADAILQegIIAFB2AgoAgAiACAAIAFIGyIAQYCAASAAQYCAAUgbIgA2AgBB2AggADYCACAAQQRrEAAEQEHoCEEENgIAQdgIQQQ2AgBB0AhBATYCAA8LEAgMAQsCQCADQTtHDQBB7AgoAgAiAEEHSg0AQewIIABBAWo2AgAgAEECdEHwCGpBADYCAAsgAiEGIAQhAyABIQgMAQtBBCEIIAIhBiAEIQMLIAYgCUkNAAsLQeQIIAU2AgBB4AggAzYCAEHoCCAINgIAC9ELAgF+CH9B2AhCBDcDAEGojQJBoAgpAwAiADcDAEGgjQIgADcDAEGYjQIgADcDAEGQjQIgADcDAEGIjQIgADcDAEGAjQIgADcDAEH4jAIgADcDAEHwjAIgADcDAEHojAIgADcDAEHgjAIgADcDAEHYjAIgADcDAEHQjAIgADcDAEHIjAIgADcDAEHAjAIgADcDAEG4jAIgADcDAEGwjAIgADcDAEGojAIgADcDAEGgjAIgADcDAEGYjAIgADcDAEGQjAIgADcDAEGIjAIgADcDAEGAjAIgADcDAEH4iwIgADcDAEHwiwIgADcDAEHoiwIgADcDAEHgiwIgADcDAEHYiwIgADcDAEHQiwIgADcDAEHIiwIgADcDAEHAiwIgADcDAEG4iwIgADcDAEGwiwIgADcDAEGoiwIgADcDAEGgiwIgADcDAEGYiwIgADcDAEGQiwIgADcDAEGIiwIgADcDAEGAiwIgADcDAEH4igIgADcDAEHwigIgADcDAEHoigIgADcDAEHgigIgADcDAEHYigIgADcDAEHQigIgADcDAEHIigIgADcDAEHAigIgADcDAEG4igIgADcDAEGwigIgADcDAEGoigIgADcDAEGgigIgADcDAEGYigIgADcDAEGQigIgADcDAEGIigIgADcDAEGAigIgADcDAEH4iQIgADcDAEHwiQIgADcDAEHoiQIgADcDAEHgiQIgADcDAEHYiQIgADcDAEHQiQIgADcDAEHIiQIgADcDAEHAiQIgADcDAEG4iQIgADcDAEGwiQIgADcDAEGoCCgCACIEQf8AakGAAW0hCAJAIARBgQFIDQBBASEBIAhBAiAIQQJKG0EBayICQQFxIQMgBEGBAk4EQCACQX5xIQIDQCABQQl0IgdBEHJBoIkCakGwiQJBgAT8CgAAIAdBsI0CakGwiQJBgAT8CgAAIAFBAmohASACQQJrIgINAAsLIANFDQAgAUEJdEEQckGgiQJqQbCJAkGABPwKAAALAkAgBEEBSA0AIAhBASAIQQFKGyIDQQFxIQUCQCADQQFrIgdFBEBBACEBDAELIANB/v///wdxIQJBACEBA0AgAUEJdCIGQRByQbCJBmpBsIkCQYAE/AoAACAGQZAEckGwiQZqQbCJAkGABPwKAAAgAUECaiEBIAJBAmsiAg0ACwsgBQRAIAFBCXRBEHJBsIkGakGwiQJBgAT8CgAACyAEQQFIDQAgA0EBcSEFIAcEfyADQf7///8HcSECQQAhAQNAIAFBCXQiBkEQckHAiQpqQbCJAkGABPwKAAAgBkGQBHJBwIkKakGwiQJBgAT8CgAAIAFBAmohASACQQJrIgINAAsgAUEHdEEEcgVBBAshASAFBEAgAUECdEHAiQpqQbCJAkGABPwKAAALIARBAUgNACADQQFxIQUgBwR/IANB/v///wdxIQJBACEBA0AgAUEJdCIGQRByQdCJDmpBsIkCQYAE/AoAACAGQZAEckHQiQ5qQbCJAkGABPwKAAAgAUECaiEBIAJBAmsiAg0ACyABQQd0QQRyBUEECyEBIAUEQCABQQJ0QdCJDmpBsIkCQYAE/AoAAAsgBEEBSA0AIANBAXEhBSAHBH8gA0H+////B3EhAkEAIQEDQCABQQl0IgZBEHJB4IkSakGwiQJBgAT8CgAAIAZBkARyQeCJEmpBsIkCQYAE/AoAACABQQJqIQEgAkECayICDQALIAFBB3RBBHIFQQQLIQEgBQRAIAFBAnRB4IkSakGwiQJBgAT8CgAACyAEQQFIDQAgA0EBcSEEIAcEfyADQf7///8HcSECQQAhAQNAIAFBCXQiA0EQckHwiRZqQbCJAkGABPwKAAAgA0GQBHJB8IkWakGwiQJBgAT8CgAAIAFBAmohASACQQJrIgINAAsgAUEHdEEEcgVBBAshASAERQ0AIAFBAnRB8IkWakGwiQJBgAT8CgAAC0HUCCAIQQd0QQRyNgIAC58TAgh/AX5B5AgoAgAhA0HgCCgCACECQegIKAIAIQcgAUGQiQFqIglB/wE6AAAgACABSARAIABBkIkBaiEIA0AgAiEEIAhBAWohAQJAIAgtAABB/wBxIgJBMGtBCUsEQCABIQgMAQtB7AgoAgBBAnRB7AhqIgUoAgAhAANAIAUgAiAAQQpsakEwayIANgIAIAEtAAAhAiABQQFqIgghASACQf8AcSICQTBrQQpJDQALCwJAAkACQAJAAkACQAJ/AkAgAkE/ayIAQT9NBEAgBEUNASAEQSFGBEBB8AgoAgAiAUEBIAEbIgQgB2ohAQJAIABFDQAgB0H//wBLDQBBgIABIAdrIAQgAUH//wBLGyEFAkAgAEEBcUUNACAHQQJ0QaCJAmohAiAFIgRBB3EiBgRAA0AgAiADNgIAIAJBBGohAiAEQQFrIQQgBkEBayIGDQALCyAFQQFrQQdJDQADQCACIAM2AhwgAiADNgIYIAIgAzYCFCACIAM2AhAgAiADNgIMIAIgAzYCCCACIAM2AgQgAiADNgIAIAJBIGohAiAEQQhrIgQNAAsLAkAgAEECcUUNACAHQQJ0QbCJBmohAiAFIgRBB3EiBgRAA0AgAiADNgIAIAJBBGohAiAEQQFrIQQgBkEBayIGDQALCyAFQQFrQQdJDQADQCACIAM2AhwgAiADNgIYIAIgAzYCFCACIAM2AhAgAiADNgIMIAIgAzYCCCACIAM2AgQgAiADNgIAIAJBIGohAiAEQQhrIgQNAAsLAkAgAEEEcUUNACAHQQJ0QcCJCmohAiAFIgRBB3EiBgRAA0AgAiADNgIAIAJBBGohAiAEQQFrIQQgBkEBayIGDQALCyAFQQFrQQdJDQADQCACIAM2AhwgAiADNgIYIAIgAzYCFCACIAM2AhAgAiADNgIMIAIgAzYCCCACIAM2AgQgAiADNgIAIAJBIGohAiAEQQhrIgQNAAsLAkAgAEEIcUUNACAHQQJ0QdCJDmohAiAFIgRBB3EiBgRAA0AgAiADNgIAIAJBBGohAiAEQQFrIQQgBkEBayIGDQALCyAFQQFrQQdJDQADQCACIAM2AhwgAiADNgIYIAIgAzYCFCACIAM2AhAgAiADNgIMIAIgAzYCCCACIAM2AgQgAiADNgIAIAJBIGohAiAEQQhrIgQNAAsLAkAgAEEQcUUNACAHQQJ0QeCJEmohAiAFIgRBB3EiBgRAA0AgAiADNgIAIAJBBGohAiAEQQFrIQQgBkEBayIGDQALCyAFQQFrQQdJDQADQCACIAM2AhwgAiADNgIYIAIgAzYCFCACIAM2AhAgAiADNgIMIAIgAzYCCCACIAM2AgQgAiADNgIAIAJBIGohAiAEQQhrIgQNAAsLIABBIHFFDQAgBUEBayEEIAdBAnRB8IkWaiEAIAVBB3EiAgRAA0AgACADNgIAIABBBGohACAFQQFrIQUgAkEBayICDQALCyAEQQdJDQADQCAAIAM2AhwgACADNgIYIAAgAzYCFCAAIAM2AhAgACADNgIMIAAgAzYCCCAAIAM2AgQgACADNgIAIABBIGohACAFQQhrIgUNAAsLIAhBAWoiBSAILQAAQf8AcSICQT9rIgBBP00NAxoMBAsCQEHsCCgCACIFQQFGBEBB8AgoAgAiAUHMCCgCACIESQ0BIAEgBHAhAQwBC0H4CCgCACEEQfQIKAIAIQECQAJAIAVBBUcNACABQQFHDQAgBEHpAk4NBAwBCyAEQeQASg0DQfwIKAIAQeQASg0DQYAJKAIAQeQASg0DCwJAIAFFDQAgAUECSg0AIARB/AgoAgBBgAkoAgAgAUECdEGICGooAgARAgAhBEHwCCgCACIBQcwIKAIAIgVPBH8gASAFcAUgAQtBAnRBkAlqIAQ2AgALQfAIKAIAIgFBzAgoAgAiBEkNACABIARwIQELIAFBAnRBkAlqKAIAIQMMAQsgAkH9AHFBIUcEQCAHIQEgAiEADAQLIARBI0cNBAJAQewIKAIAIgRBAUYEQEHwCCgCACIBQcwIKAIAIgBJDQEgASAAcCEBDAELQfgIKAIAIQFB9AgoAgAhAAJAAkAgBEEFRw0AIABBAUcNACABQekCSA0BDAcLIAFB5ABKDQZB/AgoAgBB5ABKDQZBgAkoAgBB5ABKDQYLAkAgAEUNACAAQQJKDQAgAUH8CCgCAEGACSgCACAAQQJ0QYgIaigCABECACEAQfAIKAIAIgFBzAgoAgAiBE8EfyABIARwBSABC0ECdEGQCWogADYCAAtB8AgoAgAiAUHMCCgCACIASQ0AIAEgAHAhAQsgAUECdEGQCWooAgAhAwwECyAHIQEgCAshBQNAIAFB//8ATQRAIABBAXEgAWxBAnRBoIkCaiADNgIAIABBAXZBAXEgAWxBAnRBsIkGaiADNgIAIABBAnZBAXEgAWxBAnRBwIkKaiADNgIAIABBA3ZBAXEgAWxBAnRB0IkOaiADNgIAIABBBHZBAXEgAWxBAnRB4IkSaiADNgIAIABBBXYgAWxBAnRB8IkWaiADNgIACyABQQFqIQEgBS0AACEAIAVBAWoiBCEFIABB/wBxIgJBP2siAEHAAEkNAAsgBCEFC0EAIQQgBSEIIAEhByACIQAgAkH9AHFBIUYNAQtBBCEHIAQhAiAAQSRrDgoDAgICAgICAgIBAgtB7AhCATcCAAwCC0GoCCgCAEEEaxAABEBB0AhBATYCAA8LAkBBqAgoAgAiBkEFSA0AQaAIKQMAIQogBkEDa0EBdiIBQQdxIQJBACEAIAFBAWtBB08EQCABQfj///8HcSEFA0AgAEEDdCIBQbCJAmogCjcDACABQQhyQbCJAmogCjcDACABQRByQbCJAmogCjcDACABQRhyQbCJAmogCjcDACABQSByQbCJAmogCjcDACABQShyQbCJAmogCjcDACABQTByQbCJAmogCjcDACABQThyQbCJAmogCjcDACAAQQhqIQAgBUEIayIFDQALCyACRQ0AA0AgAEEDdEGwiQJqIAo3AwAgAEEBaiEAIAJBAWsiAg0ACwtBwIkGQbCJAiAGQQJ0IgD8CgAAQdCJCkGwiQIgAPwKAABB4IkOQbCJAiAA/AoAAEHwiRJBsIkCIAD8CgAAQYCKFkGwiQIgAPwKAAAgBCECDAELAkAgAEE7Rw0AQewIKAIAIgBBB0oNAEHsCCAAQQFqNgIAIABBAnRB8AhqQQA2AgALIAEhBwsgCCAJSQ0ACwtB5AggAzYCAEHgCCACNgIAQegIIAc2AgAL4gcCBX8BfgJAQdAIAn8CQAJAIAAgAU4NACABQZCJAWohBiAAQZCJAWohBQNAIAUtAAAiA0H/AHEhAgJAAkACQAJAAkACQAJAQeAIKAIAIgRBIkcEQCAEDQcgAkEiRgRAQewIQgE3AgBB4AhBIjYCAAwICyACQT9rQcAASQ0GIANBIWsiAkEMTQ0BDAULAkAgAkEwayIEQQlNBEBB7AgoAgBBAnRB7AhqIgIgBCACKAIAQQpsajYCAAwBC0HsCCgCACEEIAJBO0YEQCAEQQdKDQFB7AggBEEBajYCACAEQQJ0QfAIakEANgIADAELIARBBEYEQEHECEECNgIAQbAIQfAIKQMANwMAQbgIQfgIKAIAIgI2AgBBvAhB/AgoAgAiBDYCAEHICEECQQFBwAgoAgAiAxs2AgBBrAggBEEAIAMbNgIAQagIIAJBgIABIAJBgIABSBtBBGpBACADGzYCAEHgCEEANgIADAoLIAJBP2tBwABJDQQLIANBIWsiAkEMTQ0BDAILQQEgAnRBjSBxRQ0DDAQLQQEgAnRBjSBxDQELIANBoQFrIgJBDEsNA0EBIAJ0QY0gcUUNAwtBxAhCgYCAgBA3AgBBsAhB8AgoAgBBAEHsCCgCACICQQBKGzYCAEG0CEH0CCgCAEEAIAJBAUobNgIAQbgIQfgIKAIAQQAgAkECShs2AgBB4AhBADYCAEG8CEEANgIADAQLIANBoQFrIgJBDEsNAUEBIAJ0QY0gcUUNAQtBxAhCgYCAgBA3AgBBsAhCADcDAEG4CEIANwMADAMLIAVBAWoiBSAGSQ0ACwsCQEHICCgCAA4DAwEAAQsCQEGoCCgCACIFQQVIDQBBoAgpAwAhByAFQQNrQQF2IgNBB3EhBEEAIQIgA0EBa0EHTwRAIANB+P///wdxIQYDQCACQQN0IgNBsIkCaiAHNwMAIANBCHJBsIkCaiAHNwMAIANBEHJBsIkCaiAHNwMAIANBGHJBsIkCaiAHNwMAIANBIHJBsIkCaiAHNwMAIANBKHJBsIkCaiAHNwMAIANBMHJBsIkCaiAHNwMAIANBOHJBsIkCaiAHNwMAIAJBCGohAiAGQQhrIgYNAAsLIARFDQADQCACQQN0QbCJAmogBzcDACACQQFqIQIgBEEBayIEDQALC0HAiQZBsIkCIAVBAnQiA/wKAABB0IkKQbCJAiAD/AoAAEHgiQ5BsIkCIAP8CgAAQfCJEkGwiQIgA/wKAABBgIoWQbCJAiAD/AoAAEECDAELEAhByAgoAgALEAEiAjYCACACDQAgACABQcgIKAIAQQJ0QYAIaigCABEBAAsLdABB6AhBBDYCAEHkCCAANgIAQewIQgE3AgBBxAhCADcCAEHACCADNgIAQdwIQgA3AgBBqAhCADcDAEGwCEIANwMAQbgIQgA3AwBBzAggAkGAICACQYAgSRs2AgBBoAggAa1CgYCAgBB+NwMAQdAIQQA2AgALIwBB0AgoAgBFBEAgACABQcgIKAIAQQJ0QYAIaigCABEBAAsLWgECfwJAAkACQEHICCgCAEEBaw4CAAECC0HYCEHoCCgCACIAQdgIKAIAIgEgACABShsiAEGAgAEgAEGAgAFIGyIANgIAIABBBGsPC0GoCCgCAEEEayEACyAAC0IBAX8Cf0EGQdwIKAIAIgBBIHENABpBBSAAQRBxDQAaQQQgAEEIcQ0AGkEDIABBBHENABpBAiAAQQFxIABBAnEbCwu9BQEFfQJ/IAJFBEAgAUH/AWxBMmpB5ABtIgBBCHQgAHIgAEEQdHIMAQsgArJDAADIQpUhBiAAQfABarJDAAC0Q5UhBQJ9IAGyQwAAyEKVIgNDAAAAP10EQCADIAZDAACAP5KUDAELIAYgA0MAAIA/IAaTlJILIQcgAyADkiEGAkAgBUOrqqo+kiIEQwAAAABdBEAgBEMAAIA/kiEEDAELIARDAACAP15FDQAgBEMAAIC/kiEECyAGIAeTIQMgBUMAAAAAXSEAAn8CfSADIAcgA5NDAADAQJQgBJSSIARDq6oqPl0NABogByAEQwAAAD9dDQAaIAMgBEOrqio/XUUNABogAyAHIAOTIARDAADAwJRDAACAQJKUkgtDAAB/Q5RDAAAAP5IiBkMAAIBPXSAGQwAAAABgcQRAIAapDAELQQALIQECQCAABEAgBUMAAIA/kiEEDAELIAUiBEMAAIA/XkUNACAFQwAAgL+SIQQLIAVDq6qqvpIiBUMAAAAAXSECAn8CfSADIAcgA5NDAADAQJQgBJSSIARDq6oqPl0NABogByAEQwAAAD9dDQAaIAMgBEOrqio/XUUNABogAyAHIAOTIARDAADAwJRDAACAQJKUkgtDAAB/Q5RDAAAAP5IiBkMAAIBPXSAGQwAAAABgcQRAIAapDAELQQALIQACQCACBEAgBUMAAIA/kiEFDAELIAVDAACAP15FDQAgBUMAAIC/kiEFCwJAIAVDq6oqPl0EQCADIAcgA5NDAADAQJQgBZSSIQcMAQsgBUMAAAA/XQ0AIAVDq6oqP11FBEAgAyEHDAELIAMgByADkyAFQwAAwMCUQwAAgECSlJIhBwsgAEEIdAJ/IAdDAAB/Q5RDAAAAP5IiBkMAAIBPXSAGQwAAAABgcQRAIAapDAELQQALQRB0ciABcgtBgICAeHILNwAgAEH/AWxBMmpB5ABtIAFB/wFsQTJqQeQAbUEIdHIgAkH/AWxBMmpB5ABtQRB0ckGAgIB4cgsEACMACwYAIAAkAAsQACMAIABrQXBxIgAkACAACwsYAQBBgAgLEQEAAAACAAAAAwAAAAQAAAAF"
                                }
                            },
                            280: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                });
                                const s = (0, i(615).InWasm)({
                                        s: 1,
                                        t: 0,
                                        d: "AGFzbQEAAAABBQFgAAF/Ag8BA2VudgZtZW1vcnkCAAEDAwIAAAcNAgNkZWMAAANlbmQAAQqxAwKuAQEFf0GIKCgCAEGgKGohAUGEKCgCACIAQYAoKAIAQQFrQXxxIgJIBEAgAkGgKGohAyAAQaAoaiEAA0AgAC0AA0ECdCgCgCAgAC0AAkECdCgCgBggAC0AAUECdCgCgBAgAC0AAEECdCgCgAhycnIiBEH///8HSwRAQQEPCyABIAQ2AgAgAUEDaiEBIABBBGoiACADSQ0ACwtBhCggAjYCAEGIKCABQaAoazYCAEEAC/4BAQZ/AkBBgCgoAgAiAUGEKCgCACIAa0EFTgRAQQEhAxAADQFBgCgoAgAhAUGEKCgCACEAC0EBIQMgASAAayIEQQJIDQAgAEGhKGotAABBAnQoAoAQIABBoChqLQAAQQJ0KAKACHIhAQJAIARBAkYEQEEBIQIMAQtBASECIAAtAKIoIgVBPUcEQEECIQIgBUECdCgCgBggAXIhAQsgBEEERw0AIAAtAKMoIgBBPUYNACACQQFqIQIgAEECdCgCgCAgAXIhAQsgAUH///8HSw0AQYgoKAIAQaAoaiABNgIAQYgoQYgoKAIAIAJqIgA2AgAgAEGQKCgCAEchAwsgAwsAdglwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQEFY2xhbmdWMTguMC4wIChodHRwczovL2dpdGh1Yi5jb20vbGx2bS9sbHZtLXByb2plY3QgZDFlNjg1ZGY0NWRjNTk0NGI0M2QyNTQ3ZDAxMzhjZDRhM2VlNGVmZSkALA90YXJnZXRfZmVhdHVyZXMCKw9tdXRhYmxlLWdsb2JhbHMrCHNpZ24tZXh0"
                                    }),
                                    r = new Uint8Array("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").map((e => e.charCodeAt(0)))),
                                    n = new Uint32Array(1024);
                                n.fill(4278190080);
                                for (let e = 0; e < r.length; ++e) n[r[e]] = e << 2;
                                for (let e = 0; e < r.length; ++e) n[256 + r[e]] = e >> 4 | (e << 4 & 255) << 8;
                                for (let e = 0; e < r.length; ++e) n[512 + r[e]] = e >> 2 << 8 | (e << 6 & 255) << 16;
                                for (let e = 0; e < r.length; ++e) n[768 + r[e]] = e << 16;
                                const o = new Uint8Array(0);
                                t.default = class {
                                    constructor(e) {
                                        this.keepSize = e
                                    }
                                    get data8() {
                                        return this._inst ? this._d.subarray(0, this._m32[1282]) : o
                                    }
                                    release() {
                                        this._inst && (this._mem.buffer.byteLength > this.keepSize ? this._inst = this._m32 = this._d = this._mem = null : (this._m32[1280] = 0, this._m32[1281] = 0, this._m32[1282] = 0))
                                    }
                                    init(e) {
                                        let t = this._m32;
                                        const i = 4 * (Math.ceil(e / 3) + 1288);
                                        this._inst ? this._mem.buffer.byteLength < i && (this._mem.grow(Math.ceil((i - this._mem.buffer.byteLength) / 65536)), t = new Uint32Array(this._mem.buffer, 0), this._d = new Uint8Array(this._mem.buffer, 5152)) : (this._mem = new WebAssembly.Memory({
                                            initial: Math.ceil(i / 65536)
                                        }), this._inst = s({
                                            env: {
                                                memory: this._mem
                                            }
                                        }), t = new Uint32Array(this._mem.buffer, 0), t.set(n, 256), this._d = new Uint8Array(this._mem.buffer, 5152)), t[1284] = e, t[1283] = 4 * Math.ceil(e / 3), t[1280] = 0, t[1281] = 0, t[1282] = 0, this._m32 = t
                                    }
                                    put(e, t, i) {
                                        if (!this._inst) return 1;
                                        const s = this._m32;
                                        return i - t + s[1280] > s[1283] ? 1 : (this._d.set(e.subarray(t, i), s[1280]), s[1280] += i - t, s[1280] - s[1281] >= 131072 ? this._inst.exports.dec() : 0)
                                    }
                                    end() {
                                        return this._inst ? this._inst.exports.end() : 1
                                    }
                                }
                            },
                            125: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.IIPHandler = void 0;
                                const s = i(782),
                                    r = i(216),
                                    n = i(280),
                                    o = i(769),
                                    a = i(326),
                                    h = {
                                        name: "Unnamed file",
                                        size: 0,
                                        width: "auto",
                                        height: "auto",
                                        preserveAspectRatio: 1,
                                        inline: 0
                                    };
                                t.IIPHandler = class {
                                    constructor(e, t, i, s) {
                                        this._opts = e, this._renderer = t, this._storage = i, this._coreTerminal = s, this._aborted = !1, this._hp = new o.HeaderParser, this._header = h, this._dec = new n.default(4194304), this._metrics = a.UNSUPPORTED_TYPE
                                    }
                                    reset() {}
                                    start() {
                                        this._aborted = !1, this._header = h, this._metrics = a.UNSUPPORTED_TYPE, this._hp.reset()
                                    }
                                    put(e, t, i) {
                                        if (!this._aborted)
                                            if (4 === this._hp.state) this._dec.put(e, t, i) && (this._dec.release(), this._aborted = !0);
                                            else {
                                                const s = this._hp.parse(e, t, i);
                                                if (-1 === s) return void(this._aborted = !0);
                                                if (s > 0) {
                                                    if (this._header = Object.assign({}, h, this._hp.fields), !this._header.inline || !this._header.size || this._header.size > this._opts.iipSizeLimit) return void(this._aborted = !0);
                                                    this._dec.init(this._header.size), this._dec.put(e, s, i) && (this._dec.release(), this._aborted = !0)
                                                }
                                            }
                                    }
                                    end(e) {
                                        if (this._aborted) return !0;
                                        let t = 0,
                                            i = 0,
                                            r = !0;
                                        if ((r = e) && (r = !this._dec.end()) && (this._metrics = (0, a.imageType)(this._dec.data8), (r = "unsupported" !== this._metrics.mime) && (t = this._metrics.width, i = this._metrics.height, (r = t && i && t * i < this._opts.pixelLimit) && ([t, i] = this._resize(t, i).map(Math.floor), r = t && i && t * i < this._opts.pixelLimit))), !r) return this._dec.release(), !0;
                                        const n = new Blob([this._dec.data8], {
                                            type: this._metrics.mime
                                        });
                                        if (this._dec.release(), !window.createImageBitmap) {
                                            const e = URL.createObjectURL(n),
                                                r = new Image;
                                            return new Promise((n => {
                                                r.addEventListener("load", (() => {
                                                    var o;
                                                    URL.revokeObjectURL(e);
                                                    const a = s.ImageRenderer.createCanvas(window.document, t, i);
                                                    null === (o = a.getContext("2d")) || void 0 === o || o.drawImage(r, 0, 0, t, i), this._storage.addImage(a), n(!0)
                                                })), r.src = e, setTimeout((() => n(!0)), 1e3)
                                            }))
                                        }
                                        return createImageBitmap(n, {
                                            resizeWidth: t,
                                            resizeHeight: i
                                        }).then((e => (this._storage.addImage(e), !0)))
                                    }
                                    _resize(e, t) {
                                        var i, s, n, o;
                                        const a = (null === (i = this._renderer.dimensions) || void 0 === i ? void 0 : i.css.cell.width) || r.CELL_SIZE_DEFAULT.width,
                                            h = (null === (s = this._renderer.dimensions) || void 0 === s ? void 0 : s.css.cell.height) || r.CELL_SIZE_DEFAULT.height,
                                            l = (null === (n = this._renderer.dimensions) || void 0 === n ? void 0 : n.css.canvas.width) || a * this._coreTerminal.cols,
                                            c = (null === (o = this._renderer.dimensions) || void 0 === o ? void 0 : o.css.canvas.height) || h * this._coreTerminal.rows,
                                            d = this._dim(this._header.width, l, a),
                                            _ = this._dim(this._header.height, c, h);
                                        if (!d && !_) {
                                            const i = l / e,
                                                s = (c - h) / t,
                                                r = Math.min(i, s);
                                            return r < 1 ? [e * r, t * r] : [e, t]
                                        }
                                        return d ? !this._header.preserveAspectRatio && d && _ ? [d, _] : [d, t * d / e] : [e * _ / t, _]
                                    }
                                    _dim(e, t, i) {
                                        return "auto" === e ? 0 : e.endsWith("%") ? parseInt(e.slice(0, -1)) * t / 100 : e.endsWith("px") ? parseInt(e.slice(0, -2)) : parseInt(e) * i
                                    }
                                }
                            },
                            769: (e, t) => {
                                function i(e) {
                                    let t = "";
                                    for (let i = 0; i < e.length; ++i) t += String.fromCharCode(e[i]);
                                    return t
                                }

                                function s(e) {
                                    let t = 0;
                                    for (let i = 0; i < e.length; ++i) {
                                        if (e[i] < 48 || e[i] > 57) throw new Error("illegal char");
                                        t = 10 * t + e[i] - 48
                                    }
                                    return t
                                }

                                function r(e) {
                                    const t = i(e);
                                    if (!t.match(/^((auto)|(\d+?((px)|(%)){0,1}))$/)) throw new Error("illegal size");
                                    return t
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.HeaderParser = void 0;
                                const n = {
                                        inline: s,
                                        size: s,
                                        name: function(e) {
                                            if ("undefined" != typeof Buffer) return Buffer.from(i(e), "base64").toString();
                                            const t = atob(i(e)),
                                                s = new Uint8Array(t.length);
                                            for (let e = 0; e < s.length; ++e) s[e] = t.charCodeAt(e);
                                            return (new TextDecoder).decode(s)
                                        },
                                        width: r,
                                        height: r,
                                        preserveAspectRatio: s
                                    },
                                    o = [70, 105, 108, 101],
                                    a = 1024;
                                t.HeaderParser = class {
                                    constructor() {
                                        this.state = 0, this._buffer = new Uint32Array(a), this._position = 0, this._key = "", this.fields = {}
                                    }
                                    reset() {
                                        this._buffer.fill(0), this.state = 0, this._position = 0, this.fields = {}, this._key = ""
                                    }
                                    parse(e, t, i) {
                                        let s = this.state,
                                            r = this._position;
                                        const n = this._buffer;
                                        if (1 === s || 4 === s) return -1;
                                        if (0 === s && r > 6) return -1;
                                        for (let h = t; h < i; ++h) {
                                            const t = e[h];
                                            switch (t) {
                                                case 59:
                                                    if (!this._storeValue(r)) return this._a();
                                                    s = 2, r = 0;
                                                    break;
                                                case 61:
                                                    if (0 === s) {
                                                        for (let e = 0; e < o.length; ++e)
                                                            if (n[e] !== o[e]) return this._a();
                                                        s = 2, r = 0
                                                    } else if (2 === s) {
                                                        if (!this._storeKey(r)) return this._a();
                                                        s = 3, r = 0
                                                    } else if (3 === s) {
                                                        if (r >= a) return this._a();
                                                        n[r++] = t
                                                    }
                                                    break;
                                                case 58:
                                                    return 3 !== s || this._storeValue(r) ? (this.state = 4, h + 1) : this._a();
                                                default:
                                                    if (r >= a) return this._a();
                                                    n[r++] = t
                                            }
                                        }
                                        return this.state = s, this._position = r, -2
                                    }
                                    _a() {
                                        return this.state = 1, -1
                                    }
                                    _storeKey(e) {
                                        const t = i(this._buffer.subarray(0, e));
                                        return !!t && (this._key = t, this.fields[t] = null, !0)
                                    }
                                    _storeValue(e) {
                                        if (this._key) {
                                            try {
                                                const t = this._buffer.slice(0, e);
                                                this.fields[this._key] = n[this._key] ? n[this._key](t) : t
                                            } catch (e) {
                                                return !1
                                            }
                                            return !0
                                        }
                                        return !1
                                    }
                                }
                            },
                            326: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.imageType = t.UNSUPPORTED_TYPE = void 0, t.UNSUPPORTED_TYPE = {
                                    mime: "unsupported",
                                    width: 0,
                                    height: 0
                                }, t.imageType = function(e) {
                                    if (e.length < 24) return t.UNSUPPORTED_TYPE;
                                    const i = new Uint32Array(e.buffer, e.byteOffset, 6);
                                    if (1196314761 === i[0] && 169478669 === i[1] && 1380206665 === i[3]) return {
                                        mime: "image/png",
                                        width: e[16] << 24 | e[17] << 16 | e[18] << 8 | e[19],
                                        height: e[20] << 24 | e[21] << 16 | e[22] << 8 | e[23]
                                    };
                                    if ((3774863615 === i[0] || 3791640831 === i[0]) && (74 === e[6] && 70 === e[7] && 73 === e[8] && 70 === e[9] || 69 === e[6] && 120 === e[7] && 105 === e[8] && 102 === e[9])) {
                                        const [t, i] = function(e) {
                                            const t = e.length;
                                            let i = 4,
                                                s = e[i] << 8 | e[i + 1];
                                            for (;;) {
                                                if (i += s, i >= t) return [0, 0];
                                                if (255 !== e[i]) return [0, 0];
                                                if (192 === e[i + 1] || 194 === e[i + 1]) return i + 8 < t ? [e[i + 7] << 8 | e[i + 8], e[i + 5] << 8 | e[i + 6]] : [0, 0];
                                                i += 2, s = e[i] << 8 | e[i + 1]
                                            }
                                        }(e);
                                        return {
                                            mime: "image/jpeg",
                                            width: t,
                                            height: i
                                        }
                                    }
                                    return 944130375 !== i[0] || 55 !== e[4] && 57 !== e[4] || 97 !== e[5] ? t.UNSUPPORTED_TYPE : {
                                        mime: "image/gif",
                                        width: e[7] << 8 | e[6],
                                        height: e[9] << 8 | e[8]
                                    }
                                }
                            },
                            782: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ImageRenderer = void 0;
                                const s = i(477),
                                    r = i(859);
                                class n extends r.Disposable {
                                    static createCanvas(e, t, i) {
                                        const s = (e || document).createElement("canvas");
                                        return s.width = 0 | t, s.height = 0 | i, s
                                    }
                                    static createImageData(e, t, i, s) {
                                        if ("function" != typeof ImageData) {
                                            const r = e.createImageData(t, i);
                                            return s && r.data.set(new Uint8ClampedArray(s, 0, t * i * 4)), r
                                        }
                                        return s ? new ImageData(new Uint8ClampedArray(s, 0, t * i * 4), t, i) : new ImageData(t, i)
                                    }
                                    static createImageBitmap(e) {
                                        return "function" != typeof createImageBitmap ? Promise.resolve(void 0) : createImageBitmap(e)
                                    }
                                    constructor(e) {
                                        super(), this._terminal = e, this._optionsRefresh = this.register(new r.MutableDisposable), this._oldOpen = this._terminal._core.open, this._terminal._core.open = e => {
                                            var t;
                                            null === (t = this._oldOpen) || void 0 === t || t.call(this._terminal._core, e), this._open()
                                        }, this._terminal._core.screenElement && this._open(), this._optionsRefresh.value = this._terminal._core.optionsService.onOptionChange((e => {
                                            var t;
                                            "fontSize" === e && (this.rescaleCanvas(), null === (t = this._renderService) || void 0 === t || t.refreshRows(0, this._terminal.rows))
                                        })), this.register((0, r.toDisposable)((() => {
                                            var e;
                                            this.removeLayerFromDom(), this._terminal._core && this._oldOpen && (this._terminal._core.open = this._oldOpen, this._oldOpen = void 0), this._renderService && this._oldSetRenderer && (this._renderService.setRenderer = this._oldSetRenderer, this._oldSetRenderer = void 0), this._renderService = void 0, this.canvas = void 0, this._ctx = void 0, null === (e = this._placeholderBitmap) || void 0 === e || e.close(), this._placeholderBitmap = void 0, this._placeholder = void 0
                                        })))
                                    }
                                    showPlaceholder(e) {
                                        var t, i;
                                        e ? this._placeholder || -1 === this.cellSize.height || this._createPlaceHolder(Math.max(this.cellSize.height + 1, 24)) : (null === (t = this._placeholderBitmap) || void 0 === t || t.close(), this._placeholderBitmap = void 0, this._placeholder = void 0), null === (i = this._renderService) || void 0 === i || i.refreshRows(0, this._terminal.rows)
                                    }
                                    get dimensions() {
                                        var e;
                                        return null === (e = this._renderService) || void 0 === e ? void 0 : e.dimensions
                                    }
                                    get cellSize() {
                                        var e, t;
                                        return {
                                            width: (null === (e = this.dimensions) || void 0 === e ? void 0 : e.css.cell.width) || -1,
                                            height: (null === (t = this.dimensions) || void 0 === t ? void 0 : t.css.cell.height) || -1
                                        }
                                    }
                                    clearLines(e, t) {
                                        var i, s, r, n;
                                        null === (i = this._ctx) || void 0 === i || i.clearRect(0, e * ((null === (s = this.dimensions) || void 0 === s ? void 0 : s.css.cell.height) || 0), (null === (r = this.dimensions) || void 0 === r ? void 0 : r.css.canvas.width) || 0, (++t - e) * ((null === (n = this.dimensions) || void 0 === n ? void 0 : n.css.cell.height) || 0))
                                    }
                                    clearAll() {
                                        var e, t, i;
                                        null === (e = this._ctx) || void 0 === e || e.clearRect(0, 0, (null === (t = this.canvas) || void 0 === t ? void 0 : t.width) || 0, (null === (i = this.canvas) || void 0 === i ? void 0 : i.height) || 0)
                                    }
                                    draw(e, t, i, s, r = 1) {
                                        if (!this._ctx) return;
                                        const {
                                            width: n,
                                            height: o
                                        } = this.cellSize;
                                        if (-1 === n || -1 === o) return;
                                        this._rescaleImage(e, n, o);
                                        const a = e.actual,
                                            h = Math.ceil(a.width / n),
                                            l = t % h * n,
                                            c = Math.floor(t / h) * o,
                                            d = i * n,
                                            _ = s * o,
                                            u = r * n + l > a.width ? a.width - l : r * n,
                                            f = c + o > a.height ? a.height - c : o;
                                        this._ctx.drawImage(a, Math.floor(l), Math.floor(c), Math.ceil(u), Math.ceil(f), Math.floor(d), Math.floor(_), Math.ceil(u), Math.ceil(f))
                                    }
                                    extractTile(e, t) {
                                        const {
                                            width: i,
                                            height: s
                                        } = this.cellSize;
                                        if (-1 === i || -1 === s) return;
                                        this._rescaleImage(e, i, s);
                                        const r = e.actual,
                                            o = Math.ceil(r.width / i),
                                            a = t % o * i,
                                            h = Math.floor(t / o) * s,
                                            l = i + a > r.width ? r.width - a : i,
                                            c = h + s > r.height ? r.height - h : s,
                                            d = n.createCanvas(this.document, l, c),
                                            _ = d.getContext("2d");
                                        return _ ? (_.drawImage(r, Math.floor(a), Math.floor(h), Math.floor(l), Math.floor(c), 0, 0, Math.floor(l), Math.floor(c)), d) : void 0
                                    }
                                    drawPlaceholder(e, t, i = 1) {
                                        if (this._ctx) {
                                            const {
                                                width: s,
                                                height: r
                                            } = this.cellSize;
                                            if (-1 === s || -1 === r) return;
                                            if (this._placeholder ? r >= this._placeholder.height && this._createPlaceHolder(r + 1) : this._createPlaceHolder(Math.max(r + 1, 24)), !this._placeholder) return;
                                            this._ctx.drawImage(this._placeholderBitmap || this._placeholder, e * s, t * r % 2 ? 0 : 1, s * i, r, e * s, t * r, s * i, r)
                                        }
                                    }
                                    rescaleCanvas() {
                                        this.canvas && (this.canvas.width === this.dimensions.css.canvas.width && this.canvas.height === this.dimensions.css.canvas.height || (this.canvas.width = this.dimensions.css.canvas.width || 0, this.canvas.height = this.dimensions.css.canvas.height || 0))
                                    }
                                    _rescaleImage(e, t, i) {
                                        if (t === e.actualCellSize.width && i === e.actualCellSize.height) return;
                                        const {
                                            width: s,
                                            height: r
                                        } = e.origCellSize;
                                        if (t === s && i === r) return e.actual = e.orig, e.actualCellSize.width = s, void(e.actualCellSize.height = r);
                                        const o = n.createCanvas(this.document, Math.ceil(e.orig.width * t / s), Math.ceil(e.orig.height * i / r)),
                                            a = o.getContext("2d");
                                        a && (a.drawImage(e.orig, 0, 0, o.width, o.height), e.actual = o, e.actualCellSize.width = t, e.actualCellSize.height = i)
                                    }
                                    _open() {
                                        this._renderService = this._terminal._core._renderService, this._oldSetRenderer = this._renderService.setRenderer.bind(this._renderService), this._renderService.setRenderer = e => {
                                            var t;
                                            this.removeLayerFromDom(), null === (t = this._oldSetRenderer) || void 0 === t || t.call(this._renderService, e)
                                        }
                                    }
                                    insertLayerToDom() {
                                        var e, t;
                                        this.document && this._terminal._core.screenElement ? this.canvas || (this.canvas = n.createCanvas(this.document, (null === (e = this.dimensions) || void 0 === e ? void 0 : e.css.canvas.width) || 0, (null === (t = this.dimensions) || void 0 === t ? void 0 : t.css.canvas.height) || 0), this.canvas.classList.add("xterm-image-layer"), this._terminal._core.screenElement.appendChild(this.canvas), this._ctx = this.canvas.getContext("2d", {
                                            alpha: !0,
                                            desynchronized: !0
                                        }), this.clearAll()) : console.warn("image addon: cannot insert output canvas to DOM, missing document or screenElement")
                                    }
                                    removeLayerFromDom() {
                                        this.canvas && (this._ctx = void 0, this.canvas.remove(), this.canvas = void 0)
                                    }
                                    _createPlaceHolder(e = 24) {
                                        var t;
                                        null === (t = this._placeholderBitmap) || void 0 === t || t.close(), this._placeholderBitmap = void 0;
                                        const i = 32,
                                            r = n.createCanvas(this.document, i, e),
                                            o = r.getContext("2d", {
                                                alpha: !1
                                            });
                                        if (!o) return;
                                        const a = n.createImageData(o, i, e),
                                            h = new Uint32Array(a.data.buffer),
                                            l = (0, s.toRGBA8888)(0, 0, 0),
                                            c = (0, s.toRGBA8888)(255, 255, 255);
                                        h.fill(l);
                                        for (let t = 0; t < e; ++t) {
                                            const e = t % 2,
                                                s = t * i;
                                            for (let t = 0; t < i; t += 2) h[s + t + e] = c
                                        }
                                        o.putImageData(a, 0, 0);
                                        const d = screen.width + i - 1 & -32 || 4096;
                                        this._placeholder = n.createCanvas(this.document, d, e);
                                        const _ = this._placeholder.getContext("2d", {
                                            alpha: !1
                                        });
                                        if (_) {
                                            for (let e = 0; e < d; e += i) _.drawImage(r, e, 0);
                                            n.createImageBitmap(this._placeholder).then((e => this._placeholderBitmap = e))
                                        } else this._placeholder = void 0
                                    }
                                    get document() {
                                        var e;
                                        return null === (e = this._terminal._core._coreBrowserService) || void 0 === e ? void 0 : e.window.document
                                    }
                                }
                                t.ImageRenderer = n
                            },
                            216: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ImageStorage = t.CELL_SIZE_DEFAULT = void 0;
                                const s = i(782);
                                t.CELL_SIZE_DEFAULT = {
                                    width: 7,
                                    height: 14
                                };
                                class r {
                                    get ext() {
                                        return this._urlId ? -469762049 & this._ext | this.underlineStyle << 26 : this._ext
                                    }
                                    set ext(e) {
                                        this._ext = e
                                    }
                                    get underlineStyle() {
                                        return this._urlId ? 5 : (469762048 & this._ext) >> 26
                                    }
                                    set underlineStyle(e) {
                                        this._ext &= -469762049, this._ext |= e << 26 & 469762048
                                    }
                                    get underlineColor() {
                                        return 67108863 & this._ext
                                    }
                                    set underlineColor(e) {
                                        this._ext &= -67108864, this._ext |= 67108863 & e
                                    }
                                    get underlineVariantOffset() {
                                        const e = (3758096384 & this._ext) >> 29;
                                        return e < 0 ? 4294967288 ^ e : e
                                    }
                                    set underlineVariantOffset(e) {
                                        this._ext &= 536870911, this._ext |= e << 29 & 3758096384
                                    }
                                    get urlId() {
                                        return this._urlId
                                    }
                                    set urlId(e) {
                                        this._urlId = e
                                    }
                                    constructor(e = 0, t = 0, i = -1, s = -1) {
                                        this.imageId = i, this.tileId = s, this._ext = 0, this._urlId = 0, this._ext = e, this._urlId = t
                                    }
                                    clone() {
                                        return new r(this._ext, this._urlId, this.imageId, this.tileId)
                                    }
                                    isEmpty() {
                                        return 0 === this.underlineStyle && 0 === this._urlId && -1 === this.imageId
                                    }
                                }
                                const n = new r;
                                t.ImageStorage = class {
                                    constructor(e, t, i) {
                                        this._terminal = e, this._renderer = t, this._opts = i, this._images = new Map, this._lastId = 0, this._lowestId = 0, this._fullyCleared = !1, this._needsFullClear = !1, this._pixelLimit = 25e5;
                                        try {
                                            this.setLimit(this._opts.storageLimit)
                                        } catch (e) {
                                            console.error(e.message), console.warn(`storageLimit is set to ${this.getLimit()} MB`)
                                        }
                                        this._viewportMetrics = {
                                            cols: this._terminal.cols,
                                            rows: this._terminal.rows
                                        }
                                    }
                                    dispose() {
                                        this.reset()
                                    }
                                    reset() {
                                        var e;
                                        for (const t of this._images.values()) null === (e = t.marker) || void 0 === e || e.dispose();
                                        this._images.clear(), this._renderer.clearAll()
                                    }
                                    getLimit() {
                                        return 4 * this._pixelLimit / 1e6
                                    }
                                    setLimit(e) {
                                        if (e < .5 || e > 1e3) throw RangeError("invalid storageLimit, should be at least 0.5 MB and not exceed 1G");
                                        this._pixelLimit = e / 4 * 1e6 >>> 0, this._evictOldest(0)
                                    }
                                    getUsage() {
                                        return 4 * this._getStoredPixels() / 1e6
                                    }
                                    _getStoredPixels() {
                                        let e = 0;
                                        for (const t of this._images.values()) t.orig && (e += t.orig.width * t.orig.height, t.actual && t.actual !== t.orig && (e += t.actual.width * t.actual.height));
                                        return e
                                    }
                                    _delImg(e) {
                                        const t = this._images.get(e);
                                        this._images.delete(e), t && window.ImageBitmap && t.orig instanceof ImageBitmap && t.orig.close()
                                    }
                                    wipeAlternate() {
                                        var e;
                                        const t = [];
                                        for (const [i, s] of this._images.entries()) "alternate" === s.bufferType && (null === (e = s.marker) || void 0 === e || e.dispose(), t.push(i));
                                        for (const e of t) this._delImg(e);
                                        this._needsFullClear = !0, this._fullyCleared = !1
                                    }
                                    advanceCursor(e) {
                                        if (this._opts.sixelScrolling) {
                                            let i = this._renderer.cellSize; - 1 !== i.width && -1 !== i.height || (i = t.CELL_SIZE_DEFAULT);
                                            const s = Math.ceil(e / i.height);
                                            for (let e = 1; e < s; ++e) this._terminal._core._inputHandler.lineFeed()
                                        }
                                    }
                                    addImage(e) {
                                        var i;
                                        this._evictOldest(e.width * e.height);
                                        let s = this._renderer.cellSize; - 1 !== s.width && -1 !== s.height || (s = t.CELL_SIZE_DEFAULT);
                                        const r = Math.ceil(e.width / s.width),
                                            n = Math.ceil(e.height / s.height),
                                            o = ++this._lastId,
                                            a = this._terminal._core.buffer,
                                            h = this._terminal.cols,
                                            l = this._terminal.rows,
                                            c = a.x,
                                            d = a.y;
                                        let _ = c,
                                            u = 0;
                                        this._opts.sixelScrolling || (a.x = 0, a.y = 0, _ = 0), this._terminal._core._inputHandler._dirtyRowTracker.markDirty(a.y);
                                        for (let e = 0; e < n; ++e) {
                                            const t = a.lines.get(a.y + a.ybase);
                                            for (let i = 0; i < r && !(_ + i >= h); ++i) this._writeToCell(t, _ + i, o, e * r + i), u++;
                                            if (this._opts.sixelScrolling) e < n - 1 && this._terminal._core._inputHandler.lineFeed();
                                            else if (++a.y >= l) break;
                                            a.x = _
                                        }
                                        this._terminal._core._inputHandler._dirtyRowTracker.markDirty(a.y), this._opts.sixelScrolling ? a.x = _ : (a.x = c, a.y = d);
                                        const f = [];
                                        for (const [e, t] of this._images.entries()) t.tileCount < 1 && (null === (i = t.marker) || void 0 === i || i.dispose(), f.push(e));
                                        for (const e of f) this._delImg(e);
                                        const g = this._terminal.registerMarker(0);
                                        null == g || g.onDispose((() => {
                                            this._images.get(o) && this._delImg(o)
                                        })), "alternate" === this._terminal.buffer.active.type && this._evictOnAlternate();
                                        const p = {
                                            orig: e,
                                            origCellSize: s,
                                            actual: e,
                                            actualCellSize: Object.assign({}, s),
                                            marker: g || void 0,
                                            tileCount: u,
                                            bufferType: this._terminal.buffer.active.type
                                        };
                                        this._images.set(o, p)
                                    }
                                    render(e) {
                                        if (!this._renderer.canvas && this._images.size && (this._renderer.insertLayerToDom(), !this._renderer.canvas)) return;
                                        if (this._renderer.rescaleCanvas(), !this._images.size) return this._fullyCleared || (this._renderer.clearAll(), this._fullyCleared = !0, this._needsFullClear = !1), void(this._renderer.canvas && this._renderer.removeLayerFromDom());
                                        this._needsFullClear && (this._renderer.clearAll(), this._fullyCleared = !0, this._needsFullClear = !1);
                                        const {
                                            start: t,
                                            end: i
                                        } = e, s = this._terminal._core.buffer, r = this._terminal._core.cols;
                                        this._renderer.clearLines(t, i);
                                        for (let e = t; e <= i; ++e) {
                                            const t = s.lines.get(e + s.ydisp);
                                            if (!t) return;
                                            for (let i = 0; i < r; ++i)
                                                if (268435456 & t.getBg(i)) {
                                                    let s = t._extendedAttrs[i] || n;
                                                    const o = s.imageId;
                                                    if (void 0 === o || -1 === o) continue;
                                                    const a = this._images.get(o);
                                                    if (-1 !== s.tileId) {
                                                        const h = s.tileId,
                                                            l = i;
                                                        let c = 1;
                                                        for (; ++i < r && 268435456 & t.getBg(i) && (s = t._extendedAttrs[i] || n) && s.imageId === o && s.tileId === h + c;) c++;
                                                        i--, a ? a.actual && this._renderer.draw(a, h, l, e, c) : this._opts.showPlaceholder && this._renderer.drawPlaceholder(l, e, c), this._fullyCleared = !1
                                                    }
                                                }
                                        }
                                    }
                                    viewportResize(e) {
                                        var t;
                                        if (!this._images.size) return void(this._viewportMetrics = e);
                                        if (this._viewportMetrics.cols >= e.cols) return void(this._viewportMetrics = e);
                                        const i = this._terminal._core.buffer,
                                            s = i.lines.length,
                                            r = this._viewportMetrics.cols - 1;
                                        for (let o = 0; o < s; ++o) {
                                            const s = i.lines.get(o);
                                            if (268435456 & s.getBg(r)) {
                                                const i = s._extendedAttrs[r] || n,
                                                    o = i.imageId;
                                                if (void 0 === o || -1 === o) continue;
                                                const a = this._images.get(o);
                                                if (!a) continue;
                                                const h = Math.ceil(((null === (t = a.actual) || void 0 === t ? void 0 : t.width) || 0) / a.actualCellSize.width);
                                                if (i.tileId % h + 1 >= h) continue;
                                                let l = !1;
                                                for (let t = r + 1; t > e.cols; ++t)
                                                    if (4194303 & s._data[3 * t + 0]) {
                                                        l = !0;
                                                        break
                                                    } if (l) continue;
                                                const c = Math.min(e.cols, h - i.tileId % h + r);
                                                let d = i.tileId;
                                                for (let e = r + 1; e < c; ++e) this._writeToCell(s, e, o, ++d), a.tileCount++
                                            }
                                        }
                                        this._viewportMetrics = e
                                    }
                                    getImageAtBufferCell(e, t) {
                                        var i, r;
                                        const o = this._terminal._core.buffer.lines.get(t);
                                        if (o && 268435456 & o.getBg(e)) {
                                            const t = o._extendedAttrs[e] || n;
                                            if (t.imageId && -1 !== t.imageId) {
                                                const e = null === (i = this._images.get(t.imageId)) || void 0 === i ? void 0 : i.orig;
                                                if (window.ImageBitmap && e instanceof ImageBitmap) {
                                                    const t = s.ImageRenderer.createCanvas(window.document, e.width, e.height);
                                                    return null === (r = t.getContext("2d")) || void 0 === r || r.drawImage(e, 0, 0, e.width, e.height), t
                                                }
                                                return e
                                            }
                                        }
                                    }
                                    extractTileAtBufferCell(e, t) {
                                        const i = this._terminal._core.buffer.lines.get(t);
                                        if (i && 268435456 & i.getBg(e)) {
                                            const t = i._extendedAttrs[e] || n;
                                            if (t.imageId && -1 !== t.imageId && -1 !== t.tileId) {
                                                const e = this._images.get(t.imageId);
                                                if (e) return this._renderer.extractTile(e, t.tileId)
                                            }
                                        }
                                    }
                                    _evictOldest(e) {
                                        var t;
                                        const i = this._getStoredPixels();
                                        let s = i;
                                        for (; this._pixelLimit < s + e && this._images.size;) {
                                            const e = this._images.get(++this._lowestId);
                                            e && e.orig && (s -= e.orig.width * e.orig.height, e.actual && e.orig !== e.actual && (s -= e.actual.width * e.actual.height), null === (t = e.marker) || void 0 === t || t.dispose(), this._delImg(this._lowestId))
                                        }
                                        return i - s
                                    }
                                    _writeToCell(e, t, i, s) {
                                        if (268435456 & e._data[3 * t + 2]) {
                                            const n = e._extendedAttrs[t];
                                            if (n) {
                                                if (void 0 !== n.imageId) {
                                                    const e = this._images.get(n.imageId);
                                                    return e && e.tileCount--, n.imageId = i, void(n.tileId = s)
                                                }
                                                return void(e._extendedAttrs[t] = new r(n.ext, n.urlId, i, s))
                                            }
                                        }
                                        e._data[3 * t + 2] |= 268435456, e._extendedAttrs[t] = new r(0, 0, i, s)
                                    }
                                    _evictOnAlternate() {
                                        var e, t;
                                        for (const e of this._images.values()) "alternate" === e.bufferType && (e.tileCount = 0);
                                        const i = this._terminal._core.buffer;
                                        for (let t = 0; t < this._terminal.rows; ++t) {
                                            const s = i.lines.get(t);
                                            if (s)
                                                for (let t = 0; t < this._terminal.cols; ++t)
                                                    if (268435456 & s._data[3 * t + 2]) {
                                                        const i = null === (e = s._extendedAttrs[t]) || void 0 === e ? void 0 : e.imageId;
                                                        if (i) {
                                                            const e = this._images.get(i);
                                                            e && e.tileCount++
                                                        }
                                                    }
                                        }
                                        const s = [];
                                        for (const [e, i] of this._images.entries()) "alternate" !== i.bufferType || i.tileCount || (null === (t = i.marker) || void 0 === t || t.dispose(), s.push(e));
                                        for (const e of s) this._delImg(e)
                                    }
                                }
                            },
                            973: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.SixelHandler = void 0;
                                const s = i(477),
                                    r = i(782),
                                    n = i(710),
                                    o = s.PALETTE_ANSI_256;

                                function a(e) {
                                    return s.BIG_ENDIAN ? e : (255 & e) << 24 | (e >>> 8 & 255) << 16 | (e >>> 16 & 255) << 8 | e >>> 24 & 255
                                }
                                o.set(s.PALETTE_VT340_COLOR), t.SixelHandler = class {
                                    constructor(e, t, i) {
                                        this._opts = e, this._storage = t, this._coreTerminal = i, this._size = 0, this._aborted = !1, (0, n.DecoderAsync)({
                                            memoryLimit: 4 * this._opts.pixelLimit,
                                            palette: o,
                                            paletteLimit: this._opts.sixelPaletteLimit
                                        }).then((e => this._dec = e))
                                    }
                                    reset() {
                                        this._dec && (this._dec.release(), this._dec._palette.fill(0), this._dec.init(0, o, this._opts.sixelPaletteLimit))
                                    }
                                    hook(e) {
                                        var t;
                                        if (this._size = 0, this._aborted = !1, this._dec) {
                                            const i = 1 === e.params[1] ? 0 : function(e, t) {
                                                let i = 0;
                                                if (!t) return i;
                                                if (e.isInverse())
                                                    if (e.isFgDefault()) i = a(t.foreground.rgba);
                                                    else if (e.isFgRGB()) {
                                                    const t = e.constructor.toColorRGB(e.getFgColor());
                                                    i = (0, s.toRGBA8888)(...t)
                                                } else i = a(t.ansi[e.getFgColor()].rgba);
                                                else if (e.isBgDefault()) i = a(t.background.rgba);
                                                else if (e.isBgRGB()) {
                                                    const t = e.constructor.toColorRGB(e.getBgColor());
                                                    i = (0, s.toRGBA8888)(...t)
                                                } else i = a(t.ansi[e.getBgColor()].rgba);
                                                return i
                                            }(this._coreTerminal._core._inputHandler._curAttrData, null === (t = this._coreTerminal._core._themeService) || void 0 === t ? void 0 : t.colors);
                                            this._dec.init(i, null, this._opts.sixelPaletteLimit)
                                        }
                                    }
                                    put(e, t, i) {
                                        if (!this._aborted && this._dec) {
                                            if (this._size += i - t, this._size > this._opts.sixelSizeLimit) return console.warn("SIXEL: too much data, aborting"), this._aborted = !0, void this._dec.release();
                                            try {
                                                this._dec.decode(e, t, i)
                                            } catch (e) {
                                                console.warn(`SIXEL: error while decoding image - ${e}`), this._aborted = !0, this._dec.release()
                                            }
                                        }
                                    }
                                    unhook(e) {
                                        var t;
                                        if (this._aborted || !e || !this._dec) return !0;
                                        const i = this._dec.width,
                                            s = this._dec.height;
                                        if (!i || !s) return s && this._storage.advanceCursor(s), !0;
                                        const n = r.ImageRenderer.createCanvas(void 0, i, s);
                                        return null === (t = n.getContext("2d")) || void 0 === t || t.putImageData(new ImageData(this._dec.data8, i, s), 0, 0), this._dec.memoryUsage > 4194304 && this._dec.release(), this._storage.addImage(n), !0
                                    }
                                }
                            },
                            859: (e, t) => {
                                function i(e) {
                                    for (const t of e) t.dispose();
                                    e.length = 0
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getDisposeArrayDisposable = t.disposeArray = t.toDisposable = t.MutableDisposable = t.Disposable = void 0, t.Disposable = class {
                                    constructor() {
                                        this._disposables = [], this._isDisposed = !1
                                    }
                                    dispose() {
                                        this._isDisposed = !0;
                                        for (const e of this._disposables) e.dispose();
                                        this._disposables.length = 0
                                    }
                                    register(e) {
                                        return this._disposables.push(e), e
                                    }
                                    unregister(e) {
                                        const t = this._disposables.indexOf(e); - 1 !== t && this._disposables.splice(t, 1)
                                    }
                                }, t.MutableDisposable = class {
                                    constructor() {
                                        this._isDisposed = !1
                                    }
                                    get value() {
                                        return this._isDisposed ? void 0 : this._value
                                    }
                                    set value(e) {
                                        this._isDisposed || e === this._value || (this._value?.dispose(), this._value = e)
                                    }
                                    clear() {
                                        this.value = void 0
                                    }
                                    dispose() {
                                        this._isDisposed = !0, this._value?.dispose(), this._value = void 0
                                    }
                                }, t.toDisposable = function(e) {
                                    return {
                                        dispose: e
                                    }
                                }, t.disposeArray = i, t.getDisposeArrayDisposable = function(e) {
                                    return {
                                        dispose: () => i(e)
                                    }
                                }
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s](n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.ImageAddon = void 0;
                        const t = i(125),
                            r = i(782),
                            n = i(216),
                            o = i(973),
                            a = {
                                enableSizeReports: !0,
                                pixelLimit: 16777216,
                                sixelSupport: !0,
                                sixelScrolling: !0,
                                sixelPaletteLimit: 256,
                                sixelSizeLimit: 25e6,
                                storageLimit: 128,
                                showPlaceholder: !0,
                                iipSupport: !0,
                                iipSizeLimit: 2e7
                            };
                        e.ImageAddon = class {
                            constructor(e) {
                                this._disposables = [], this._handlers = new Map, this._opts = Object.assign({}, a, e), this._defaultOpts = Object.assign({}, a, e)
                            }
                            dispose() {
                                for (const e of this._disposables) e.dispose();
                                this._disposables.length = 0, this._handlers.clear()
                            }
                            _disposeLater(...e) {
                                for (const t of e) this._disposables.push(t)
                            }
                            activate(e) {
                                if (this._terminal = e, this._renderer = new r.ImageRenderer(e), this._storage = new n.ImageStorage(e, this._renderer, this._opts), this._opts.enableSizeReports) {
                                    const t = e.options.windowOptions || {};
                                    t.getWinSizePixels = !0, t.getCellSizePixels = !0, t.getWinSizeChars = !0, e.options.windowOptions = t
                                }
                                if (this._disposeLater(this._renderer, this._storage, e.parser.registerCsiHandler({
                                        prefix: "?",
                                        final: "h"
                                    }, (e => this._decset(e))), e.parser.registerCsiHandler({
                                        prefix: "?",
                                        final: "l"
                                    }, (e => this._decrst(e))), e.parser.registerCsiHandler({
                                        final: "c"
                                    }, (e => this._da1(e))), e.parser.registerCsiHandler({
                                        prefix: "?",
                                        final: "S"
                                    }, (e => this._xtermGraphicsAttributes(e))), e.onRender((e => {
                                        var t;
                                        return null === (t = this._storage) || void 0 === t ? void 0 : t.render(e)
                                    })), e.parser.registerCsiHandler({
                                        intermediates: "!",
                                        final: "p"
                                    }, (() => this.reset())), e.parser.registerEscHandler({
                                        final: "c"
                                    }, (() => this.reset())), e._core._inputHandler.onRequestReset((() => this.reset())), e.buffer.onBufferChange((() => {
                                        var e;
                                        return null === (e = this._storage) || void 0 === e ? void 0 : e.wipeAlternate()
                                    })), e.onResize((e => {
                                        var t;
                                        return null === (t = this._storage) || void 0 === t ? void 0 : t.viewportResize(e)
                                    }))), this._opts.sixelSupport) {
                                    const t = new o.SixelHandler(this._opts, this._storage, e);
                                    this._handlers.set("sixel", t), this._disposeLater(e._core._inputHandler._parser.registerDcsHandler({
                                        final: "q"
                                    }, t))
                                }
                                if (this._opts.iipSupport) {
                                    const i = new t.IIPHandler(this._opts, this._renderer, this._storage, e);
                                    this._handlers.set("iip", i), this._disposeLater(e._core._inputHandler._parser.registerOscHandler(1337, i))
                                }
                            }
                            reset() {
                                var e;
                                this._opts.sixelScrolling = this._defaultOpts.sixelScrolling, this._opts.sixelPaletteLimit = this._defaultOpts.sixelPaletteLimit, null === (e = this._storage) || void 0 === e || e.reset();
                                for (const e of this._handlers.values()) e.reset();
                                return !1
                            }
                            get storageLimit() {
                                var e;
                                return (null === (e = this._storage) || void 0 === e ? void 0 : e.getLimit()) || -1
                            }
                            set storageLimit(e) {
                                var t;
                                null === (t = this._storage) || void 0 === t || t.setLimit(e), this._opts.storageLimit = e
                            }
                            get storageUsage() {
                                return this._storage ? this._storage.getUsage() : -1
                            }
                            get showPlaceholder() {
                                return this._opts.showPlaceholder
                            }
                            set showPlaceholder(e) {
                                var t;
                                this._opts.showPlaceholder = e, null === (t = this._renderer) || void 0 === t || t.showPlaceholder(e)
                            }
                            getImageAtBufferCell(e, t) {
                                var i;
                                return null === (i = this._storage) || void 0 === i ? void 0 : i.getImageAtBufferCell(e, t)
                            }
                            extractTileAtBufferCell(e, t) {
                                var i;
                                return null === (i = this._storage) || void 0 === i ? void 0 : i.extractTileAtBufferCell(e, t)
                            }
                            _report(e) {
                                var t;
                                null === (t = this._terminal) || void 0 === t || t._core.coreService.triggerDataEvent(e)
                            }
                            _decset(e) {
                                for (let t = 0; t < e.length; ++t) 80 === e[t] && (this._opts.sixelScrolling = !1);
                                return !1
                            }
                            _decrst(e) {
                                for (let t = 0; t < e.length; ++t) 80 === e[t] && (this._opts.sixelScrolling = !0);
                                return !1
                            }
                            _da1(e) {
                                return !!e[0] || !!this._opts.sixelSupport && (this._report("[?62;4;9;22c"), !0)
                            }
                            _xtermGraphicsAttributes(e) {
                                var t, i, s, r, o, a;
                                if (e.length < 2) return !0;
                                if (1 === e[0]) switch (e[1]) {
                                    case 1:
                                        return this._report(`[?${e[0]};0;${this._opts.sixelPaletteLimit}S`), !0;
                                    case 2:
                                        this._opts.sixelPaletteLimit = this._defaultOpts.sixelPaletteLimit, this._report(`[?${e[0]};0;${this._opts.sixelPaletteLimit}S`);
                                        for (const e of this._handlers.values()) e.reset();
                                        return !0;
                                    case 3:
                                        return e.length > 2 && !(e[2] instanceof Array) && e[2] <= 4096 ? (this._opts.sixelPaletteLimit = e[2], this._report(`[?${e[0]};0;${this._opts.sixelPaletteLimit}S`)) : this._report(`[?${e[0]};2S`), !0;
                                    case 4:
                                        return this._report(`[?${e[0]};0;4096S`), !0;
                                    default:
                                        return this._report(`[?${e[0]};2S`), !0
                                }
                                if (2 === e[0]) switch (e[1]) {
                                    case 1:
                                        let h = null === (i = null === (t = this._renderer) || void 0 === t ? void 0 : t.dimensions) || void 0 === i ? void 0 : i.css.canvas.width,
                                            l = null === (r = null === (s = this._renderer) || void 0 === s ? void 0 : s.dimensions) || void 0 === r ? void 0 : r.css.canvas.height;
                                        if (!h || !l) {
                                            const e = n.CELL_SIZE_DEFAULT;
                                            h = ((null === (o = this._terminal) || void 0 === o ? void 0 : o.cols) || 80) * e.width, l = ((null === (a = this._terminal) || void 0 === a ? void 0 : a.rows) || 24) * e.height
                                        }
                                        if (h * l < this._opts.pixelLimit) this._report(`[?${e[0]};0;${h.toFixed(0)};${l.toFixed(0)}S`);
                                        else {
                                            const t = Math.floor(Math.sqrt(this._opts.pixelLimit));
                                            this._report(`[?${e[0]};0;${t};${t}S`)
                                        }
                                        return !0;
                                    case 4:
                                        const c = Math.floor(Math.sqrt(this._opts.pixelLimit));
                                        return this._report(`[?${e[0]};0;${c};${c}S`), !0;
                                    default:
                                        return this._report(`[?${e[0]};2S`), !0
                                }
                                return this._report(`[?${e[0]};1S`), !0
                            }
                        }
                    })(), s
                })(), e.exports = t()
            },
            716: function(e) {
                var t;
                t = () => (() => {
                    "use strict";
                    var e = {
                            433: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeV11 = void 0;
                                const s = i(938),
                                    r = [
                                        [768, 879],
                                        [1155, 1161],
                                        [1425, 1469],
                                        [1471, 1471],
                                        [1473, 1474],
                                        [1476, 1477],
                                        [1479, 1479],
                                        [1536, 1541],
                                        [1552, 1562],
                                        [1564, 1564],
                                        [1611, 1631],
                                        [1648, 1648],
                                        [1750, 1757],
                                        [1759, 1764],
                                        [1767, 1768],
                                        [1770, 1773],
                                        [1807, 1807],
                                        [1809, 1809],
                                        [1840, 1866],
                                        [1958, 1968],
                                        [2027, 2035],
                                        [2045, 2045],
                                        [2070, 2073],
                                        [2075, 2083],
                                        [2085, 2087],
                                        [2089, 2093],
                                        [2137, 2139],
                                        [2259, 2306],
                                        [2362, 2362],
                                        [2364, 2364],
                                        [2369, 2376],
                                        [2381, 2381],
                                        [2385, 2391],
                                        [2402, 2403],
                                        [2433, 2433],
                                        [2492, 2492],
                                        [2497, 2500],
                                        [2509, 2509],
                                        [2530, 2531],
                                        [2558, 2558],
                                        [2561, 2562],
                                        [2620, 2620],
                                        [2625, 2626],
                                        [2631, 2632],
                                        [2635, 2637],
                                        [2641, 2641],
                                        [2672, 2673],
                                        [2677, 2677],
                                        [2689, 2690],
                                        [2748, 2748],
                                        [2753, 2757],
                                        [2759, 2760],
                                        [2765, 2765],
                                        [2786, 2787],
                                        [2810, 2815],
                                        [2817, 2817],
                                        [2876, 2876],
                                        [2879, 2879],
                                        [2881, 2884],
                                        [2893, 2893],
                                        [2902, 2902],
                                        [2914, 2915],
                                        [2946, 2946],
                                        [3008, 3008],
                                        [3021, 3021],
                                        [3072, 3072],
                                        [3076, 3076],
                                        [3134, 3136],
                                        [3142, 3144],
                                        [3146, 3149],
                                        [3157, 3158],
                                        [3170, 3171],
                                        [3201, 3201],
                                        [3260, 3260],
                                        [3263, 3263],
                                        [3270, 3270],
                                        [3276, 3277],
                                        [3298, 3299],
                                        [3328, 3329],
                                        [3387, 3388],
                                        [3393, 3396],
                                        [3405, 3405],
                                        [3426, 3427],
                                        [3530, 3530],
                                        [3538, 3540],
                                        [3542, 3542],
                                        [3633, 3633],
                                        [3636, 3642],
                                        [3655, 3662],
                                        [3761, 3761],
                                        [3764, 3772],
                                        [3784, 3789],
                                        [3864, 3865],
                                        [3893, 3893],
                                        [3895, 3895],
                                        [3897, 3897],
                                        [3953, 3966],
                                        [3968, 3972],
                                        [3974, 3975],
                                        [3981, 3991],
                                        [3993, 4028],
                                        [4038, 4038],
                                        [4141, 4144],
                                        [4146, 4151],
                                        [4153, 4154],
                                        [4157, 4158],
                                        [4184, 4185],
                                        [4190, 4192],
                                        [4209, 4212],
                                        [4226, 4226],
                                        [4229, 4230],
                                        [4237, 4237],
                                        [4253, 4253],
                                        [4448, 4607],
                                        [4957, 4959],
                                        [5906, 5908],
                                        [5938, 5940],
                                        [5970, 5971],
                                        [6002, 6003],
                                        [6068, 6069],
                                        [6071, 6077],
                                        [6086, 6086],
                                        [6089, 6099],
                                        [6109, 6109],
                                        [6155, 6158],
                                        [6277, 6278],
                                        [6313, 6313],
                                        [6432, 6434],
                                        [6439, 6440],
                                        [6450, 6450],
                                        [6457, 6459],
                                        [6679, 6680],
                                        [6683, 6683],
                                        [6742, 6742],
                                        [6744, 6750],
                                        [6752, 6752],
                                        [6754, 6754],
                                        [6757, 6764],
                                        [6771, 6780],
                                        [6783, 6783],
                                        [6832, 6846],
                                        [6912, 6915],
                                        [6964, 6964],
                                        [6966, 6970],
                                        [6972, 6972],
                                        [6978, 6978],
                                        [7019, 7027],
                                        [7040, 7041],
                                        [7074, 7077],
                                        [7080, 7081],
                                        [7083, 7085],
                                        [7142, 7142],
                                        [7144, 7145],
                                        [7149, 7149],
                                        [7151, 7153],
                                        [7212, 7219],
                                        [7222, 7223],
                                        [7376, 7378],
                                        [7380, 7392],
                                        [7394, 7400],
                                        [7405, 7405],
                                        [7412, 7412],
                                        [7416, 7417],
                                        [7616, 7673],
                                        [7675, 7679],
                                        [8203, 8207],
                                        [8234, 8238],
                                        [8288, 8292],
                                        [8294, 8303],
                                        [8400, 8432],
                                        [11503, 11505],
                                        [11647, 11647],
                                        [11744, 11775],
                                        [12330, 12333],
                                        [12441, 12442],
                                        [42607, 42610],
                                        [42612, 42621],
                                        [42654, 42655],
                                        [42736, 42737],
                                        [43010, 43010],
                                        [43014, 43014],
                                        [43019, 43019],
                                        [43045, 43046],
                                        [43204, 43205],
                                        [43232, 43249],
                                        [43263, 43263],
                                        [43302, 43309],
                                        [43335, 43345],
                                        [43392, 43394],
                                        [43443, 43443],
                                        [43446, 43449],
                                        [43452, 43453],
                                        [43493, 43493],
                                        [43561, 43566],
                                        [43569, 43570],
                                        [43573, 43574],
                                        [43587, 43587],
                                        [43596, 43596],
                                        [43644, 43644],
                                        [43696, 43696],
                                        [43698, 43700],
                                        [43703, 43704],
                                        [43710, 43711],
                                        [43713, 43713],
                                        [43756, 43757],
                                        [43766, 43766],
                                        [44005, 44005],
                                        [44008, 44008],
                                        [44013, 44013],
                                        [64286, 64286],
                                        [65024, 65039],
                                        [65056, 65071],
                                        [65279, 65279],
                                        [65529, 65531]
                                    ],
                                    n = [
                                        [66045, 66045],
                                        [66272, 66272],
                                        [66422, 66426],
                                        [68097, 68099],
                                        [68101, 68102],
                                        [68108, 68111],
                                        [68152, 68154],
                                        [68159, 68159],
                                        [68325, 68326],
                                        [68900, 68903],
                                        [69446, 69456],
                                        [69633, 69633],
                                        [69688, 69702],
                                        [69759, 69761],
                                        [69811, 69814],
                                        [69817, 69818],
                                        [69821, 69821],
                                        [69837, 69837],
                                        [69888, 69890],
                                        [69927, 69931],
                                        [69933, 69940],
                                        [70003, 70003],
                                        [70016, 70017],
                                        [70070, 70078],
                                        [70089, 70092],
                                        [70191, 70193],
                                        [70196, 70196],
                                        [70198, 70199],
                                        [70206, 70206],
                                        [70367, 70367],
                                        [70371, 70378],
                                        [70400, 70401],
                                        [70459, 70460],
                                        [70464, 70464],
                                        [70502, 70508],
                                        [70512, 70516],
                                        [70712, 70719],
                                        [70722, 70724],
                                        [70726, 70726],
                                        [70750, 70750],
                                        [70835, 70840],
                                        [70842, 70842],
                                        [70847, 70848],
                                        [70850, 70851],
                                        [71090, 71093],
                                        [71100, 71101],
                                        [71103, 71104],
                                        [71132, 71133],
                                        [71219, 71226],
                                        [71229, 71229],
                                        [71231, 71232],
                                        [71339, 71339],
                                        [71341, 71341],
                                        [71344, 71349],
                                        [71351, 71351],
                                        [71453, 71455],
                                        [71458, 71461],
                                        [71463, 71467],
                                        [71727, 71735],
                                        [71737, 71738],
                                        [72148, 72151],
                                        [72154, 72155],
                                        [72160, 72160],
                                        [72193, 72202],
                                        [72243, 72248],
                                        [72251, 72254],
                                        [72263, 72263],
                                        [72273, 72278],
                                        [72281, 72283],
                                        [72330, 72342],
                                        [72344, 72345],
                                        [72752, 72758],
                                        [72760, 72765],
                                        [72767, 72767],
                                        [72850, 72871],
                                        [72874, 72880],
                                        [72882, 72883],
                                        [72885, 72886],
                                        [73009, 73014],
                                        [73018, 73018],
                                        [73020, 73021],
                                        [73023, 73029],
                                        [73031, 73031],
                                        [73104, 73105],
                                        [73109, 73109],
                                        [73111, 73111],
                                        [73459, 73460],
                                        [78896, 78904],
                                        [92912, 92916],
                                        [92976, 92982],
                                        [94031, 94031],
                                        [94095, 94098],
                                        [113821, 113822],
                                        [113824, 113827],
                                        [119143, 119145],
                                        [119155, 119170],
                                        [119173, 119179],
                                        [119210, 119213],
                                        [119362, 119364],
                                        [121344, 121398],
                                        [121403, 121452],
                                        [121461, 121461],
                                        [121476, 121476],
                                        [121499, 121503],
                                        [121505, 121519],
                                        [122880, 122886],
                                        [122888, 122904],
                                        [122907, 122913],
                                        [122915, 122916],
                                        [122918, 122922],
                                        [123184, 123190],
                                        [123628, 123631],
                                        [125136, 125142],
                                        [125252, 125258],
                                        [917505, 917505],
                                        [917536, 917631],
                                        [917760, 917999]
                                    ],
                                    o = [
                                        [4352, 4447],
                                        [8986, 8987],
                                        [9001, 9002],
                                        [9193, 9196],
                                        [9200, 9200],
                                        [9203, 9203],
                                        [9725, 9726],
                                        [9748, 9749],
                                        [9800, 9811],
                                        [9855, 9855],
                                        [9875, 9875],
                                        [9889, 9889],
                                        [9898, 9899],
                                        [9917, 9918],
                                        [9924, 9925],
                                        [9934, 9934],
                                        [9940, 9940],
                                        [9962, 9962],
                                        [9970, 9971],
                                        [9973, 9973],
                                        [9978, 9978],
                                        [9981, 9981],
                                        [9989, 9989],
                                        [9994, 9995],
                                        [10024, 10024],
                                        [10060, 10060],
                                        [10062, 10062],
                                        [10067, 10069],
                                        [10071, 10071],
                                        [10133, 10135],
                                        [10160, 10160],
                                        [10175, 10175],
                                        [11035, 11036],
                                        [11088, 11088],
                                        [11093, 11093],
                                        [11904, 11929],
                                        [11931, 12019],
                                        [12032, 12245],
                                        [12272, 12283],
                                        [12288, 12329],
                                        [12334, 12350],
                                        [12353, 12438],
                                        [12443, 12543],
                                        [12549, 12591],
                                        [12593, 12686],
                                        [12688, 12730],
                                        [12736, 12771],
                                        [12784, 12830],
                                        [12832, 12871],
                                        [12880, 19903],
                                        [19968, 42124],
                                        [42128, 42182],
                                        [43360, 43388],
                                        [44032, 55203],
                                        [63744, 64255],
                                        [65040, 65049],
                                        [65072, 65106],
                                        [65108, 65126],
                                        [65128, 65131],
                                        [65281, 65376],
                                        [65504, 65510]
                                    ],
                                    a = [
                                        [94176, 94179],
                                        [94208, 100343],
                                        [100352, 101106],
                                        [110592, 110878],
                                        [110928, 110930],
                                        [110948, 110951],
                                        [110960, 111355],
                                        [126980, 126980],
                                        [127183, 127183],
                                        [127374, 127374],
                                        [127377, 127386],
                                        [127488, 127490],
                                        [127504, 127547],
                                        [127552, 127560],
                                        [127568, 127569],
                                        [127584, 127589],
                                        [127744, 127776],
                                        [127789, 127797],
                                        [127799, 127868],
                                        [127870, 127891],
                                        [127904, 127946],
                                        [127951, 127955],
                                        [127968, 127984],
                                        [127988, 127988],
                                        [127992, 128062],
                                        [128064, 128064],
                                        [128066, 128252],
                                        [128255, 128317],
                                        [128331, 128334],
                                        [128336, 128359],
                                        [128378, 128378],
                                        [128405, 128406],
                                        [128420, 128420],
                                        [128507, 128591],
                                        [128640, 128709],
                                        [128716, 128716],
                                        [128720, 128722],
                                        [128725, 128725],
                                        [128747, 128748],
                                        [128756, 128762],
                                        [128992, 129003],
                                        [129293, 129393],
                                        [129395, 129398],
                                        [129402, 129442],
                                        [129445, 129450],
                                        [129454, 129482],
                                        [129485, 129535],
                                        [129648, 129651],
                                        [129656, 129658],
                                        [129664, 129666],
                                        [129680, 129685],
                                        [131072, 196605],
                                        [196608, 262141]
                                    ];
                                let h;

                                function l(e, t) {
                                    let i, s = 0,
                                        r = t.length - 1;
                                    if (e < t[0][0] || e > t[r][1]) return !1;
                                    for (; r >= s;)
                                        if (i = s + r >> 1, e > t[i][1]) s = i + 1;
                                        else {
                                            if (!(e < t[i][0])) return !0;
                                            r = i - 1
                                        } return !1
                                }
                                t.UnicodeV11 = class {
                                    constructor() {
                                        if (this.version = "11", !h) {
                                            h = new Uint8Array(65536), h.fill(1), h[0] = 0, h.fill(0, 1, 32), h.fill(0, 127, 160);
                                            for (let e = 0; e < r.length; ++e) h.fill(0, r[e][0], r[e][1] + 1);
                                            for (let e = 0; e < o.length; ++e) h.fill(2, o[e][0], o[e][1] + 1)
                                        }
                                    }
                                    wcwidth(e) {
                                        return e < 32 ? 0 : e < 127 ? 1 : e < 65536 ? h[e] : l(e, n) ? 0 : l(e, a) ? 2 : 1
                                    }
                                    charProperties(e, t) {
                                        let i = this.wcwidth(e),
                                            r = 0 === i && 0 !== t;
                                        if (r) {
                                            const e = s.UnicodeService.extractWidth(t);
                                            0 === e ? r = !1 : e > i && (i = e)
                                        }
                                        return s.UnicodeService.createPropertyValue(0, i, r)
                                    }
                                }
                            },
                            345: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.runAndSubscribe = t.forwardEvent = t.EventEmitter = void 0, t.EventEmitter = class {
                                    constructor() {
                                        this._listeners = [], this._disposed = !1
                                    }
                                    get event() {
                                        return this._event || (this._event = e => (this._listeners.push(e), {
                                            dispose: () => {
                                                if (!this._disposed)
                                                    for (let t = 0; t < this._listeners.length; t++)
                                                        if (this._listeners[t] === e) return void this._listeners.splice(t, 1)
                                            }
                                        })), this._event
                                    }
                                    fire(e, t) {
                                        const i = [];
                                        for (let e = 0; e < this._listeners.length; e++) i.push(this._listeners[e]);
                                        for (let s = 0; s < i.length; s++) i[s].call(void 0, e, t)
                                    }
                                    dispose() {
                                        this.clearListeners(), this._disposed = !0
                                    }
                                    clearListeners() {
                                        this._listeners && (this._listeners.length = 0)
                                    }
                                }, t.forwardEvent = function(e, t) {
                                    return e((e => t.fire(e)))
                                }, t.runAndSubscribe = function(e, t) {
                                    return t(void 0), e((e => t(e)))
                                }
                            },
                            490: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeV6 = void 0;
                                const s = i(938),
                                    r = [
                                        [768, 879],
                                        [1155, 1158],
                                        [1160, 1161],
                                        [1425, 1469],
                                        [1471, 1471],
                                        [1473, 1474],
                                        [1476, 1477],
                                        [1479, 1479],
                                        [1536, 1539],
                                        [1552, 1557],
                                        [1611, 1630],
                                        [1648, 1648],
                                        [1750, 1764],
                                        [1767, 1768],
                                        [1770, 1773],
                                        [1807, 1807],
                                        [1809, 1809],
                                        [1840, 1866],
                                        [1958, 1968],
                                        [2027, 2035],
                                        [2305, 2306],
                                        [2364, 2364],
                                        [2369, 2376],
                                        [2381, 2381],
                                        [2385, 2388],
                                        [2402, 2403],
                                        [2433, 2433],
                                        [2492, 2492],
                                        [2497, 2500],
                                        [2509, 2509],
                                        [2530, 2531],
                                        [2561, 2562],
                                        [2620, 2620],
                                        [2625, 2626],
                                        [2631, 2632],
                                        [2635, 2637],
                                        [2672, 2673],
                                        [2689, 2690],
                                        [2748, 2748],
                                        [2753, 2757],
                                        [2759, 2760],
                                        [2765, 2765],
                                        [2786, 2787],
                                        [2817, 2817],
                                        [2876, 2876],
                                        [2879, 2879],
                                        [2881, 2883],
                                        [2893, 2893],
                                        [2902, 2902],
                                        [2946, 2946],
                                        [3008, 3008],
                                        [3021, 3021],
                                        [3134, 3136],
                                        [3142, 3144],
                                        [3146, 3149],
                                        [3157, 3158],
                                        [3260, 3260],
                                        [3263, 3263],
                                        [3270, 3270],
                                        [3276, 3277],
                                        [3298, 3299],
                                        [3393, 3395],
                                        [3405, 3405],
                                        [3530, 3530],
                                        [3538, 3540],
                                        [3542, 3542],
                                        [3633, 3633],
                                        [3636, 3642],
                                        [3655, 3662],
                                        [3761, 3761],
                                        [3764, 3769],
                                        [3771, 3772],
                                        [3784, 3789],
                                        [3864, 3865],
                                        [3893, 3893],
                                        [3895, 3895],
                                        [3897, 3897],
                                        [3953, 3966],
                                        [3968, 3972],
                                        [3974, 3975],
                                        [3984, 3991],
                                        [3993, 4028],
                                        [4038, 4038],
                                        [4141, 4144],
                                        [4146, 4146],
                                        [4150, 4151],
                                        [4153, 4153],
                                        [4184, 4185],
                                        [4448, 4607],
                                        [4959, 4959],
                                        [5906, 5908],
                                        [5938, 5940],
                                        [5970, 5971],
                                        [6002, 6003],
                                        [6068, 6069],
                                        [6071, 6077],
                                        [6086, 6086],
                                        [6089, 6099],
                                        [6109, 6109],
                                        [6155, 6157],
                                        [6313, 6313],
                                        [6432, 6434],
                                        [6439, 6440],
                                        [6450, 6450],
                                        [6457, 6459],
                                        [6679, 6680],
                                        [6912, 6915],
                                        [6964, 6964],
                                        [6966, 6970],
                                        [6972, 6972],
                                        [6978, 6978],
                                        [7019, 7027],
                                        [7616, 7626],
                                        [7678, 7679],
                                        [8203, 8207],
                                        [8234, 8238],
                                        [8288, 8291],
                                        [8298, 8303],
                                        [8400, 8431],
                                        [12330, 12335],
                                        [12441, 12442],
                                        [43014, 43014],
                                        [43019, 43019],
                                        [43045, 43046],
                                        [64286, 64286],
                                        [65024, 65039],
                                        [65056, 65059],
                                        [65279, 65279],
                                        [65529, 65531]
                                    ],
                                    n = [
                                        [68097, 68099],
                                        [68101, 68102],
                                        [68108, 68111],
                                        [68152, 68154],
                                        [68159, 68159],
                                        [119143, 119145],
                                        [119155, 119170],
                                        [119173, 119179],
                                        [119210, 119213],
                                        [119362, 119364],
                                        [917505, 917505],
                                        [917536, 917631],
                                        [917760, 917999]
                                    ];
                                let o;
                                t.UnicodeV6 = class {
                                    constructor() {
                                        if (this.version = "6", !o) {
                                            o = new Uint8Array(65536), o.fill(1), o[0] = 0, o.fill(0, 1, 32), o.fill(0, 127, 160), o.fill(2, 4352, 4448), o[9001] = 2, o[9002] = 2, o.fill(2, 11904, 42192), o[12351] = 1, o.fill(2, 44032, 55204), o.fill(2, 63744, 64256), o.fill(2, 65040, 65050), o.fill(2, 65072, 65136), o.fill(2, 65280, 65377), o.fill(2, 65504, 65511);
                                            for (let e = 0; e < r.length; ++e) o.fill(0, r[e][0], r[e][1] + 1)
                                        }
                                    }
                                    wcwidth(e) {
                                        return e < 32 ? 0 : e < 127 ? 1 : e < 65536 ? o[e] : function(e, t) {
                                            let i, s = 0,
                                                r = t.length - 1;
                                            if (e < t[0][0] || e > t[r][1]) return !1;
                                            for (; r >= s;)
                                                if (i = s + r >> 1, e > t[i][1]) s = i + 1;
                                                else {
                                                    if (!(e < t[i][0])) return !0;
                                                    r = i - 1
                                                } return !1
                                        }(e, n) ? 0 : e >= 131072 && e <= 196605 || e >= 196608 && e <= 262141 ? 2 : 1
                                    }
                                    charProperties(e, t) {
                                        let i = this.wcwidth(e),
                                            r = 0 === i && 0 !== t;
                                        if (r) {
                                            const e = s.UnicodeService.extractWidth(t);
                                            0 === e ? r = !1 : e > i && (i = e)
                                        }
                                        return s.UnicodeService.createPropertyValue(0, i, r)
                                    }
                                }
                            },
                            938: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeService = void 0;
                                const s = i(345),
                                    r = i(490);
                                class n {
                                    static extractShouldJoin(e) {
                                        return 0 != (1 & e)
                                    }
                                    static extractWidth(e) {
                                        return e >> 1 & 3
                                    }
                                    static extractCharKind(e) {
                                        return e >> 3
                                    }
                                    static createPropertyValue(e, t, i = !1) {
                                        return (16777215 & e) << 3 | (3 & t) << 1 | (i ? 1 : 0)
                                    }
                                    constructor() {
                                        this._providers = Object.create(null), this._active = "", this._onChange = new s.EventEmitter, this.onChange = this._onChange.event;
                                        const e = new r.UnicodeV6;
                                        this.register(e), this._active = e.version, this._activeProvider = e
                                    }
                                    dispose() {
                                        this._onChange.dispose()
                                    }
                                    get versions() {
                                        return Object.keys(this._providers)
                                    }
                                    get activeVersion() {
                                        return this._active
                                    }
                                    set activeVersion(e) {
                                        if (!this._providers[e]) throw new Error(`unknown Unicode version "${e}"`);
                                        this._active = e, this._activeProvider = this._providers[e], this._onChange.fire(e)
                                    }
                                    register(e) {
                                        this._providers[e.version] = e
                                    }
                                    wcwidth(e) {
                                        return this._activeProvider.wcwidth(e)
                                    }
                                    getStringCellWidth(e) {
                                        let t = 0,
                                            i = 0;
                                        const s = e.length;
                                        for (let r = 0; r < s; ++r) {
                                            let o = e.charCodeAt(r);
                                            if (55296 <= o && o <= 56319) {
                                                if (++r >= s) return t + this.wcwidth(o);
                                                const i = e.charCodeAt(r);
                                                56320 <= i && i <= 57343 ? o = 1024 * (o - 55296) + i - 56320 + 65536 : t += this.wcwidth(i)
                                            }
                                            const a = this.charProperties(o, i);
                                            let h = n.extractWidth(a);
                                            n.extractShouldJoin(a) && (h -= n.extractWidth(i)), t += h, i = a
                                        }
                                        return t
                                    }
                                    charProperties(e, t) {
                                        return this._activeProvider.charProperties(e, t)
                                    }
                                }
                                t.UnicodeService = n
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s](n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.Unicode11Addon = void 0;
                        const t = i(433);
                        e.Unicode11Addon = class {
                            activate(e) {
                                e.unicode.register(new t.UnicodeV11)
                            }
                            dispose() {}
                        }
                    })(), s
                })(), e.exports = t()
            },
            100: e => {
                var t;
                self, t = () => (() => {
                    "use strict";
                    var e = {
                            6: (e, t) => {
                                function i(e) {
                                    try {
                                        const t = new URL(e),
                                            i = t.password && t.username ? `${t.protocol}//${t.username}:${t.password}@${t.host}` : t.username ? `${t.protocol}//${t.username}@${t.host}` : `${t.protocol}//${t.host}`;
                                        return e.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())
                                    } catch (e) {
                                        return !1
                                    }
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.LinkComputer = t.WebLinkProvider = void 0, t.WebLinkProvider = class {
                                    constructor(e, t, i, s = {}) {
                                        this._terminal = e, this._regex = t, this._handler = i, this._options = s
                                    }
                                    provideLinks(e, t) {
                                        const i = s.computeLink(e, this._regex, this._terminal, this._handler);
                                        t(this._addCallbacks(i))
                                    }
                                    _addCallbacks(e) {
                                        return e.map((e => (e.leave = this._options.leave, e.hover = (t, i) => {
                                            if (this._options.hover) {
                                                const {
                                                    range: s
                                                } = e;
                                                this._options.hover(t, i, s)
                                            }
                                        }, e)))
                                    }
                                };
                                class s {
                                    static computeLink(e, t, r, n) {
                                        const o = new RegExp(t.source, (t.flags || "") + "g"),
                                            [a, h] = s._getWindowedLineStrings(e - 1, r),
                                            l = a.join("");
                                        let c;
                                        const d = [];
                                        for (; c = o.exec(l);) {
                                            const e = c[0];
                                            if (!i(e)) continue;
                                            const [t, o] = s._mapStrIdx(r, h, 0, c.index), [a, l] = s._mapStrIdx(r, t, o, e.length);
                                            if (-1 === t || -1 === o || -1 === a || -1 === l) continue;
                                            const _ = {
                                                start: {
                                                    x: o + 1,
                                                    y: t + 1
                                                },
                                                end: {
                                                    x: l,
                                                    y: a + 1
                                                }
                                            };
                                            d.push({
                                                range: _,
                                                text: e,
                                                activate: n
                                            })
                                        }
                                        return d
                                    }
                                    static _getWindowedLineStrings(e, t) {
                                        let i, s = e,
                                            r = e,
                                            n = 0,
                                            o = "";
                                        const a = [];
                                        if (i = t.buffer.active.getLine(e)) {
                                            const e = i.translateToString(!0);
                                            if (i.isWrapped && " " !== e[0]) {
                                                for (n = 0;
                                                    (i = t.buffer.active.getLine(--s)) && n < 2048 && (o = i.translateToString(!0), n += o.length, a.push(o), i.isWrapped && -1 === o.indexOf(" ")););
                                                a.reverse()
                                            }
                                            for (a.push(e), n = 0;
                                                (i = t.buffer.active.getLine(++r)) && i.isWrapped && n < 2048 && (o = i.translateToString(!0), n += o.length, a.push(o), -1 === o.indexOf(" ")););
                                        }
                                        return [a, s]
                                    }
                                    static _mapStrIdx(e, t, i, s) {
                                        const r = e.buffer.active,
                                            n = r.getNullCell();
                                        let o = i;
                                        for (; s;) {
                                            const e = r.getLine(t);
                                            if (!e) return [-1, -1];
                                            for (let i = o; i < e.length; ++i) {
                                                e.getCell(i, n);
                                                const o = n.getChars();
                                                if (n.getWidth() && (s -= o.length || 1, i === e.length - 1 && "" === o)) {
                                                    const e = r.getLine(t + 1);
                                                    e && e.isWrapped && (e.getCell(0, n), 2 === n.getWidth() && (s += 1))
                                                }
                                                if (s < 0) return [t, i]
                                            }
                                            t++, o = 0
                                        }
                                        return [t, o]
                                    }
                                }
                                t.LinkComputer = s
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s](n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.WebLinksAddon = void 0;
                        const t = i(6),
                            r = /(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;

                        function n(e, t) {
                            const i = window.open();
                            if (i) {
                                try {
                                    i.opener = null
                                } catch {}
                                i.location.href = t
                            } else console.warn("Opening link blocked as opener could not be cleared")
                        }
                        e.WebLinksAddon = class {
                            constructor(e = n, t = {}) {
                                this._handler = e, this._options = t
                            }
                            activate(e) {
                                this._terminal = e;
                                const i = this._options,
                                    s = i.urlRegex || r;
                                this._linkProvider = this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal, s, this._handler, i))
                            }
                            dispose() {
                                this._linkProvider?.dispose()
                            }
                        }
                    })(), s
                })(), e.exports = t()
            },
            768: e => {
                var t;
                self, t = () => (() => {
                    "use strict";
                    var e = {
                            965: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.GlyphRenderer = void 0;
                                const s = i(374),
                                    r = i(509),
                                    n = i(855),
                                    o = i(859),
                                    a = i(381),
                                    h = 11,
                                    l = h * Float32Array.BYTES_PER_ELEMENT;
                                let c, d = 0,
                                    _ = 0,
                                    u = 0;
                                class f extends o.Disposable {
                                    constructor(e, t, i) {
                                        super(), this._terminal = e, this._gl = t, this._dimensions = i, this._activeBuffer = 0, this._vertices = {
                                            count: 0,
                                            attributes: new Float32Array(0),
                                            attributesBuffers: [new Float32Array(0), new Float32Array(0)]
                                        };
                                        const n = this._gl;
                                        void 0 === r.TextureAtlas.maxAtlasPages && (r.TextureAtlas.maxAtlasPages = Math.min(32, (0, s.throwIfFalsy)(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS))), r.TextureAtlas.maxTextureSize = (0, s.throwIfFalsy)(n.getParameter(n.MAX_TEXTURE_SIZE))), this._program = (0, s.throwIfFalsy)((0, a.createProgram)(n, "#version 300 es\nlayout (location = 0) in vec2 a_unitquad;\nlayout (location = 1) in vec2 a_cellpos;\nlayout (location = 2) in vec2 a_offset;\nlayout (location = 3) in vec2 a_size;\nlayout (location = 4) in float a_texpage;\nlayout (location = 5) in vec2 a_texcoord;\nlayout (location = 6) in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\nflat out int v_texpage;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texpage = int(a_texpage);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}", function(e) {
                                            let t = "";
                                            for (let i = 1; i < e; i++) t += ` else if (v_texpage == ${i}) { outColor = texture(u_texture[${i}], v_texcoord); }`;
                                            return `#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\nflat in int v_texpage;\n\nuniform sampler2D u_texture[${e}];\n\nout vec4 outColor;\n\nvoid main() {\n  if (v_texpage == 0) {\n    outColor = texture(u_texture[0], v_texcoord);\n  } ${t}\n}`
                                        }(r.TextureAtlas.maxAtlasPages))), this.register((0, o.toDisposable)((() => n.deleteProgram(this._program)))), this._projectionLocation = (0, s.throwIfFalsy)(n.getUniformLocation(this._program, "u_projection")), this._resolutionLocation = (0, s.throwIfFalsy)(n.getUniformLocation(this._program, "u_resolution")), this._textureLocation = (0, s.throwIfFalsy)(n.getUniformLocation(this._program, "u_texture")), this._vertexArrayObject = n.createVertexArray(), n.bindVertexArray(this._vertexArrayObject);
                                        const h = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
                                            c = n.createBuffer();
                                        this.register((0, o.toDisposable)((() => n.deleteBuffer(c)))), n.bindBuffer(n.ARRAY_BUFFER, c), n.bufferData(n.ARRAY_BUFFER, h, n.STATIC_DRAW), n.enableVertexAttribArray(0), n.vertexAttribPointer(0, 2, this._gl.FLOAT, !1, 0, 0);
                                        const d = new Uint8Array([0, 1, 2, 3]),
                                            _ = n.createBuffer();
                                        this.register((0, o.toDisposable)((() => n.deleteBuffer(_)))), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, _), n.bufferData(n.ELEMENT_ARRAY_BUFFER, d, n.STATIC_DRAW), this._attributesBuffer = (0, s.throwIfFalsy)(n.createBuffer()), this.register((0, o.toDisposable)((() => n.deleteBuffer(this._attributesBuffer)))), n.bindBuffer(n.ARRAY_BUFFER, this._attributesBuffer), n.enableVertexAttribArray(2), n.vertexAttribPointer(2, 2, n.FLOAT, !1, l, 0), n.vertexAttribDivisor(2, 1), n.enableVertexAttribArray(3), n.vertexAttribPointer(3, 2, n.FLOAT, !1, l, 2 * Float32Array.BYTES_PER_ELEMENT), n.vertexAttribDivisor(3, 1), n.enableVertexAttribArray(4), n.vertexAttribPointer(4, 1, n.FLOAT, !1, l, 4 * Float32Array.BYTES_PER_ELEMENT), n.vertexAttribDivisor(4, 1), n.enableVertexAttribArray(5), n.vertexAttribPointer(5, 2, n.FLOAT, !1, l, 5 * Float32Array.BYTES_PER_ELEMENT), n.vertexAttribDivisor(5, 1), n.enableVertexAttribArray(6), n.vertexAttribPointer(6, 2, n.FLOAT, !1, l, 7 * Float32Array.BYTES_PER_ELEMENT), n.vertexAttribDivisor(6, 1), n.enableVertexAttribArray(1), n.vertexAttribPointer(1, 2, n.FLOAT, !1, l, 9 * Float32Array.BYTES_PER_ELEMENT), n.vertexAttribDivisor(1, 1), n.useProgram(this._program);
                                        const u = new Int32Array(r.TextureAtlas.maxAtlasPages);
                                        for (let e = 0; e < r.TextureAtlas.maxAtlasPages; e++) u[e] = e;
                                        n.uniform1iv(this._textureLocation, u), n.uniformMatrix4fv(this._projectionLocation, !1, a.PROJECTION_MATRIX), this._atlasTextures = [];
                                        for (let e = 0; e < r.TextureAtlas.maxAtlasPages; e++) {
                                            const t = new a.GLTexture((0, s.throwIfFalsy)(n.createTexture()));
                                            this.register((0, o.toDisposable)((() => n.deleteTexture(t.texture)))), n.activeTexture(n.TEXTURE0 + e), n.bindTexture(n.TEXTURE_2D, t.texture), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, n.CLAMP_TO_EDGE), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, n.CLAMP_TO_EDGE), n.texImage2D(n.TEXTURE_2D, 0, n.RGBA, 1, 1, 0, n.RGBA, n.UNSIGNED_BYTE, new Uint8Array([255, 0, 0, 255])), this._atlasTextures[e] = t
                                        }
                                        n.enable(n.BLEND), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), this.handleResize()
                                    }
                                    beginFrame() {
                                        return !this._atlas || this._atlas.beginFrame()
                                    }
                                    updateCell(e, t, i, s, r, n, o, a) {
                                        this._updateCell(this._vertices.attributes, e, t, i, s, r, n, o, a)
                                    }
                                    _updateCell(e, t, i, s, r, o, a, l, f) {
                                        d = (i * this._terminal.cols + t) * h, s !== n.NULL_CELL_CODE && void 0 !== s ? this._atlas && (c = l && l.length > 1 ? this._atlas.getRasterizedGlyphCombinedChar(l, r, o, a, !1) : this._atlas.getRasterizedGlyph(s, r, o, a, !1), _ = Math.floor((this._dimensions.device.cell.width - this._dimensions.device.char.width) / 2), r !== f && c.offset.x > _ ? (u = c.offset.x - _, e[d] = -(c.offset.x - u) + this._dimensions.device.char.left, e[d + 1] = -c.offset.y + this._dimensions.device.char.top, e[d + 2] = (c.size.x - u) / this._dimensions.device.canvas.width, e[d + 3] = c.size.y / this._dimensions.device.canvas.height, e[d + 4] = c.texturePage, e[d + 5] = c.texturePositionClipSpace.x + u / this._atlas.pages[c.texturePage].canvas.width, e[d + 6] = c.texturePositionClipSpace.y, e[d + 7] = c.sizeClipSpace.x - u / this._atlas.pages[c.texturePage].canvas.width, e[d + 8] = c.sizeClipSpace.y) : (e[d] = -c.offset.x + this._dimensions.device.char.left, e[d + 1] = -c.offset.y + this._dimensions.device.char.top, e[d + 2] = c.size.x / this._dimensions.device.canvas.width, e[d + 3] = c.size.y / this._dimensions.device.canvas.height, e[d + 4] = c.texturePage, e[d + 5] = c.texturePositionClipSpace.x, e[d + 6] = c.texturePositionClipSpace.y, e[d + 7] = c.sizeClipSpace.x, e[d + 8] = c.sizeClipSpace.y)) : e.fill(0, d, d + h - 1 - 2)
                                    }
                                    clear() {
                                        const e = this._terminal,
                                            t = e.cols * e.rows * h;
                                        this._vertices.count !== t ? this._vertices.attributes = new Float32Array(t) : this._vertices.attributes.fill(0);
                                        let i = 0;
                                        for (; i < this._vertices.attributesBuffers.length; i++) this._vertices.count !== t ? this._vertices.attributesBuffers[i] = new Float32Array(t) : this._vertices.attributesBuffers[i].fill(0);
                                        this._vertices.count = t, i = 0;
                                        for (let t = 0; t < e.rows; t++)
                                            for (let s = 0; s < e.cols; s++) this._vertices.attributes[i + 9] = s / e.cols, this._vertices.attributes[i + 10] = t / e.rows, i += h
                                    }
                                    handleResize() {
                                        const e = this._gl;
                                        e.useProgram(this._program), e.viewport(0, 0, e.canvas.width, e.canvas.height), e.uniform2f(this._resolutionLocation, e.canvas.width, e.canvas.height), this.clear()
                                    }
                                    render(e) {
                                        if (!this._atlas) return;
                                        const t = this._gl;
                                        t.useProgram(this._program), t.bindVertexArray(this._vertexArrayObject), this._activeBuffer = (this._activeBuffer + 1) % 2;
                                        const i = this._vertices.attributesBuffers[this._activeBuffer];
                                        let s = 0;
                                        for (let t = 0; t < e.lineLengths.length; t++) {
                                            const r = t * this._terminal.cols * h,
                                                n = this._vertices.attributes.subarray(r, r + e.lineLengths[t] * h);
                                            i.set(n, s), s += n.length
                                        }
                                        t.bindBuffer(t.ARRAY_BUFFER, this._attributesBuffer), t.bufferData(t.ARRAY_BUFFER, i.subarray(0, s), t.STREAM_DRAW);
                                        for (let e = 0; e < this._atlas.pages.length; e++) this._atlas.pages[e].version !== this._atlasTextures[e].version && this._bindAtlasPageTexture(t, this._atlas, e);
                                        t.drawElementsInstanced(t.TRIANGLE_STRIP, 4, t.UNSIGNED_BYTE, 0, s / h)
                                    }
                                    setAtlas(e) {
                                        this._atlas = e;
                                        for (const e of this._atlasTextures) e.version = -1
                                    }
                                    _bindAtlasPageTexture(e, t, i) {
                                        e.activeTexture(e.TEXTURE0 + i), e.bindTexture(e.TEXTURE_2D, this._atlasTextures[i].texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, t.pages[i].canvas), e.generateMipmap(e.TEXTURE_2D), this._atlasTextures[i].version = t.pages[i].version
                                    }
                                    setDimensions(e) {
                                        this._dimensions = e
                                    }
                                }
                                t.GlyphRenderer = f
                            },
                            742: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.RectangleRenderer = void 0;
                                const s = i(374),
                                    r = i(859),
                                    n = i(310),
                                    o = i(381),
                                    a = 8 * Float32Array.BYTES_PER_ELEMENT;
                                class h {
                                    constructor() {
                                        this.attributes = new Float32Array(160), this.count = 0
                                    }
                                }
                                let l = 0,
                                    c = 0,
                                    d = 0,
                                    _ = 0,
                                    u = 0,
                                    f = 0,
                                    g = 0;
                                class p extends r.Disposable {
                                    constructor(e, t, i, n) {
                                        super(), this._terminal = e, this._gl = t, this._dimensions = i, this._themeService = n, this._vertices = new h, this._verticesCursor = new h;
                                        const l = this._gl;
                                        this._program = (0, s.throwIfFalsy)((0, o.createProgram)(l, "#version 300 es\nlayout (location = 0) in vec2 a_position;\nlayout (location = 1) in vec2 a_size;\nlayout (location = 2) in vec4 a_color;\nlayout (location = 3) in vec2 a_unitquad;\n\nuniform mat4 u_projection;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = a_position + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}", "#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}")), this.register((0, r.toDisposable)((() => l.deleteProgram(this._program)))), this._projectionLocation = (0, s.throwIfFalsy)(l.getUniformLocation(this._program, "u_projection")), this._vertexArrayObject = l.createVertexArray(), l.bindVertexArray(this._vertexArrayObject);
                                        const c = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
                                            d = l.createBuffer();
                                        this.register((0, r.toDisposable)((() => l.deleteBuffer(d)))), l.bindBuffer(l.ARRAY_BUFFER, d), l.bufferData(l.ARRAY_BUFFER, c, l.STATIC_DRAW), l.enableVertexAttribArray(3), l.vertexAttribPointer(3, 2, this._gl.FLOAT, !1, 0, 0);
                                        const _ = new Uint8Array([0, 1, 2, 3]),
                                            u = l.createBuffer();
                                        this.register((0, r.toDisposable)((() => l.deleteBuffer(u)))), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, u), l.bufferData(l.ELEMENT_ARRAY_BUFFER, _, l.STATIC_DRAW), this._attributesBuffer = (0, s.throwIfFalsy)(l.createBuffer()), this.register((0, r.toDisposable)((() => l.deleteBuffer(this._attributesBuffer)))), l.bindBuffer(l.ARRAY_BUFFER, this._attributesBuffer), l.enableVertexAttribArray(0), l.vertexAttribPointer(0, 2, l.FLOAT, !1, a, 0), l.vertexAttribDivisor(0, 1), l.enableVertexAttribArray(1), l.vertexAttribPointer(1, 2, l.FLOAT, !1, a, 2 * Float32Array.BYTES_PER_ELEMENT), l.vertexAttribDivisor(1, 1), l.enableVertexAttribArray(2), l.vertexAttribPointer(2, 4, l.FLOAT, !1, a, 4 * Float32Array.BYTES_PER_ELEMENT), l.vertexAttribDivisor(2, 1), this._updateCachedColors(n.colors), this.register(this._themeService.onChangeColors((e => {
                                            this._updateCachedColors(e), this._updateViewportRectangle()
                                        })))
                                    }
                                    renderBackgrounds() {
                                        this._renderVertices(this._vertices)
                                    }
                                    renderCursor() {
                                        this._renderVertices(this._verticesCursor)
                                    }
                                    _renderVertices(e) {
                                        const t = this._gl;
                                        t.useProgram(this._program), t.bindVertexArray(this._vertexArrayObject), t.uniformMatrix4fv(this._projectionLocation, !1, o.PROJECTION_MATRIX), t.bindBuffer(t.ARRAY_BUFFER, this._attributesBuffer), t.bufferData(t.ARRAY_BUFFER, e.attributes, t.DYNAMIC_DRAW), t.drawElementsInstanced(this._gl.TRIANGLE_STRIP, 4, t.UNSIGNED_BYTE, 0, e.count)
                                    }
                                    handleResize() {
                                        this._updateViewportRectangle()
                                    }
                                    setDimensions(e) {
                                        this._dimensions = e
                                    }
                                    _updateCachedColors(e) {
                                        this._bgFloat = this._colorToFloat32Array(e.background), this._cursorFloat = this._colorToFloat32Array(e.cursor)
                                    }
                                    _updateViewportRectangle() {
                                        this._addRectangleFloat(this._vertices.attributes, 0, 0, 0, this._terminal.cols * this._dimensions.device.cell.width, this._terminal.rows * this._dimensions.device.cell.height, this._bgFloat)
                                    }
                                    updateBackgrounds(e) {
                                        const t = this._terminal,
                                            i = this._vertices;
                                        let s, r, o, a, h, l, c, d, _, u, f, g = 1;
                                        for (s = 0; s < t.rows; s++) {
                                            for (o = -1, a = 0, h = 0, l = !1, r = 0; r < t.cols; r++) c = (s * t.cols + r) * n.RENDER_MODEL_INDICIES_PER_CELL, d = e.cells[c + n.RENDER_MODEL_BG_OFFSET], _ = e.cells[c + n.RENDER_MODEL_FG_OFFSET], u = !!(67108864 & _), (d !== a || _ !== h && (l || u)) && ((0 !== a || l && 0 !== h) && (f = 8 * g++, this._updateRectangle(i, f, h, a, o, r, s)), o = r, a = d, h = _, l = u);
                                            (0 !== a || l && 0 !== h) && (f = 8 * g++, this._updateRectangle(i, f, h, a, o, t.cols, s))
                                        }
                                        i.count = g
                                    }
                                    updateCursor(e) {
                                        const t = this._verticesCursor,
                                            i = e.cursor;
                                        if (!i || "block" === i.style) return void(t.count = 0);
                                        let s, r = 0;
                                        "bar" !== i.style && "outline" !== i.style || (s = 8 * r++, this._addRectangleFloat(t.attributes, s, i.x * this._dimensions.device.cell.width, i.y * this._dimensions.device.cell.height, "bar" === i.style ? i.dpr * i.cursorWidth : i.dpr, this._dimensions.device.cell.height, this._cursorFloat)), "underline" !== i.style && "outline" !== i.style || (s = 8 * r++, this._addRectangleFloat(t.attributes, s, i.x * this._dimensions.device.cell.width, (i.y + 1) * this._dimensions.device.cell.height - i.dpr, i.width * this._dimensions.device.cell.width, i.dpr, this._cursorFloat)), "outline" === i.style && (s = 8 * r++, this._addRectangleFloat(t.attributes, s, i.x * this._dimensions.device.cell.width, i.y * this._dimensions.device.cell.height, i.width * this._dimensions.device.cell.width, i.dpr, this._cursorFloat), s = 8 * r++, this._addRectangleFloat(t.attributes, s, (i.x + i.width) * this._dimensions.device.cell.width - i.dpr, i.y * this._dimensions.device.cell.height, i.dpr, this._dimensions.device.cell.height, this._cursorFloat)), t.count = r
                                    }
                                    _updateRectangle(e, t, i, s, r, n, a) {
                                        if (67108864 & i) switch (50331648 & i) {
                                            case 16777216:
                                            case 33554432:
                                                l = this._themeService.colors.ansi[255 & i].rgba;
                                                break;
                                            case 50331648:
                                                l = (16777215 & i) << 8;
                                                break;
                                            default:
                                                l = this._themeService.colors.foreground.rgba
                                        } else switch (50331648 & s) {
                                            case 16777216:
                                            case 33554432:
                                                l = this._themeService.colors.ansi[255 & s].rgba;
                                                break;
                                            case 50331648:
                                                l = (16777215 & s) << 8;
                                                break;
                                            default:
                                                l = this._themeService.colors.background.rgba
                                        }
                                        e.attributes.length < t + 4 && (e.attributes = (0, o.expandFloat32Array)(e.attributes, this._terminal.rows * this._terminal.cols * 8)), c = r * this._dimensions.device.cell.width, d = a * this._dimensions.device.cell.height, _ = (l >> 24 & 255) / 255, u = (l >> 16 & 255) / 255, f = (l >> 8 & 255) / 255, g = 1, this._addRectangle(e.attributes, t, c, d, (n - r) * this._dimensions.device.cell.width, this._dimensions.device.cell.height, _, u, f, g)
                                    }
                                    _addRectangle(e, t, i, s, r, n, o, a, h, l) {
                                        e[t] = i / this._dimensions.device.canvas.width, e[t + 1] = s / this._dimensions.device.canvas.height, e[t + 2] = r / this._dimensions.device.canvas.width, e[t + 3] = n / this._dimensions.device.canvas.height, e[t + 4] = o, e[t + 5] = a, e[t + 6] = h, e[t + 7] = l
                                    }
                                    _addRectangleFloat(e, t, i, s, r, n, o) {
                                        e[t] = i / this._dimensions.device.canvas.width, e[t + 1] = s / this._dimensions.device.canvas.height, e[t + 2] = r / this._dimensions.device.canvas.width, e[t + 3] = n / this._dimensions.device.canvas.height, e[t + 4] = o[0], e[t + 5] = o[1], e[t + 6] = o[2], e[t + 7] = o[3]
                                    }
                                    _colorToFloat32Array(e) {
                                        return new Float32Array([(e.rgba >> 24 & 255) / 255, (e.rgba >> 16 & 255) / 255, (e.rgba >> 8 & 255) / 255, (255 & e.rgba) / 255])
                                    }
                                }
                                t.RectangleRenderer = p
                            },
                            310: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.RenderModel = t.COMBINED_CHAR_BIT_MASK = t.RENDER_MODEL_EXT_OFFSET = t.RENDER_MODEL_FG_OFFSET = t.RENDER_MODEL_BG_OFFSET = t.RENDER_MODEL_INDICIES_PER_CELL = void 0;
                                const s = i(296);
                                t.RENDER_MODEL_INDICIES_PER_CELL = 4, t.RENDER_MODEL_BG_OFFSET = 1, t.RENDER_MODEL_FG_OFFSET = 2, t.RENDER_MODEL_EXT_OFFSET = 3, t.COMBINED_CHAR_BIT_MASK = 2147483648, t.RenderModel = class {
                                    constructor() {
                                        this.cells = new Uint32Array(0), this.lineLengths = new Uint32Array(0), this.selection = (0, s.createSelectionRenderModel)()
                                    }
                                    resize(e, i) {
                                        const s = e * i * t.RENDER_MODEL_INDICIES_PER_CELL;
                                        s !== this.cells.length && (this.cells = new Uint32Array(s), this.lineLengths = new Uint32Array(i))
                                    }
                                    clear() {
                                        this.cells.fill(0, 0), this.lineLengths.fill(0, 0)
                                    }
                                }
                            },
                            666: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.JoinedCellData = t.WebglRenderer = void 0;
                                const s = i(820),
                                    r = i(274),
                                    n = i(627),
                                    o = i(457),
                                    a = i(56),
                                    h = i(374),
                                    l = i(345),
                                    c = i(859),
                                    d = i(147),
                                    _ = i(782),
                                    u = i(855),
                                    f = i(965),
                                    g = i(742),
                                    p = i(310),
                                    v = i(733);
                                class m extends c.Disposable {
                                    constructor(e, t, i, o, d, u, f, g, m) {
                                        super(), this._terminal = e, this._characterJoinerService = t, this._charSizeService = i, this._coreBrowserService = o, this._coreService = d, this._decorationService = u, this._optionsService = f, this._themeService = g, this._cursorBlinkStateManager = new c.MutableDisposable, this._charAtlasDisposable = this.register(new c.MutableDisposable), this._observerDisposable = this.register(new c.MutableDisposable), this._model = new p.RenderModel, this._workCell = new _.CellData, this._rectangleRenderer = this.register(new c.MutableDisposable), this._glyphRenderer = this.register(new c.MutableDisposable), this._onChangeTextureAtlas = this.register(new l.EventEmitter), this.onChangeTextureAtlas = this._onChangeTextureAtlas.event, this._onAddTextureAtlasCanvas = this.register(new l.EventEmitter), this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event, this._onRemoveTextureAtlasCanvas = this.register(new l.EventEmitter), this.onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event, this._onRequestRedraw = this.register(new l.EventEmitter), this.onRequestRedraw = this._onRequestRedraw.event, this._onContextLoss = this.register(new l.EventEmitter), this.onContextLoss = this._onContextLoss.event, this.register(this._themeService.onChangeColors((() => this._handleColorChange()))), this._cellColorResolver = new r.CellColorResolver(this._terminal, this._optionsService, this._model.selection, this._decorationService, this._coreBrowserService, this._themeService), this._core = this._terminal._core, this._renderLayers = [new v.LinkRenderLayer(this._core.screenElement, 2, this._terminal, this._core.linkifier, this._coreBrowserService, f, this._themeService)], this.dimensions = (0, h.createRenderDimensions)(), this._devicePixelRatio = this._coreBrowserService.dpr, this._updateDimensions(), this._updateCursorBlink(), this.register(f.onOptionChange((() => this._handleOptionsChanged()))), this._canvas = this._coreBrowserService.mainDocument.createElement("canvas");
                                        const A = {
                                            antialias: !1,
                                            depth: !1,
                                            preserveDrawingBuffer: m
                                        };
                                        if (this._gl = this._canvas.getContext("webgl2", A), !this._gl) throw new Error("WebGL2 not supported " + this._gl);
                                        this.register((0, s.addDisposableDomListener)(this._canvas, "webglcontextlost", (e => {
                                            console.log("webglcontextlost event received"), e.preventDefault(), this._contextRestorationTimeout = setTimeout((() => {
                                                this._contextRestorationTimeout = void 0, console.warn("webgl context not restored; firing onContextLoss"), this._onContextLoss.fire(e)
                                            }), 3e3)
                                        }))), this.register((0, s.addDisposableDomListener)(this._canvas, "webglcontextrestored", (e => {
                                            console.warn("webglcontextrestored event received"), clearTimeout(this._contextRestorationTimeout), this._contextRestorationTimeout = void 0, (0, n.removeTerminalFromCache)(this._terminal), this._initializeWebGLState(), this._requestRedrawViewport()
                                        }))), this._observerDisposable.value = (0, a.observeDevicePixelDimensions)(this._canvas, this._coreBrowserService.window, ((e, t) => this._setCanvasDevicePixelDimensions(e, t))), this.register(this._coreBrowserService.onWindowChange((e => {
                                            this._observerDisposable.value = (0, a.observeDevicePixelDimensions)(this._canvas, e, ((e, t) => this._setCanvasDevicePixelDimensions(e, t)))
                                        }))), this._core.screenElement.appendChild(this._canvas), [this._rectangleRenderer.value, this._glyphRenderer.value] = this._initializeWebGLState(), this._isAttached = this._coreBrowserService.window.document.body.contains(this._core.screenElement), this.register((0, c.toDisposable)((() => {
                                            for (const e of this._renderLayers) e.dispose();
                                            this._canvas.parentElement?.removeChild(this._canvas), (0, n.removeTerminalFromCache)(this._terminal)
                                        })))
                                    }
                                    get textureAtlas() {
                                        return this._charAtlas?.pages[0].canvas
                                    }
                                    _handleColorChange() {
                                        this._refreshCharAtlas(), this._clearModel(!0)
                                    }
                                    handleDevicePixelRatioChange() {
                                        this._devicePixelRatio !== this._coreBrowserService.dpr && (this._devicePixelRatio = this._coreBrowserService.dpr, this.handleResize(this._terminal.cols, this._terminal.rows))
                                    }
                                    handleResize(e, t) {
                                        this._updateDimensions(), this._model.resize(this._terminal.cols, this._terminal.rows);
                                        for (const e of this._renderLayers) e.resize(this._terminal, this.dimensions);
                                        this._canvas.width = this.dimensions.device.canvas.width, this._canvas.height = this.dimensions.device.canvas.height, this._canvas.style.width = `${this.dimensions.css.canvas.width}px`, this._canvas.style.height = `${this.dimensions.css.canvas.height}px`, this._core.screenElement.style.width = `${this.dimensions.css.canvas.width}px`, this._core.screenElement.style.height = `${this.dimensions.css.canvas.height}px`, this._rectangleRenderer.value?.setDimensions(this.dimensions), this._rectangleRenderer.value?.handleResize(), this._glyphRenderer.value?.setDimensions(this.dimensions), this._glyphRenderer.value?.handleResize(), this._refreshCharAtlas(), this._clearModel(!1)
                                    }
                                    handleCharSizeChanged() {
                                        this.handleResize(this._terminal.cols, this._terminal.rows)
                                    }
                                    handleBlur() {
                                        for (const e of this._renderLayers) e.handleBlur(this._terminal);
                                        this._cursorBlinkStateManager.value?.pause(), this._requestRedrawViewport()
                                    }
                                    handleFocus() {
                                        for (const e of this._renderLayers) e.handleFocus(this._terminal);
                                        this._cursorBlinkStateManager.value?.resume(), this._requestRedrawViewport()
                                    }
                                    handleSelectionChanged(e, t, i) {
                                        for (const s of this._renderLayers) s.handleSelectionChanged(this._terminal, e, t, i);
                                        this._model.selection.update(this._core, e, t, i), this._requestRedrawViewport()
                                    }
                                    handleCursorMove() {
                                        for (const e of this._renderLayers) e.handleCursorMove(this._terminal);
                                        this._cursorBlinkStateManager.value?.restartBlinkAnimation()
                                    }
                                    _handleOptionsChanged() {
                                        this._updateDimensions(), this._refreshCharAtlas(), this._updateCursorBlink()
                                    }
                                    _initializeWebGLState() {
                                        return this._rectangleRenderer.value = new g.RectangleRenderer(this._terminal, this._gl, this.dimensions, this._themeService), this._glyphRenderer.value = new f.GlyphRenderer(this._terminal, this._gl, this.dimensions), this.handleCharSizeChanged(), [this._rectangleRenderer.value, this._glyphRenderer.value]
                                    }
                                    _refreshCharAtlas() {
                                        if (this.dimensions.device.char.width <= 0 && this.dimensions.device.char.height <= 0) return void(this._isAttached = !1);
                                        const e = (0, n.acquireTextureAtlas)(this._terminal, this._optionsService.rawOptions, this._themeService.colors, this.dimensions.device.cell.width, this.dimensions.device.cell.height, this.dimensions.device.char.width, this.dimensions.device.char.height, this._coreBrowserService.dpr);
                                        this._charAtlas !== e && (this._onChangeTextureAtlas.fire(e.pages[0].canvas), this._charAtlasDisposable.value = (0, c.getDisposeArrayDisposable)([(0, l.forwardEvent)(e.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas), (0, l.forwardEvent)(e.onRemoveTextureAtlasCanvas, this._onRemoveTextureAtlasCanvas)])), this._charAtlas = e, this._charAtlas.warmUp(), this._glyphRenderer.value?.setAtlas(this._charAtlas)
                                    }
                                    _clearModel(e) {
                                        this._model.clear(), e && this._glyphRenderer.value?.clear()
                                    }
                                    clearTextureAtlas() {
                                        this._charAtlas?.clearTexture(), this._clearModel(!0), this._requestRedrawViewport()
                                    }
                                    clear() {
                                        this._clearModel(!0);
                                        for (const e of this._renderLayers) e.reset(this._terminal);
                                        this._cursorBlinkStateManager.value?.restartBlinkAnimation(), this._updateCursorBlink()
                                    }
                                    registerCharacterJoiner(e) {
                                        return -1
                                    }
                                    deregisterCharacterJoiner(e) {
                                        return !1
                                    }
                                    renderRows(e, t) {
                                        if (!this._isAttached) {
                                            if (!(this._coreBrowserService.window.document.body.contains(this._core.screenElement) && this._charSizeService.width && this._charSizeService.height)) return;
                                            this._updateDimensions(), this._refreshCharAtlas(), this._isAttached = !0
                                        }
                                        for (const i of this._renderLayers) i.handleGridChanged(this._terminal, e, t);
                                        this._glyphRenderer.value && this._rectangleRenderer.value && (this._glyphRenderer.value.beginFrame() ? (this._clearModel(!0), this._updateModel(0, this._terminal.rows - 1)) : this._updateModel(e, t), this._rectangleRenderer.value.renderBackgrounds(), this._glyphRenderer.value.render(this._model), this._cursorBlinkStateManager.value && !this._cursorBlinkStateManager.value.isCursorVisible || this._rectangleRenderer.value.renderCursor())
                                    }
                                    _updateCursorBlink() {
                                        this._terminal.options.cursorBlink ? this._cursorBlinkStateManager.value = new o.CursorBlinkStateManager((() => {
                                            this._requestRedrawCursor()
                                        }), this._coreBrowserService) : this._cursorBlinkStateManager.clear(), this._requestRedrawCursor()
                                    }
                                    _updateModel(e, t) {
                                        const i = this._core;
                                        let s, r, n, o, a, h, l, c, d, _, f, g, v, m = this._workCell;
                                        e = C(e, i.rows - 1, 0), t = C(t, i.rows - 1, 0);
                                        const w = this._terminal.buffer.active.baseY + this._terminal.buffer.active.cursorY,
                                            b = w - i.buffer.ydisp,
                                            y = Math.min(this._terminal.buffer.active.cursorX, i.cols - 1);
                                        let S = -1;
                                        const E = this._coreService.isCursorInitialized && !this._coreService.isCursorHidden && (!this._cursorBlinkStateManager.value || this._cursorBlinkStateManager.value.isCursorVisible);
                                        this._model.cursor = void 0;
                                        let x = !1;
                                        for (r = e; r <= t; r++)
                                            for (n = r + i.buffer.ydisp, o = i.buffer.lines.get(n), this._model.lineLengths[r] = 0, a = this._characterJoinerService.getJoinedCharacters(n), g = 0; g < i.cols; g++)
                                                if (s = this._cellColorResolver.result.bg, o.loadCell(g, m), 0 === g && (s = this._cellColorResolver.result.bg), h = !1, l = g, a.length > 0 && g === a[0][0] && (h = !0, c = a.shift(), m = new A(m, o.translateToString(!0, c[0], c[1]), c[1] - c[0]), l = c[1] - 1), d = m.getChars(), _ = m.getCode(), f = (r * i.cols + g) * p.RENDER_MODEL_INDICIES_PER_CELL, this._cellColorResolver.resolve(m, g, n, this.dimensions.device.cell.width), E && n === w && (g === y && (this._model.cursor = {
                                                        x: y,
                                                        y: b,
                                                        width: m.getWidth(),
                                                        style: this._coreBrowserService.isFocused ? i.options.cursorStyle || "block" : i.options.cursorInactiveStyle,
                                                        cursorWidth: i.options.cursorWidth,
                                                        dpr: this._devicePixelRatio
                                                    }, S = y + m.getWidth() - 1), g >= y && g <= S && (this._coreBrowserService.isFocused && "block" === (i.options.cursorStyle || "block") || !1 === this._coreBrowserService.isFocused && "block" === i.options.cursorInactiveStyle) && (this._cellColorResolver.result.fg = 50331648 | this._themeService.colors.cursorAccent.rgba >> 8 & 16777215, this._cellColorResolver.result.bg = 50331648 | this._themeService.colors.cursor.rgba >> 8 & 16777215)), _ !== u.NULL_CELL_CODE && (this._model.lineLengths[r] = g + 1), (this._model.cells[f] !== _ || this._model.cells[f + p.RENDER_MODEL_BG_OFFSET] !== this._cellColorResolver.result.bg || this._model.cells[f + p.RENDER_MODEL_FG_OFFSET] !== this._cellColorResolver.result.fg || this._model.cells[f + p.RENDER_MODEL_EXT_OFFSET] !== this._cellColorResolver.result.ext) && (x = !0, d.length > 1 && (_ |= p.COMBINED_CHAR_BIT_MASK), this._model.cells[f] = _, this._model.cells[f + p.RENDER_MODEL_BG_OFFSET] = this._cellColorResolver.result.bg, this._model.cells[f + p.RENDER_MODEL_FG_OFFSET] = this._cellColorResolver.result.fg, this._model.cells[f + p.RENDER_MODEL_EXT_OFFSET] = this._cellColorResolver.result.ext, this._glyphRenderer.value.updateCell(g, r, _, this._cellColorResolver.result.bg, this._cellColorResolver.result.fg, this._cellColorResolver.result.ext, d, s), h))
                                                    for (m = this._workCell, g++; g < l; g++) v = (r * i.cols + g) * p.RENDER_MODEL_INDICIES_PER_CELL, this._glyphRenderer.value.updateCell(g, r, u.NULL_CELL_CODE, 0, 0, 0, u.NULL_CELL_CHAR, 0), this._model.cells[v] = u.NULL_CELL_CODE, this._model.cells[v + p.RENDER_MODEL_BG_OFFSET] = this._cellColorResolver.result.bg, this._model.cells[v + p.RENDER_MODEL_FG_OFFSET] = this._cellColorResolver.result.fg, this._model.cells[v + p.RENDER_MODEL_EXT_OFFSET] = this._cellColorResolver.result.ext;
                                        x && this._rectangleRenderer.value.updateBackgrounds(this._model), this._rectangleRenderer.value.updateCursor(this._model)
                                    }
                                    _updateDimensions() {
                                        this._charSizeService.width && this._charSizeService.height && (this.dimensions.device.char.width = Math.floor(this._charSizeService.width * this._devicePixelRatio), this.dimensions.device.char.height = Math.ceil(this._charSizeService.height * this._devicePixelRatio), this.dimensions.device.cell.height = Math.floor(this.dimensions.device.char.height * this._optionsService.rawOptions.lineHeight), this.dimensions.device.char.top = 1 === this._optionsService.rawOptions.lineHeight ? 0 : Math.round((this.dimensions.device.cell.height - this.dimensions.device.char.height) / 2), this.dimensions.device.cell.width = this.dimensions.device.char.width + Math.round(this._optionsService.rawOptions.letterSpacing), this.dimensions.device.char.left = Math.floor(this._optionsService.rawOptions.letterSpacing / 2), this.dimensions.device.canvas.height = this._terminal.rows * this.dimensions.device.cell.height, this.dimensions.device.canvas.width = this._terminal.cols * this.dimensions.device.cell.width, this.dimensions.css.canvas.height = Math.round(this.dimensions.device.canvas.height / this._devicePixelRatio), this.dimensions.css.canvas.width = Math.round(this.dimensions.device.canvas.width / this._devicePixelRatio), this.dimensions.css.cell.height = this.dimensions.device.cell.height / this._devicePixelRatio, this.dimensions.css.cell.width = this.dimensions.device.cell.width / this._devicePixelRatio)
                                    }
                                    _setCanvasDevicePixelDimensions(e, t) {
                                        this._canvas.width === e && this._canvas.height === t || (this._canvas.width = e, this._canvas.height = t, this._requestRedrawViewport())
                                    }
                                    _requestRedrawViewport() {
                                        this._onRequestRedraw.fire({
                                            start: 0,
                                            end: this._terminal.rows - 1
                                        })
                                    }
                                    _requestRedrawCursor() {
                                        const e = this._terminal.buffer.active.cursorY;
                                        this._onRequestRedraw.fire({
                                            start: e,
                                            end: e
                                        })
                                    }
                                }
                                t.WebglRenderer = m;
                                class A extends d.AttributeData {
                                    constructor(e, t, i) {
                                        super(), this.content = 0, this.combinedData = "", this.fg = e.fg, this.bg = e.bg, this.combinedData = t, this._width = i
                                    }
                                    isCombined() {
                                        return 2097152
                                    }
                                    getWidth() {
                                        return this._width
                                    }
                                    getChars() {
                                        return this.combinedData
                                    }
                                    getCode() {
                                        return 2097151
                                    }
                                    setFromCharData(e) {
                                        throw new Error("not implemented")
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }

                                function C(e, t, i = 0) {
                                    return Math.max(Math.min(e, t), i)
                                }
                                t.JoinedCellData = A
                            },
                            381: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.GLTexture = t.expandFloat32Array = t.createShader = t.createProgram = t.PROJECTION_MATRIX = void 0;
                                const s = i(374);

                                function r(e, t, i) {
                                    const r = (0, s.throwIfFalsy)(e.createShader(t));
                                    if (e.shaderSource(r, i), e.compileShader(r), e.getShaderParameter(r, e.COMPILE_STATUS)) return r;
                                    console.error(e.getShaderInfoLog(r)), e.deleteShader(r)
                                }
                                t.PROJECTION_MATRIX = new Float32Array([2, 0, 0, 0, 0, -2, 0, 0, 0, 0, 1, 0, -1, 1, 0, 1]), t.createProgram = function(e, t, i) {
                                    const n = (0, s.throwIfFalsy)(e.createProgram());
                                    if (e.attachShader(n, (0, s.throwIfFalsy)(r(e, e.VERTEX_SHADER, t))), e.attachShader(n, (0, s.throwIfFalsy)(r(e, e.FRAGMENT_SHADER, i))), e.linkProgram(n), e.getProgramParameter(n, e.LINK_STATUS)) return n;
                                    console.error(e.getProgramInfoLog(n)), e.deleteProgram(n)
                                }, t.createShader = r, t.expandFloat32Array = function(e, t) {
                                    const i = Math.min(2 * e.length, t),
                                        s = new Float32Array(i);
                                    for (let t = 0; t < e.length; t++) s[t] = e[t];
                                    return s
                                }, t.GLTexture = class {
                                    constructor(e) {
                                        this.texture = e, this.version = -1
                                    }
                                }
                            },
                            592: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BaseRenderLayer = void 0;
                                const s = i(627),
                                    r = i(237),
                                    n = i(374),
                                    o = i(859);
                                class a extends o.Disposable {
                                    constructor(e, t, i, s, r, n, a, h) {
                                        super(), this._container = t, this._alpha = r, this._coreBrowserService = n, this._optionsService = a, this._themeService = h, this._deviceCharWidth = 0, this._deviceCharHeight = 0, this._deviceCellWidth = 0, this._deviceCellHeight = 0, this._deviceCharLeft = 0, this._deviceCharTop = 0, this._canvas = this._coreBrowserService.mainDocument.createElement("canvas"), this._canvas.classList.add(`xterm-${i}-layer`), this._canvas.style.zIndex = s.toString(), this._initCanvas(), this._container.appendChild(this._canvas), this.register(this._themeService.onChangeColors((t => {
                                            this._refreshCharAtlas(e, t), this.reset(e)
                                        }))), this.register((0, o.toDisposable)((() => {
                                            this._canvas.remove()
                                        })))
                                    }
                                    _initCanvas() {
                                        this._ctx = (0, n.throwIfFalsy)(this._canvas.getContext("2d", {
                                            alpha: this._alpha
                                        })), this._alpha || this._clearAll()
                                    }
                                    handleBlur(e) {}
                                    handleFocus(e) {}
                                    handleCursorMove(e) {}
                                    handleGridChanged(e, t, i) {}
                                    handleSelectionChanged(e, t, i, s = !1) {}
                                    _setTransparency(e, t) {
                                        if (t === this._alpha) return;
                                        const i = this._canvas;
                                        this._alpha = t, this._canvas = this._canvas.cloneNode(), this._initCanvas(), this._container.replaceChild(this._canvas, i), this._refreshCharAtlas(e, this._themeService.colors), this.handleGridChanged(e, 0, e.rows - 1)
                                    }
                                    _refreshCharAtlas(e, t) {
                                        this._deviceCharWidth <= 0 && this._deviceCharHeight <= 0 || (this._charAtlas = (0, s.acquireTextureAtlas)(e, this._optionsService.rawOptions, t, this._deviceCellWidth, this._deviceCellHeight, this._deviceCharWidth, this._deviceCharHeight, this._coreBrowserService.dpr), this._charAtlas.warmUp())
                                    }
                                    resize(e, t) {
                                        this._deviceCellWidth = t.device.cell.width, this._deviceCellHeight = t.device.cell.height, this._deviceCharWidth = t.device.char.width, this._deviceCharHeight = t.device.char.height, this._deviceCharLeft = t.device.char.left, this._deviceCharTop = t.device.char.top, this._canvas.width = t.device.canvas.width, this._canvas.height = t.device.canvas.height, this._canvas.style.width = `${t.css.canvas.width}px`, this._canvas.style.height = `${t.css.canvas.height}px`, this._alpha || this._clearAll(), this._refreshCharAtlas(e, this._themeService.colors)
                                    }
                                    _fillBottomLineAtCells(e, t, i = 1) {
                                        this._ctx.fillRect(e * this._deviceCellWidth, (t + 1) * this._deviceCellHeight - this._coreBrowserService.dpr - 1, i * this._deviceCellWidth, this._coreBrowserService.dpr)
                                    }
                                    _clearAll() {
                                        this._alpha ? this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height) : (this._ctx.fillStyle = this._themeService.colors.background.css, this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height))
                                    }
                                    _clearCells(e, t, i, s) {
                                        this._alpha ? this._ctx.clearRect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, s * this._deviceCellHeight) : (this._ctx.fillStyle = this._themeService.colors.background.css, this._ctx.fillRect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, s * this._deviceCellHeight))
                                    }
                                    _fillCharTrueColor(e, t, i, s) {
                                        this._ctx.font = this._getFont(e, !1, !1), this._ctx.textBaseline = r.TEXT_BASELINE, this._clipCell(i, s, t.getWidth()), this._ctx.fillText(t.getChars(), i * this._deviceCellWidth + this._deviceCharLeft, s * this._deviceCellHeight + this._deviceCharTop + this._deviceCharHeight)
                                    }
                                    _clipCell(e, t, i) {
                                        this._ctx.beginPath(), this._ctx.rect(e * this._deviceCellWidth, t * this._deviceCellHeight, i * this._deviceCellWidth, this._deviceCellHeight), this._ctx.clip()
                                    }
                                    _getFont(e, t, i) {
                                        return `${i ? "italic" : ""} ${t ? e.options.fontWeightBold : e.options.fontWeight} ${e.options.fontSize * this._coreBrowserService.dpr}px ${e.options.fontFamily}`
                                    }
                                }
                                t.BaseRenderLayer = a
                            },
                            733: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.LinkRenderLayer = void 0;
                                const s = i(197),
                                    r = i(237),
                                    n = i(592);
                                class o extends n.BaseRenderLayer {
                                    constructor(e, t, i, s, r, n, o) {
                                        super(i, e, "link", t, !0, r, n, o), this.register(s.onShowLinkUnderline((e => this._handleShowLinkUnderline(e)))), this.register(s.onHideLinkUnderline((e => this._handleHideLinkUnderline(e))))
                                    }
                                    resize(e, t) {
                                        super.resize(e, t), this._state = void 0
                                    }
                                    reset(e) {
                                        this._clearCurrentLink()
                                    }
                                    _clearCurrentLink() {
                                        if (this._state) {
                                            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
                                            const e = this._state.y2 - this._state.y1 - 1;
                                            e > 0 && this._clearCells(0, this._state.y1 + 1, this._state.cols, e), this._clearCells(0, this._state.y2, this._state.x2, 1), this._state = void 0
                                        }
                                    }
                                    _handleShowLinkUnderline(e) {
                                        if (e.fg === r.INVERTED_DEFAULT_COLOR ? this._ctx.fillStyle = this._themeService.colors.background.css : void 0 !== e.fg && (0, s.is256Color)(e.fg) ? this._ctx.fillStyle = this._themeService.colors.ansi[e.fg].css : this._ctx.fillStyle = this._themeService.colors.foreground.css, e.y1 === e.y2) this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
                                        else {
                                            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
                                            for (let t = e.y1 + 1; t < e.y2; t++) this._fillBottomLineAtCells(0, t, e.cols);
                                            this._fillBottomLineAtCells(0, e.y2, e.x2)
                                        }
                                        this._state = e
                                    }
                                    _handleHideLinkUnderline(e) {
                                        this._clearCurrentLink()
                                    }
                                }
                                t.LinkRenderLayer = o
                            },
                            820: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.addDisposableDomListener = void 0, t.addDisposableDomListener = function(e, t, i, s) {
                                    e.addEventListener(t, i, s);
                                    let r = !1;
                                    return {
                                        dispose: () => {
                                            r || (r = !0, e.removeEventListener(t, i, s))
                                        }
                                    }
                                }
                            },
                            274: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CellColorResolver = void 0;
                                const s = i(855),
                                    r = i(160),
                                    n = i(374);
                                let o, a = 0,
                                    h = 0,
                                    l = !1,
                                    c = !1,
                                    d = !1,
                                    _ = 0;
                                t.CellColorResolver = class {
                                    constructor(e, t, i, s, r, n) {
                                        this._terminal = e, this._optionService = t, this._selectionRenderModel = i, this._decorationService = s, this._coreBrowserService = r, this._themeService = n, this.result = {
                                            fg: 0,
                                            bg: 0,
                                            ext: 0
                                        }
                                    }
                                    resolve(e, t, i, u) {
                                        if (this.result.bg = e.bg, this.result.fg = e.fg, this.result.ext = 268435456 & e.bg ? e.extended.ext : 0, h = 0, a = 0, c = !1, l = !1, d = !1, o = this._themeService.colors, _ = 0, e.getCode() !== s.NULL_CELL_CODE && 4 === e.extended.underlineStyle) {
                                            const e = Math.max(1, Math.floor(this._optionService.rawOptions.fontSize * this._coreBrowserService.dpr / 15));
                                            _ = t * u % (2 * Math.round(e))
                                        }
                                        if (this._decorationService.forEachDecorationAtCell(t, i, "bottom", (e => {
                                                e.backgroundColorRGB && (h = e.backgroundColorRGB.rgba >> 8 & 16777215, c = !0), e.foregroundColorRGB && (a = e.foregroundColorRGB.rgba >> 8 & 16777215, l = !0)
                                            })), d = this._selectionRenderModel.isCellSelected(this._terminal, t, i), d) {
                                            if (67108864 & this.result.fg || 0 != (50331648 & this.result.bg)) {
                                                if (67108864 & this.result.fg) switch (50331648 & this.result.fg) {
                                                    case 16777216:
                                                    case 33554432:
                                                        h = this._themeService.colors.ansi[255 & this.result.fg].rgba;
                                                        break;
                                                    case 50331648:
                                                        h = (16777215 & this.result.fg) << 8 | 255;
                                                        break;
                                                    default:
                                                        h = this._themeService.colors.foreground.rgba
                                                } else switch (50331648 & this.result.bg) {
                                                    case 16777216:
                                                    case 33554432:
                                                        h = this._themeService.colors.ansi[255 & this.result.bg].rgba;
                                                        break;
                                                    case 50331648:
                                                        h = (16777215 & this.result.bg) << 8 | 255
                                                }
                                                h = r.rgba.blend(h, 4294967040 & (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba | 128) >> 8 & 16777215
                                            } else h = (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba >> 8 & 16777215;
                                            if (c = !0, o.selectionForeground && (a = o.selectionForeground.rgba >> 8 & 16777215, l = !0), (0, n.treatGlyphAsBackgroundColor)(e.getCode())) {
                                                if (67108864 & this.result.fg && 0 == (50331648 & this.result.bg)) a = (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba >> 8 & 16777215;
                                                else {
                                                    if (67108864 & this.result.fg) switch (50331648 & this.result.bg) {
                                                        case 16777216:
                                                        case 33554432:
                                                            a = this._themeService.colors.ansi[255 & this.result.bg].rgba;
                                                            break;
                                                        case 50331648:
                                                            a = (16777215 & this.result.bg) << 8 | 255
                                                    } else switch (50331648 & this.result.fg) {
                                                        case 16777216:
                                                        case 33554432:
                                                            a = this._themeService.colors.ansi[255 & this.result.fg].rgba;
                                                            break;
                                                        case 50331648:
                                                            a = (16777215 & this.result.fg) << 8 | 255;
                                                            break;
                                                        default:
                                                            a = this._themeService.colors.foreground.rgba
                                                    }
                                                    a = r.rgba.blend(a, 4294967040 & (this._coreBrowserService.isFocused ? o.selectionBackgroundOpaque : o.selectionInactiveBackgroundOpaque).rgba | 128) >> 8 & 16777215
                                                }
                                                l = !0
                                            }
                                        }
                                        this._decorationService.forEachDecorationAtCell(t, i, "top", (e => {
                                            e.backgroundColorRGB && (h = e.backgroundColorRGB.rgba >> 8 & 16777215, c = !0), e.foregroundColorRGB && (a = e.foregroundColorRGB.rgba >> 8 & 16777215, l = !0)
                                        })), c && (h = d ? -16777216 & e.bg & -134217729 | h | 50331648 : -16777216 & e.bg | h | 50331648), l && (a = -16777216 & e.fg & -67108865 | a | 50331648), 67108864 & this.result.fg && (c && !l && (a = 0 == (50331648 & this.result.bg) ? -134217728 & this.result.fg | 16777215 & o.background.rgba >> 8 | 50331648 : -134217728 & this.result.fg | 67108863 & this.result.bg, l = !0), !c && l && (h = 0 == (50331648 & this.result.fg) ? -67108864 & this.result.bg | 16777215 & o.foreground.rgba >> 8 | 50331648 : -67108864 & this.result.bg | 67108863 & this.result.fg, c = !0)), o = void 0, this.result.bg = c ? h : this.result.bg, this.result.fg = l ? a : this.result.fg, this.result.ext &= 536870911, this.result.ext |= _ << 29 & 3758096384
                                    }
                                }
                            },
                            627: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.removeTerminalFromCache = t.acquireTextureAtlas = void 0;
                                const s = i(509),
                                    r = i(197),
                                    n = [];
                                t.acquireTextureAtlas = function(e, t, i, o, a, h, l, c) {
                                    const d = (0, r.generateConfig)(o, a, h, l, t, i, c);
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t],
                                            s = i.ownedBy.indexOf(e);
                                        if (s >= 0) {
                                            if ((0, r.configEquals)(i.config, d)) return i.atlas;
                                            1 === i.ownedBy.length ? (i.atlas.dispose(), n.splice(t, 1)) : i.ownedBy.splice(s, 1);
                                            break
                                        }
                                    }
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t];
                                        if ((0, r.configEquals)(i.config, d)) return i.ownedBy.push(e), i.atlas
                                    }
                                    const _ = e._core,
                                        u = {
                                            atlas: new s.TextureAtlas(document, d, _.unicodeService),
                                            config: d,
                                            ownedBy: [e]
                                        };
                                    return n.push(u), u.atlas
                                }, t.removeTerminalFromCache = function(e) {
                                    for (let t = 0; t < n.length; t++) {
                                        const i = n[t].ownedBy.indexOf(e);
                                        if (-1 !== i) {
                                            1 === n[t].ownedBy.length ? (n[t].atlas.dispose(), n.splice(t, 1)) : n[t].ownedBy.splice(i, 1);
                                            break
                                        }
                                    }
                                }
                            },
                            197: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.is256Color = t.configEquals = t.generateConfig = void 0;
                                const s = i(160);
                                t.generateConfig = function(e, t, i, r, n, o, a) {
                                    const h = {
                                        foreground: o.foreground,
                                        background: o.background,
                                        cursor: s.NULL_COLOR,
                                        cursorAccent: s.NULL_COLOR,
                                        selectionForeground: s.NULL_COLOR,
                                        selectionBackgroundTransparent: s.NULL_COLOR,
                                        selectionBackgroundOpaque: s.NULL_COLOR,
                                        selectionInactiveBackgroundTransparent: s.NULL_COLOR,
                                        selectionInactiveBackgroundOpaque: s.NULL_COLOR,
                                        ansi: o.ansi.slice(),
                                        contrastCache: o.contrastCache,
                                        halfContrastCache: o.halfContrastCache
                                    };
                                    return {
                                        customGlyphs: n.customGlyphs,
                                        devicePixelRatio: a,
                                        letterSpacing: n.letterSpacing,
                                        lineHeight: n.lineHeight,
                                        deviceCellWidth: e,
                                        deviceCellHeight: t,
                                        deviceCharWidth: i,
                                        deviceCharHeight: r,
                                        fontFamily: n.fontFamily,
                                        fontSize: n.fontSize,
                                        fontWeight: n.fontWeight,
                                        fontWeightBold: n.fontWeightBold,
                                        allowTransparency: n.allowTransparency,
                                        drawBoldTextInBrightColors: n.drawBoldTextInBrightColors,
                                        minimumContrastRatio: n.minimumContrastRatio,
                                        colors: h
                                    }
                                }, t.configEquals = function(e, t) {
                                    for (let i = 0; i < e.colors.ansi.length; i++)
                                        if (e.colors.ansi[i].rgba !== t.colors.ansi[i].rgba) return !1;
                                    return e.devicePixelRatio === t.devicePixelRatio && e.customGlyphs === t.customGlyphs && e.lineHeight === t.lineHeight && e.letterSpacing === t.letterSpacing && e.fontFamily === t.fontFamily && e.fontSize === t.fontSize && e.fontWeight === t.fontWeight && e.fontWeightBold === t.fontWeightBold && e.allowTransparency === t.allowTransparency && e.deviceCharWidth === t.deviceCharWidth && e.deviceCharHeight === t.deviceCharHeight && e.drawBoldTextInBrightColors === t.drawBoldTextInBrightColors && e.minimumContrastRatio === t.minimumContrastRatio && e.colors.foreground.rgba === t.colors.foreground.rgba && e.colors.background.rgba === t.colors.background.rgba
                                }, t.is256Color = function(e) {
                                    return 16777216 == (50331648 & e) || 33554432 == (50331648 & e)
                                }
                            },
                            237: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TEXT_BASELINE = t.DIM_OPACITY = t.INVERTED_DEFAULT_COLOR = void 0;
                                const s = i(399);
                                t.INVERTED_DEFAULT_COLOR = 257, t.DIM_OPACITY = .5, t.TEXT_BASELINE = s.isFirefox || s.isLegacyEdge ? "bottom" : "ideographic"
                            },
                            457: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CursorBlinkStateManager = void 0, t.CursorBlinkStateManager = class {
                                    constructor(e, t) {
                                        this._renderCallback = e, this._coreBrowserService = t, this.isCursorVisible = !0, this._coreBrowserService.isFocused && this._restartInterval()
                                    }
                                    get isPaused() {
                                        return !(this._blinkStartTimeout || this._blinkInterval)
                                    }
                                    dispose() {
                                        this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout && (this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout), this._blinkStartTimeout = void 0), this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0)
                                    }
                                    restartBlinkAnimation() {
                                        this.isPaused || (this._animationTimeRestarted = Date.now(), this.isCursorVisible = !0, this._animationFrame || (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                            this._renderCallback(), this._animationFrame = void 0
                                        }))))
                                    }
                                    _restartInterval(e = 600) {
                                        this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout = this._coreBrowserService.window.setTimeout((() => {
                                            if (this._animationTimeRestarted) {
                                                const e = 600 - (Date.now() - this._animationTimeRestarted);
                                                if (this._animationTimeRestarted = void 0, e > 0) return void this._restartInterval(e)
                                            }
                                            this.isCursorVisible = !1, this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                                this._renderCallback(), this._animationFrame = void 0
                                            })), this._blinkInterval = this._coreBrowserService.window.setInterval((() => {
                                                if (this._animationTimeRestarted) {
                                                    const e = 600 - (Date.now() - this._animationTimeRestarted);
                                                    return this._animationTimeRestarted = void 0, void this._restartInterval(e)
                                                }
                                                this.isCursorVisible = !this.isCursorVisible, this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                                    this._renderCallback(), this._animationFrame = void 0
                                                }))
                                            }), 600)
                                        }), e)
                                    }
                                    pause() {
                                        this.isCursorVisible = !0, this._blinkInterval && (this._coreBrowserService.window.clearInterval(this._blinkInterval), this._blinkInterval = void 0), this._blinkStartTimeout && (this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout), this._blinkStartTimeout = void 0), this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0)
                                    }
                                    resume() {
                                        this.pause(), this._animationTimeRestarted = void 0, this._restartInterval(), this.restartBlinkAnimation()
                                    }
                                }
                            },
                            860: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.tryDrawCustomChar = t.powerlineDefinitions = t.boxDrawingDefinitions = t.blockElementDefinitions = void 0;
                                const s = i(374);
                                t.blockElementDefinitions = {
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 5,
                                        w: 8,
                                        h: 3
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 3,
                                        w: 8,
                                        h: 5
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 6
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 1,
                                        w: 8,
                                        h: 7
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 7,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 6,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 5,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 3,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 2,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }, {
                                        x: 4,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 4
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 4
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 4,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 4,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 4
                                    }],
                                    "": [{
                                        x: 1,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 3,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 4,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 5,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 6,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 1,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 3,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 5,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 7,
                                        y: 0,
                                        w: 1,
                                        h: 8
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 8,
                                        h: 1
                                    }, {
                                        x: 0,
                                        y: 7,
                                        w: 8,
                                        h: 1
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 3
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 5
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 6
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 8,
                                        h: 7
                                    }],
                                    "": [{
                                        x: 6,
                                        y: 0,
                                        w: 2,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 5,
                                        y: 0,
                                        w: 3,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 3,
                                        y: 0,
                                        w: 5,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 6,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 1,
                                        y: 0,
                                        w: 7,
                                        h: 8
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 2,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 0,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 2,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 2,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 6,
                                        y: 4,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }, {
                                        x: 4,
                                        y: 6,
                                        w: 2,
                                        h: 2
                                    }],
                                    "": [{
                                        x: 0,
                                        y: 2,
                                        w: 8,
                                        h: 2
                                    }, {
                                        x: 0,
                                        y: 6,
                                        w: 8,
                                        h: 2
                                    }]
                                };
                                const r = {
                                    "": [
                                        [1, 0, 0, 0],
                                        [0, 0, 0, 0],
                                        [0, 0, 1, 0],
                                        [0, 0, 0, 0]
                                    ],
                                    "": [
                                        [1, 0],
                                        [0, 0],
                                        [0, 1],
                                        [0, 0]
                                    ],
                                    "": [
                                        [0, 1],
                                        [1, 1],
                                        [1, 0],
                                        [1, 1]
                                    ]
                                };
                                t.boxDrawingDefinitions = {
                                    "": {
                                        1: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,0"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,0 L.5,1"
                                    },
                                    "": {
                                        3: "M0,.5 L1,.5 M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 - t} L1,${.5 - t} M.5,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},1 L${.5 - e},.5 L1,.5 M${.5 + e},.5 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M1,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L.5,${.5 - t} L.5,1 M0,${.5 + t} L.5,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 + e},1 L${.5 + e},.5 L0,.5 M${.5 - e},.5 L${.5 - e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M0,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 + t} L1,${.5 + t} M.5,${.5 - t} L1,${.5 - t}`
                                    },
                                    "": {
                                        1: (e, t) => `M1,.5 L${.5 - e},.5 L${.5 - e},0 M${.5 + e},.5 L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0 M1,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L.5,${.5 + t} L.5,0 M0,${.5 - t} L.5,${.5 - t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L${.5 + e},.5 L${.5 + e},0 M${.5 - e},.5 L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M0,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M.5,${.5 - t} L1,${.5 - t} M.5,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1 M${.5 + e},.5 L1,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 - e},0 L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M0,${.5 - t} L.5,${.5 - t} M0,${.5 + t} L.5,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L${.5 - e},.5 M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M${.5 + e},0 L${.5 + e},1 M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t} M.5,${.5 + t} L.5,1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},.5 L${.5 - e},1 M${.5 + e},.5 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t} M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},.5 L${.5 - e},0 M${.5 + e},.5 L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L1,${.5 + t} M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,1 M0,${.5 - t} L1,${.5 - t} M0,${.5 + t} L1,${.5 + t}`
                                    },
                                    "": {
                                        1: (e, t) => `M0,.5 L1,.5 M${.5 - e},0 L${.5 - e},1 M${.5 + e},0 L${.5 + e},1`
                                    },
                                    "": {
                                        1: (e, t) => `M0,${.5 + t} L${.5 - e},${.5 + t} L${.5 - e},1 M1,${.5 + t} L${.5 + e},${.5 + t} L${.5 + e},1 M0,${.5 - t} L${.5 - e},${.5 - t} L${.5 - e},0 M1,${.5 - t} L${.5 + e},${.5 - t} L${.5 + e},0`
                                    },
                                    "": {
                                        1: "M1,0 L0,1"
                                    },
                                    "": {
                                        1: "M0,0 L1,1"
                                    },
                                    "": {
                                        1: "M1,0 L0,1 M0,0 L1,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L1,.5",
                                        3: "M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1 M.5,.5 L0,.5",
                                        3: "M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,1",
                                        3: "M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5 M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0 M0,.5 L1,.5",
                                        3: "M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M0,.5 L1,.5",
                                        3: "M.5,0 L.5,1"
                                    },
                                    "": {
                                        1: "M0.5,1 L.5,.5 L1,.5",
                                        3: "M.5,0 L.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M0,.5 L.5,.5 L.5,1",
                                        3: "M.5,0 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L1,.5",
                                        3: "M0,.5 L.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,0 L.5,.5 L0,.5",
                                        3: "M0.5,1 L.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,1",
                                        3: "M.5,.5 L.5,0 M0,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L.5,0",
                                        3: "M0,.5 L1,.5 M.5,.5 L.5,1"
                                    },
                                    "": {
                                        1: "M.5,.5 L1,.5",
                                        3: "M.5,0 L.5,1 M.5,.5 L0,.5"
                                    },
                                    "": {
                                        1: "M.5,.5 L0,.5",
                                        3: "M.5,0 L.5,1 M.5,.5 L1,.5"
                                    },
                                    "": {
                                        1: "M.1,.5 L.4,.5 M.6,.5 L.9,.5"
                                    },
                                    "": {
                                        3: "M.1,.5 L.4,.5 M.6,.5 L.9,.5"
                                    },
                                    "": {
                                        1: "M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"
                                    },
                                    "": {
                                        3: "M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"
                                    },
                                    "": {
                                        1: "M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"
                                    },
                                    "": {
                                        3: "M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"
                                    },
                                    "": {
                                        1: "M.5,.1 L.5,.4 M.5,.6 L.5,.9"
                                    },
                                    "": {
                                        3: "M.5,.1 L.5,.4 M.5,.6 L.5,.9"
                                    },
                                    "": {
                                        1: "M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"
                                    },
                                    "": {
                                        3: "M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"
                                    },
                                    "": {
                                        1: "M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"
                                    },
                                    "": {
                                        3: "M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 + t / .15 * .5} C.5,${.5 + t / .15 * .5},.5,.5,1,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,1 L.5,${.5 + t / .15 * .5} C.5,${.5 + t / .15 * .5},.5,.5,0,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t / .15 * .5} C.5,${.5 - t / .15 * .5},.5,.5,0,.5`
                                    },
                                    "": {
                                        1: (e, t) => `M.5,0 L.5,${.5 - t / .15 * .5} C.5,${.5 - t / .15 * .5},.5,.5,1,.5`
                                    }
                                }, t.powerlineDefinitions = {
                                    "": {
                                        d: "M0,0 L1,.5 L0,1",
                                        type: 0,
                                        rightPadding: 2
                                    },
                                    "": {
                                        d: "M-1,-.5 L1,.5 L-1,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1,0 L0,.5 L1,1",
                                        type: 0,
                                        leftPadding: 2
                                    },
                                    "": {
                                        d: "M2,-.5 L0,.5 L2,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",
                                        type: 0,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",
                                        type: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",
                                        type: 0,
                                        leftPadding: 1
                                    },
                                    "": {
                                        d: "M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",
                                        type: 1,
                                        leftPadding: 1
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5 L-.5,1.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5 L1.5,1.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5 L-.5,-.5",
                                        type: 0
                                    },
                                    "": {
                                        d: "M1.5,-.5 L-.5,1.5",
                                        type: 1,
                                        leftPadding: 1,
                                        rightPadding: 1
                                    },
                                    "": {
                                        d: "M-.5,-.5 L1.5,1.5 L1.5,-.5",
                                        type: 0
                                    }
                                }, t.powerlineDefinitions[""] = t.powerlineDefinitions[""], t.powerlineDefinitions[""] = t.powerlineDefinitions[""], t.tryDrawCustomChar = function(e, i, o, l, c, d, _, u) {
                                    const f = t.blockElementDefinitions[i];
                                    if (f) return function(e, t, i, s, r, n) {
                                        for (let o = 0; o < t.length; o++) {
                                            const a = t[o],
                                                h = r / 8,
                                                l = n / 8;
                                            e.fillRect(i + a.x * h, s + a.y * l, a.w * h, a.h * l)
                                        }
                                    }(e, f, o, l, c, d), !0;
                                    const g = r[i];
                                    if (g) return function(e, t, i, r, o, a) {
                                        let h = n.get(t);
                                        h || (h = new Map, n.set(t, h));
                                        const l = e.fillStyle;
                                        if ("string" != typeof l) throw new Error(`Unexpected fillStyle type "${l}"`);
                                        let c = h.get(l);
                                        if (!c) {
                                            const i = t[0].length,
                                                r = t.length,
                                                n = e.canvas.ownerDocument.createElement("canvas");
                                            n.width = i, n.height = r;
                                            const o = (0, s.throwIfFalsy)(n.getContext("2d")),
                                                a = new ImageData(i, r);
                                            let d, _, u, f;
                                            if (l.startsWith("#")) d = parseInt(l.slice(1, 3), 16), _ = parseInt(l.slice(3, 5), 16), u = parseInt(l.slice(5, 7), 16), f = l.length > 7 && parseInt(l.slice(7, 9), 16) || 1;
                                            else {
                                                if (!l.startsWith("rgba")) throw new Error(`Unexpected fillStyle color format "${l}" when drawing pattern glyph`);
                                                [d, _, u, f] = l.substring(5, l.length - 1).split(",").map((e => parseFloat(e)))
                                            }
                                            for (let e = 0; e < r; e++)
                                                for (let s = 0; s < i; s++) a.data[4 * (e * i + s)] = d, a.data[4 * (e * i + s) + 1] = _, a.data[4 * (e * i + s) + 2] = u, a.data[4 * (e * i + s) + 3] = t[e][s] * (255 * f);
                                            o.putImageData(a, 0, 0), c = (0, s.throwIfFalsy)(e.createPattern(n, null)), h.set(l, c)
                                        }
                                        e.fillStyle = c, e.fillRect(i, r, o, a)
                                    }(e, g, o, l, c, d), !0;
                                    const p = t.boxDrawingDefinitions[i];
                                    if (p) return function(e, t, i, s, r, n, o) {
                                        e.strokeStyle = e.fillStyle;
                                        for (const [l, c] of Object.entries(t)) {
                                            let t;
                                            e.beginPath(), e.lineWidth = o * Number.parseInt(l), t = "function" == typeof c ? c(.15, .15 / n * r) : c;
                                            for (const l of t.split(" ")) {
                                                const t = l[0],
                                                    c = a[t];
                                                if (!c) {
                                                    console.error(`Could not find drawing instructions for "${t}"`);
                                                    continue
                                                }
                                                const d = l.substring(1).split(",");
                                                d[0] && d[1] && c(e, h(d, r, n, i, s, !0, o))
                                            }
                                            e.stroke(), e.closePath()
                                        }
                                    }(e, p, o, l, c, d, u), !0;
                                    const v = t.powerlineDefinitions[i];
                                    return !!v && (function(e, t, i, s, r, n, o, l) {
                                        const c = new Path2D;
                                        c.rect(i, s, r, n), e.clip(c), e.beginPath();
                                        const d = o / 12;
                                        e.lineWidth = l * d;
                                        for (const o of t.d.split(" ")) {
                                            const c = o[0],
                                                _ = a[c];
                                            if (!_) {
                                                console.error(`Could not find drawing instructions for "${c}"`);
                                                continue
                                            }
                                            const u = o.substring(1).split(",");
                                            u[0] && u[1] && _(e, h(u, r, n, i, s, !1, l, (t.leftPadding ?? 0) * (d / 2), (t.rightPadding ?? 0) * (d / 2)))
                                        }
                                        1 === t.type ? (e.strokeStyle = e.fillStyle, e.stroke()) : e.fill(), e.closePath()
                                    }(e, v, o, l, c, d, _, u), !0)
                                };
                                const n = new Map;

                                function o(e, t, i = 0) {
                                    return Math.max(Math.min(e, t), i)
                                }
                                const a = {
                                    C: (e, t) => e.bezierCurveTo(t[0], t[1], t[2], t[3], t[4], t[5]),
                                    L: (e, t) => e.lineTo(t[0], t[1]),
                                    M: (e, t) => e.moveTo(t[0], t[1])
                                };

                                function h(e, t, i, s, r, n, a, h = 0, l = 0) {
                                    const c = e.map((e => parseFloat(e) || parseInt(e)));
                                    if (c.length < 2) throw new Error("Too few arguments for instruction");
                                    for (let e = 0; e < c.length; e += 2) c[e] *= t - h * a - l * a, n && 0 !== c[e] && (c[e] = o(Math.round(c[e] + .5) - .5, t, 0)), c[e] += s + h * a;
                                    for (let e = 1; e < c.length; e += 2) c[e] *= i, n && 0 !== c[e] && (c[e] = o(Math.round(c[e] + .5) - .5, i, 0)), c[e] += r;
                                    return c
                                }
                            },
                            56: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.observeDevicePixelDimensions = void 0;
                                const s = i(859);
                                t.observeDevicePixelDimensions = function(e, t, i) {
                                    let r = new t.ResizeObserver((t => {
                                        const s = t.find((t => t.target === e));
                                        if (!s) return;
                                        if (!("devicePixelContentBoxSize" in s)) return r?.disconnect(), void(r = void 0);
                                        const n = s.devicePixelContentBoxSize[0].inlineSize,
                                            o = s.devicePixelContentBoxSize[0].blockSize;
                                        n > 0 && o > 0 && i(n, o)
                                    }));
                                    try {
                                        r.observe(e, {
                                            box: ["device-pixel-content-box"]
                                        })
                                    } catch {
                                        r.disconnect(), r = void 0
                                    }
                                    return (0, s.toDisposable)((() => r?.disconnect()))
                                }
                            },
                            374: (e, t) => {
                                function i(e) {
                                    return 57508 <= e && e <= 57558
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.computeNextVariantOffset = t.createRenderDimensions = t.treatGlyphAsBackgroundColor = t.isRestrictedPowerlineGlyph = t.isPowerlineGlyph = t.throwIfFalsy = void 0, t.throwIfFalsy = function(e) {
                                    if (!e) throw new Error("value must not be falsy");
                                    return e
                                }, t.isPowerlineGlyph = i, t.isRestrictedPowerlineGlyph = function(e) {
                                    return 57520 <= e && e <= 57527
                                }, t.treatGlyphAsBackgroundColor = function(e) {
                                    return i(e) || function(e) {
                                        return 9472 <= e && e <= 9631
                                    }(e)
                                }, t.createRenderDimensions = function() {
                                    return {
                                        css: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            }
                                        },
                                        device: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            },
                                            char: {
                                                width: 0,
                                                height: 0,
                                                left: 0,
                                                top: 0
                                            }
                                        }
                                    }
                                }, t.computeNextVariantOffset = function(e, t, i = 0) {
                                    return (e - (2 * Math.round(t) - i)) % (2 * Math.round(t))
                                }
                            },
                            296: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createSelectionRenderModel = void 0;
                                class i {
                                    constructor() {
                                        this.clear()
                                    }
                                    clear() {
                                        this.hasSelection = !1, this.columnSelectMode = !1, this.viewportStartRow = 0, this.viewportEndRow = 0, this.viewportCappedStartRow = 0, this.viewportCappedEndRow = 0, this.startCol = 0, this.endCol = 0, this.selectionStart = void 0, this.selectionEnd = void 0
                                    }
                                    update(e, t, i, s = !1) {
                                        if (this.selectionStart = t, this.selectionEnd = i, !t || !i || t[0] === i[0] && t[1] === i[1]) return void this.clear();
                                        const r = e.buffers.active.ydisp,
                                            n = t[1] - r,
                                            o = i[1] - r,
                                            a = Math.max(n, 0),
                                            h = Math.min(o, e.rows - 1);
                                        a >= e.rows || h < 0 ? this.clear() : (this.hasSelection = !0, this.columnSelectMode = s, this.viewportStartRow = n, this.viewportEndRow = o, this.viewportCappedStartRow = a, this.viewportCappedEndRow = h, this.startCol = t[0], this.endCol = i[0])
                                    }
                                    isCellSelected(e, t, i) {
                                        return !!this.hasSelection && (i -= e.buffer.active.viewportY, this.columnSelectMode ? this.startCol <= this.endCol ? t >= this.startCol && i >= this.viewportCappedStartRow && t < this.endCol && i <= this.viewportCappedEndRow : t < this.startCol && i >= this.viewportCappedStartRow && t >= this.endCol && i <= this.viewportCappedEndRow : i > this.viewportStartRow && i < this.viewportEndRow || this.viewportStartRow === this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportEndRow && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol)
                                    }
                                }
                                t.createSelectionRenderModel = function() {
                                    return new i
                                }
                            },
                            509: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TextureAtlas = void 0;
                                const s = i(237),
                                    r = i(860),
                                    n = i(374),
                                    o = i(160),
                                    a = i(345),
                                    h = i(485),
                                    l = i(385),
                                    c = i(147),
                                    d = i(855),
                                    _ = {
                                        texturePage: 0,
                                        texturePosition: {
                                            x: 0,
                                            y: 0
                                        },
                                        texturePositionClipSpace: {
                                            x: 0,
                                            y: 0
                                        },
                                        offset: {
                                            x: 0,
                                            y: 0
                                        },
                                        size: {
                                            x: 0,
                                            y: 0
                                        },
                                        sizeClipSpace: {
                                            x: 0,
                                            y: 0
                                        }
                                    };
                                let u;
                                class f {
                                    get pages() {
                                        return this._pages
                                    }
                                    constructor(e, t, i) {
                                        this._document = e, this._config = t, this._unicodeService = i, this._didWarmUp = !1, this._cacheMap = new h.FourKeyMap, this._cacheMapCombined = new h.FourKeyMap, this._pages = [], this._activePages = [], this._workBoundingBox = {
                                            top: 0,
                                            left: 0,
                                            bottom: 0,
                                            right: 0
                                        }, this._workAttributeData = new c.AttributeData, this._textureSize = 512, this._onAddTextureAtlasCanvas = new a.EventEmitter, this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event, this._onRemoveTextureAtlasCanvas = new a.EventEmitter, this.onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event, this._requestClearModel = !1, this._createNewPage(), this._tmpCanvas = v(e, 4 * this._config.deviceCellWidth + 4, this._config.deviceCellHeight + 4), this._tmpCtx = (0, n.throwIfFalsy)(this._tmpCanvas.getContext("2d", {
                                            alpha: this._config.allowTransparency,
                                            willReadFrequently: !0
                                        }))
                                    }
                                    dispose() {
                                        for (const e of this.pages) e.canvas.remove();
                                        this._onAddTextureAtlasCanvas.dispose()
                                    }
                                    warmUp() {
                                        this._didWarmUp || (this._doWarmUp(), this._didWarmUp = !0)
                                    }
                                    _doWarmUp() {
                                        const e = new l.IdleTaskQueue;
                                        for (let t = 33; t < 126; t++) e.enqueue((() => {
                                            if (!this._cacheMap.get(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT)) {
                                                const e = this._drawToCache(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT);
                                                this._cacheMap.set(t, d.DEFAULT_COLOR, d.DEFAULT_COLOR, d.DEFAULT_EXT, e)
                                            }
                                        }))
                                    }
                                    beginFrame() {
                                        return this._requestClearModel
                                    }
                                    clearTexture() {
                                        if (0 !== this._pages[0].currentRow.x || 0 !== this._pages[0].currentRow.y) {
                                            for (const e of this._pages) e.clear();
                                            this._cacheMap.clear(), this._cacheMapCombined.clear(), this._didWarmUp = !1
                                        }
                                    }
                                    _createNewPage() {
                                        if (f.maxAtlasPages && this._pages.length >= Math.max(4, f.maxAtlasPages)) {
                                            const e = this._pages.filter((e => 2 * e.canvas.width <= (f.maxTextureSize || 4096))).sort(((e, t) => t.canvas.width !== e.canvas.width ? t.canvas.width - e.canvas.width : t.percentageUsed - e.percentageUsed));
                                            let t = -1,
                                                i = 0;
                                            for (let s = 0; s < e.length; s++)
                                                if (e[s].canvas.width !== i) t = s, i = e[s].canvas.width;
                                                else if (s - t == 3) break;
                                            const s = e.slice(t, t + 4),
                                                r = s.map((e => e.glyphs[0].texturePage)).sort(((e, t) => e > t ? 1 : -1)),
                                                n = this.pages.length - s.length,
                                                o = this._mergePages(s, n);
                                            o.version++;
                                            for (let e = r.length - 1; e >= 0; e--) this._deletePage(r[e]);
                                            this.pages.push(o), this._requestClearModel = !0, this._onAddTextureAtlasCanvas.fire(o.canvas)
                                        }
                                        const e = new g(this._document, this._textureSize);
                                        return this._pages.push(e), this._activePages.push(e), this._onAddTextureAtlasCanvas.fire(e.canvas), e
                                    }
                                    _mergePages(e, t) {
                                        const i = 2 * e[0].canvas.width,
                                            s = new g(this._document, i, e);
                                        for (const [r, n] of e.entries()) {
                                            const e = r * n.canvas.width % i,
                                                o = Math.floor(r / 2) * n.canvas.height;
                                            s.ctx.drawImage(n.canvas, e, o);
                                            for (const s of n.glyphs) s.texturePage = t, s.sizeClipSpace.x = s.size.x / i, s.sizeClipSpace.y = s.size.y / i, s.texturePosition.x += e, s.texturePosition.y += o, s.texturePositionClipSpace.x = s.texturePosition.x / i, s.texturePositionClipSpace.y = s.texturePosition.y / i;
                                            this._onRemoveTextureAtlasCanvas.fire(n.canvas);
                                            const a = this._activePages.indexOf(n); - 1 !== a && this._activePages.splice(a, 1)
                                        }
                                        return s
                                    }
                                    _deletePage(e) {
                                        this._pages.splice(e, 1);
                                        for (let t = e; t < this._pages.length; t++) {
                                            const e = this._pages[t];
                                            for (const t of e.glyphs) t.texturePage--;
                                            e.version++
                                        }
                                    }
                                    getRasterizedGlyphCombinedChar(e, t, i, s, r) {
                                        return this._getFromCacheMap(this._cacheMapCombined, e, t, i, s, r)
                                    }
                                    getRasterizedGlyph(e, t, i, s, r) {
                                        return this._getFromCacheMap(this._cacheMap, e, t, i, s, r)
                                    }
                                    _getFromCacheMap(e, t, i, s, r, n = !1) {
                                        return u = e.get(t, i, s, r), u || (u = this._drawToCache(t, i, s, r, n), e.set(t, i, s, r, u)), u
                                    }
                                    _getColorFromAnsiIndex(e) {
                                        if (e >= this._config.colors.ansi.length) throw new Error("No color found for idx " + e);
                                        return this._config.colors.ansi[e]
                                    }
                                    _getBackgroundColor(e, t, i, s) {
                                        if (this._config.allowTransparency) return o.NULL_COLOR;
                                        let r;
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                r = this._getColorFromAnsiIndex(t);
                                                break;
                                            case 50331648:
                                                const e = c.AttributeData.toColorRGB(t);
                                                r = o.channels.toColor(e[0], e[1], e[2]);
                                                break;
                                            default:
                                                r = i ? o.color.opaque(this._config.colors.foreground) : this._config.colors.background
                                        }
                                        return r
                                    }
                                    _getForegroundColor(e, t, i, r, n, a, h, l, d, _) {
                                        const u = this._getMinimumContrastColor(e, t, i, r, n, a, h, d, l, _);
                                        if (u) return u;
                                        let f;
                                        switch (n) {
                                            case 16777216:
                                            case 33554432:
                                                this._config.drawBoldTextInBrightColors && d && a < 8 && (a += 8), f = this._getColorFromAnsiIndex(a);
                                                break;
                                            case 50331648:
                                                const e = c.AttributeData.toColorRGB(a);
                                                f = o.channels.toColor(e[0], e[1], e[2]);
                                                break;
                                            default:
                                                f = h ? this._config.colors.background : this._config.colors.foreground
                                        }
                                        return this._config.allowTransparency && (f = o.color.opaque(f)), l && (f = o.color.multiplyOpacity(f, s.DIM_OPACITY)), f
                                    }
                                    _resolveBackgroundRgba(e, t, i) {
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                return this._getColorFromAnsiIndex(t).rgba;
                                            case 50331648:
                                                return t << 8;
                                            default:
                                                return i ? this._config.colors.foreground.rgba : this._config.colors.background.rgba
                                        }
                                    }
                                    _resolveForegroundRgba(e, t, i, s) {
                                        switch (e) {
                                            case 16777216:
                                            case 33554432:
                                                return this._config.drawBoldTextInBrightColors && s && t < 8 && (t += 8), this._getColorFromAnsiIndex(t).rgba;
                                            case 50331648:
                                                return t << 8;
                                            default:
                                                return i ? this._config.colors.background.rgba : this._config.colors.foreground.rgba
                                        }
                                    }
                                    _getMinimumContrastColor(e, t, i, s, r, n, a, h, l, c) {
                                        if (1 === this._config.minimumContrastRatio || c) return;
                                        const d = this._getContrastCache(l),
                                            _ = d.getColor(e, s);
                                        if (void 0 !== _) return _ || void 0;
                                        const u = this._resolveBackgroundRgba(t, i, a),
                                            f = this._resolveForegroundRgba(r, n, a, h),
                                            g = o.rgba.ensureContrastRatio(u, f, this._config.minimumContrastRatio / (l ? 2 : 1));
                                        if (!g) return void d.setColor(e, s, null);
                                        const p = o.channels.toColor(g >> 24 & 255, g >> 16 & 255, g >> 8 & 255);
                                        return d.setColor(e, s, p), p
                                    }
                                    _getContrastCache(e) {
                                        return e ? this._config.colors.halfContrastCache : this._config.colors.contrastCache
                                    }
                                    _drawToCache(e, t, i, o, a = !1) {
                                        const h = "number" == typeof e ? String.fromCharCode(e) : e,
                                            l = Math.min(this._config.deviceCellWidth * Math.max(h.length, 2) + 4, this._textureSize);
                                        this._tmpCanvas.width < l && (this._tmpCanvas.width = l);
                                        const d = Math.min(this._config.deviceCellHeight + 8, this._textureSize);
                                        if (this._tmpCanvas.height < d && (this._tmpCanvas.height = d), this._tmpCtx.save(), this._workAttributeData.fg = i, this._workAttributeData.bg = t, this._workAttributeData.extended.ext = o, this._workAttributeData.isInvisible()) return _;
                                        const u = !!this._workAttributeData.isBold(),
                                            g = !!this._workAttributeData.isInverse(),
                                            v = !!this._workAttributeData.isDim(),
                                            m = !!this._workAttributeData.isItalic(),
                                            A = !!this._workAttributeData.isUnderline(),
                                            C = !!this._workAttributeData.isStrikethrough(),
                                            w = !!this._workAttributeData.isOverline();
                                        let b = this._workAttributeData.getFgColor(),
                                            y = this._workAttributeData.getFgColorMode(),
                                            S = this._workAttributeData.getBgColor(),
                                            E = this._workAttributeData.getBgColorMode();
                                        if (g) {
                                            const e = b;
                                            b = S, S = e;
                                            const t = y;
                                            y = E, E = t
                                        }
                                        const x = this._getBackgroundColor(E, S, g, v);
                                        this._tmpCtx.globalCompositeOperation = "copy", this._tmpCtx.fillStyle = x.css, this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height), this._tmpCtx.globalCompositeOperation = "source-over";
                                        const L = u ? this._config.fontWeightBold : this._config.fontWeight,
                                            I = m ? "italic" : "";
                                        this._tmpCtx.font = `${I} ${L} ${this._config.fontSize * this._config.devicePixelRatio}px ${this._config.fontFamily}`, this._tmpCtx.textBaseline = s.TEXT_BASELINE;
                                        const B = 1 === h.length && (0, n.isPowerlineGlyph)(h.charCodeAt(0)),
                                            D = 1 === h.length && (0, n.isRestrictedPowerlineGlyph)(h.charCodeAt(0)),
                                            k = this._getForegroundColor(t, E, S, i, y, b, g, v, u, (0, n.treatGlyphAsBackgroundColor)(h.charCodeAt(0)));
                                        this._tmpCtx.fillStyle = k.css;
                                        const R = D ? 0 : 4;
                                        let M = !1;
                                        !1 !== this._config.customGlyphs && (M = (0, r.tryDrawCustomChar)(this._tmpCtx, h, R, R, this._config.deviceCellWidth, this._config.deviceCellHeight, this._config.fontSize, this._config.devicePixelRatio));
                                        let T, O = !B;
                                        if (T = "number" == typeof e ? this._unicodeService.wcwidth(e) : this._unicodeService.getStringCellWidth(e), A) {
                                            this._tmpCtx.save();
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15)),
                                                t = e % 2 == 1 ? .5 : 0;
                                            if (this._tmpCtx.lineWidth = e, this._workAttributeData.isUnderlineColorDefault()) this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle;
                                            else if (this._workAttributeData.isUnderlineColorRGB()) O = !1, this._tmpCtx.strokeStyle = `rgb(${c.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;
                                            else {
                                                O = !1;
                                                let e = this._workAttributeData.getUnderlineColor();
                                                this._config.drawBoldTextInBrightColors && this._workAttributeData.isBold() && e < 8 && (e += 8), this._tmpCtx.strokeStyle = this._getColorFromAnsiIndex(e).css
                                            }
                                            this._tmpCtx.beginPath();
                                            const i = R,
                                                s = Math.ceil(R + this._config.deviceCharHeight) - t - (a ? 2 * e : 0),
                                                r = s + e,
                                                o = s + 2 * e;
                                            let l = this._workAttributeData.getUnderlineVariantOffset();
                                            for (let a = 0; a < T; a++) {
                                                this._tmpCtx.save();
                                                const h = i + a * this._config.deviceCellWidth,
                                                    c = i + (a + 1) * this._config.deviceCellWidth,
                                                    d = h + this._config.deviceCellWidth / 2;
                                                switch (this._workAttributeData.extended.underlineStyle) {
                                                    case 2:
                                                        this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s), this._tmpCtx.moveTo(h, o), this._tmpCtx.lineTo(c, o);
                                                        break;
                                                    case 3:
                                                        const i = e <= 1 ? o : Math.ceil(R + this._config.deviceCharHeight - e / 2) - t,
                                                            a = e <= 1 ? s : Math.ceil(R + this._config.deviceCharHeight + e / 2) - t,
                                                            _ = new Path2D;
                                                        _.rect(h, s, this._config.deviceCellWidth, o - s), this._tmpCtx.clip(_), this._tmpCtx.moveTo(h - this._config.deviceCellWidth / 2, r), this._tmpCtx.bezierCurveTo(h - this._config.deviceCellWidth / 2, a, h, a, h, r), this._tmpCtx.bezierCurveTo(h, i, d, i, d, r), this._tmpCtx.bezierCurveTo(d, a, c, a, c, r), this._tmpCtx.bezierCurveTo(c, i, c + this._config.deviceCellWidth / 2, i, c + this._config.deviceCellWidth / 2, r);
                                                        break;
                                                    case 4:
                                                        const u = 0 === l ? 0 : l >= e ? 2 * e - l : e - l;
                                                        0 == !(l >= e) || 0 === u ? (this._tmpCtx.setLineDash([Math.round(e), Math.round(e)]), this._tmpCtx.moveTo(h + u, s), this._tmpCtx.lineTo(c, s)) : (this._tmpCtx.setLineDash([Math.round(e), Math.round(e)]), this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(h + u, s), this._tmpCtx.moveTo(h + u + e, s), this._tmpCtx.lineTo(c, s)), l = (0, n.computeNextVariantOffset)(c - h, e, l);
                                                        break;
                                                    case 5:
                                                        const f = .6,
                                                            g = .3,
                                                            p = c - h,
                                                            v = Math.floor(f * p),
                                                            m = Math.floor(g * p),
                                                            A = p - v - m;
                                                        this._tmpCtx.setLineDash([v, m, A]), this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s);
                                                        break;
                                                    default:
                                                        this._tmpCtx.moveTo(h, s), this._tmpCtx.lineTo(c, s)
                                                }
                                                this._tmpCtx.stroke(), this._tmpCtx.restore()
                                            }
                                            if (this._tmpCtx.restore(), !M && this._config.fontSize >= 12 && !this._config.allowTransparency && " " !== h) {
                                                this._tmpCtx.save(), this._tmpCtx.textBaseline = "alphabetic";
                                                const t = this._tmpCtx.measureText(h);
                                                if (this._tmpCtx.restore(), "actualBoundingBoxDescent" in t && t.actualBoundingBoxDescent > 0) {
                                                    this._tmpCtx.save();
                                                    const t = new Path2D;
                                                    t.rect(i, s - Math.ceil(e / 2), this._config.deviceCellWidth * T, o - s + Math.ceil(e / 2)), this._tmpCtx.clip(t), this._tmpCtx.lineWidth = 3 * this._config.devicePixelRatio, this._tmpCtx.strokeStyle = x.css, this._tmpCtx.strokeText(h, R, R + this._config.deviceCharHeight), this._tmpCtx.restore()
                                                }
                                            }
                                        }
                                        if (w) {
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15)),
                                                t = e % 2 == 1 ? .5 : 0;
                                            this._tmpCtx.lineWidth = e, this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle, this._tmpCtx.beginPath(), this._tmpCtx.moveTo(R, R + t), this._tmpCtx.lineTo(R + this._config.deviceCharWidth * T, R + t), this._tmpCtx.stroke()
                                        }
                                        if (M || this._tmpCtx.fillText(h, R, R + this._config.deviceCharHeight), "_" === h && !this._config.allowTransparency) {
                                            let e = p(this._tmpCtx.getImageData(R, R, this._config.deviceCellWidth, this._config.deviceCellHeight), x, k, O);
                                            if (e)
                                                for (let t = 1; t <= 5 && (this._tmpCtx.save(), this._tmpCtx.fillStyle = x.css, this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height), this._tmpCtx.restore(), this._tmpCtx.fillText(h, R, R + this._config.deviceCharHeight - t), e = p(this._tmpCtx.getImageData(R, R, this._config.deviceCellWidth, this._config.deviceCellHeight), x, k, O), e); t++);
                                        }
                                        if (C) {
                                            const e = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 10)),
                                                t = this._tmpCtx.lineWidth % 2 == 1 ? .5 : 0;
                                            this._tmpCtx.lineWidth = e, this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle, this._tmpCtx.beginPath(), this._tmpCtx.moveTo(R, R + Math.floor(this._config.deviceCharHeight / 2) - t), this._tmpCtx.lineTo(R + this._config.deviceCharWidth * T, R + Math.floor(this._config.deviceCharHeight / 2) - t), this._tmpCtx.stroke()
                                        }
                                        this._tmpCtx.restore();
                                        const P = this._tmpCtx.getImageData(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
                                        let F;
                                        if (F = this._config.allowTransparency ? function(e) {
                                                for (let t = 0; t < e.data.length; t += 4)
                                                    if (e.data[t + 3] > 0) return !1;
                                                return !0
                                            }(P) : p(P, x, k, O), F) return _;
                                        const H = this._findGlyphBoundingBox(P, this._workBoundingBox, l, D, M, R);
                                        let Q, N;
                                        for (;;) {
                                            if (0 === this._activePages.length) {
                                                const e = this._createNewPage();
                                                Q = e, N = e.currentRow, N.height = H.size.y;
                                                break
                                            }
                                            Q = this._activePages[this._activePages.length - 1], N = Q.currentRow;
                                            for (const e of this._activePages) H.size.y <= e.currentRow.height && (Q = e, N = e.currentRow);
                                            for (let e = this._activePages.length - 1; e >= 0; e--)
                                                for (const t of this._activePages[e].fixedRows) t.height <= N.height && H.size.y <= t.height && (Q = this._activePages[e], N = t);
                                            if (N.y + H.size.y >= Q.canvas.height || N.height > H.size.y + 2) {
                                                let e = !1;
                                                if (Q.currentRow.y + Q.currentRow.height + H.size.y >= Q.canvas.height) {
                                                    let t;
                                                    for (const e of this._activePages)
                                                        if (e.currentRow.y + e.currentRow.height + H.size.y < e.canvas.height) {
                                                            t = e;
                                                            break
                                                        } if (t) Q = t;
                                                    else if (f.maxAtlasPages && this._pages.length >= f.maxAtlasPages && N.y + H.size.y <= Q.canvas.height && N.height >= H.size.y && N.x + H.size.x <= Q.canvas.width) e = !0;
                                                    else {
                                                        const t = this._createNewPage();
                                                        Q = t, N = t.currentRow, N.height = H.size.y, e = !0
                                                    }
                                                }
                                                e || (Q.currentRow.height > 0 && Q.fixedRows.push(Q.currentRow), N = {
                                                    x: 0,
                                                    y: Q.currentRow.y + Q.currentRow.height,
                                                    height: H.size.y
                                                }, Q.fixedRows.push(N), Q.currentRow = {
                                                    x: 0,
                                                    y: N.y + N.height,
                                                    height: 0
                                                })
                                            }
                                            if (N.x + H.size.x <= Q.canvas.width) break;
                                            N === Q.currentRow ? (N.x = 0, N.y += N.height, N.height = 0) : Q.fixedRows.splice(Q.fixedRows.indexOf(N), 1)
                                        }
                                        return H.texturePage = this._pages.indexOf(Q), H.texturePosition.x = N.x, H.texturePosition.y = N.y, H.texturePositionClipSpace.x = N.x / Q.canvas.width, H.texturePositionClipSpace.y = N.y / Q.canvas.height, H.sizeClipSpace.x /= Q.canvas.width, H.sizeClipSpace.y /= Q.canvas.height, N.height = Math.max(N.height, H.size.y), N.x += H.size.x, Q.ctx.putImageData(P, H.texturePosition.x - this._workBoundingBox.left, H.texturePosition.y - this._workBoundingBox.top, this._workBoundingBox.left, this._workBoundingBox.top, H.size.x, H.size.y), Q.addGlyph(H), Q.version++, H
                                    }
                                    _findGlyphBoundingBox(e, t, i, s, r, n) {
                                        t.top = 0;
                                        const o = s ? this._config.deviceCellHeight : this._tmpCanvas.height,
                                            a = s ? this._config.deviceCellWidth : i;
                                        let h = !1;
                                        for (let i = 0; i < o; i++) {
                                            for (let s = 0; s < a; s++) {
                                                const r = i * this._tmpCanvas.width * 4 + 4 * s + 3;
                                                if (0 !== e.data[r]) {
                                                    t.top = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.left = 0, h = !1;
                                        for (let i = 0; i < n + a; i++) {
                                            for (let s = 0; s < o; s++) {
                                                const r = s * this._tmpCanvas.width * 4 + 4 * i + 3;
                                                if (0 !== e.data[r]) {
                                                    t.left = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.right = a, h = !1;
                                        for (let i = n + a - 1; i >= n; i--) {
                                            for (let s = 0; s < o; s++) {
                                                const r = s * this._tmpCanvas.width * 4 + 4 * i + 3;
                                                if (0 !== e.data[r]) {
                                                    t.right = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        t.bottom = o, h = !1;
                                        for (let i = o - 1; i >= 0; i--) {
                                            for (let s = 0; s < a; s++) {
                                                const r = i * this._tmpCanvas.width * 4 + 4 * s + 3;
                                                if (0 !== e.data[r]) {
                                                    t.bottom = i, h = !0;
                                                    break
                                                }
                                            }
                                            if (h) break
                                        }
                                        return {
                                            texturePage: 0,
                                            texturePosition: {
                                                x: 0,
                                                y: 0
                                            },
                                            texturePositionClipSpace: {
                                                x: 0,
                                                y: 0
                                            },
                                            size: {
                                                x: t.right - t.left + 1,
                                                y: t.bottom - t.top + 1
                                            },
                                            sizeClipSpace: {
                                                x: t.right - t.left + 1,
                                                y: t.bottom - t.top + 1
                                            },
                                            offset: {
                                                x: -t.left + n + (s || r ? Math.floor((this._config.deviceCellWidth - this._config.deviceCharWidth) / 2) : 0),
                                                y: -t.top + n + (s || r ? 1 === this._config.lineHeight ? 0 : Math.round((this._config.deviceCellHeight - this._config.deviceCharHeight) / 2) : 0)
                                            }
                                        }
                                    }
                                }
                                t.TextureAtlas = f;
                                class g {
                                    get percentageUsed() {
                                        return this._usedPixels / (this.canvas.width * this.canvas.height)
                                    }
                                    get glyphs() {
                                        return this._glyphs
                                    }
                                    addGlyph(e) {
                                        this._glyphs.push(e), this._usedPixels += e.size.x * e.size.y
                                    }
                                    constructor(e, t, i) {
                                        if (this._usedPixels = 0, this._glyphs = [], this.version = 0, this.currentRow = {
                                                x: 0,
                                                y: 0,
                                                height: 0
                                            }, this.fixedRows = [], i)
                                            for (const e of i) this._glyphs.push(...e.glyphs), this._usedPixels += e._usedPixels;
                                        this.canvas = v(e, t, t), this.ctx = (0, n.throwIfFalsy)(this.canvas.getContext("2d", {
                                            alpha: !0
                                        }))
                                    }
                                    clear() {
                                        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.currentRow.x = 0, this.currentRow.y = 0, this.currentRow.height = 0, this.fixedRows.length = 0, this.version++
                                    }
                                }

                                function p(e, t, i, s) {
                                    const r = t.rgba >>> 24,
                                        n = t.rgba >>> 16 & 255,
                                        o = t.rgba >>> 8 & 255,
                                        a = i.rgba >>> 24,
                                        h = i.rgba >>> 16 & 255,
                                        l = i.rgba >>> 8 & 255,
                                        c = Math.floor((Math.abs(r - a) + Math.abs(n - h) + Math.abs(o - l)) / 12);
                                    let d = !0;
                                    for (let t = 0; t < e.data.length; t += 4) e.data[t] === r && e.data[t + 1] === n && e.data[t + 2] === o || s && Math.abs(e.data[t] - r) + Math.abs(e.data[t + 1] - n) + Math.abs(e.data[t + 2] - o) < c ? e.data[t + 3] = 0 : d = !1;
                                    return d
                                }

                                function v(e, t, i) {
                                    const s = e.createElement("canvas");
                                    return s.width = t, s.height = i, s
                                }
                            },
                            160: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.contrastRatio = t.toPaddedHex = t.rgba = t.rgb = t.css = t.color = t.channels = t.NULL_COLOR = void 0;
                                const s = i(399);
                                let r = 0,
                                    n = 0,
                                    o = 0,
                                    a = 0;
                                var h, l, c, d, _;

                                function u(e) {
                                    const t = e.toString(16);
                                    return t.length < 2 ? "0" + t : t
                                }

                                function f(e, t) {
                                    return e < t ? (t + .05) / (e + .05) : (e + .05) / (t + .05)
                                }
                                t.NULL_COLOR = {
                                        css: "#00000000",
                                        rgba: 0
                                    },
                                    function(e) {
                                        e.toCss = function(e, t, i, s) {
                                            return void 0 !== s ? `#${u(e)}${u(t)}${u(i)}${u(s)}` : `#${u(e)}${u(t)}${u(i)}`
                                        }, e.toRgba = function(e, t, i, s = 255) {
                                            return (e << 24 | t << 16 | i << 8 | s) >>> 0
                                        }, e.toColor = function(t, i, s, r) {
                                            return {
                                                css: e.toCss(t, i, s, r),
                                                rgba: e.toRgba(t, i, s, r)
                                            }
                                        }
                                    }(h || (t.channels = h = {})),
                                    function(e) {
                                        function t(e, t) {
                                            return a = Math.round(255 * t), [r, n, o] = _.toChannels(e.rgba), {
                                                css: h.toCss(r, n, o, a),
                                                rgba: h.toRgba(r, n, o, a)
                                            }
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t.rgba) / 255, 1 === a) return {
                                                css: t.css,
                                                rgba: t.rgba
                                            };
                                            const i = t.rgba >> 24 & 255,
                                                s = t.rgba >> 16 & 255,
                                                l = t.rgba >> 8 & 255,
                                                c = e.rgba >> 24 & 255,
                                                d = e.rgba >> 16 & 255,
                                                _ = e.rgba >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), {
                                                css: h.toCss(r, n, o),
                                                rgba: h.toRgba(r, n, o)
                                            }
                                        }, e.isOpaque = function(e) {
                                            return 255 == (255 & e.rgba)
                                        }, e.ensureContrastRatio = function(e, t, i) {
                                            const s = _.ensureContrastRatio(e.rgba, t.rgba, i);
                                            if (s) return h.toColor(s >> 24 & 255, s >> 16 & 255, s >> 8 & 255)
                                        }, e.opaque = function(e) {
                                            const t = (255 | e.rgba) >>> 0;
                                            return [r, n, o] = _.toChannels(t), {
                                                css: h.toCss(r, n, o),
                                                rgba: t
                                            }
                                        }, e.opacity = t, e.multiplyOpacity = function(e, i) {
                                            return a = 255 & e.rgba, t(e, a * i / 255)
                                        }, e.toColorRGB = function(e) {
                                            return [e.rgba >> 24 & 255, e.rgba >> 16 & 255, e.rgba >> 8 & 255]
                                        }
                                    }(l || (t.color = l = {})),
                                    function(e) {
                                        let t, i;
                                        if (!s.isNode) {
                                            const e = document.createElement("canvas");
                                            e.width = 1, e.height = 1;
                                            const s = e.getContext("2d", {
                                                willReadFrequently: !0
                                            });
                                            s && (t = s, t.globalCompositeOperation = "copy", i = t.createLinearGradient(0, 0, 1, 1))
                                        }
                                        e.toColor = function(e) {
                                            if (e.match(/#[\da-f]{3,8}/i)) switch (e.length) {
                                                case 4:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), h.toColor(r, n, o);
                                                case 5:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), a = parseInt(e.slice(4, 5).repeat(2), 16), h.toColor(r, n, o, a);
                                                case 7:
                                                    return {
                                                        css: e, rgba: (parseInt(e.slice(1), 16) << 8 | 255) >>> 0
                                                    };
                                                case 9:
                                                    return {
                                                        css: e, rgba: parseInt(e.slice(1), 16) >>> 0
                                                    }
                                            }
                                            const s = e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);
                                            if (s) return r = parseInt(s[1]), n = parseInt(s[2]), o = parseInt(s[3]), a = Math.round(255 * (void 0 === s[5] ? 1 : parseFloat(s[5]))), h.toColor(r, n, o, a);
                                            if (!t || !i) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillStyle = i, t.fillStyle = e, "string" != typeof t.fillStyle) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillRect(0, 0, 1, 1), [r, n, o, a] = t.getImageData(0, 0, 1, 1).data, 255 !== a) throw new Error("css.toColor: Unsupported css format");
                                            return {
                                                rgba: h.toRgba(r, n, o, a),
                                                css: e
                                            }
                                        }
                                    }(c || (t.css = c = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e / 255,
                                                r = t / 255,
                                                n = i / 255;
                                            return .2126 * (s <= .03928 ? s / 12.92 : Math.pow((s + .055) / 1.055, 2.4)) + .7152 * (r <= .03928 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4)) + .0722 * (n <= .03928 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4))
                                        }
                                        e.relativeLuminance = function(e) {
                                            return t(e >> 16 & 255, e >> 8 & 255, 255 & e)
                                        }, e.relativeLuminance2 = t
                                    }(d || (t.rgb = d = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o > 0 || a > 0 || h > 0);) o -= Math.max(0, Math.ceil(.1 * o)), a -= Math.max(0, Math.ceil(.1 * a)), h -= Math.max(0, Math.ceil(.1 * h)), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }

                                        function i(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o < 255 || a < 255 || h < 255);) o = Math.min(255, o + Math.ceil(.1 * (255 - o))), a = Math.min(255, a + Math.ceil(.1 * (255 - a))), h = Math.min(255, h + Math.ceil(.1 * (255 - h))), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t) / 255, 1 === a) return t;
                                            const i = t >> 24 & 255,
                                                s = t >> 16 & 255,
                                                l = t >> 8 & 255,
                                                c = e >> 24 & 255,
                                                d = e >> 16 & 255,
                                                _ = e >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), h.toRgba(r, n, o)
                                        }, e.ensureContrastRatio = function(e, s, r) {
                                            const n = d.relativeLuminance(e >> 8),
                                                o = d.relativeLuminance(s >> 8);
                                            if (f(n, o) < r) {
                                                if (o < n) {
                                                    const o = t(e, s, r),
                                                        a = f(n, d.relativeLuminance(o >> 8));
                                                    if (a < r) {
                                                        const t = i(e, s, r);
                                                        return a > f(n, d.relativeLuminance(t >> 8)) ? o : t
                                                    }
                                                    return o
                                                }
                                                const a = i(e, s, r),
                                                    h = f(n, d.relativeLuminance(a >> 8));
                                                if (h < r) {
                                                    const i = t(e, s, r);
                                                    return h > f(n, d.relativeLuminance(i >> 8)) ? a : i
                                                }
                                                return a
                                            }
                                        }, e.reduceLuminance = t, e.increaseLuminance = i, e.toChannels = function(e) {
                                            return [e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e]
                                        }
                                    }(_ || (t.rgba = _ = {})), t.toPaddedHex = u, t.contrastRatio = f
                            },
                            345: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.runAndSubscribe = t.forwardEvent = t.EventEmitter = void 0, t.EventEmitter = class {
                                    constructor() {
                                        this._listeners = [], this._disposed = !1
                                    }
                                    get event() {
                                        return this._event || (this._event = e => (this._listeners.push(e), {
                                            dispose: () => {
                                                if (!this._disposed)
                                                    for (let t = 0; t < this._listeners.length; t++)
                                                        if (this._listeners[t] === e) return void this._listeners.splice(t, 1)
                                            }
                                        })), this._event
                                    }
                                    fire(e, t) {
                                        const i = [];
                                        for (let e = 0; e < this._listeners.length; e++) i.push(this._listeners[e]);
                                        for (let s = 0; s < i.length; s++) i[s].call(void 0, e, t)
                                    }
                                    dispose() {
                                        this.clearListeners(), this._disposed = !0
                                    }
                                    clearListeners() {
                                        this._listeners && (this._listeners.length = 0)
                                    }
                                }, t.forwardEvent = function(e, t) {
                                    return e((e => t.fire(e)))
                                }, t.runAndSubscribe = function(e, t) {
                                    return t(void 0), e((e => t(e)))
                                }
                            },
                            859: (e, t) => {
                                function i(e) {
                                    for (const t of e) t.dispose();
                                    e.length = 0
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getDisposeArrayDisposable = t.disposeArray = t.toDisposable = t.MutableDisposable = t.Disposable = void 0, t.Disposable = class {
                                    constructor() {
                                        this._disposables = [], this._isDisposed = !1
                                    }
                                    dispose() {
                                        this._isDisposed = !0;
                                        for (const e of this._disposables) e.dispose();
                                        this._disposables.length = 0
                                    }
                                    register(e) {
                                        return this._disposables.push(e), e
                                    }
                                    unregister(e) {
                                        const t = this._disposables.indexOf(e); - 1 !== t && this._disposables.splice(t, 1)
                                    }
                                }, t.MutableDisposable = class {
                                    constructor() {
                                        this._isDisposed = !1
                                    }
                                    get value() {
                                        return this._isDisposed ? void 0 : this._value
                                    }
                                    set value(e) {
                                        this._isDisposed || e === this._value || (this._value?.dispose(), this._value = e)
                                    }
                                    clear() {
                                        this.value = void 0
                                    }
                                    dispose() {
                                        this._isDisposed = !0, this._value?.dispose(), this._value = void 0
                                    }
                                }, t.toDisposable = function(e) {
                                    return {
                                        dispose: e
                                    }
                                }, t.disposeArray = i, t.getDisposeArrayDisposable = function(e) {
                                    return {
                                        dispose: () => i(e)
                                    }
                                }
                            },
                            485: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.FourKeyMap = t.TwoKeyMap = void 0;
                                class i {
                                    constructor() {
                                        this._data = {}
                                    }
                                    set(e, t, i) {
                                        this._data[e] || (this._data[e] = {}), this._data[e][t] = i
                                    }
                                    get(e, t) {
                                        return this._data[e] ? this._data[e][t] : void 0
                                    }
                                    clear() {
                                        this._data = {}
                                    }
                                }
                                t.TwoKeyMap = i, t.FourKeyMap = class {
                                    constructor() {
                                        this._data = new i
                                    }
                                    set(e, t, s, r, n) {
                                        this._data.get(e, t) || this._data.set(e, t, new i), this._data.get(e, t).set(s, r, n)
                                    }
                                    get(e, t, i, s) {
                                        return this._data.get(e, t)?.get(i, s)
                                    }
                                    clear() {
                                        this._data.clear()
                                    }
                                }
                            },
                            399: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.isChromeOS = t.isLinux = t.isWindows = t.isIphone = t.isIpad = t.isMac = t.getSafariVersion = t.isSafari = t.isLegacyEdge = t.isFirefox = t.isNode = void 0, t.isNode = "undefined" != typeof process;
                                const i = t.isNode ? "node" : navigator.userAgent,
                                    s = t.isNode ? "node" : navigator.platform;
                                t.isFirefox = i.includes("Firefox"), t.isLegacyEdge = i.includes("Edge"), t.isSafari = /^((?!chrome|android).)*safari/i.test(i), t.getSafariVersion = function() {
                                    if (!t.isSafari) return 0;
                                    const e = i.match(/Version\/(\d+)/);
                                    return null === e || e.length < 2 ? 0 : parseInt(e[1])
                                }, t.isMac = ["Macintosh", "MacIntel", "MacPPC", "Mac68K"].includes(s), t.isIpad = "iPad" === s, t.isIphone = "iPhone" === s, t.isWindows = ["Windows", "Win16", "Win32", "WinCE"].includes(s), t.isLinux = s.indexOf("Linux") >= 0, t.isChromeOS = /\bCrOS\b/.test(i)
                            },
                            385: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DebouncedIdleTask = t.IdleTaskQueue = t.PriorityTaskQueue = void 0;
                                const s = i(399);
                                class r {
                                    constructor() {
                                        this._tasks = [], this._i = 0
                                    }
                                    enqueue(e) {
                                        this._tasks.push(e), this._start()
                                    }
                                    flush() {
                                        for (; this._i < this._tasks.length;) this._tasks[this._i]() || this._i++;
                                        this.clear()
                                    }
                                    clear() {
                                        this._idleCallback && (this._cancelCallback(this._idleCallback), this._idleCallback = void 0), this._i = 0, this._tasks.length = 0
                                    }
                                    _start() {
                                        this._idleCallback || (this._idleCallback = this._requestCallback(this._process.bind(this)))
                                    }
                                    _process(e) {
                                        this._idleCallback = void 0;
                                        let t = 0,
                                            i = 0,
                                            s = e.timeRemaining(),
                                            r = 0;
                                        for (; this._i < this._tasks.length;) {
                                            if (t = Date.now(), this._tasks[this._i]() || this._i++, t = Math.max(1, Date.now() - t), i = Math.max(t, i), r = e.timeRemaining(), 1.5 * i > r) return s - t < -20 && console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s - t))}ms`), void this._start();
                                            s = r
                                        }
                                        this.clear()
                                    }
                                }
                                class n extends r {
                                    _requestCallback(e) {
                                        return setTimeout((() => e(this._createDeadline(16))))
                                    }
                                    _cancelCallback(e) {
                                        clearTimeout(e)
                                    }
                                    _createDeadline(e) {
                                        const t = Date.now() + e;
                                        return {
                                            timeRemaining: () => Math.max(0, t - Date.now())
                                        }
                                    }
                                }
                                t.PriorityTaskQueue = n, t.IdleTaskQueue = !s.isNode && "requestIdleCallback" in window ? class extends r {
                                    _requestCallback(e) {
                                        return requestIdleCallback(e)
                                    }
                                    _cancelCallback(e) {
                                        cancelIdleCallback(e)
                                    }
                                } : n, t.DebouncedIdleTask = class {
                                    constructor() {
                                        this._queue = new t.IdleTaskQueue
                                    }
                                    set(e) {
                                        this._queue.clear(), this._queue.enqueue(e)
                                    }
                                    flush() {
                                        this._queue.flush()
                                    }
                                }
                            },
                            147: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ExtendedAttrs = t.AttributeData = void 0;
                                class i {
                                    constructor() {
                                        this.fg = 0, this.bg = 0, this.extended = new s
                                    }
                                    static toColorRGB(e) {
                                        return [e >>> 16 & 255, e >>> 8 & 255, 255 & e]
                                    }
                                    static fromColorRGB(e) {
                                        return (255 & e[0]) << 16 | (255 & e[1]) << 8 | 255 & e[2]
                                    }
                                    clone() {
                                        const e = new i;
                                        return e.fg = this.fg, e.bg = this.bg, e.extended = this.extended.clone(), e
                                    }
                                    isInverse() {
                                        return 67108864 & this.fg
                                    }
                                    isBold() {
                                        return 134217728 & this.fg
                                    }
                                    isUnderline() {
                                        return this.hasExtendedAttrs() && 0 !== this.extended.underlineStyle ? 1 : 268435456 & this.fg
                                    }
                                    isBlink() {
                                        return 536870912 & this.fg
                                    }
                                    isInvisible() {
                                        return 1073741824 & this.fg
                                    }
                                    isItalic() {
                                        return 67108864 & this.bg
                                    }
                                    isDim() {
                                        return 134217728 & this.bg
                                    }
                                    isStrikethrough() {
                                        return 2147483648 & this.fg
                                    }
                                    isProtected() {
                                        return 536870912 & this.bg
                                    }
                                    isOverline() {
                                        return 1073741824 & this.bg
                                    }
                                    getFgColorMode() {
                                        return 50331648 & this.fg
                                    }
                                    getBgColorMode() {
                                        return 50331648 & this.bg
                                    }
                                    isFgRGB() {
                                        return 50331648 == (50331648 & this.fg)
                                    }
                                    isBgRGB() {
                                        return 50331648 == (50331648 & this.bg)
                                    }
                                    isFgPalette() {
                                        return 16777216 == (50331648 & this.fg) || 33554432 == (50331648 & this.fg)
                                    }
                                    isBgPalette() {
                                        return 16777216 == (50331648 & this.bg) || 33554432 == (50331648 & this.bg)
                                    }
                                    isFgDefault() {
                                        return 0 == (50331648 & this.fg)
                                    }
                                    isBgDefault() {
                                        return 0 == (50331648 & this.bg)
                                    }
                                    isAttributeDefault() {
                                        return 0 === this.fg && 0 === this.bg
                                    }
                                    getFgColor() {
                                        switch (50331648 & this.fg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.fg;
                                            case 50331648:
                                                return 16777215 & this.fg;
                                            default:
                                                return -1
                                        }
                                    }
                                    getBgColor() {
                                        switch (50331648 & this.bg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.bg;
                                            case 50331648:
                                                return 16777215 & this.bg;
                                            default:
                                                return -1
                                        }
                                    }
                                    hasExtendedAttrs() {
                                        return 268435456 & this.bg
                                    }
                                    updateExtended() {
                                        this.extended.isEmpty() ? this.bg &= -268435457 : this.bg |= 268435456
                                    }
                                    getUnderlineColor() {
                                        if (268435456 & this.bg && ~this.extended.underlineColor) switch (50331648 & this.extended.underlineColor) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.extended.underlineColor;
                                            case 50331648:
                                                return 16777215 & this.extended.underlineColor;
                                            default:
                                                return this.getFgColor()
                                        }
                                        return this.getFgColor()
                                    }
                                    getUnderlineColorMode() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 & this.extended.underlineColor : this.getFgColorMode()
                                    }
                                    isUnderlineColorRGB() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 == (50331648 & this.extended.underlineColor) : this.isFgRGB()
                                    }
                                    isUnderlineColorPalette() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 16777216 == (50331648 & this.extended.underlineColor) || 33554432 == (50331648 & this.extended.underlineColor) : this.isFgPalette()
                                    }
                                    isUnderlineColorDefault() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 0 == (50331648 & this.extended.underlineColor) : this.isFgDefault()
                                    }
                                    getUnderlineStyle() {
                                        return 268435456 & this.fg ? 268435456 & this.bg ? this.extended.underlineStyle : 1 : 0
                                    }
                                    getUnderlineVariantOffset() {
                                        return this.extended.underlineVariantOffset
                                    }
                                }
                                t.AttributeData = i;
                                class s {
                                    get ext() {
                                        return this._urlId ? -469762049 & this._ext | this.underlineStyle << 26 : this._ext
                                    }
                                    set ext(e) {
                                        this._ext = e
                                    }
                                    get underlineStyle() {
                                        return this._urlId ? 5 : (469762048 & this._ext) >> 26
                                    }
                                    set underlineStyle(e) {
                                        this._ext &= -469762049, this._ext |= e << 26 & 469762048
                                    }
                                    get underlineColor() {
                                        return 67108863 & this._ext
                                    }
                                    set underlineColor(e) {
                                        this._ext &= -67108864, this._ext |= 67108863 & e
                                    }
                                    get urlId() {
                                        return this._urlId
                                    }
                                    set urlId(e) {
                                        this._urlId = e
                                    }
                                    get underlineVariantOffset() {
                                        const e = (3758096384 & this._ext) >> 29;
                                        return e < 0 ? 4294967288 ^ e : e
                                    }
                                    set underlineVariantOffset(e) {
                                        this._ext &= 536870911, this._ext |= e << 29 & 3758096384
                                    }
                                    constructor(e = 0, t = 0) {
                                        this._ext = 0, this._urlId = 0, this._ext = e, this._urlId = t
                                    }
                                    clone() {
                                        return new s(this._ext, this._urlId)
                                    }
                                    isEmpty() {
                                        return 0 === this.underlineStyle && 0 === this._urlId
                                    }
                                }
                                t.ExtendedAttrs = s
                            },
                            782: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CellData = void 0;
                                const s = i(133),
                                    r = i(855),
                                    n = i(147);
                                class o extends n.AttributeData {
                                    constructor() {
                                        super(...arguments), this.content = 0, this.fg = 0, this.bg = 0, this.extended = new n.ExtendedAttrs, this.combinedData = ""
                                    }
                                    static fromCharData(e) {
                                        const t = new o;
                                        return t.setFromCharData(e), t
                                    }
                                    isCombined() {
                                        return 2097152 & this.content
                                    }
                                    getWidth() {
                                        return this.content >> 22
                                    }
                                    getChars() {
                                        return 2097152 & this.content ? this.combinedData : 2097151 & this.content ? (0, s.stringFromCodePoint)(2097151 & this.content) : ""
                                    }
                                    getCode() {
                                        return this.isCombined() ? this.combinedData.charCodeAt(this.combinedData.length - 1) : 2097151 & this.content
                                    }
                                    setFromCharData(e) {
                                        this.fg = e[r.CHAR_DATA_ATTR_INDEX], this.bg = 0;
                                        let t = !1;
                                        if (e[r.CHAR_DATA_CHAR_INDEX].length > 2) t = !0;
                                        else if (2 === e[r.CHAR_DATA_CHAR_INDEX].length) {
                                            const i = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
                                            if (55296 <= i && i <= 56319) {
                                                const s = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                                                56320 <= s && s <= 57343 ? this.content = 1024 * (i - 55296) + s - 56320 + 65536 | e[r.CHAR_DATA_WIDTH_INDEX] << 22 : t = !0
                                            } else t = !0
                                        } else this.content = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | e[r.CHAR_DATA_WIDTH_INDEX] << 22;
                                        t && (this.combinedData = e[r.CHAR_DATA_CHAR_INDEX], this.content = 2097152 | e[r.CHAR_DATA_WIDTH_INDEX] << 22)
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }
                                t.CellData = o
                            },
                            855: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.WHITESPACE_CELL_CODE = t.WHITESPACE_CELL_WIDTH = t.WHITESPACE_CELL_CHAR = t.NULL_CELL_CODE = t.NULL_CELL_WIDTH = t.NULL_CELL_CHAR = t.CHAR_DATA_CODE_INDEX = t.CHAR_DATA_WIDTH_INDEX = t.CHAR_DATA_CHAR_INDEX = t.CHAR_DATA_ATTR_INDEX = t.DEFAULT_EXT = t.DEFAULT_ATTR = t.DEFAULT_COLOR = void 0, t.DEFAULT_COLOR = 0, t.DEFAULT_ATTR = 256 | t.DEFAULT_COLOR << 9, t.DEFAULT_EXT = 0, t.CHAR_DATA_ATTR_INDEX = 0, t.CHAR_DATA_CHAR_INDEX = 1, t.CHAR_DATA_WIDTH_INDEX = 2, t.CHAR_DATA_CODE_INDEX = 3, t.NULL_CELL_CHAR = "", t.NULL_CELL_WIDTH = 1, t.NULL_CELL_CODE = 0, t.WHITESPACE_CELL_CHAR = " ", t.WHITESPACE_CELL_WIDTH = 1, t.WHITESPACE_CELL_CODE = 32
                            },
                            133: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Utf8ToUtf32 = t.StringToUtf32 = t.utf32ToString = t.stringFromCodePoint = void 0, t.stringFromCodePoint = function(e) {
                                    return e > 65535 ? (e -= 65536, String.fromCharCode(55296 + (e >> 10)) + String.fromCharCode(e % 1024 + 56320)) : String.fromCharCode(e)
                                }, t.utf32ToString = function(e, t = 0, i = e.length) {
                                    let s = "";
                                    for (let r = t; r < i; ++r) {
                                        let t = e[r];
                                        t > 65535 ? (t -= 65536, s += String.fromCharCode(55296 + (t >> 10)) + String.fromCharCode(t % 1024 + 56320)) : s += String.fromCharCode(t)
                                    }
                                    return s
                                }, t.StringToUtf32 = class {
                                    constructor() {
                                        this._interim = 0
                                    }
                                    clear() {
                                        this._interim = 0
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s = 0,
                                            r = 0;
                                        if (this._interim) {
                                            const i = e.charCodeAt(r++);
                                            56320 <= i && i <= 57343 ? t[s++] = 1024 * (this._interim - 55296) + i - 56320 + 65536 : (t[s++] = this._interim, t[s++] = i), this._interim = 0
                                        }
                                        for (let n = r; n < i; ++n) {
                                            const r = e.charCodeAt(n);
                                            if (55296 <= r && r <= 56319) {
                                                if (++n >= i) return this._interim = r, s;
                                                const o = e.charCodeAt(n);
                                                56320 <= o && o <= 57343 ? t[s++] = 1024 * (r - 55296) + o - 56320 + 65536 : (t[s++] = r, t[s++] = o)
                                            } else 65279 !== r && (t[s++] = r)
                                        }
                                        return s
                                    }
                                }, t.Utf8ToUtf32 = class {
                                    constructor() {
                                        this.interim = new Uint8Array(3)
                                    }
                                    clear() {
                                        this.interim.fill(0)
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s, r, n, o, a = 0,
                                            h = 0,
                                            l = 0;
                                        if (this.interim[0]) {
                                            let s = !1,
                                                r = this.interim[0];
                                            r &= 192 == (224 & r) ? 31 : 224 == (240 & r) ? 15 : 7;
                                            let n, o = 0;
                                            for (;
                                                (n = 63 & this.interim[++o]) && o < 4;) r <<= 6, r |= n;
                                            const h = 192 == (224 & this.interim[0]) ? 2 : 224 == (240 & this.interim[0]) ? 3 : 4,
                                                c = h - o;
                                            for (; l < c;) {
                                                if (l >= i) return 0;
                                                if (n = e[l++], 128 != (192 & n)) {
                                                    l--, s = !0;
                                                    break
                                                }
                                                this.interim[o++] = n, r <<= 6, r |= 63 & n
                                            }
                                            s || (2 === h ? r < 128 ? l-- : t[a++] = r : 3 === h ? r < 2048 || r >= 55296 && r <= 57343 || 65279 === r || (t[a++] = r) : r < 65536 || r > 1114111 || (t[a++] = r)), this.interim.fill(0)
                                        }
                                        const c = i - 4;
                                        let d = l;
                                        for (; d < i;) {
                                            for (; !(!(d < c) || 128 & (s = e[d]) || 128 & (r = e[d + 1]) || 128 & (n = e[d + 2]) || 128 & (o = e[d + 3]));) t[a++] = s, t[a++] = r, t[a++] = n, t[a++] = o, d += 4;
                                            if (s = e[d++], s < 128) t[a++] = s;
                                            else if (192 == (224 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (31 & s) << 6 | 63 & r, h < 128) {
                                                    d--;
                                                    continue
                                                }
                                                t[a++] = h
                                            } else if (224 == (240 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (15 & s) << 12 | (63 & r) << 6 | 63 & n, h < 2048 || h >= 55296 && h <= 57343 || 65279 === h) continue;
                                                t[a++] = h
                                            } else if (240 == (248 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, this.interim[2] = n, a;
                                                if (o = e[d++], 128 != (192 & o)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (7 & s) << 18 | (63 & r) << 12 | (63 & n) << 6 | 63 & o, h < 65536 || h > 1114111) continue;
                                                t[a++] = h
                                            }
                                        }
                                        return a
                                    }
                                }
                            },
                            776: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.traceCall = t.setTraceLogger = t.LogService = void 0;
                                const n = i(859),
                                    o = i(97),
                                    a = {
                                        trace: o.LogLevelEnum.TRACE,
                                        debug: o.LogLevelEnum.DEBUG,
                                        info: o.LogLevelEnum.INFO,
                                        warn: o.LogLevelEnum.WARN,
                                        error: o.LogLevelEnum.ERROR,
                                        off: o.LogLevelEnum.OFF
                                    };
                                let h, l = t.LogService = class extends n.Disposable {
                                    get logLevel() {
                                        return this._logLevel
                                    }
                                    constructor(e) {
                                        super(), this._optionsService = e, this._logLevel = o.LogLevelEnum.OFF, this._updateLogLevel(), this.register(this._optionsService.onSpecificOptionChange("logLevel", (() => this._updateLogLevel()))), h = this
                                    }
                                    _updateLogLevel() {
                                        this._logLevel = a[this._optionsService.rawOptions.logLevel]
                                    }
                                    _evalLazyOptionalParams(e) {
                                        for (let t = 0; t < e.length; t++) "function" == typeof e[t] && (e[t] = e[t]())
                                    }
                                    _log(e, t, i) {
                                        this._evalLazyOptionalParams(i), e.call(console, (this._optionsService.options.logger ? "" : "xterm.js: ") + t, ...i)
                                    }
                                    trace(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.TRACE && this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    debug(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.DEBUG && this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    info(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.INFO && this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, e, t)
                                    }
                                    warn(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.WARN && this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, e, t)
                                    }
                                    error(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.ERROR && this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, e, t)
                                    }
                                };
                                t.LogService = l = s([r(0, o.IOptionsService)], l), t.setTraceLogger = function(e) {
                                    h = e
                                }, t.traceCall = function(e, t, i) {
                                    if ("function" != typeof i.value) throw new Error("not supported");
                                    const s = i.value;
                                    i.value = function(...e) {
                                        if (h.logLevel !== o.LogLevelEnum.TRACE) return s.apply(this, e);
                                        h.trace(`GlyphRenderer#${s.name}(${e.map((e => JSON.stringify(e))).join(", ")})`);
                                        const t = s.apply(this, e);
                                        return h.trace(`GlyphRenderer#${s.name} return`, t), t
                                    }
                                }
                            },
                            726: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createDecorator = t.getServiceDependencies = t.serviceRegistry = void 0;
                                const i = "di$target",
                                    s = "di$dependencies";
                                t.serviceRegistry = new Map, t.getServiceDependencies = function(e) {
                                    return e[s] || []
                                }, t.createDecorator = function(e) {
                                    if (t.serviceRegistry.has(e)) return t.serviceRegistry.get(e);
                                    const r = function(e, t, n) {
                                        if (3 !== arguments.length) throw new Error("@IServiceName-decorator can only be used to decorate a parameter");
                                        ! function(e, t, r) {
                                            t[i] === t ? t[s].push({
                                                id: e,
                                                index: r
                                            }) : (t[s] = [{
                                                id: e,
                                                index: r
                                            }], t[i] = t)
                                        }(r, e, n)
                                    };
                                    return r.toString = () => e, t.serviceRegistry.set(e, r), r
                                }
                            },
                            97: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.IDecorationService = t.IUnicodeService = t.IOscLinkService = t.IOptionsService = t.ILogService = t.LogLevelEnum = t.IInstantiationService = t.ICharsetService = t.ICoreService = t.ICoreMouseService = t.IBufferService = void 0;
                                const s = i(726);
                                var r;
                                t.IBufferService = (0, s.createDecorator)("BufferService"), t.ICoreMouseService = (0, s.createDecorator)("CoreMouseService"), t.ICoreService = (0, s.createDecorator)("CoreService"), t.ICharsetService = (0, s.createDecorator)("CharsetService"), t.IInstantiationService = (0, s.createDecorator)("InstantiationService"),
                                    function(e) {
                                        e[e.TRACE = 0] = "TRACE", e[e.DEBUG = 1] = "DEBUG", e[e.INFO = 2] = "INFO", e[e.WARN = 3] = "WARN", e[e.ERROR = 4] = "ERROR", e[e.OFF = 5] = "OFF"
                                    }(r || (t.LogLevelEnum = r = {})), t.ILogService = (0, s.createDecorator)("LogService"), t.IOptionsService = (0, s.createDecorator)("OptionsService"), t.IOscLinkService = (0, s.createDecorator)("OscLinkService"), t.IUnicodeService = (0, s.createDecorator)("UnicodeService"), t.IDecorationService = (0, s.createDecorator)("DecorationService")
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s].call(n.exports, n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.WebglAddon = void 0;
                        const t = i(345),
                            r = i(859),
                            n = i(399),
                            o = i(666),
                            a = i(776);
                        class h extends r.Disposable {
                            constructor(e) {
                                if (n.isSafari && (0, n.getSafariVersion)() < 16) {
                                    const e = {
                                        antialias: !1,
                                        depth: !1,
                                        preserveDrawingBuffer: !0
                                    };
                                    if (!document.createElement("canvas").getContext("webgl2", e)) throw new Error("Webgl2 is only supported on Safari 16 and above")
                                }
                                super(), this._preserveDrawingBuffer = e, this._onChangeTextureAtlas = this.register(new t.EventEmitter), this.onChangeTextureAtlas = this._onChangeTextureAtlas.event, this._onAddTextureAtlasCanvas = this.register(new t.EventEmitter), this.onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event, this._onRemoveTextureAtlasCanvas = this.register(new t.EventEmitter), this.onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event, this._onContextLoss = this.register(new t.EventEmitter), this.onContextLoss = this._onContextLoss.event
                            }
                            activate(e) {
                                const i = e._core;
                                if (!e.element) return void this.register(i.onWillOpen((() => this.activate(e))));
                                this._terminal = e;
                                const s = i.coreService,
                                    n = i.optionsService,
                                    h = i,
                                    l = h._renderService,
                                    c = h._characterJoinerService,
                                    d = h._charSizeService,
                                    _ = h._coreBrowserService,
                                    u = h._decorationService,
                                    f = h._logService,
                                    g = h._themeService;
                                (0, a.setTraceLogger)(f), this._renderer = this.register(new o.WebglRenderer(e, c, d, _, s, u, n, g, this._preserveDrawingBuffer)), this.register((0, t.forwardEvent)(this._renderer.onContextLoss, this._onContextLoss)), this.register((0, t.forwardEvent)(this._renderer.onChangeTextureAtlas, this._onChangeTextureAtlas)), this.register((0, t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas)), this.register((0, t.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas, this._onRemoveTextureAtlasCanvas)), l.setRenderer(this._renderer), this.register((0, r.toDisposable)((() => {
                                    const t = this._terminal._core._renderService;
                                    t.setRenderer(this._terminal._core._createRenderer()), t.handleResize(e.cols, e.rows)
                                })))
                            }
                            get textureAtlas() {
                                return this._renderer?.textureAtlas
                            }
                            clearTextureAtlas() {
                                this._renderer?.clearTextureAtlas()
                            }
                        }
                        e.WebglAddon = h
                    })(), s
                })(), e.exports = t()
            },
            436: e => {
                var t;
                globalThis, t = () => (() => {
                    "use strict";
                    var e = {
                            4567: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.AccessibilityManager = void 0;
                                const n = i(9042),
                                    o = i(9924),
                                    a = i(844),
                                    h = i(4725),
                                    l = i(2585),
                                    c = i(3656);
                                let d = t.AccessibilityManager = class extends a.Disposable {
                                    constructor(e, t, i, s) {
                                        super(), this._terminal = e, this._coreBrowserService = i, this._renderService = s, this._rowColumns = new WeakMap, this._liveRegionLineCount = 0, this._charsToConsume = [], this._charsToAnnounce = "", this._accessibilityContainer = this._coreBrowserService.mainDocument.createElement("div"), this._accessibilityContainer.classList.add("xterm-accessibility"), this._rowContainer = this._coreBrowserService.mainDocument.createElement("div"), this._rowContainer.setAttribute("role", "list"), this._rowContainer.classList.add("xterm-accessibility-tree"), this._rowElements = [];
                                        for (let e = 0; e < this._terminal.rows; e++) this._rowElements[e] = this._createAccessibilityTreeNode(), this._rowContainer.appendChild(this._rowElements[e]);
                                        if (this._topBoundaryFocusListener = e => this._handleBoundaryFocus(e, 0), this._bottomBoundaryFocusListener = e => this._handleBoundaryFocus(e, 1), this._rowElements[0].addEventListener("focus", this._topBoundaryFocusListener), this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._refreshRowsDimensions(), this._accessibilityContainer.appendChild(this._rowContainer), this._liveRegion = this._coreBrowserService.mainDocument.createElement("div"), this._liveRegion.classList.add("live-region"), this._liveRegion.setAttribute("aria-live", "assertive"), this._accessibilityContainer.appendChild(this._liveRegion), this._liveRegionDebouncer = this.register(new o.TimeBasedDebouncer(this._renderRows.bind(this))), !this._terminal.element) throw new Error("Cannot enable accessibility before Terminal.open");
                                        this._terminal.element.insertAdjacentElement("afterbegin", this._accessibilityContainer), this.register(this._terminal.onResize((e => this._handleResize(e.rows)))), this.register(this._terminal.onRender((e => this._refreshRows(e.start, e.end)))), this.register(this._terminal.onScroll((() => this._refreshRows()))), this.register(this._terminal.onA11yChar((e => this._handleChar(e)))), this.register(this._terminal.onLineFeed((() => this._handleChar("\n")))), this.register(this._terminal.onA11yTab((e => this._handleTab(e)))), this.register(this._terminal.onKey((e => this._handleKey(e.key)))), this.register(this._terminal.onBlur((() => this._clearLiveRegion()))), this.register(this._renderService.onDimensionsChange((() => this._refreshRowsDimensions()))), this.register((0, c.addDisposableDomListener)(document, "selectionchange", (() => this._handleSelectionChange()))), this.register(this._coreBrowserService.onDprChange((() => this._refreshRowsDimensions()))), this._refreshRows(), this.register((0, a.toDisposable)((() => {
                                            this._accessibilityContainer.remove(), this._rowElements.length = 0
                                        })))
                                    }
                                    _handleTab(e) {
                                        for (let t = 0; t < e; t++) this._handleChar(" ")
                                    }
                                    _handleChar(e) {
                                        this._liveRegionLineCount < 21 && (this._charsToConsume.length > 0 ? this._charsToConsume.shift() !== e && (this._charsToAnnounce += e) : this._charsToAnnounce += e, "\n" === e && (this._liveRegionLineCount++, 21 === this._liveRegionLineCount && (this._liveRegion.textContent += n.tooMuchOutput)))
                                    }
                                    _clearLiveRegion() {
                                        this._liveRegion.textContent = "", this._liveRegionLineCount = 0
                                    }
                                    _handleKey(e) {
                                        this._clearLiveRegion(), /\p{Control}/u.test(e) || this._charsToConsume.push(e)
                                    }
                                    _refreshRows(e, t) {
                                        this._liveRegionDebouncer.refresh(e, t, this._terminal.rows)
                                    }
                                    _renderRows(e, t) {
                                        const i = this._terminal.buffer,
                                            s = i.lines.length.toString();
                                        for (let r = e; r <= t; r++) {
                                            const e = i.lines.get(i.ydisp + r),
                                                t = [],
                                                n = e?.translateToString(!0, void 0, void 0, t) || "",
                                                o = (i.ydisp + r + 1).toString(),
                                                a = this._rowElements[r];
                                            a && (0 === n.length ? (a.innerText = "", this._rowColumns.set(a, [0, 1])) : (a.textContent = n, this._rowColumns.set(a, t)), a.setAttribute("aria-posinset", o), a.setAttribute("aria-setsize", s))
                                        }
                                        this._announceCharacters()
                                    }
                                    _announceCharacters() {
                                        0 !== this._charsToAnnounce.length && (this._liveRegion.textContent += this._charsToAnnounce, this._charsToAnnounce = "")
                                    }
                                    _handleBoundaryFocus(e, t) {
                                        const i = e.target,
                                            s = this._rowElements[0 === t ? 1 : this._rowElements.length - 2];
                                        if (i.getAttribute("aria-posinset") === (0 === t ? "1" : `${this._terminal.buffer.lines.length}`)) return;
                                        if (e.relatedTarget !== s) return;
                                        let r, n;
                                        if (0 === t ? (r = i, n = this._rowElements.pop(), this._rowContainer.removeChild(n)) : (r = this._rowElements.shift(), n = i, this._rowContainer.removeChild(r)), r.removeEventListener("focus", this._topBoundaryFocusListener), n.removeEventListener("focus", this._bottomBoundaryFocusListener), 0 === t) {
                                            const e = this._createAccessibilityTreeNode();
                                            this._rowElements.unshift(e), this._rowContainer.insertAdjacentElement("afterbegin", e)
                                        } else {
                                            const e = this._createAccessibilityTreeNode();
                                            this._rowElements.push(e), this._rowContainer.appendChild(e)
                                        }
                                        this._rowElements[0].addEventListener("focus", this._topBoundaryFocusListener), this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._terminal.scrollLines(0 === t ? -1 : 1), this._rowElements[0 === t ? 1 : this._rowElements.length - 2].focus(), e.preventDefault(), e.stopImmediatePropagation()
                                    }
                                    _handleSelectionChange() {
                                        if (0 === this._rowElements.length) return;
                                        const e = document.getSelection();
                                        if (!e) return;
                                        if (e.isCollapsed) return void(this._rowContainer.contains(e.anchorNode) && this._terminal.clearSelection());
                                        if (!e.anchorNode || !e.focusNode) return void console.error("anchorNode and/or focusNode are null");
                                        let t = {
                                                node: e.anchorNode,
                                                offset: e.anchorOffset
                                            },
                                            i = {
                                                node: e.focusNode,
                                                offset: e.focusOffset
                                            };
                                        if ((t.node.compareDocumentPosition(i.node) & Node.DOCUMENT_POSITION_PRECEDING || t.node === i.node && t.offset > i.offset) && ([t, i] = [i, t]), t.node.compareDocumentPosition(this._rowElements[0]) & (Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING) && (t = {
                                                node: this._rowElements[0].childNodes[0],
                                                offset: 0
                                            }), !this._rowContainer.contains(t.node)) return;
                                        const s = this._rowElements.slice(-1)[0];
                                        if (i.node.compareDocumentPosition(s) & (Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_PRECEDING) && (i = {
                                                node: s,
                                                offset: s.textContent?.length ?? 0
                                            }), !this._rowContainer.contains(i.node)) return;
                                        const r = ({
                                                node: e,
                                                offset: t
                                            }) => {
                                                const i = e instanceof Text ? e.parentNode : e;
                                                let s = parseInt(i?.getAttribute("aria-posinset"), 10) - 1;
                                                if (isNaN(s)) return console.warn("row is invalid. Race condition?"), null;
                                                const r = this._rowColumns.get(i);
                                                if (!r) return console.warn("columns is null. Race condition?"), null;
                                                let n = t < r.length ? r[t] : r.slice(-1)[0] + 1;
                                                return n >= this._terminal.cols && (++s, n = 0), {
                                                    row: s,
                                                    column: n
                                                }
                                            },
                                            n = r(t),
                                            o = r(i);
                                        if (n && o) {
                                            if (n.row > o.row || n.row === o.row && n.column >= o.column) throw new Error("invalid range");
                                            this._terminal.select(n.column, n.row, (o.row - n.row) * this._terminal.cols - n.column + o.column)
                                        }
                                    }
                                    _handleResize(e) {
                                        this._rowElements[this._rowElements.length - 1].removeEventListener("focus", this._bottomBoundaryFocusListener);
                                        for (let e = this._rowContainer.children.length; e < this._terminal.rows; e++) this._rowElements[e] = this._createAccessibilityTreeNode(), this._rowContainer.appendChild(this._rowElements[e]);
                                        for (; this._rowElements.length > e;) this._rowContainer.removeChild(this._rowElements.pop());
                                        this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._refreshRowsDimensions()
                                    }
                                    _createAccessibilityTreeNode() {
                                        const e = this._coreBrowserService.mainDocument.createElement("div");
                                        return e.setAttribute("role", "listitem"), e.tabIndex = -1, this._refreshRowDimensions(e), e
                                    }
                                    _refreshRowsDimensions() {
                                        if (this._renderService.dimensions.css.cell.height) {
                                            this._accessibilityContainer.style.width = `${this._renderService.dimensions.css.canvas.width}px`, this._rowElements.length !== this._terminal.rows && this._handleResize(this._terminal.rows);
                                            for (let e = 0; e < this._terminal.rows; e++) this._refreshRowDimensions(this._rowElements[e])
                                        }
                                    }
                                    _refreshRowDimensions(e) {
                                        e.style.height = `${this._renderService.dimensions.css.cell.height}px`
                                    }
                                };
                                t.AccessibilityManager = d = s([r(1, l.IInstantiationService), r(2, h.ICoreBrowserService), r(3, h.IRenderService)], d)
                            },
                            3614: (e, t) => {
                                function i(e) {
                                    return e.replace(/\r?\n/g, "\r")
                                }

                                function s(e, t) {
                                    return t ? "[200~" + e + "[201~" : e
                                }

                                function r(e, t, r, n) {
                                    e = s(e = i(e), r.decPrivateModes.bracketedPasteMode && !0 !== n.rawOptions.ignoreBracketedPasteMode), r.triggerDataEvent(e, !0), t.value = ""
                                }

                                function n(e, t, i) {
                                    const s = i.getBoundingClientRect(),
                                        r = e.clientX - s.left - 10,
                                        n = e.clientY - s.top - 10;
                                    t.style.width = "20px", t.style.height = "20px", t.style.left = `${r}px`, t.style.top = `${n}px`, t.style.zIndex = "1000", t.focus()
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.rightClickHandler = t.moveTextAreaUnderMouseCursor = t.paste = t.handlePasteEvent = t.copyHandler = t.bracketTextForPaste = t.prepareTextForTerminal = void 0, t.prepareTextForTerminal = i, t.bracketTextForPaste = s, t.copyHandler = function(e, t) {
                                    e.clipboardData && e.clipboardData.setData("text/plain", t.selectionText), e.preventDefault()
                                }, t.handlePasteEvent = function(e, t, i, s) {
                                    e.stopPropagation(), e.clipboardData && r(e.clipboardData.getData("text/plain"), t, i, s)
                                }, t.paste = r, t.moveTextAreaUnderMouseCursor = n, t.rightClickHandler = function(e, t, i, s, r) {
                                    n(e, t, i), r && s.rightClickSelect(e), t.value = s.selectionText, t.select()
                                }
                            },
                            7239: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ColorContrastCache = void 0;
                                const s = i(1505);
                                t.ColorContrastCache = class {
                                    constructor() {
                                        this._color = new s.TwoKeyMap, this._css = new s.TwoKeyMap
                                    }
                                    setCss(e, t, i) {
                                        this._css.set(e, t, i)
                                    }
                                    getCss(e, t) {
                                        return this._css.get(e, t)
                                    }
                                    setColor(e, t, i) {
                                        this._color.set(e, t, i)
                                    }
                                    getColor(e, t) {
                                        return this._color.get(e, t)
                                    }
                                    clear() {
                                        this._color.clear(), this._css.clear()
                                    }
                                }
                            },
                            3656: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.addDisposableDomListener = void 0, t.addDisposableDomListener = function(e, t, i, s) {
                                    e.addEventListener(t, i, s);
                                    let r = !1;
                                    return {
                                        dispose: () => {
                                            r || (r = !0, e.removeEventListener(t, i, s))
                                        }
                                    }
                                }
                            },
                            3551: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Linkifier = void 0;
                                const n = i(3656),
                                    o = i(8460),
                                    a = i(844),
                                    h = i(2585),
                                    l = i(4725);
                                let c = t.Linkifier = class extends a.Disposable {
                                    get currentLink() {
                                        return this._currentLink
                                    }
                                    constructor(e, t, i, s, r) {
                                        super(), this._element = e, this._mouseService = t, this._renderService = i, this._bufferService = s, this._linkProviderService = r, this._linkCacheDisposables = [], this._isMouseOut = !0, this._wasResized = !1, this._activeLine = -1, this._onShowLinkUnderline = this.register(new o.EventEmitter), this.onShowLinkUnderline = this._onShowLinkUnderline.event, this._onHideLinkUnderline = this.register(new o.EventEmitter), this.onHideLinkUnderline = this._onHideLinkUnderline.event, this.register((0, a.getDisposeArrayDisposable)(this._linkCacheDisposables)), this.register((0, a.toDisposable)((() => {
                                            this._lastMouseEvent = void 0, this._activeProviderReplies?.clear()
                                        }))), this.register(this._bufferService.onResize((() => {
                                            this._clearCurrentLink(), this._wasResized = !0
                                        }))), this.register((0, n.addDisposableDomListener)(this._element, "mouseleave", (() => {
                                            this._isMouseOut = !0, this._clearCurrentLink()
                                        }))), this.register((0, n.addDisposableDomListener)(this._element, "mousemove", this._handleMouseMove.bind(this))), this.register((0, n.addDisposableDomListener)(this._element, "mousedown", this._handleMouseDown.bind(this))), this.register((0, n.addDisposableDomListener)(this._element, "mouseup", this._handleMouseUp.bind(this)))
                                    }
                                    _handleMouseMove(e) {
                                        this._lastMouseEvent = e;
                                        const t = this._positionFromMouseEvent(e, this._element, this._mouseService);
                                        if (!t) return;
                                        this._isMouseOut = !1;
                                        const i = e.composedPath();
                                        for (let e = 0; e < i.length; e++) {
                                            const t = i[e];
                                            if (t.classList.contains("xterm")) break;
                                            if (t.classList.contains("xterm-hover")) return
                                        }
                                        this._lastBufferCell && t.x === this._lastBufferCell.x && t.y === this._lastBufferCell.y || (this._handleHover(t), this._lastBufferCell = t)
                                    }
                                    _handleHover(e) {
                                        if (this._activeLine !== e.y || this._wasResized) return this._clearCurrentLink(), this._askForLink(e, !1), void(this._wasResized = !1);
                                        this._currentLink && this._linkAtPosition(this._currentLink.link, e) || (this._clearCurrentLink(), this._askForLink(e, !0))
                                    }
                                    _askForLink(e, t) {
                                        this._activeProviderReplies && t || (this._activeProviderReplies?.forEach((e => {
                                            e?.forEach((e => {
                                                e.link.dispose && e.link.dispose()
                                            }))
                                        })), this._activeProviderReplies = new Map, this._activeLine = e.y);
                                        let i = !1;
                                        for (const [s, r] of this._linkProviderService.linkProviders.entries())
                                            if (t) {
                                                const t = this._activeProviderReplies?.get(s);
                                                t && (i = this._checkLinkProviderResult(s, e, i))
                                            } else r.provideLinks(e.y, (t => {
                                                if (this._isMouseOut) return;
                                                const r = t?.map((e => ({
                                                    link: e
                                                })));
                                                this._activeProviderReplies?.set(s, r), i = this._checkLinkProviderResult(s, e, i), this._activeProviderReplies?.size === this._linkProviderService.linkProviders.length && this._removeIntersectingLinks(e.y, this._activeProviderReplies)
                                            }))
                                    }
                                    _removeIntersectingLinks(e, t) {
                                        const i = new Set;
                                        for (let s = 0; s < t.size; s++) {
                                            const r = t.get(s);
                                            if (r)
                                                for (let t = 0; t < r.length; t++) {
                                                    const s = r[t],
                                                        n = s.link.range.start.y < e ? 0 : s.link.range.start.x,
                                                        o = s.link.range.end.y > e ? this._bufferService.cols : s.link.range.end.x;
                                                    for (let e = n; e <= o; e++) {
                                                        if (i.has(e)) {
                                                            r.splice(t--, 1);
                                                            break
                                                        }
                                                        i.add(e)
                                                    }
                                                }
                                        }
                                    }
                                    _checkLinkProviderResult(e, t, i) {
                                        if (!this._activeProviderReplies) return i;
                                        const s = this._activeProviderReplies.get(e);
                                        let r = !1;
                                        for (let t = 0; t < e; t++) this._activeProviderReplies.has(t) && !this._activeProviderReplies.get(t) || (r = !0);
                                        if (!r && s) {
                                            const e = s.find((e => this._linkAtPosition(e.link, t)));
                                            e && (i = !0, this._handleNewLink(e))
                                        }
                                        if (this._activeProviderReplies.size === this._linkProviderService.linkProviders.length && !i)
                                            for (let e = 0; e < this._activeProviderReplies.size; e++) {
                                                const s = this._activeProviderReplies.get(e)?.find((e => this._linkAtPosition(e.link, t)));
                                                if (s) {
                                                    i = !0, this._handleNewLink(s);
                                                    break
                                                }
                                            }
                                        return i
                                    }
                                    _handleMouseDown() {
                                        this._mouseDownLink = this._currentLink
                                    }
                                    _handleMouseUp(e) {
                                        if (!this._currentLink) return;
                                        const t = this._positionFromMouseEvent(e, this._element, this._mouseService);
                                        t && this._mouseDownLink === this._currentLink && this._linkAtPosition(this._currentLink.link, t) && this._currentLink.link.activate(e, this._currentLink.link.text)
                                    }
                                    _clearCurrentLink(e, t) {
                                        this._currentLink && this._lastMouseEvent && (!e || !t || this._currentLink.link.range.start.y >= e && this._currentLink.link.range.end.y <= t) && (this._linkLeave(this._element, this._currentLink.link, this._lastMouseEvent), this._currentLink = void 0, (0, a.disposeArray)(this._linkCacheDisposables))
                                    }
                                    _handleNewLink(e) {
                                        if (!this._lastMouseEvent) return;
                                        const t = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);
                                        t && this._linkAtPosition(e.link, t) && (this._currentLink = e, this._currentLink.state = {
                                            decorations: {
                                                underline: void 0 === e.link.decorations || e.link.decorations.underline,
                                                pointerCursor: void 0 === e.link.decorations || e.link.decorations.pointerCursor
                                            },
                                            isHovered: !0
                                        }, this._linkHover(this._element, e.link, this._lastMouseEvent), e.link.decorations = {}, Object.defineProperties(e.link.decorations, {
                                            pointerCursor: {
                                                get: () => this._currentLink?.state?.decorations.pointerCursor,
                                                set: e => {
                                                    this._currentLink?.state && this._currentLink.state.decorations.pointerCursor !== e && (this._currentLink.state.decorations.pointerCursor = e, this._currentLink.state.isHovered && this._element.classList.toggle("xterm-cursor-pointer", e))
                                                }
                                            },
                                            underline: {
                                                get: () => this._currentLink?.state?.decorations.underline,
                                                set: t => {
                                                    this._currentLink?.state && this._currentLink?.state?.decorations.underline !== t && (this._currentLink.state.decorations.underline = t, this._currentLink.state.isHovered && this._fireUnderlineEvent(e.link, t))
                                                }
                                            }
                                        }), this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((e => {
                                            if (!this._currentLink) return;
                                            const t = 0 === e.start ? 0 : e.start + 1 + this._bufferService.buffer.ydisp,
                                                i = this._bufferService.buffer.ydisp + 1 + e.end;
                                            if (this._currentLink.link.range.start.y >= t && this._currentLink.link.range.end.y <= i && (this._clearCurrentLink(t, i), this._lastMouseEvent)) {
                                                const e = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);
                                                e && this._askForLink(e, !1)
                                            }
                                        }))))
                                    }
                                    _linkHover(e, t, i) {
                                        this._currentLink?.state && (this._currentLink.state.isHovered = !0, this._currentLink.state.decorations.underline && this._fireUnderlineEvent(t, !0), this._currentLink.state.decorations.pointerCursor && e.classList.add("xterm-cursor-pointer")), t.hover && t.hover(i, t.text)
                                    }
                                    _fireUnderlineEvent(e, t) {
                                        const i = e.range,
                                            s = this._bufferService.buffer.ydisp,
                                            r = this._createLinkUnderlineEvent(i.start.x - 1, i.start.y - s - 1, i.end.x, i.end.y - s - 1, void 0);
                                        (t ? this._onShowLinkUnderline : this._onHideLinkUnderline).fire(r)
                                    }
                                    _linkLeave(e, t, i) {
                                        this._currentLink?.state && (this._currentLink.state.isHovered = !1, this._currentLink.state.decorations.underline && this._fireUnderlineEvent(t, !1), this._currentLink.state.decorations.pointerCursor && e.classList.remove("xterm-cursor-pointer")), t.leave && t.leave(i, t.text)
                                    }
                                    _linkAtPosition(e, t) {
                                        const i = e.range.start.y * this._bufferService.cols + e.range.start.x,
                                            s = e.range.end.y * this._bufferService.cols + e.range.end.x,
                                            r = t.y * this._bufferService.cols + t.x;
                                        return i <= r && r <= s
                                    }
                                    _positionFromMouseEvent(e, t, i) {
                                        const s = i.getCoords(e, t, this._bufferService.cols, this._bufferService.rows);
                                        if (s) return {
                                            x: s[0],
                                            y: s[1] + this._bufferService.buffer.ydisp
                                        }
                                    }
                                    _createLinkUnderlineEvent(e, t, i, s, r) {
                                        return {
                                            x1: e,
                                            y1: t,
                                            x2: i,
                                            y2: s,
                                            cols: this._bufferService.cols,
                                            fg: r
                                        }
                                    }
                                };
                                t.Linkifier = c = s([r(1, l.IMouseService), r(2, l.IRenderService), r(3, h.IBufferService), r(4, l.ILinkProviderService)], c)
                            },
                            9042: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.tooMuchOutput = t.promptLabel = void 0, t.promptLabel = "Terminal input", t.tooMuchOutput = "Too much output to announce, navigate to rows manually to read"
                            },
                            3730: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.OscLinkProvider = void 0;
                                const n = i(511),
                                    o = i(2585);
                                let a = t.OscLinkProvider = class {
                                    constructor(e, t, i) {
                                        this._bufferService = e, this._optionsService = t, this._oscLinkService = i
                                    }
                                    provideLinks(e, t) {
                                        const i = this._bufferService.buffer.lines.get(e - 1);
                                        if (!i) return void t(void 0);
                                        const s = [],
                                            r = this._optionsService.rawOptions.linkHandler,
                                            o = new n.CellData,
                                            a = i.getTrimmedLength();
                                        let l = -1,
                                            c = -1,
                                            d = !1;
                                        for (let t = 0; t < a; t++)
                                            if (-1 !== c || i.hasContent(t)) {
                                                if (i.loadCell(t, o), o.hasExtendedAttrs() && o.extended.urlId) {
                                                    if (-1 === c) {
                                                        c = t, l = o.extended.urlId;
                                                        continue
                                                    }
                                                    d = o.extended.urlId !== l
                                                } else - 1 !== c && (d = !0);
                                                if (d || -1 !== c && t === a - 1) {
                                                    const i = this._oscLinkService.getLinkData(l)?.uri;
                                                    if (i) {
                                                        const n = {
                                                            start: {
                                                                x: c + 1,
                                                                y: e
                                                            },
                                                            end: {
                                                                x: t + (d || t !== a - 1 ? 0 : 1),
                                                                y: e
                                                            }
                                                        };
                                                        let o = !1;
                                                        if (!r?.allowNonHttpProtocols) try {
                                                            const e = new URL(i);
                                                            ["http:", "https:"].includes(e.protocol) || (o = !0)
                                                        } catch (e) {
                                                            o = !0
                                                        }
                                                        o || s.push({
                                                            text: i,
                                                            range: n,
                                                            activate: (e, t) => r ? r.activate(e, t, n) : h(0, t),
                                                            hover: (e, t) => r?.hover?.(e, t, n),
                                                            leave: (e, t) => r?.leave?.(e, t, n)
                                                        })
                                                    }
                                                    d = !1, o.hasExtendedAttrs() && o.extended.urlId ? (c = t, l = o.extended.urlId) : (c = -1, l = -1)
                                                }
                                            } t(s)
                                    }
                                };

                                function h(e, t) {
                                    if (confirm(`Do you want to navigate to ${t}?\n\nWARNING: This link could potentially be dangerous`)) {
                                        const e = window.open();
                                        if (e) {
                                            try {
                                                e.opener = null
                                            } catch {}
                                            e.location.href = t
                                        } else console.warn("Opening link blocked as opener could not be cleared")
                                    }
                                }
                                t.OscLinkProvider = a = s([r(0, o.IBufferService), r(1, o.IOptionsService), r(2, o.IOscLinkService)], a)
                            },
                            6193: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.RenderDebouncer = void 0, t.RenderDebouncer = class {
                                    constructor(e, t) {
                                        this._renderCallback = e, this._coreBrowserService = t, this._refreshCallbacks = []
                                    }
                                    dispose() {
                                        this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0)
                                    }
                                    addRefreshCallback(e) {
                                        return this._refreshCallbacks.push(e), this._animationFrame || (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => this._innerRefresh()))), this._animationFrame
                                    }
                                    refresh(e, t, i) {
                                        this._rowCount = i, e = void 0 !== e ? e : 0, t = void 0 !== t ? t : this._rowCount - 1, this._rowStart = void 0 !== this._rowStart ? Math.min(this._rowStart, e) : e, this._rowEnd = void 0 !== this._rowEnd ? Math.max(this._rowEnd, t) : t, this._animationFrame || (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => this._innerRefresh())))
                                    }
                                    _innerRefresh() {
                                        if (this._animationFrame = void 0, void 0 === this._rowStart || void 0 === this._rowEnd || void 0 === this._rowCount) return void this._runRefreshCallbacks();
                                        const e = Math.max(this._rowStart, 0),
                                            t = Math.min(this._rowEnd, this._rowCount - 1);
                                        this._rowStart = void 0, this._rowEnd = void 0, this._renderCallback(e, t), this._runRefreshCallbacks()
                                    }
                                    _runRefreshCallbacks() {
                                        for (const e of this._refreshCallbacks) e(0);
                                        this._refreshCallbacks = []
                                    }
                                }
                            },
                            3236: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Terminal = void 0;
                                const s = i(3614),
                                    r = i(3656),
                                    n = i(3551),
                                    o = i(9042),
                                    a = i(3730),
                                    h = i(1680),
                                    l = i(3107),
                                    c = i(5744),
                                    d = i(2950),
                                    _ = i(1296),
                                    u = i(428),
                                    f = i(4269),
                                    g = i(5114),
                                    p = i(8934),
                                    v = i(3230),
                                    m = i(9312),
                                    A = i(4725),
                                    C = i(6731),
                                    w = i(8055),
                                    b = i(8969),
                                    y = i(8460),
                                    S = i(844),
                                    E = i(6114),
                                    x = i(8437),
                                    L = i(2584),
                                    I = i(7399),
                                    B = i(5941),
                                    D = i(9074),
                                    k = i(2585),
                                    R = i(5435),
                                    M = i(4567),
                                    T = i(779);
                                class O extends b.CoreTerminal {
                                    get onFocus() {
                                        return this._onFocus.event
                                    }
                                    get onBlur() {
                                        return this._onBlur.event
                                    }
                                    get onA11yChar() {
                                        return this._onA11yCharEmitter.event
                                    }
                                    get onA11yTab() {
                                        return this._onA11yTabEmitter.event
                                    }
                                    get onWillOpen() {
                                        return this._onWillOpen.event
                                    }
                                    constructor(e = {}) {
                                        super(e), this.browser = E, this._keyDownHandled = !1, this._keyDownSeen = !1, this._keyPressHandled = !1, this._unprocessedDeadKey = !1, this._accessibilityManager = this.register(new S.MutableDisposable), this._onCursorMove = this.register(new y.EventEmitter), this.onCursorMove = this._onCursorMove.event, this._onKey = this.register(new y.EventEmitter), this.onKey = this._onKey.event, this._onRender = this.register(new y.EventEmitter), this.onRender = this._onRender.event, this._onSelectionChange = this.register(new y.EventEmitter), this.onSelectionChange = this._onSelectionChange.event, this._onTitleChange = this.register(new y.EventEmitter), this.onTitleChange = this._onTitleChange.event, this._onBell = this.register(new y.EventEmitter), this.onBell = this._onBell.event, this._onFocus = this.register(new y.EventEmitter), this._onBlur = this.register(new y.EventEmitter), this._onA11yCharEmitter = this.register(new y.EventEmitter), this._onA11yTabEmitter = this.register(new y.EventEmitter), this._onWillOpen = this.register(new y.EventEmitter), this._setup(), this._decorationService = this._instantiationService.createInstance(D.DecorationService), this._instantiationService.setService(k.IDecorationService, this._decorationService), this._linkProviderService = this._instantiationService.createInstance(T.LinkProviderService), this._instantiationService.setService(A.ILinkProviderService, this._linkProviderService), this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)), this.register(this._inputHandler.onRequestBell((() => this._onBell.fire()))), this.register(this._inputHandler.onRequestRefreshRows(((e, t) => this.refresh(e, t)))), this.register(this._inputHandler.onRequestSendFocus((() => this._reportFocus()))), this.register(this._inputHandler.onRequestReset((() => this.reset()))), this.register(this._inputHandler.onRequestWindowsOptionsReport((e => this._reportWindowsOptions(e)))), this.register(this._inputHandler.onColor((e => this._handleColorEvent(e)))), this.register((0, y.forwardEvent)(this._inputHandler.onCursorMove, this._onCursorMove)), this.register((0, y.forwardEvent)(this._inputHandler.onTitleChange, this._onTitleChange)), this.register((0, y.forwardEvent)(this._inputHandler.onA11yChar, this._onA11yCharEmitter)), this.register((0, y.forwardEvent)(this._inputHandler.onA11yTab, this._onA11yTabEmitter)), this.register(this._bufferService.onResize((e => this._afterResize(e.cols, e.rows)))), this.register((0, S.toDisposable)((() => {
                                            this._customKeyEventHandler = void 0, this.element?.parentNode?.removeChild(this.element)
                                        })))
                                    }
                                    _handleColorEvent(e) {
                                        if (this._themeService)
                                            for (const t of e) {
                                                let e, i = "";
                                                switch (t.index) {
                                                    case 256:
                                                        e = "foreground", i = "10";
                                                        break;
                                                    case 257:
                                                        e = "background", i = "11";
                                                        break;
                                                    case 258:
                                                        e = "cursor", i = "12";
                                                        break;
                                                    default:
                                                        e = "ansi", i = "4;" + t.index
                                                }
                                                switch (t.type) {
                                                    case 0:
                                                        const s = w.color.toColorRGB("ansi" === e ? this._themeService.colors.ansi[t.index] : this._themeService.colors[e]);
                                                        this.coreService.triggerDataEvent(`${L.C0.ESC}]${i};${(0, B.toRgbString)(s)}${L.C1_ESCAPED.ST}`);
                                                        break;
                                                    case 1:
                                                        if ("ansi" === e) this._themeService.modifyColors((e => e.ansi[t.index] = w.channels.toColor(...t.color)));
                                                        else {
                                                            const i = e;
                                                            this._themeService.modifyColors((e => e[i] = w.channels.toColor(...t.color)))
                                                        }
                                                        break;
                                                    case 2:
                                                        this._themeService.restoreColor(t.index)
                                                }
                                            }
                                    }
                                    _setup() {
                                        super._setup(), this._customKeyEventHandler = void 0
                                    }
                                    get buffer() {
                                        return this.buffers.active
                                    }
                                    focus() {
                                        this.textarea && this.textarea.focus({
                                            preventScroll: !0
                                        })
                                    }
                                    _handleScreenReaderModeOptionChange(e) {
                                        e ? !this._accessibilityManager.value && this._renderService && (this._accessibilityManager.value = this._instantiationService.createInstance(M.AccessibilityManager, this)) : this._accessibilityManager.clear()
                                    }
                                    _handleTextAreaFocus(e) {
                                        this.coreService.decPrivateModes.sendFocus && this.coreService.triggerDataEvent(L.C0.ESC + "[I"), this.element.classList.add("focus"), this._showCursor(), this._onFocus.fire()
                                    }
                                    blur() {
                                        return this.textarea?.blur()
                                    }
                                    _handleTextAreaBlur() {
                                        this.textarea.value = "", this.refresh(this.buffer.y, this.buffer.y), this.coreService.decPrivateModes.sendFocus && this.coreService.triggerDataEvent(L.C0.ESC + "[O"), this.element.classList.remove("focus"), this._onBlur.fire()
                                    }
                                    _syncTextArea() {
                                        if (!this.textarea || !this.buffer.isCursorInViewport || this._compositionHelper.isComposing || !this._renderService) return;
                                        const e = this.buffer.ybase + this.buffer.y,
                                            t = this.buffer.lines.get(e);
                                        if (!t) return;
                                        const i = Math.min(this.buffer.x, this.cols - 1),
                                            s = this._renderService.dimensions.css.cell.height,
                                            r = t.getWidth(i),
                                            n = this._renderService.dimensions.css.cell.width * r,
                                            o = this.buffer.y * this._renderService.dimensions.css.cell.height,
                                            a = i * this._renderService.dimensions.css.cell.width;
                                        this.textarea.style.left = a + "px", this.textarea.style.top = o + "px", this.textarea.style.width = n + "px", this.textarea.style.height = s + "px", this.textarea.style.lineHeight = s + "px", this.textarea.style.zIndex = "-5"
                                    }
                                    _initGlobal() {
                                        this._bindKeys(), this.register((0, r.addDisposableDomListener)(this.element, "copy", (e => {
                                            this.hasSelection() && (0, s.copyHandler)(e, this._selectionService)
                                        })));
                                        const e = e => (0, s.handlePasteEvent)(e, this.textarea, this.coreService, this.optionsService);
                                        this.register((0, r.addDisposableDomListener)(this.textarea, "paste", e)), this.register((0, r.addDisposableDomListener)(this.element, "paste", e)), E.isFirefox ? this.register((0, r.addDisposableDomListener)(this.element, "mousedown", (e => {
                                            2 === e.button && (0, s.rightClickHandler)(e, this.textarea, this.screenElement, this._selectionService, this.options.rightClickSelectsWord)
                                        }))) : this.register((0, r.addDisposableDomListener)(this.element, "contextmenu", (e => {
                                            (0, s.rightClickHandler)(e, this.textarea, this.screenElement, this._selectionService, this.options.rightClickSelectsWord)
                                        }))), E.isLinux && this.register((0, r.addDisposableDomListener)(this.element, "auxclick", (e => {
                                            1 === e.button && (0, s.moveTextAreaUnderMouseCursor)(e, this.textarea, this.screenElement)
                                        })))
                                    }
                                    _bindKeys() {
                                        this.register((0, r.addDisposableDomListener)(this.textarea, "keyup", (e => this._keyUp(e)), !0)), this.register((0, r.addDisposableDomListener)(this.textarea, "keydown", (e => this._keyDown(e)), !0)), this.register((0, r.addDisposableDomListener)(this.textarea, "keypress", (e => this._keyPress(e)), !0)), this.register((0, r.addDisposableDomListener)(this.textarea, "compositionstart", (() => this._compositionHelper.compositionstart()))), this.register((0, r.addDisposableDomListener)(this.textarea, "compositionupdate", (e => this._compositionHelper.compositionupdate(e)))), this.register((0, r.addDisposableDomListener)(this.textarea, "compositionend", (() => this._compositionHelper.compositionend()))), this.register((0, r.addDisposableDomListener)(this.textarea, "input", (e => this._inputEvent(e)), !0)), this.register(this.onRender((() => this._compositionHelper.updateCompositionElements())))
                                    }
                                    open(e) {
                                        if (!e) throw new Error("Terminal requires a parent element.");
                                        if (e.isConnected || this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"), this.element?.ownerDocument.defaultView && this._coreBrowserService) return void(this.element.ownerDocument.defaultView !== this._coreBrowserService.window && (this._coreBrowserService.window = this.element.ownerDocument.defaultView));
                                        this._document = e.ownerDocument, this.options.documentOverride && this.options.documentOverride instanceof Document && (this._document = this.optionsService.rawOptions.documentOverride), this.element = this._document.createElement("div"), this.element.dir = "ltr", this.element.classList.add("terminal"), this.element.classList.add("xterm"), e.appendChild(this.element);
                                        const t = this._document.createDocumentFragment();
                                        this._viewportElement = this._document.createElement("div"), this._viewportElement.classList.add("xterm-viewport"), t.appendChild(this._viewportElement), this._viewportScrollArea = this._document.createElement("div"), this._viewportScrollArea.classList.add("xterm-scroll-area"), this._viewportElement.appendChild(this._viewportScrollArea), this.screenElement = this._document.createElement("div"), this.screenElement.classList.add("xterm-screen"), this.register((0, r.addDisposableDomListener)(this.screenElement, "mousemove", (e => this.updateCursorStyle(e)))), this._helperContainer = this._document.createElement("div"), this._helperContainer.classList.add("xterm-helpers"), this.screenElement.appendChild(this._helperContainer), t.appendChild(this.screenElement), this.textarea = this._document.createElement("textarea"), this.textarea.classList.add("xterm-helper-textarea"), this.textarea.setAttribute("aria-label", o.promptLabel), E.isChromeOS || this.textarea.setAttribute("aria-multiline", "false"), this.textarea.setAttribute("autocorrect", "off"), this.textarea.setAttribute("autocapitalize", "off"), this.textarea.setAttribute("spellcheck", "false"), this.textarea.tabIndex = 0, this._coreBrowserService = this.register(this._instantiationService.createInstance(g.CoreBrowserService, this.textarea, e.ownerDocument.defaultView ?? window, this._document ?? "undefined" != typeof window ? window.document : null)), this._instantiationService.setService(A.ICoreBrowserService, this._coreBrowserService), this.register((0, r.addDisposableDomListener)(this.textarea, "focus", (e => this._handleTextAreaFocus(e)))), this.register((0, r.addDisposableDomListener)(this.textarea, "blur", (() => this._handleTextAreaBlur()))), this._helperContainer.appendChild(this.textarea), this._charSizeService = this._instantiationService.createInstance(u.CharSizeService, this._document, this._helperContainer), this._instantiationService.setService(A.ICharSizeService, this._charSizeService), this._themeService = this._instantiationService.createInstance(C.ThemeService), this._instantiationService.setService(A.IThemeService, this._themeService), this._characterJoinerService = this._instantiationService.createInstance(f.CharacterJoinerService), this._instantiationService.setService(A.ICharacterJoinerService, this._characterJoinerService), this._renderService = this.register(this._instantiationService.createInstance(v.RenderService, this.rows, this.screenElement)), this._instantiationService.setService(A.IRenderService, this._renderService), this.register(this._renderService.onRenderedViewportChange((e => this._onRender.fire(e)))), this.onResize((e => this._renderService.resize(e.cols, e.rows))), this._compositionView = this._document.createElement("div"), this._compositionView.classList.add("composition-view"), this._compositionHelper = this._instantiationService.createInstance(d.CompositionHelper, this.textarea, this._compositionView), this._helperContainer.appendChild(this._compositionView), this._mouseService = this._instantiationService.createInstance(p.MouseService), this._instantiationService.setService(A.IMouseService, this._mouseService), this.linkifier = this.register(this._instantiationService.createInstance(n.Linkifier, this.screenElement)), this.element.appendChild(t);
                                        try {
                                            this._onWillOpen.fire(this.element)
                                        } catch {}
                                        this._renderService.hasRenderer() || this._renderService.setRenderer(this._createRenderer()), this.viewport = this._instantiationService.createInstance(h.Viewport, this._viewportElement, this._viewportScrollArea), this.viewport.onRequestScrollLines((e => this.scrollLines(e.amount, e.suppressScrollEvent, 1))), this.register(this._inputHandler.onRequestSyncScrollBar((() => this.viewport.syncScrollArea()))), this.register(this.viewport), this.register(this.onCursorMove((() => {
                                            this._renderService.handleCursorMove(), this._syncTextArea()
                                        }))), this.register(this.onResize((() => this._renderService.handleResize(this.cols, this.rows)))), this.register(this.onBlur((() => this._renderService.handleBlur()))), this.register(this.onFocus((() => this._renderService.handleFocus()))), this.register(this._renderService.onDimensionsChange((() => this.viewport.syncScrollArea()))), this._selectionService = this.register(this._instantiationService.createInstance(m.SelectionService, this.element, this.screenElement, this.linkifier)), this._instantiationService.setService(A.ISelectionService, this._selectionService), this.register(this._selectionService.onRequestScrollLines((e => this.scrollLines(e.amount, e.suppressScrollEvent)))), this.register(this._selectionService.onSelectionChange((() => this._onSelectionChange.fire()))), this.register(this._selectionService.onRequestRedraw((e => this._renderService.handleSelectionChanged(e.start, e.end, e.columnSelectMode)))), this.register(this._selectionService.onLinuxMouseSelection((e => {
                                            this.textarea.value = e, this.textarea.focus(), this.textarea.select()
                                        }))), this.register(this._onScroll.event((e => {
                                            this.viewport.syncScrollArea(), this._selectionService.refresh()
                                        }))), this.register((0, r.addDisposableDomListener)(this._viewportElement, "scroll", (() => this._selectionService.refresh()))), this.register(this._instantiationService.createInstance(l.BufferDecorationRenderer, this.screenElement)), this.register((0, r.addDisposableDomListener)(this.element, "mousedown", (e => this._selectionService.handleMouseDown(e)))), this.coreMouseService.areMouseEventsActive ? (this._selectionService.disable(), this.element.classList.add("enable-mouse-events")) : this._selectionService.enable(), this.options.screenReaderMode && (this._accessibilityManager.value = this._instantiationService.createInstance(M.AccessibilityManager, this)), this.register(this.optionsService.onSpecificOptionChange("screenReaderMode", (e => this._handleScreenReaderModeOptionChange(e)))), this.options.overviewRulerWidth && (this._overviewRulerRenderer = this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer, this._viewportElement, this.screenElement))), this.optionsService.onSpecificOptionChange("overviewRulerWidth", (e => {
                                            !this._overviewRulerRenderer && e && this._viewportElement && this.screenElement && (this._overviewRulerRenderer = this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer, this._viewportElement, this.screenElement)))
                                        })), this._charSizeService.measure(), this.refresh(0, this.rows - 1), this._initGlobal(), this.bindMouse()
                                    }
                                    _createRenderer() {
                                        return this._instantiationService.createInstance(_.DomRenderer, this, this._document, this.element, this.screenElement, this._viewportElement, this._helperContainer, this.linkifier)
                                    }
                                    bindMouse() {
                                        const e = this,
                                            t = this.element;

                                        function i(t) {
                                            const i = e._mouseService.getMouseReportCoords(t, e.screenElement);
                                            if (!i) return !1;
                                            let s, r;
                                            switch (t.overrideType || t.type) {
                                                case "mousemove":
                                                    r = 32, void 0 === t.buttons ? (s = 3, void 0 !== t.button && (s = t.button < 3 ? t.button : 3)) : s = 1 & t.buttons ? 0 : 4 & t.buttons ? 1 : 2 & t.buttons ? 2 : 3;
                                                    break;
                                                case "mouseup":
                                                    r = 0, s = t.button < 3 ? t.button : 3;
                                                    break;
                                                case "mousedown":
                                                    r = 1, s = t.button < 3 ? t.button : 3;
                                                    break;
                                                case "wheel":
                                                    if (e._customWheelEventHandler && !1 === e._customWheelEventHandler(t)) return !1;
                                                    if (0 === e.viewport.getLinesScrolled(t)) return !1;
                                                    r = t.deltaY < 0 ? 0 : 1, s = 4;
                                                    break;
                                                default:
                                                    return !1
                                            }
                                            return !(void 0 === r || void 0 === s || s > 4) && e.coreMouseService.triggerMouseEvent({
                                                col: i.col,
                                                row: i.row,
                                                x: i.x,
                                                y: i.y,
                                                button: s,
                                                action: r,
                                                ctrl: t.ctrlKey,
                                                alt: t.altKey,
                                                shift: t.shiftKey
                                            })
                                        }
                                        const s = {
                                                mouseup: null,
                                                wheel: null,
                                                mousedrag: null,
                                                mousemove: null
                                            },
                                            n = {
                                                mouseup: e => (i(e), e.buttons || (this._document.removeEventListener("mouseup", s.mouseup), s.mousedrag && this._document.removeEventListener("mousemove", s.mousedrag)), this.cancel(e)),
                                                wheel: e => (i(e), this.cancel(e, !0)),
                                                mousedrag: e => {
                                                    e.buttons && i(e)
                                                },
                                                mousemove: e => {
                                                    e.buttons || i(e)
                                                }
                                            };
                                        this.register(this.coreMouseService.onProtocolChange((e => {
                                            e ? ("debug" === this.optionsService.rawOptions.logLevel && this._logService.debug("Binding to mouse events:", this.coreMouseService.explainEvents(e)), this.element.classList.add("enable-mouse-events"), this._selectionService.disable()) : (this._logService.debug("Unbinding from mouse events."), this.element.classList.remove("enable-mouse-events"), this._selectionService.enable()), 8 & e ? s.mousemove || (t.addEventListener("mousemove", n.mousemove), s.mousemove = n.mousemove) : (t.removeEventListener("mousemove", s.mousemove), s.mousemove = null), 16 & e ? s.wheel || (t.addEventListener("wheel", n.wheel, {
                                                passive: !1
                                            }), s.wheel = n.wheel) : (t.removeEventListener("wheel", s.wheel), s.wheel = null), 2 & e ? s.mouseup || (s.mouseup = n.mouseup) : (this._document.removeEventListener("mouseup", s.mouseup), s.mouseup = null), 4 & e ? s.mousedrag || (s.mousedrag = n.mousedrag) : (this._document.removeEventListener("mousemove", s.mousedrag), s.mousedrag = null)
                                        }))), this.coreMouseService.activeProtocol = this.coreMouseService.activeProtocol, this.register((0, r.addDisposableDomListener)(t, "mousedown", (e => {
                                            if (e.preventDefault(), this.focus(), this.coreMouseService.areMouseEventsActive && !this._selectionService.shouldForceSelection(e)) return i(e), s.mouseup && this._document.addEventListener("mouseup", s.mouseup), s.mousedrag && this._document.addEventListener("mousemove", s.mousedrag), this.cancel(e)
                                        }))), this.register((0, r.addDisposableDomListener)(t, "wheel", (e => {
                                            if (!s.wheel) {
                                                if (this._customWheelEventHandler && !1 === this._customWheelEventHandler(e)) return !1;
                                                if (!this.buffer.hasScrollback) {
                                                    const t = this.viewport.getLinesScrolled(e);
                                                    if (0 === t) return;
                                                    const i = L.C0.ESC + (this.coreService.decPrivateModes.applicationCursorKeys ? "O" : "[") + (e.deltaY < 0 ? "A" : "B");
                                                    let s = "";
                                                    for (let e = 0; e < Math.abs(t); e++) s += i;
                                                    return this.coreService.triggerDataEvent(s, !0), this.cancel(e, !0)
                                                }
                                                return this.viewport.handleWheel(e) ? this.cancel(e) : void 0
                                            }
                                        }), {
                                            passive: !1
                                        })), this.register((0, r.addDisposableDomListener)(t, "touchstart", (e => {
                                            if (!this.coreMouseService.areMouseEventsActive) return this.viewport.handleTouchStart(e), this.cancel(e)
                                        }), {
                                            passive: !0
                                        })), this.register((0, r.addDisposableDomListener)(t, "touchmove", (e => {
                                            if (!this.coreMouseService.areMouseEventsActive) return this.viewport.handleTouchMove(e) ? void 0 : this.cancel(e)
                                        }), {
                                            passive: !1
                                        }))
                                    }
                                    refresh(e, t) {
                                        this._renderService?.refreshRows(e, t)
                                    }
                                    updateCursorStyle(e) {
                                        this._selectionService?.shouldColumnSelect(e) ? this.element.classList.add("column-select") : this.element.classList.remove("column-select")
                                    }
                                    _showCursor() {
                                        this.coreService.isCursorInitialized || (this.coreService.isCursorInitialized = !0, this.refresh(this.buffer.y, this.buffer.y))
                                    }
                                    scrollLines(e, t, i = 0) {
                                        1 === i ? (super.scrollLines(e, t, i), this.refresh(0, this.rows - 1)) : this.viewport?.scrollLines(e)
                                    }
                                    paste(e) {
                                        (0, s.paste)(e, this.textarea, this.coreService, this.optionsService)
                                    }
                                    attachCustomKeyEventHandler(e) {
                                        this._customKeyEventHandler = e
                                    }
                                    attachCustomWheelEventHandler(e) {
                                        this._customWheelEventHandler = e
                                    }
                                    registerLinkProvider(e) {
                                        return this._linkProviderService.registerLinkProvider(e)
                                    }
                                    registerCharacterJoiner(e) {
                                        if (!this._characterJoinerService) throw new Error("Terminal must be opened first");
                                        const t = this._characterJoinerService.register(e);
                                        return this.refresh(0, this.rows - 1), t
                                    }
                                    deregisterCharacterJoiner(e) {
                                        if (!this._characterJoinerService) throw new Error("Terminal must be opened first");
                                        this._characterJoinerService.deregister(e) && this.refresh(0, this.rows - 1)
                                    }
                                    get markers() {
                                        return this.buffer.markers
                                    }
                                    registerMarker(e) {
                                        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + e)
                                    }
                                    registerDecoration(e) {
                                        return this._decorationService.registerDecoration(e)
                                    }
                                    hasSelection() {
                                        return !!this._selectionService && this._selectionService.hasSelection
                                    }
                                    select(e, t, i) {
                                        this._selectionService.setSelection(e, t, i)
                                    }
                                    getSelection() {
                                        return this._selectionService ? this._selectionService.selectionText : ""
                                    }
                                    getSelectionPosition() {
                                        if (this._selectionService && this._selectionService.hasSelection) return {
                                            start: {
                                                x: this._selectionService.selectionStart[0],
                                                y: this._selectionService.selectionStart[1]
                                            },
                                            end: {
                                                x: this._selectionService.selectionEnd[0],
                                                y: this._selectionService.selectionEnd[1]
                                            }
                                        }
                                    }
                                    clearSelection() {
                                        this._selectionService?.clearSelection()
                                    }
                                    selectAll() {
                                        this._selectionService?.selectAll()
                                    }
                                    selectLines(e, t) {
                                        this._selectionService?.selectLines(e, t)
                                    }
                                    _keyDown(e) {
                                        if (this._keyDownHandled = !1, this._keyDownSeen = !0, this._customKeyEventHandler && !1 === this._customKeyEventHandler(e)) return !1;
                                        const t = this.browser.isMac && this.options.macOptionIsMeta && e.altKey;
                                        if (!t && !this._compositionHelper.keydown(e)) return this.options.scrollOnUserInput && this.buffer.ybase !== this.buffer.ydisp && this.scrollToBottom(), !1;
                                        t || "Dead" !== e.key && "AltGraph" !== e.key || (this._unprocessedDeadKey = !0);
                                        const i = (0, I.evaluateKeyboardEvent)(e, this.coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);
                                        if (this.updateCursorStyle(e), 3 === i.type || 2 === i.type) {
                                            const t = this.rows - 1;
                                            return this.scrollLines(2 === i.type ? -t : t), this.cancel(e, !0)
                                        }
                                        return 1 === i.type && this.selectAll(), !!this._isThirdLevelShift(this.browser, e) || (i.cancel && this.cancel(e, !0), !i.key || !!(e.key && !e.ctrlKey && !e.altKey && !e.metaKey && 1 === e.key.length && e.key.charCodeAt(0) >= 65 && e.key.charCodeAt(0) <= 90) || (this._unprocessedDeadKey ? (this._unprocessedDeadKey = !1, !0) : (i.key !== L.C0.ETX && i.key !== L.C0.CR || (this.textarea.value = ""), this._onKey.fire({
                                            key: i.key,
                                            domEvent: e
                                        }), this._showCursor(), this.coreService.triggerDataEvent(i.key, !0), !this.optionsService.rawOptions.screenReaderMode || e.altKey || e.ctrlKey ? this.cancel(e, !0) : void(this._keyDownHandled = !0))))
                                    }
                                    _isThirdLevelShift(e, t) {
                                        const i = e.isMac && !this.options.macOptionIsMeta && t.altKey && !t.ctrlKey && !t.metaKey || e.isWindows && t.altKey && t.ctrlKey && !t.metaKey || e.isWindows && t.getModifierState("AltGraph");
                                        return "keypress" === t.type ? i : i && (!t.keyCode || t.keyCode > 47)
                                    }
                                    _keyUp(e) {
                                        this._keyDownSeen = !1, this._customKeyEventHandler && !1 === this._customKeyEventHandler(e) || (function(e) {
                                            return 16 === e.keyCode || 17 === e.keyCode || 18 === e.keyCode
                                        }(e) || this.focus(), this.updateCursorStyle(e), this._keyPressHandled = !1)
                                    }
                                    _keyPress(e) {
                                        let t;
                                        if (this._keyPressHandled = !1, this._keyDownHandled) return !1;
                                        if (this._customKeyEventHandler && !1 === this._customKeyEventHandler(e)) return !1;
                                        if (this.cancel(e), e.charCode) t = e.charCode;
                                        else if (null === e.which || void 0 === e.which) t = e.keyCode;
                                        else {
                                            if (0 === e.which || 0 === e.charCode) return !1;
                                            t = e.which
                                        }
                                        return !(!t || (e.altKey || e.ctrlKey || e.metaKey) && !this._isThirdLevelShift(this.browser, e) || (t = String.fromCharCode(t), this._onKey.fire({
                                            key: t,
                                            domEvent: e
                                        }), this._showCursor(), this.coreService.triggerDataEvent(t, !0), this._keyPressHandled = !0, this._unprocessedDeadKey = !1, 0))
                                    }
                                    _inputEvent(e) {
                                        if (e.data && "insertText" === e.inputType && (!e.composed || !this._keyDownSeen) && !this.optionsService.rawOptions.screenReaderMode) {
                                            if (this._keyPressHandled) return !1;
                                            this._unprocessedDeadKey = !1;
                                            const t = e.data;
                                            return this.coreService.triggerDataEvent(t, !0), this.cancel(e), !0
                                        }
                                        return !1
                                    }
                                    resize(e, t) {
                                        e !== this.cols || t !== this.rows ? super.resize(e, t) : this._charSizeService && !this._charSizeService.hasValidSize && this._charSizeService.measure()
                                    }
                                    _afterResize(e, t) {
                                        this._charSizeService?.measure(), this.viewport?.syncScrollArea(!0)
                                    }
                                    clear() {
                                        if (0 !== this.buffer.ybase || 0 !== this.buffer.y) {
                                            this.buffer.clearAllMarkers(), this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y)), this.buffer.lines.length = 1, this.buffer.ydisp = 0, this.buffer.ybase = 0, this.buffer.y = 0;
                                            for (let e = 1; e < this.rows; e++) this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));
                                            this._onScroll.fire({
                                                position: this.buffer.ydisp,
                                                source: 0
                                            }), this.viewport?.reset(), this.refresh(0, this.rows - 1)
                                        }
                                    }
                                    reset() {
                                        this.options.rows = this.rows, this.options.cols = this.cols;
                                        const e = this._customKeyEventHandler;
                                        this._setup(), super.reset(), this._selectionService?.reset(), this._decorationService.reset(), this.viewport?.reset(), this._customKeyEventHandler = e, this.refresh(0, this.rows - 1)
                                    }
                                    clearTextureAtlas() {
                                        this._renderService?.clearTextureAtlas()
                                    }
                                    _reportFocus() {
                                        this.element?.classList.contains("focus") ? this.coreService.triggerDataEvent(L.C0.ESC + "[I") : this.coreService.triggerDataEvent(L.C0.ESC + "[O")
                                    }
                                    _reportWindowsOptions(e) {
                                        if (this._renderService) switch (e) {
                                            case R.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:
                                                const e = this._renderService.dimensions.css.canvas.width.toFixed(0),
                                                    t = this._renderService.dimensions.css.canvas.height.toFixed(0);
                                                this.coreService.triggerDataEvent(`${L.C0.ESC}[4;${t};${e}t`);
                                                break;
                                            case R.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:
                                                const i = this._renderService.dimensions.css.cell.width.toFixed(0),
                                                    s = this._renderService.dimensions.css.cell.height.toFixed(0);
                                                this.coreService.triggerDataEvent(`${L.C0.ESC}[6;${s};${i}t`)
                                        }
                                    }
                                    cancel(e, t) {
                                        if (this.options.cancelEvents || t) return e.preventDefault(), e.stopPropagation(), !1
                                    }
                                }
                                t.Terminal = O
                            },
                            9924: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TimeBasedDebouncer = void 0, t.TimeBasedDebouncer = class {
                                    constructor(e, t = 1e3) {
                                        this._renderCallback = e, this._debounceThresholdMS = t, this._lastRefreshMs = 0, this._additionalRefreshRequested = !1
                                    }
                                    dispose() {
                                        this._refreshTimeoutID && clearTimeout(this._refreshTimeoutID)
                                    }
                                    refresh(e, t, i) {
                                        this._rowCount = i, e = void 0 !== e ? e : 0, t = void 0 !== t ? t : this._rowCount - 1, this._rowStart = void 0 !== this._rowStart ? Math.min(this._rowStart, e) : e, this._rowEnd = void 0 !== this._rowEnd ? Math.max(this._rowEnd, t) : t;
                                        const s = Date.now();
                                        if (s - this._lastRefreshMs >= this._debounceThresholdMS) this._lastRefreshMs = s, this._innerRefresh();
                                        else if (!this._additionalRefreshRequested) {
                                            const e = s - this._lastRefreshMs,
                                                t = this._debounceThresholdMS - e;
                                            this._additionalRefreshRequested = !0, this._refreshTimeoutID = window.setTimeout((() => {
                                                this._lastRefreshMs = Date.now(), this._innerRefresh(), this._additionalRefreshRequested = !1, this._refreshTimeoutID = void 0
                                            }), t)
                                        }
                                    }
                                    _innerRefresh() {
                                        if (void 0 === this._rowStart || void 0 === this._rowEnd || void 0 === this._rowCount) return;
                                        const e = Math.max(this._rowStart, 0),
                                            t = Math.min(this._rowEnd, this._rowCount - 1);
                                        this._rowStart = void 0, this._rowEnd = void 0, this._renderCallback(e, t)
                                    }
                                }
                            },
                            1680: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Viewport = void 0;
                                const n = i(3656),
                                    o = i(4725),
                                    a = i(8460),
                                    h = i(844),
                                    l = i(2585);
                                let c = t.Viewport = class extends h.Disposable {
                                    constructor(e, t, i, s, r, o, h, l) {
                                        super(), this._viewportElement = e, this._scrollArea = t, this._bufferService = i, this._optionsService = s, this._charSizeService = r, this._renderService = o, this._coreBrowserService = h, this.scrollBarWidth = 0, this._currentRowHeight = 0, this._currentDeviceCellHeight = 0, this._lastRecordedBufferLength = 0, this._lastRecordedViewportHeight = 0, this._lastRecordedBufferHeight = 0, this._lastTouchY = 0, this._lastScrollTop = 0, this._wheelPartialScroll = 0, this._refreshAnimationFrame = null, this._ignoreNextScrollEvent = !1, this._smoothScrollState = {
                                            startTime: 0,
                                            origin: -1,
                                            target: -1
                                        }, this._onRequestScrollLines = this.register(new a.EventEmitter), this.onRequestScrollLines = this._onRequestScrollLines.event, this.scrollBarWidth = this._viewportElement.offsetWidth - this._scrollArea.offsetWidth || 15, this.register((0, n.addDisposableDomListener)(this._viewportElement, "scroll", this._handleScroll.bind(this))), this._activeBuffer = this._bufferService.buffer, this.register(this._bufferService.buffers.onBufferActivate((e => this._activeBuffer = e.activeBuffer))), this._renderDimensions = this._renderService.dimensions, this.register(this._renderService.onDimensionsChange((e => this._renderDimensions = e))), this._handleThemeChange(l.colors), this.register(l.onChangeColors((e => this._handleThemeChange(e)))), this.register(this._optionsService.onSpecificOptionChange("scrollback", (() => this.syncScrollArea()))), setTimeout((() => this.syncScrollArea()))
                                    }
                                    _handleThemeChange(e) {
                                        this._viewportElement.style.backgroundColor = e.background.css
                                    }
                                    reset() {
                                        this._currentRowHeight = 0, this._currentDeviceCellHeight = 0, this._lastRecordedBufferLength = 0, this._lastRecordedViewportHeight = 0, this._lastRecordedBufferHeight = 0, this._lastTouchY = 0, this._lastScrollTop = 0, this._coreBrowserService.window.requestAnimationFrame((() => this.syncScrollArea()))
                                    }
                                    _refresh(e) {
                                        if (e) return this._innerRefresh(), void(null !== this._refreshAnimationFrame && this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));
                                        null === this._refreshAnimationFrame && (this._refreshAnimationFrame = this._coreBrowserService.window.requestAnimationFrame((() => this._innerRefresh())))
                                    }
                                    _innerRefresh() {
                                        if (this._charSizeService.height > 0) {
                                            this._currentRowHeight = this._renderDimensions.device.cell.height / this._coreBrowserService.dpr, this._currentDeviceCellHeight = this._renderDimensions.device.cell.height, this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;
                                            const e = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderDimensions.css.canvas.height);
                                            this._lastRecordedBufferHeight !== e && (this._lastRecordedBufferHeight = e, this._scrollArea.style.height = this._lastRecordedBufferHeight + "px")
                                        }
                                        const e = this._bufferService.buffer.ydisp * this._currentRowHeight;
                                        this._viewportElement.scrollTop !== e && (this._ignoreNextScrollEvent = !0, this._viewportElement.scrollTop = e), this._refreshAnimationFrame = null
                                    }
                                    syncScrollArea(e = !1) {
                                        if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) return this._lastRecordedBufferLength = this._bufferService.buffer.lines.length, void this._refresh(e);
                                        this._lastRecordedViewportHeight === this._renderService.dimensions.css.canvas.height && this._lastScrollTop === this._activeBuffer.ydisp * this._currentRowHeight && this._renderDimensions.device.cell.height === this._currentDeviceCellHeight || this._refresh(e)
                                    }
                                    _handleScroll(e) {
                                        if (this._lastScrollTop = this._viewportElement.scrollTop, !this._viewportElement.offsetParent) return;
                                        if (this._ignoreNextScrollEvent) return this._ignoreNextScrollEvent = !1, void this._onRequestScrollLines.fire({
                                            amount: 0,
                                            suppressScrollEvent: !0
                                        });
                                        const t = Math.round(this._lastScrollTop / this._currentRowHeight) - this._bufferService.buffer.ydisp;
                                        this._onRequestScrollLines.fire({
                                            amount: t,
                                            suppressScrollEvent: !0
                                        })
                                    }
                                    _smoothScroll() {
                                        if (this._isDisposed || -1 === this._smoothScrollState.origin || -1 === this._smoothScrollState.target) return;
                                        const e = this._smoothScrollPercent();
                                        this._viewportElement.scrollTop = this._smoothScrollState.origin + Math.round(e * (this._smoothScrollState.target - this._smoothScrollState.origin)), e < 1 ? this._coreBrowserService.window.requestAnimationFrame((() => this._smoothScroll())) : this._clearSmoothScrollState()
                                    }
                                    _smoothScrollPercent() {
                                        return this._optionsService.rawOptions.smoothScrollDuration && this._smoothScrollState.startTime ? Math.max(Math.min((Date.now() - this._smoothScrollState.startTime) / this._optionsService.rawOptions.smoothScrollDuration, 1), 0) : 1
                                    }
                                    _clearSmoothScrollState() {
                                        this._smoothScrollState.startTime = 0, this._smoothScrollState.origin = -1, this._smoothScrollState.target = -1
                                    }
                                    _bubbleScroll(e, t) {
                                        const i = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;
                                        return !(t < 0 && 0 !== this._viewportElement.scrollTop || t > 0 && i < this._lastRecordedBufferHeight) || (e.cancelable && e.preventDefault(), !1)
                                    }
                                    handleWheel(e) {
                                        const t = this._getPixelsScrolled(e);
                                        return 0 !== t && (this._optionsService.rawOptions.smoothScrollDuration ? (this._smoothScrollState.startTime = Date.now(), this._smoothScrollPercent() < 1 ? (this._smoothScrollState.origin = this._viewportElement.scrollTop, -1 === this._smoothScrollState.target ? this._smoothScrollState.target = this._viewportElement.scrollTop + t : this._smoothScrollState.target += t, this._smoothScrollState.target = Math.max(Math.min(this._smoothScrollState.target, this._viewportElement.scrollHeight), 0), this._smoothScroll()) : this._clearSmoothScrollState()) : this._viewportElement.scrollTop += t, this._bubbleScroll(e, t))
                                    }
                                    scrollLines(e) {
                                        if (0 !== e)
                                            if (this._optionsService.rawOptions.smoothScrollDuration) {
                                                const t = e * this._currentRowHeight;
                                                this._smoothScrollState.startTime = Date.now(), this._smoothScrollPercent() < 1 ? (this._smoothScrollState.origin = this._viewportElement.scrollTop, this._smoothScrollState.target = this._smoothScrollState.origin + t, this._smoothScrollState.target = Math.max(Math.min(this._smoothScrollState.target, this._viewportElement.scrollHeight), 0), this._smoothScroll()) : this._clearSmoothScrollState()
                                            } else this._onRequestScrollLines.fire({
                                                amount: e,
                                                suppressScrollEvent: !1
                                            })
                                    }
                                    _getPixelsScrolled(e) {
                                        if (0 === e.deltaY || e.shiftKey) return 0;
                                        let t = this._applyScrollModifier(e.deltaY, e);
                                        return e.deltaMode === WheelEvent.DOM_DELTA_LINE ? t *= this._currentRowHeight : e.deltaMode === WheelEvent.DOM_DELTA_PAGE && (t *= this._currentRowHeight * this._bufferService.rows), t
                                    }
                                    getBufferElements(e, t) {
                                        let i, s = "";
                                        const r = [],
                                            n = t ?? this._bufferService.buffer.lines.length,
                                            o = this._bufferService.buffer.lines;
                                        for (let t = e; t < n; t++) {
                                            const e = o.get(t);
                                            if (!e) continue;
                                            const n = o.get(t + 1)?.isWrapped;
                                            if (s += e.translateToString(!n), !n || t === o.length - 1) {
                                                const e = document.createElement("div");
                                                e.textContent = s, r.push(e), s.length > 0 && (i = e), s = ""
                                            }
                                        }
                                        return {
                                            bufferElements: r,
                                            cursorElement: i
                                        }
                                    }
                                    getLinesScrolled(e) {
                                        if (0 === e.deltaY || e.shiftKey) return 0;
                                        let t = this._applyScrollModifier(e.deltaY, e);
                                        return e.deltaMode === WheelEvent.DOM_DELTA_PIXEL ? (t /= this._currentRowHeight + 0, this._wheelPartialScroll += t, t = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1), this._wheelPartialScroll %= 1) : e.deltaMode === WheelEvent.DOM_DELTA_PAGE && (t *= this._bufferService.rows), t
                                    }
                                    _applyScrollModifier(e, t) {
                                        const i = this._optionsService.rawOptions.fastScrollModifier;
                                        return "alt" === i && t.altKey || "ctrl" === i && t.ctrlKey || "shift" === i && t.shiftKey ? e * this._optionsService.rawOptions.fastScrollSensitivity * this._optionsService.rawOptions.scrollSensitivity : e * this._optionsService.rawOptions.scrollSensitivity
                                    }
                                    handleTouchStart(e) {
                                        this._lastTouchY = e.touches[0].pageY
                                    }
                                    handleTouchMove(e) {
                                        const t = this._lastTouchY - e.touches[0].pageY;
                                        return this._lastTouchY = e.touches[0].pageY, 0 !== t && (this._viewportElement.scrollTop += t, this._bubbleScroll(e, t))
                                    }
                                };
                                t.Viewport = c = s([r(2, l.IBufferService), r(3, l.IOptionsService), r(4, o.ICharSizeService), r(5, o.IRenderService), r(6, o.ICoreBrowserService), r(7, o.IThemeService)], c)
                            },
                            3107: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferDecorationRenderer = void 0;
                                const n = i(4725),
                                    o = i(844),
                                    a = i(2585);
                                let h = t.BufferDecorationRenderer = class extends o.Disposable {
                                    constructor(e, t, i, s, r) {
                                        super(), this._screenElement = e, this._bufferService = t, this._coreBrowserService = i, this._decorationService = s, this._renderService = r, this._decorationElements = new Map, this._altBufferIsActive = !1, this._dimensionsChanged = !1, this._container = document.createElement("div"), this._container.classList.add("xterm-decoration-container"), this._screenElement.appendChild(this._container), this.register(this._renderService.onRenderedViewportChange((() => this._doRefreshDecorations()))), this.register(this._renderService.onDimensionsChange((() => {
                                            this._dimensionsChanged = !0, this._queueRefresh()
                                        }))), this.register(this._coreBrowserService.onDprChange((() => this._queueRefresh()))), this.register(this._bufferService.buffers.onBufferActivate((() => {
                                            this._altBufferIsActive = this._bufferService.buffer === this._bufferService.buffers.alt
                                        }))), this.register(this._decorationService.onDecorationRegistered((() => this._queueRefresh()))), this.register(this._decorationService.onDecorationRemoved((e => this._removeDecoration(e)))), this.register((0, o.toDisposable)((() => {
                                            this._container.remove(), this._decorationElements.clear()
                                        })))
                                    }
                                    _queueRefresh() {
                                        void 0 === this._animationFrame && (this._animationFrame = this._renderService.addRefreshCallback((() => {
                                            this._doRefreshDecorations(), this._animationFrame = void 0
                                        })))
                                    }
                                    _doRefreshDecorations() {
                                        for (const e of this._decorationService.decorations) this._renderDecoration(e);
                                        this._dimensionsChanged = !1
                                    }
                                    _renderDecoration(e) {
                                        this._refreshStyle(e), this._dimensionsChanged && this._refreshXPosition(e)
                                    }
                                    _createElement(e) {
                                        const t = this._coreBrowserService.mainDocument.createElement("div");
                                        t.classList.add("xterm-decoration"), t.classList.toggle("xterm-decoration-top-layer", "top" === e?.options?.layer), t.style.width = `${Math.round((e.options.width || 1) * this._renderService.dimensions.css.cell.width)}px`, t.style.height = (e.options.height || 1) * this._renderService.dimensions.css.cell.height + "px", t.style.top = (e.marker.line - this._bufferService.buffers.active.ydisp) * this._renderService.dimensions.css.cell.height + "px", t.style.lineHeight = `${this._renderService.dimensions.css.cell.height}px`;
                                        const i = e.options.x ?? 0;
                                        return i && i > this._bufferService.cols && (t.style.display = "none"), this._refreshXPosition(e, t), t
                                    }
                                    _refreshStyle(e) {
                                        const t = e.marker.line - this._bufferService.buffers.active.ydisp;
                                        if (t < 0 || t >= this._bufferService.rows) e.element && (e.element.style.display = "none", e.onRenderEmitter.fire(e.element));
                                        else {
                                            let i = this._decorationElements.get(e);
                                            i || (i = this._createElement(e), e.element = i, this._decorationElements.set(e, i), this._container.appendChild(i), e.onDispose((() => {
                                                this._decorationElements.delete(e), i.remove()
                                            }))), i.style.top = t * this._renderService.dimensions.css.cell.height + "px", i.style.display = this._altBufferIsActive ? "none" : "block", e.onRenderEmitter.fire(i)
                                        }
                                    }
                                    _refreshXPosition(e, t = e.element) {
                                        if (!t) return;
                                        const i = e.options.x ?? 0;
                                        "right" === (e.options.anchor || "left") ? t.style.right = i ? i * this._renderService.dimensions.css.cell.width + "px" : "": t.style.left = i ? i * this._renderService.dimensions.css.cell.width + "px" : ""
                                    }
                                    _removeDecoration(e) {
                                        this._decorationElements.get(e)?.remove(), this._decorationElements.delete(e), e.dispose()
                                    }
                                };
                                t.BufferDecorationRenderer = h = s([r(1, a.IBufferService), r(2, n.ICoreBrowserService), r(3, a.IDecorationService), r(4, n.IRenderService)], h)
                            },
                            5871: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ColorZoneStore = void 0, t.ColorZoneStore = class {
                                    constructor() {
                                        this._zones = [], this._zonePool = [], this._zonePoolIndex = 0, this._linePadding = {
                                            full: 0,
                                            left: 0,
                                            center: 0,
                                            right: 0
                                        }
                                    }
                                    get zones() {
                                        return this._zonePool.length = Math.min(this._zonePool.length, this._zones.length), this._zones
                                    }
                                    clear() {
                                        this._zones.length = 0, this._zonePoolIndex = 0
                                    }
                                    addDecoration(e) {
                                        if (e.options.overviewRulerOptions) {
                                            for (const t of this._zones)
                                                if (t.color === e.options.overviewRulerOptions.color && t.position === e.options.overviewRulerOptions.position) {
                                                    if (this._lineIntersectsZone(t, e.marker.line)) return;
                                                    if (this._lineAdjacentToZone(t, e.marker.line, e.options.overviewRulerOptions.position)) return void this._addLineToZone(t, e.marker.line)
                                                } if (this._zonePoolIndex < this._zonePool.length) return this._zonePool[this._zonePoolIndex].color = e.options.overviewRulerOptions.color, this._zonePool[this._zonePoolIndex].position = e.options.overviewRulerOptions.position, this._zonePool[this._zonePoolIndex].startBufferLine = e.marker.line, this._zonePool[this._zonePoolIndex].endBufferLine = e.marker.line, void this._zones.push(this._zonePool[this._zonePoolIndex++]);
                                            this._zones.push({
                                                color: e.options.overviewRulerOptions.color,
                                                position: e.options.overviewRulerOptions.position,
                                                startBufferLine: e.marker.line,
                                                endBufferLine: e.marker.line
                                            }), this._zonePool.push(this._zones[this._zones.length - 1]), this._zonePoolIndex++
                                        }
                                    }
                                    setPadding(e) {
                                        this._linePadding = e
                                    }
                                    _lineIntersectsZone(e, t) {
                                        return t >= e.startBufferLine && t <= e.endBufferLine
                                    }
                                    _lineAdjacentToZone(e, t, i) {
                                        return t >= e.startBufferLine - this._linePadding[i || "full"] && t <= e.endBufferLine + this._linePadding[i || "full"]
                                    }
                                    _addLineToZone(e, t) {
                                        e.startBufferLine = Math.min(e.startBufferLine, t), e.endBufferLine = Math.max(e.endBufferLine, t)
                                    }
                                }
                            },
                            5744: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.OverviewRulerRenderer = void 0;
                                const n = i(5871),
                                    o = i(4725),
                                    a = i(844),
                                    h = i(2585),
                                    l = {
                                        full: 0,
                                        left: 0,
                                        center: 0,
                                        right: 0
                                    },
                                    c = {
                                        full: 0,
                                        left: 0,
                                        center: 0,
                                        right: 0
                                    },
                                    d = {
                                        full: 0,
                                        left: 0,
                                        center: 0,
                                        right: 0
                                    };
                                let _ = t.OverviewRulerRenderer = class extends a.Disposable {
                                    get _width() {
                                        return this._optionsService.options.overviewRulerWidth || 0
                                    }
                                    constructor(e, t, i, s, r, o, h) {
                                        super(), this._viewportElement = e, this._screenElement = t, this._bufferService = i, this._decorationService = s, this._renderService = r, this._optionsService = o, this._coreBrowserService = h, this._colorZoneStore = new n.ColorZoneStore, this._shouldUpdateDimensions = !0, this._shouldUpdateAnchor = !0, this._lastKnownBufferLength = 0, this._canvas = this._coreBrowserService.mainDocument.createElement("canvas"), this._canvas.classList.add("xterm-decoration-overview-ruler"), this._refreshCanvasDimensions(), this._viewportElement.parentElement?.insertBefore(this._canvas, this._viewportElement);
                                        const l = this._canvas.getContext("2d");
                                        if (!l) throw new Error("Ctx cannot be null");
                                        this._ctx = l, this._registerDecorationListeners(), this._registerBufferChangeListeners(), this._registerDimensionChangeListeners(), this.register((0, a.toDisposable)((() => {
                                            this._canvas?.remove()
                                        })))
                                    }
                                    _registerDecorationListeners() {
                                        this.register(this._decorationService.onDecorationRegistered((() => this._queueRefresh(void 0, !0)))), this.register(this._decorationService.onDecorationRemoved((() => this._queueRefresh(void 0, !0))))
                                    }
                                    _registerBufferChangeListeners() {
                                        this.register(this._renderService.onRenderedViewportChange((() => this._queueRefresh()))), this.register(this._bufferService.buffers.onBufferActivate((() => {
                                            this._canvas.style.display = this._bufferService.buffer === this._bufferService.buffers.alt ? "none" : "block"
                                        }))), this.register(this._bufferService.onScroll((() => {
                                            this._lastKnownBufferLength !== this._bufferService.buffers.normal.lines.length && (this._refreshDrawHeightConstants(), this._refreshColorZonePadding())
                                        })))
                                    }
                                    _registerDimensionChangeListeners() {
                                        this.register(this._renderService.onRender((() => {
                                            this._containerHeight && this._containerHeight === this._screenElement.clientHeight || (this._queueRefresh(!0), this._containerHeight = this._screenElement.clientHeight)
                                        }))), this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth", (() => this._queueRefresh(!0)))), this.register(this._coreBrowserService.onDprChange((() => this._queueRefresh(!0)))), this._queueRefresh(!0)
                                    }
                                    _refreshDrawConstants() {
                                        const e = Math.floor(this._canvas.width / 3),
                                            t = Math.ceil(this._canvas.width / 3);
                                        c.full = this._canvas.width, c.left = e, c.center = t, c.right = e, this._refreshDrawHeightConstants(), d.full = 0, d.left = 0, d.center = c.left, d.right = c.left + c.center
                                    }
                                    _refreshDrawHeightConstants() {
                                        l.full = Math.round(2 * this._coreBrowserService.dpr);
                                        const e = this._canvas.height / this._bufferService.buffer.lines.length,
                                            t = Math.round(Math.max(Math.min(e, 12), 6) * this._coreBrowserService.dpr);
                                        l.left = t, l.center = t, l.right = t
                                    }
                                    _refreshColorZonePadding() {
                                        this._colorZoneStore.setPadding({
                                            full: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * l.full),
                                            left: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * l.left),
                                            center: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * l.center),
                                            right: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * l.right)
                                        }), this._lastKnownBufferLength = this._bufferService.buffers.normal.lines.length
                                    }
                                    _refreshCanvasDimensions() {
                                        this._canvas.style.width = `${this._width}px`, this._canvas.width = Math.round(this._width * this._coreBrowserService.dpr), this._canvas.style.height = `${this._screenElement.clientHeight}px`, this._canvas.height = Math.round(this._screenElement.clientHeight * this._coreBrowserService.dpr), this._refreshDrawConstants(), this._refreshColorZonePadding()
                                    }
                                    _refreshDecorations() {
                                        this._shouldUpdateDimensions && this._refreshCanvasDimensions(), this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height), this._colorZoneStore.clear();
                                        for (const e of this._decorationService.decorations) this._colorZoneStore.addDecoration(e);
                                        this._ctx.lineWidth = 1;
                                        const e = this._colorZoneStore.zones;
                                        for (const t of e) "full" !== t.position && this._renderColorZone(t);
                                        for (const t of e) "full" === t.position && this._renderColorZone(t);
                                        this._shouldUpdateDimensions = !1, this._shouldUpdateAnchor = !1
                                    }
                                    _renderColorZone(e) {
                                        this._ctx.fillStyle = e.color, this._ctx.fillRect(d[e.position || "full"], Math.round((this._canvas.height - 1) * (e.startBufferLine / this._bufferService.buffers.active.lines.length) - l[e.position || "full"] / 2), c[e.position || "full"], Math.round((this._canvas.height - 1) * ((e.endBufferLine - e.startBufferLine) / this._bufferService.buffers.active.lines.length) + l[e.position || "full"]))
                                    }
                                    _queueRefresh(e, t) {
                                        this._shouldUpdateDimensions = e || this._shouldUpdateDimensions, this._shouldUpdateAnchor = t || this._shouldUpdateAnchor, void 0 === this._animationFrame && (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame((() => {
                                            this._refreshDecorations(), this._animationFrame = void 0
                                        })))
                                    }
                                };
                                t.OverviewRulerRenderer = _ = s([r(2, h.IBufferService), r(3, h.IDecorationService), r(4, o.IRenderService), r(5, h.IOptionsService), r(6, o.ICoreBrowserService)], _)
                            },
                            2950: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CompositionHelper = void 0;
                                const n = i(4725),
                                    o = i(2585),
                                    a = i(2584);
                                let h = t.CompositionHelper = class {
                                    get isComposing() {
                                        return this._isComposing
                                    }
                                    constructor(e, t, i, s, r, n) {
                                        this._textarea = e, this._compositionView = t, this._bufferService = i, this._optionsService = s, this._coreService = r, this._renderService = n, this._isComposing = !1, this._isSendingComposition = !1, this._compositionPosition = {
                                            start: 0,
                                            end: 0
                                        }, this._dataAlreadySent = ""
                                    }
                                    compositionstart() {
                                        this._isComposing = !0, this._compositionPosition.start = this._textarea.value.length, this._compositionView.textContent = "", this._dataAlreadySent = "", this._compositionView.classList.add("active")
                                    }
                                    compositionupdate(e) {
                                        this._compositionView.textContent = e.data, this.updateCompositionElements(), setTimeout((() => {
                                            this._compositionPosition.end = this._textarea.value.length
                                        }), 0)
                                    }
                                    compositionend() {
                                        this._finalizeComposition(!0)
                                    }
                                    keydown(e) {
                                        if (this._isComposing || this._isSendingComposition) {
                                            if (229 === e.keyCode) return !1;
                                            if (16 === e.keyCode || 17 === e.keyCode || 18 === e.keyCode) return !1;
                                            this._finalizeComposition(!1)
                                        }
                                        return 229 !== e.keyCode || (this._handleAnyTextareaChanges(), !1)
                                    }
                                    _finalizeComposition(e) {
                                        if (this._compositionView.classList.remove("active"), this._isComposing = !1, e) {
                                            const e = {
                                                start: this._compositionPosition.start,
                                                end: this._compositionPosition.end
                                            };
                                            this._isSendingComposition = !0, setTimeout((() => {
                                                if (this._isSendingComposition) {
                                                    let t;
                                                    this._isSendingComposition = !1, e.start += this._dataAlreadySent.length, t = this._isComposing ? this._textarea.value.substring(e.start, e.end) : this._textarea.value.substring(e.start), t.length > 0 && this._coreService.triggerDataEvent(t, !0)
                                                }
                                            }), 0)
                                        } else {
                                            this._isSendingComposition = !1;
                                            const e = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
                                            this._coreService.triggerDataEvent(e, !0)
                                        }
                                    }
                                    _handleAnyTextareaChanges() {
                                        const e = this._textarea.value;
                                        setTimeout((() => {
                                            if (!this._isComposing) {
                                                const t = this._textarea.value,
                                                    i = t.replace(e, "");
                                                this._dataAlreadySent = i, t.length > e.length ? this._coreService.triggerDataEvent(i, !0) : t.length < e.length ? this._coreService.triggerDataEvent(`${a.C0.DEL}`, !0) : t.length === e.length && t !== e && this._coreService.triggerDataEvent(t, !0)
                                            }
                                        }), 0)
                                    }
                                    updateCompositionElements(e) {
                                        if (this._isComposing) {
                                            if (this._bufferService.buffer.isCursorInViewport) {
                                                const e = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1),
                                                    t = this._renderService.dimensions.css.cell.height,
                                                    i = this._bufferService.buffer.y * this._renderService.dimensions.css.cell.height,
                                                    s = e * this._renderService.dimensions.css.cell.width;
                                                this._compositionView.style.left = s + "px", this._compositionView.style.top = i + "px", this._compositionView.style.height = t + "px", this._compositionView.style.lineHeight = t + "px", this._compositionView.style.fontFamily = this._optionsService.rawOptions.fontFamily, this._compositionView.style.fontSize = this._optionsService.rawOptions.fontSize + "px";
                                                const r = this._compositionView.getBoundingClientRect();
                                                this._textarea.style.left = s + "px", this._textarea.style.top = i + "px", this._textarea.style.width = Math.max(r.width, 1) + "px", this._textarea.style.height = Math.max(r.height, 1) + "px", this._textarea.style.lineHeight = r.height + "px"
                                            }
                                            e || setTimeout((() => this.updateCompositionElements(!0)), 0)
                                        }
                                    }
                                };
                                t.CompositionHelper = h = s([r(2, o.IBufferService), r(3, o.IOptionsService), r(4, o.ICoreService), r(5, n.IRenderService)], h)
                            },
                            9806: (e, t) => {
                                function i(e, t, i) {
                                    const s = i.getBoundingClientRect(),
                                        r = e.getComputedStyle(i),
                                        n = parseInt(r.getPropertyValue("padding-left")),
                                        o = parseInt(r.getPropertyValue("padding-top"));
                                    return [t.clientX - s.left - n, t.clientY - s.top - o]
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getCoords = t.getCoordsRelativeToElement = void 0, t.getCoordsRelativeToElement = i, t.getCoords = function(e, t, s, r, n, o, a, h, l) {
                                    if (!o) return;
                                    const c = i(e, t, s);
                                    return c ? (c[0] = Math.ceil((c[0] + (l ? a / 2 : 0)) / a), c[1] = Math.ceil(c[1] / h), c[0] = Math.min(Math.max(c[0], 1), r + (l ? 1 : 0)), c[1] = Math.min(Math.max(c[1], 1), n), c) : void 0
                                }
                            },
                            9504: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.moveToCellSequence = void 0;
                                const s = i(2584);

                                function r(e, t, i, s) {
                                    const r = e - n(e, i),
                                        a = t - n(t, i),
                                        c = Math.abs(r - a) - function(e, t, i) {
                                            let s = 0;
                                            const r = e - n(e, i),
                                                a = t - n(t, i);
                                            for (let n = 0; n < Math.abs(r - a); n++) {
                                                const a = "A" === o(e, t) ? -1 : 1,
                                                    h = i.buffer.lines.get(r + a * n);
                                                h?.isWrapped && s++
                                            }
                                            return s
                                        }(e, t, i);
                                    return l(c, h(o(e, t), s))
                                }

                                function n(e, t) {
                                    let i = 0,
                                        s = t.buffer.lines.get(e),
                                        r = s?.isWrapped;
                                    for (; r && e >= 0 && e < t.rows;) i++, s = t.buffer.lines.get(--e), r = s?.isWrapped;
                                    return i
                                }

                                function o(e, t) {
                                    return e > t ? "A" : "B"
                                }

                                function a(e, t, i, s, r, n) {
                                    let o = e,
                                        a = t,
                                        h = "";
                                    for (; o !== i || a !== s;) o += r ? 1 : -1, r && o > n.cols - 1 ? (h += n.buffer.translateBufferLineToString(a, !1, e, o), o = 0, e = 0, a++) : !r && o < 0 && (h += n.buffer.translateBufferLineToString(a, !1, 0, e + 1), o = n.cols - 1, e = o, a--);
                                    return h + n.buffer.translateBufferLineToString(a, !1, e, o)
                                }

                                function h(e, t) {
                                    const i = t ? "O" : "[";
                                    return s.C0.ESC + i + e
                                }

                                function l(e, t) {
                                    e = Math.floor(e);
                                    let i = "";
                                    for (let s = 0; s < e; s++) i += t;
                                    return i
                                }
                                t.moveToCellSequence = function(e, t, i, s) {
                                    const o = i.buffer.x,
                                        c = i.buffer.y;
                                    if (!i.buffer.hasScrollback) return function(e, t, i, s, o, c) {
                                        return 0 === r(t, s, o, c).length ? "" : l(a(e, t, e, t - n(t, o), !1, o).length, h("D", c))
                                    }(o, c, 0, t, i, s) + r(c, t, i, s) + function(e, t, i, s, o, c) {
                                        let d;
                                        d = r(t, s, o, c).length > 0 ? s - n(s, o) : t;
                                        const _ = s,
                                            u = function(e, t, i, s, o, a) {
                                                let h;
                                                return h = r(i, s, o, a).length > 0 ? s - n(s, o) : t, e < i && h <= s || e >= i && h < s ? "C" : "D"
                                            }(e, t, i, s, o, c);
                                        return l(a(e, d, i, _, "C" === u, o).length, h(u, c))
                                    }(o, c, e, t, i, s);
                                    let d;
                                    if (c === t) return d = o > e ? "D" : "C", l(Math.abs(o - e), h(d, s));
                                    d = c > t ? "D" : "C";
                                    const _ = Math.abs(c - t);
                                    return l(function(e, t) {
                                        return t.cols - e
                                    }(c > t ? e : o, i) + (_ - 1) * i.cols + 1 + ((c > t ? o : e) - 1), h(d, s))
                                }
                            },
                            1296: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DomRenderer = void 0;
                                const n = i(3787),
                                    o = i(2550),
                                    a = i(2223),
                                    h = i(6171),
                                    l = i(6052),
                                    c = i(4725),
                                    d = i(8055),
                                    _ = i(8460),
                                    u = i(844),
                                    f = i(2585),
                                    g = "xterm-dom-renderer-owner-",
                                    p = "xterm-rows",
                                    v = "xterm-fg-",
                                    m = "xterm-bg-",
                                    A = "xterm-focus",
                                    C = "xterm-selection";
                                let w = 1,
                                    b = t.DomRenderer = class extends u.Disposable {
                                        constructor(e, t, i, s, r, a, c, d, f, v, m, A, b) {
                                            super(), this._terminal = e, this._document = t, this._element = i, this._screenElement = s, this._viewportElement = r, this._helperContainer = a, this._linkifier2 = c, this._charSizeService = f, this._optionsService = v, this._bufferService = m, this._coreBrowserService = A, this._themeService = b, this._terminalClass = w++, this._rowElements = [], this._selectionRenderModel = (0, l.createSelectionRenderModel)(), this.onRequestRedraw = this.register(new _.EventEmitter).event, this._rowContainer = this._document.createElement("div"), this._rowContainer.classList.add(p), this._rowContainer.style.lineHeight = "normal", this._rowContainer.setAttribute("aria-hidden", "true"), this._refreshRowElements(this._bufferService.cols, this._bufferService.rows), this._selectionContainer = this._document.createElement("div"), this._selectionContainer.classList.add(C), this._selectionContainer.setAttribute("aria-hidden", "true"), this.dimensions = (0, h.createRenderDimensions)(), this._updateDimensions(), this.register(this._optionsService.onOptionChange((() => this._handleOptionsChanged()))), this.register(this._themeService.onChangeColors((e => this._injectCss(e)))), this._injectCss(this._themeService.colors), this._rowFactory = d.createInstance(n.DomRendererRowFactory, document), this._element.classList.add(g + this._terminalClass), this._screenElement.appendChild(this._rowContainer), this._screenElement.appendChild(this._selectionContainer), this.register(this._linkifier2.onShowLinkUnderline((e => this._handleLinkHover(e)))), this.register(this._linkifier2.onHideLinkUnderline((e => this._handleLinkLeave(e)))), this.register((0, u.toDisposable)((() => {
                                                this._element.classList.remove(g + this._terminalClass), this._rowContainer.remove(), this._selectionContainer.remove(), this._widthCache.dispose(), this._themeStyleElement.remove(), this._dimensionsStyleElement.remove()
                                            }))), this._widthCache = new o.WidthCache(this._document, this._helperContainer), this._widthCache.setFont(this._optionsService.rawOptions.fontFamily, this._optionsService.rawOptions.fontSize, this._optionsService.rawOptions.fontWeight, this._optionsService.rawOptions.fontWeightBold), this._setDefaultSpacing()
                                        }
                                        _updateDimensions() {
                                            const e = this._coreBrowserService.dpr;
                                            this.dimensions.device.char.width = this._charSizeService.width * e, this.dimensions.device.char.height = Math.ceil(this._charSizeService.height * e), this.dimensions.device.cell.width = this.dimensions.device.char.width + Math.round(this._optionsService.rawOptions.letterSpacing), this.dimensions.device.cell.height = Math.floor(this.dimensions.device.char.height * this._optionsService.rawOptions.lineHeight), this.dimensions.device.char.left = 0, this.dimensions.device.char.top = 0, this.dimensions.device.canvas.width = this.dimensions.device.cell.width * this._bufferService.cols, this.dimensions.device.canvas.height = this.dimensions.device.cell.height * this._bufferService.rows, this.dimensions.css.canvas.width = Math.round(this.dimensions.device.canvas.width / e), this.dimensions.css.canvas.height = Math.round(this.dimensions.device.canvas.height / e), this.dimensions.css.cell.width = this.dimensions.css.canvas.width / this._bufferService.cols, this.dimensions.css.cell.height = this.dimensions.css.canvas.height / this._bufferService.rows;
                                            for (const e of this._rowElements) e.style.width = `${this.dimensions.css.canvas.width}px`, e.style.height = `${this.dimensions.css.cell.height}px`, e.style.lineHeight = `${this.dimensions.css.cell.height}px`, e.style.overflow = "hidden";
                                            this._dimensionsStyleElement || (this._dimensionsStyleElement = this._document.createElement("style"), this._screenElement.appendChild(this._dimensionsStyleElement));
                                            const t = `${this._terminalSelector} .${p} span { display: inline-block; height: 100%; vertical-align: top;}`;
                                            this._dimensionsStyleElement.textContent = t, this._selectionContainer.style.height = this._viewportElement.style.height, this._screenElement.style.width = `${this.dimensions.css.canvas.width}px`, this._screenElement.style.height = `${this.dimensions.css.canvas.height}px`
                                        }
                                        _injectCss(e) {
                                            this._themeStyleElement || (this._themeStyleElement = this._document.createElement("style"), this._screenElement.appendChild(this._themeStyleElement));
                                            let t = `${this._terminalSelector} .${p} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;
                                            t += `${this._terminalSelector} .${p} .xterm-dim { color: ${d.color.multiplyOpacity(e.foreground, .5).css};}`, t += `${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`, t += "@keyframes blink_box_shadow_" + this._terminalClass + " { 50% {  border-bottom-style: hidden; }}", t += "@keyframes blink_block_" + this._terminalClass + " { 0% {" + `  background-color: ${e.cursor.css};` + `  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;` + `  color: ${e.cursor.css}; }}`, t += `${this._terminalSelector} .${p}.${A} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_` + this._terminalClass + " 1s step-end infinite;}" + `${this._terminalSelector} .${p}.${A} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_` + this._terminalClass + " 1s step-end infinite;}" + `${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block {` + ` background-color: ${e.cursor.css} !important;` + ` color: ${e.cursorAccent.css} !important;}` + `${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-outline {` + ` outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}` + `${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-bar {` + ` box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}` + `${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-underline {` + ` border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`, t += `${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;
                                            for (const [i, s] of e.ansi.entries()) t += `${this._terminalSelector} .${v}${i} { color: ${s.css}; }${this._terminalSelector} .${v}${i}.xterm-dim { color: ${d.color.multiplyOpacity(s, .5).css}; }${this._terminalSelector} .${m}${i} { background-color: ${s.css}; }`;
                                            t += `${this._terminalSelector} .${v}${a.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(e.background).css}; }${this._terminalSelector} .${v}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(e.background), .5).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`, this._themeStyleElement.textContent = t
                                        }
                                        _setDefaultSpacing() {
                                            const e = this.dimensions.css.cell.width - this._widthCache.get("W", !1, !1);
                                            this._rowContainer.style.letterSpacing = `${e}px`, this._rowFactory.defaultSpacing = e
                                        }
                                        handleDevicePixelRatioChange() {
                                            this._updateDimensions(), this._widthCache.clear(), this._setDefaultSpacing()
                                        }
                                        _refreshRowElements(e, t) {
                                            for (let e = this._rowElements.length; e <= t; e++) {
                                                const e = this._document.createElement("div");
                                                this._rowContainer.appendChild(e), this._rowElements.push(e)
                                            }
                                            for (; this._rowElements.length > t;) this._rowContainer.removeChild(this._rowElements.pop())
                                        }
                                        handleResize(e, t) {
                                            this._refreshRowElements(e, t), this._updateDimensions(), this.handleSelectionChanged(this._selectionRenderModel.selectionStart, this._selectionRenderModel.selectionEnd, this._selectionRenderModel.columnSelectMode)
                                        }
                                        handleCharSizeChanged() {
                                            this._updateDimensions(), this._widthCache.clear(), this._setDefaultSpacing()
                                        }
                                        handleBlur() {
                                            this._rowContainer.classList.remove(A), this.renderRows(0, this._bufferService.rows - 1)
                                        }
                                        handleFocus() {
                                            this._rowContainer.classList.add(A), this.renderRows(this._bufferService.buffer.y, this._bufferService.buffer.y)
                                        }
                                        handleSelectionChanged(e, t, i) {
                                            if (this._selectionContainer.replaceChildren(), this._rowFactory.handleSelectionChanged(e, t, i), this.renderRows(0, this._bufferService.rows - 1), !e || !t) return;
                                            this._selectionRenderModel.update(this._terminal, e, t, i);
                                            const s = this._selectionRenderModel.viewportStartRow,
                                                r = this._selectionRenderModel.viewportEndRow,
                                                n = this._selectionRenderModel.viewportCappedStartRow,
                                                o = this._selectionRenderModel.viewportCappedEndRow;
                                            if (n >= this._bufferService.rows || o < 0) return;
                                            const a = this._document.createDocumentFragment();
                                            if (i) {
                                                const i = e[0] > t[0];
                                                a.appendChild(this._createSelectionElement(n, i ? t[0] : e[0], i ? e[0] : t[0], o - n + 1))
                                            } else {
                                                const i = s === n ? e[0] : 0,
                                                    h = n === r ? t[0] : this._bufferService.cols;
                                                a.appendChild(this._createSelectionElement(n, i, h));
                                                const l = o - n - 1;
                                                if (a.appendChild(this._createSelectionElement(n + 1, 0, this._bufferService.cols, l)), n !== o) {
                                                    const e = r === o ? t[0] : this._bufferService.cols;
                                                    a.appendChild(this._createSelectionElement(o, 0, e))
                                                }
                                            }
                                            this._selectionContainer.appendChild(a)
                                        }
                                        _createSelectionElement(e, t, i, s = 1) {
                                            const r = this._document.createElement("div"),
                                                n = t * this.dimensions.css.cell.width;
                                            let o = this.dimensions.css.cell.width * (i - t);
                                            return n + o > this.dimensions.css.canvas.width && (o = this.dimensions.css.canvas.width - n), r.style.height = s * this.dimensions.css.cell.height + "px", r.style.top = e * this.dimensions.css.cell.height + "px", r.style.left = `${n}px`, r.style.width = `${o}px`, r
                                        }
                                        handleCursorMove() {}
                                        _handleOptionsChanged() {
                                            this._updateDimensions(), this._injectCss(this._themeService.colors), this._widthCache.setFont(this._optionsService.rawOptions.fontFamily, this._optionsService.rawOptions.fontSize, this._optionsService.rawOptions.fontWeight, this._optionsService.rawOptions.fontWeightBold), this._setDefaultSpacing()
                                        }
                                        clear() {
                                            for (const e of this._rowElements) e.replaceChildren()
                                        }
                                        renderRows(e, t) {
                                            const i = this._bufferService.buffer,
                                                s = i.ybase + i.y,
                                                r = Math.min(i.x, this._bufferService.cols - 1),
                                                n = this._optionsService.rawOptions.cursorBlink,
                                                o = this._optionsService.rawOptions.cursorStyle,
                                                a = this._optionsService.rawOptions.cursorInactiveStyle;
                                            for (let h = e; h <= t; h++) {
                                                const e = h + i.ydisp,
                                                    t = this._rowElements[h],
                                                    l = i.lines.get(e);
                                                if (!t || !l) break;
                                                t.replaceChildren(...this._rowFactory.createRow(l, e, e === s, o, a, r, n, this.dimensions.css.cell.width, this._widthCache, -1, -1))
                                            }
                                        }
                                        get _terminalSelector() {
                                            return `.${g}${this._terminalClass}`
                                        }
                                        _handleLinkHover(e) {
                                            this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, !0)
                                        }
                                        _handleLinkLeave(e) {
                                            this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, !1)
                                        }
                                        _setCellUnderline(e, t, i, s, r, n) {
                                            i < 0 && (e = 0), s < 0 && (t = 0);
                                            const o = this._bufferService.rows - 1;
                                            i = Math.max(Math.min(i, o), 0), s = Math.max(Math.min(s, o), 0), r = Math.min(r, this._bufferService.cols);
                                            const a = this._bufferService.buffer,
                                                h = a.ybase + a.y,
                                                l = Math.min(a.x, r - 1),
                                                c = this._optionsService.rawOptions.cursorBlink,
                                                d = this._optionsService.rawOptions.cursorStyle,
                                                _ = this._optionsService.rawOptions.cursorInactiveStyle;
                                            for (let o = i; o <= s; ++o) {
                                                const u = o + a.ydisp,
                                                    f = this._rowElements[o],
                                                    g = a.lines.get(u);
                                                if (!f || !g) break;
                                                f.replaceChildren(...this._rowFactory.createRow(g, u, u === h, d, _, l, c, this.dimensions.css.cell.width, this._widthCache, n ? o === i ? e : 0 : -1, n ? (o === s ? t : r) - 1 : -1))
                                            }
                                        }
                                    };
                                t.DomRenderer = b = s([r(7, f.IInstantiationService), r(8, c.ICharSizeService), r(9, f.IOptionsService), r(10, f.IBufferService), r(11, c.ICoreBrowserService), r(12, c.IThemeService)], b)
                            },
                            3787: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DomRendererRowFactory = void 0;
                                const n = i(2223),
                                    o = i(643),
                                    a = i(511),
                                    h = i(2585),
                                    l = i(8055),
                                    c = i(4725),
                                    d = i(4269),
                                    _ = i(6171),
                                    u = i(3734);
                                let f = t.DomRendererRowFactory = class {
                                    constructor(e, t, i, s, r, n, o) {
                                        this._document = e, this._characterJoinerService = t, this._optionsService = i, this._coreBrowserService = s, this._coreService = r, this._decorationService = n, this._themeService = o, this._workCell = new a.CellData, this._columnSelectMode = !1, this.defaultSpacing = 0
                                    }
                                    handleSelectionChanged(e, t, i) {
                                        this._selectionStart = e, this._selectionEnd = t, this._columnSelectMode = i
                                    }
                                    createRow(e, t, i, s, r, a, h, c, _, f, p) {
                                        const v = [],
                                            m = this._characterJoinerService.getJoinedCharacters(t),
                                            A = this._themeService.colors;
                                        let C, w = e.getNoBgTrimmedLength();
                                        i && w < a + 1 && (w = a + 1);
                                        let b = 0,
                                            y = "",
                                            S = 0,
                                            E = 0,
                                            x = 0,
                                            L = !1,
                                            I = 0,
                                            B = !1,
                                            D = 0;
                                        const k = [],
                                            R = -1 !== f && -1 !== p;
                                        for (let M = 0; M < w; M++) {
                                            e.loadCell(M, this._workCell);
                                            let w = this._workCell.getWidth();
                                            if (0 === w) continue;
                                            let T = !1,
                                                O = M,
                                                P = this._workCell;
                                            if (m.length > 0 && M === m[0][0]) {
                                                T = !0;
                                                const t = m.shift();
                                                P = new d.JoinedCellData(this._workCell, e.translateToString(!0, t[0], t[1]), t[1] - t[0]), O = t[1] - 1, w = P.getWidth()
                                            }
                                            const F = this._isCellInSelection(M, t),
                                                H = i && M === a,
                                                Q = R && M >= f && M <= p;
                                            let N = !1;
                                            this._decorationService.forEachDecorationAtCell(M, t, void 0, (e => {
                                                N = !0
                                            }));
                                            let U = P.getChars() || o.WHITESPACE_CELL_CHAR;
                                            if (" " === U && (P.isUnderline() || P.isOverline()) && (U = ""), D = w * c - _.get(U, P.isBold(), P.isItalic()), C) {
                                                if (b && (F && B || !F && !B && P.bg === S) && (F && B && A.selectionForeground || P.fg === E) && P.extended.ext === x && Q === L && D === I && !H && !T && !N) {
                                                    P.isInvisible() ? y += o.WHITESPACE_CELL_CHAR : y += U, b++;
                                                    continue
                                                }
                                                b && (C.textContent = y), C = this._document.createElement("span"), b = 0, y = ""
                                            } else C = this._document.createElement("span");
                                            if (S = P.bg, E = P.fg, x = P.extended.ext, L = Q, I = D, B = F, T && a >= M && a <= O && (a = M), !this._coreService.isCursorHidden && H && this._coreService.isCursorInitialized)
                                                if (k.push("xterm-cursor"), this._coreBrowserService.isFocused) h && k.push("xterm-cursor-blink"), k.push("bar" === s ? "xterm-cursor-bar" : "underline" === s ? "xterm-cursor-underline" : "xterm-cursor-block");
                                                else if (r) switch (r) {
                                                case "outline":
                                                    k.push("xterm-cursor-outline");
                                                    break;
                                                case "block":
                                                    k.push("xterm-cursor-block");
                                                    break;
                                                case "bar":
                                                    k.push("xterm-cursor-bar");
                                                    break;
                                                case "underline":
                                                    k.push("xterm-cursor-underline")
                                            }
                                            if (P.isBold() && k.push("xterm-bold"), P.isItalic() && k.push("xterm-italic"), P.isDim() && k.push("xterm-dim"), y = P.isInvisible() ? o.WHITESPACE_CELL_CHAR : P.getChars() || o.WHITESPACE_CELL_CHAR, P.isUnderline() && (k.push(`xterm-underline-${P.extended.underlineStyle}`), " " === y && (y = ""), !P.isUnderlineColorDefault()))
                                                if (P.isUnderlineColorRGB()) C.style.textDecorationColor = `rgb(${u.AttributeData.toColorRGB(P.getUnderlineColor()).join(",")})`;
                                                else {
                                                    let e = P.getUnderlineColor();
                                                    this._optionsService.rawOptions.drawBoldTextInBrightColors && P.isBold() && e < 8 && (e += 8), C.style.textDecorationColor = A.ansi[e].css
                                                } P.isOverline() && (k.push("xterm-overline"), " " === y && (y = "")), P.isStrikethrough() && k.push("xterm-strikethrough"), Q && (C.style.textDecoration = "underline");
                                            let z = P.getFgColor(),
                                                W = P.getFgColorMode(),
                                                $ = P.getBgColor(),
                                                G = P.getBgColorMode();
                                            const j = !!P.isInverse();
                                            if (j) {
                                                const e = z;
                                                z = $, $ = e;
                                                const t = W;
                                                W = G, G = t
                                            }
                                            let q, J, K, Z = !1;
                                            switch (this._decorationService.forEachDecorationAtCell(M, t, void 0, (e => {
                                                    "top" !== e.options.layer && Z || (e.backgroundColorRGB && (G = 50331648, $ = e.backgroundColorRGB.rgba >> 8 & 16777215, q = e.backgroundColorRGB), e.foregroundColorRGB && (W = 50331648, z = e.foregroundColorRGB.rgba >> 8 & 16777215, J = e.foregroundColorRGB), Z = "top" === e.options.layer)
                                                })), !Z && F && (q = this._coreBrowserService.isFocused ? A.selectionBackgroundOpaque : A.selectionInactiveBackgroundOpaque, $ = q.rgba >> 8 & 16777215, G = 50331648, Z = !0, A.selectionForeground && (W = 50331648, z = A.selectionForeground.rgba >> 8 & 16777215, J = A.selectionForeground)), Z && k.push("xterm-decoration-top"), G) {
                                                case 16777216:
                                                case 33554432:
                                                    K = A.ansi[$], k.push(`xterm-bg-${$}`);
                                                    break;
                                                case 50331648:
                                                    K = l.channels.toColor($ >> 16, $ >> 8 & 255, 255 & $), this._addStyle(C, `background-color:#${g(($ >>> 0).toString(16), "0", 6)}`);
                                                    break;
                                                default:
                                                    j ? (K = A.foreground, k.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)) : K = A.background
                                            }
                                            switch (q || P.isDim() && (q = l.color.multiplyOpacity(K, .5)), W) {
                                                case 16777216:
                                                case 33554432:
                                                    P.isBold() && z < 8 && this._optionsService.rawOptions.drawBoldTextInBrightColors && (z += 8), this._applyMinimumContrast(C, K, A.ansi[z], P, q, void 0) || k.push(`xterm-fg-${z}`);
                                                    break;
                                                case 50331648:
                                                    const e = l.channels.toColor(z >> 16 & 255, z >> 8 & 255, 255 & z);
                                                    this._applyMinimumContrast(C, K, e, P, q, J) || this._addStyle(C, `color:#${g(z.toString(16), "0", 6)}`);
                                                    break;
                                                default:
                                                    this._applyMinimumContrast(C, K, A.foreground, P, q, J) || j && k.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)
                                            }
                                            k.length && (C.className = k.join(" "), k.length = 0), H || T || N ? C.textContent = y : b++, D !== this.defaultSpacing && (C.style.letterSpacing = `${D}px`), v.push(C), M = O
                                        }
                                        return C && b && (C.textContent = y), v
                                    }
                                    _applyMinimumContrast(e, t, i, s, r, n) {
                                        if (1 === this._optionsService.rawOptions.minimumContrastRatio || (0, _.treatGlyphAsBackgroundColor)(s.getCode())) return !1;
                                        const o = this._getContrastCache(s);
                                        let a;
                                        if (r || n || (a = o.getColor(t.rgba, i.rgba)), void 0 === a) {
                                            const e = this._optionsService.rawOptions.minimumContrastRatio / (s.isDim() ? 2 : 1);
                                            a = l.color.ensureContrastRatio(r || t, n || i, e), o.setColor((r || t).rgba, (n || i).rgba, a ?? null)
                                        }
                                        return !!a && (this._addStyle(e, `color:${a.css}`), !0)
                                    }
                                    _getContrastCache(e) {
                                        return e.isDim() ? this._themeService.colors.halfContrastCache : this._themeService.colors.contrastCache
                                    }
                                    _addStyle(e, t) {
                                        e.setAttribute("style", `${e.getAttribute("style") || ""}${t};`)
                                    }
                                    _isCellInSelection(e, t) {
                                        const i = this._selectionStart,
                                            s = this._selectionEnd;
                                        return !(!i || !s) && (this._columnSelectMode ? i[0] <= s[0] ? e >= i[0] && t >= i[1] && e < s[0] && t <= s[1] : e < i[0] && t >= i[1] && e >= s[0] && t <= s[1] : t > i[1] && t < s[1] || i[1] === s[1] && t === i[1] && e >= i[0] && e < s[0] || i[1] < s[1] && t === s[1] && e < s[0] || i[1] < s[1] && t === i[1] && e >= i[0])
                                    }
                                };

                                function g(e, t, i) {
                                    for (; e.length < i;) e = t + e;
                                    return e
                                }
                                t.DomRendererRowFactory = f = s([r(1, c.ICharacterJoinerService), r(2, h.IOptionsService), r(3, c.ICoreBrowserService), r(4, h.ICoreService), r(5, h.IDecorationService), r(6, c.IThemeService)], f)
                            },
                            2550: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.WidthCache = void 0, t.WidthCache = class {
                                    constructor(e, t) {
                                        this._flat = new Float32Array(256), this._font = "", this._fontSize = 0, this._weight = "normal", this._weightBold = "bold", this._measureElements = [], this._container = e.createElement("div"), this._container.classList.add("xterm-width-cache-measure-container"), this._container.setAttribute("aria-hidden", "true"), this._container.style.whiteSpace = "pre", this._container.style.fontKerning = "none";
                                        const i = e.createElement("span");
                                        i.classList.add("xterm-char-measure-element");
                                        const s = e.createElement("span");
                                        s.classList.add("xterm-char-measure-element"), s.style.fontWeight = "bold";
                                        const r = e.createElement("span");
                                        r.classList.add("xterm-char-measure-element"), r.style.fontStyle = "italic";
                                        const n = e.createElement("span");
                                        n.classList.add("xterm-char-measure-element"), n.style.fontWeight = "bold", n.style.fontStyle = "italic", this._measureElements = [i, s, r, n], this._container.appendChild(i), this._container.appendChild(s), this._container.appendChild(r), this._container.appendChild(n), t.appendChild(this._container), this.clear()
                                    }
                                    dispose() {
                                        this._container.remove(), this._measureElements.length = 0, this._holey = void 0
                                    }
                                    clear() {
                                        this._flat.fill(-9999), this._holey = new Map
                                    }
                                    setFont(e, t, i, s) {
                                        e === this._font && t === this._fontSize && i === this._weight && s === this._weightBold || (this._font = e, this._fontSize = t, this._weight = i, this._weightBold = s, this._container.style.fontFamily = this._font, this._container.style.fontSize = `${this._fontSize}px`, this._measureElements[0].style.fontWeight = `${i}`, this._measureElements[1].style.fontWeight = `${s}`, this._measureElements[2].style.fontWeight = `${i}`, this._measureElements[3].style.fontWeight = `${s}`, this.clear())
                                    }
                                    get(e, t, i) {
                                        let s = 0;
                                        if (!t && !i && 1 === e.length && (s = e.charCodeAt(0)) < 256) {
                                            if (-9999 !== this._flat[s]) return this._flat[s];
                                            const t = this._measure(e, 0);
                                            return t > 0 && (this._flat[s] = t), t
                                        }
                                        let r = e;
                                        t && (r += "B"), i && (r += "I");
                                        let n = this._holey.get(r);
                                        if (void 0 === n) {
                                            let s = 0;
                                            t && (s |= 1), i && (s |= 2), n = this._measure(e, s), n > 0 && this._holey.set(r, n)
                                        }
                                        return n
                                    }
                                    _measure(e, t) {
                                        const i = this._measureElements[t];
                                        return i.textContent = e.repeat(32), i.offsetWidth / 32
                                    }
                                }
                            },
                            2223: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.TEXT_BASELINE = t.DIM_OPACITY = t.INVERTED_DEFAULT_COLOR = void 0;
                                const s = i(6114);
                                t.INVERTED_DEFAULT_COLOR = 257, t.DIM_OPACITY = .5, t.TEXT_BASELINE = s.isFirefox || s.isLegacyEdge ? "bottom" : "ideographic"
                            },
                            6171: (e, t) => {
                                function i(e) {
                                    return 57508 <= e && e <= 57558
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.computeNextVariantOffset = t.createRenderDimensions = t.treatGlyphAsBackgroundColor = t.isRestrictedPowerlineGlyph = t.isPowerlineGlyph = t.throwIfFalsy = void 0, t.throwIfFalsy = function(e) {
                                    if (!e) throw new Error("value must not be falsy");
                                    return e
                                }, t.isPowerlineGlyph = i, t.isRestrictedPowerlineGlyph = function(e) {
                                    return 57520 <= e && e <= 57527
                                }, t.treatGlyphAsBackgroundColor = function(e) {
                                    return i(e) || function(e) {
                                        return 9472 <= e && e <= 9631
                                    }(e)
                                }, t.createRenderDimensions = function() {
                                    return {
                                        css: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            }
                                        },
                                        device: {
                                            canvas: {
                                                width: 0,
                                                height: 0
                                            },
                                            cell: {
                                                width: 0,
                                                height: 0
                                            },
                                            char: {
                                                width: 0,
                                                height: 0,
                                                left: 0,
                                                top: 0
                                            }
                                        }
                                    }
                                }, t.computeNextVariantOffset = function(e, t, i = 0) {
                                    return (e - (2 * Math.round(t) - i)) % (2 * Math.round(t))
                                }
                            },
                            6052: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createSelectionRenderModel = void 0;
                                class i {
                                    constructor() {
                                        this.clear()
                                    }
                                    clear() {
                                        this.hasSelection = !1, this.columnSelectMode = !1, this.viewportStartRow = 0, this.viewportEndRow = 0, this.viewportCappedStartRow = 0, this.viewportCappedEndRow = 0, this.startCol = 0, this.endCol = 0, this.selectionStart = void 0, this.selectionEnd = void 0
                                    }
                                    update(e, t, i, s = !1) {
                                        if (this.selectionStart = t, this.selectionEnd = i, !t || !i || t[0] === i[0] && t[1] === i[1]) return void this.clear();
                                        const r = e.buffers.active.ydisp,
                                            n = t[1] - r,
                                            o = i[1] - r,
                                            a = Math.max(n, 0),
                                            h = Math.min(o, e.rows - 1);
                                        a >= e.rows || h < 0 ? this.clear() : (this.hasSelection = !0, this.columnSelectMode = s, this.viewportStartRow = n, this.viewportEndRow = o, this.viewportCappedStartRow = a, this.viewportCappedEndRow = h, this.startCol = t[0], this.endCol = i[0])
                                    }
                                    isCellSelected(e, t, i) {
                                        return !!this.hasSelection && (i -= e.buffer.active.viewportY, this.columnSelectMode ? this.startCol <= this.endCol ? t >= this.startCol && i >= this.viewportCappedStartRow && t < this.endCol && i <= this.viewportCappedEndRow : t < this.startCol && i >= this.viewportCappedStartRow && t >= this.endCol && i <= this.viewportCappedEndRow : i > this.viewportStartRow && i < this.viewportEndRow || this.viewportStartRow === this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportEndRow && t < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportStartRow && t >= this.startCol)
                                    }
                                }
                                t.createSelectionRenderModel = function() {
                                    return new i
                                }
                            },
                            456: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.SelectionModel = void 0, t.SelectionModel = class {
                                    constructor(e) {
                                        this._bufferService = e, this.isSelectAllActive = !1, this.selectionStartLength = 0
                                    }
                                    clearSelection() {
                                        this.selectionStart = void 0, this.selectionEnd = void 0, this.isSelectAllActive = !1, this.selectionStartLength = 0
                                    }
                                    get finalSelectionStart() {
                                        return this.isSelectAllActive ? [0, 0] : this.selectionEnd && this.selectionStart && this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart
                                    }
                                    get finalSelectionEnd() {
                                        if (this.isSelectAllActive) return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];
                                        if (this.selectionStart) {
                                            if (!this.selectionEnd || this.areSelectionValuesReversed()) {
                                                const e = this.selectionStart[0] + this.selectionStartLength;
                                                return e > this._bufferService.cols ? e % this._bufferService.cols == 0 ? [this._bufferService.cols, this.selectionStart[1] + Math.floor(e / this._bufferService.cols) - 1] : [e % this._bufferService.cols, this.selectionStart[1] + Math.floor(e / this._bufferService.cols)] : [e, this.selectionStart[1]]
                                            }
                                            if (this.selectionStartLength && this.selectionEnd[1] === this.selectionStart[1]) {
                                                const e = this.selectionStart[0] + this.selectionStartLength;
                                                return e > this._bufferService.cols ? [e % this._bufferService.cols, this.selectionStart[1] + Math.floor(e / this._bufferService.cols)] : [Math.max(e, this.selectionEnd[0]), this.selectionEnd[1]]
                                            }
                                            return this.selectionEnd
                                        }
                                    }
                                    areSelectionValuesReversed() {
                                        const e = this.selectionStart,
                                            t = this.selectionEnd;
                                        return !(!e || !t) && (e[1] > t[1] || e[1] === t[1] && e[0] > t[0])
                                    }
                                    handleTrim(e) {
                                        return this.selectionStart && (this.selectionStart[1] -= e), this.selectionEnd && (this.selectionEnd[1] -= e), this.selectionEnd && this.selectionEnd[1] < 0 ? (this.clearSelection(), !0) : (this.selectionStart && this.selectionStart[1] < 0 && (this.selectionStart[1] = 0), !1)
                                    }
                                }
                            },
                            428: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CharSizeService = void 0;
                                const n = i(2585),
                                    o = i(8460),
                                    a = i(844);
                                let h = t.CharSizeService = class extends a.Disposable {
                                    get hasValidSize() {
                                        return this.width > 0 && this.height > 0
                                    }
                                    constructor(e, t, i) {
                                        super(), this._optionsService = i, this.width = 0, this.height = 0, this._onCharSizeChange = this.register(new o.EventEmitter), this.onCharSizeChange = this._onCharSizeChange.event;
                                        try {
                                            this._measureStrategy = this.register(new d(this._optionsService))
                                        } catch {
                                            this._measureStrategy = this.register(new c(e, t, this._optionsService))
                                        }
                                        this.register(this._optionsService.onMultipleOptionChange(["fontFamily", "fontSize"], (() => this.measure())))
                                    }
                                    measure() {
                                        const e = this._measureStrategy.measure();
                                        e.width === this.width && e.height === this.height || (this.width = e.width, this.height = e.height, this._onCharSizeChange.fire())
                                    }
                                };
                                t.CharSizeService = h = s([r(2, n.IOptionsService)], h);
                                class l extends a.Disposable {
                                    constructor() {
                                        super(...arguments), this._result = {
                                            width: 0,
                                            height: 0
                                        }
                                    }
                                    _validateAndSet(e, t) {
                                        void 0 !== e && e > 0 && void 0 !== t && t > 0 && (this._result.width = e, this._result.height = t)
                                    }
                                }
                                class c extends l {
                                    constructor(e, t, i) {
                                        super(), this._document = e, this._parentElement = t, this._optionsService = i, this._measureElement = this._document.createElement("span"), this._measureElement.classList.add("xterm-char-measure-element"), this._measureElement.textContent = "W".repeat(32), this._measureElement.setAttribute("aria-hidden", "true"), this._measureElement.style.whiteSpace = "pre", this._measureElement.style.fontKerning = "none", this._parentElement.appendChild(this._measureElement)
                                    }
                                    measure() {
                                        return this._measureElement.style.fontFamily = this._optionsService.rawOptions.fontFamily, this._measureElement.style.fontSize = `${this._optionsService.rawOptions.fontSize}px`, this._validateAndSet(Number(this._measureElement.offsetWidth) / 32, Number(this._measureElement.offsetHeight)), this._result
                                    }
                                }
                                class d extends l {
                                    constructor(e) {
                                        super(), this._optionsService = e, this._canvas = new OffscreenCanvas(100, 100), this._ctx = this._canvas.getContext("2d");
                                        const t = this._ctx.measureText("W");
                                        if (!("width" in t && "fontBoundingBoxAscent" in t && "fontBoundingBoxDescent" in t)) throw new Error("Required font metrics not supported")
                                    }
                                    measure() {
                                        this._ctx.font = `${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;
                                        const e = this._ctx.measureText("W");
                                        return this._validateAndSet(e.width, e.fontBoundingBoxAscent + e.fontBoundingBoxDescent), this._result
                                    }
                                }
                            },
                            4269: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CharacterJoinerService = t.JoinedCellData = void 0;
                                const n = i(3734),
                                    o = i(643),
                                    a = i(511),
                                    h = i(2585);
                                class l extends n.AttributeData {
                                    constructor(e, t, i) {
                                        super(), this.content = 0, this.combinedData = "", this.fg = e.fg, this.bg = e.bg, this.combinedData = t, this._width = i
                                    }
                                    isCombined() {
                                        return 2097152
                                    }
                                    getWidth() {
                                        return this._width
                                    }
                                    getChars() {
                                        return this.combinedData
                                    }
                                    getCode() {
                                        return 2097151
                                    }
                                    setFromCharData(e) {
                                        throw new Error("not implemented")
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }
                                t.JoinedCellData = l;
                                let c = t.CharacterJoinerService = class e {
                                    constructor(e) {
                                        this._bufferService = e, this._characterJoiners = [], this._nextCharacterJoinerId = 0, this._workCell = new a.CellData
                                    }
                                    register(e) {
                                        const t = {
                                            id: this._nextCharacterJoinerId++,
                                            handler: e
                                        };
                                        return this._characterJoiners.push(t), t.id
                                    }
                                    deregister(e) {
                                        for (let t = 0; t < this._characterJoiners.length; t++)
                                            if (this._characterJoiners[t].id === e) return this._characterJoiners.splice(t, 1), !0;
                                        return !1
                                    }
                                    getJoinedCharacters(e) {
                                        if (0 === this._characterJoiners.length) return [];
                                        const t = this._bufferService.buffer.lines.get(e);
                                        if (!t || 0 === t.length) return [];
                                        const i = [],
                                            s = t.translateToString(!0);
                                        let r = 0,
                                            n = 0,
                                            a = 0,
                                            h = t.getFg(0),
                                            l = t.getBg(0);
                                        for (let e = 0; e < t.getTrimmedLength(); e++)
                                            if (t.loadCell(e, this._workCell), 0 !== this._workCell.getWidth()) {
                                                if (this._workCell.fg !== h || this._workCell.bg !== l) {
                                                    if (e - r > 1) {
                                                        const e = this._getJoinedRanges(s, a, n, t, r);
                                                        for (let t = 0; t < e.length; t++) i.push(e[t])
                                                    }
                                                    r = e, a = n, h = this._workCell.fg, l = this._workCell.bg
                                                }
                                                n += this._workCell.getChars().length || o.WHITESPACE_CELL_CHAR.length
                                            } if (this._bufferService.cols - r > 1) {
                                            const e = this._getJoinedRanges(s, a, n, t, r);
                                            for (let t = 0; t < e.length; t++) i.push(e[t])
                                        }
                                        return i
                                    }
                                    _getJoinedRanges(t, i, s, r, n) {
                                        const o = t.substring(i, s);
                                        let a = [];
                                        try {
                                            a = this._characterJoiners[0].handler(o)
                                        } catch (e) {
                                            console.error(e)
                                        }
                                        for (let t = 1; t < this._characterJoiners.length; t++) try {
                                            const i = this._characterJoiners[t].handler(o);
                                            for (let t = 0; t < i.length; t++) e._mergeRanges(a, i[t])
                                        } catch (e) {
                                            console.error(e)
                                        }
                                        return this._stringRangesToCellRanges(a, r, n), a
                                    }
                                    _stringRangesToCellRanges(e, t, i) {
                                        let s = 0,
                                            r = !1,
                                            n = 0,
                                            a = e[s];
                                        if (a) {
                                            for (let h = i; h < this._bufferService.cols; h++) {
                                                const i = t.getWidth(h),
                                                    l = t.getString(h).length || o.WHITESPACE_CELL_CHAR.length;
                                                if (0 !== i) {
                                                    if (!r && a[0] <= n && (a[0] = h, r = !0), a[1] <= n) {
                                                        if (a[1] = h, a = e[++s], !a) break;
                                                        a[0] <= n ? (a[0] = h, r = !0) : r = !1
                                                    }
                                                    n += l
                                                }
                                            }
                                            a && (a[1] = this._bufferService.cols)
                                        }
                                    }
                                    static _mergeRanges(e, t) {
                                        let i = !1;
                                        for (let s = 0; s < e.length; s++) {
                                            const r = e[s];
                                            if (i) {
                                                if (t[1] <= r[0]) return e[s - 1][1] = t[1], e;
                                                if (t[1] <= r[1]) return e[s - 1][1] = Math.max(t[1], r[1]), e.splice(s, 1), e;
                                                e.splice(s, 1), s--
                                            } else {
                                                if (t[1] <= r[0]) return e.splice(s, 0, t), e;
                                                if (t[1] <= r[1]) return r[0] = Math.min(t[0], r[0]), e;
                                                t[0] < r[1] && (r[0] = Math.min(t[0], r[0]), i = !0)
                                            }
                                        }
                                        return i ? e[e.length - 1][1] = t[1] : e.push(t), e
                                    }
                                };
                                t.CharacterJoinerService = c = s([r(0, h.IBufferService)], c)
                            },
                            5114: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CoreBrowserService = void 0;
                                const s = i(844),
                                    r = i(8460),
                                    n = i(3656);
                                class o extends s.Disposable {
                                    constructor(e, t, i) {
                                        super(), this._textarea = e, this._window = t, this.mainDocument = i, this._isFocused = !1, this._cachedIsFocused = void 0, this._screenDprMonitor = new a(this._window), this._onDprChange = this.register(new r.EventEmitter), this.onDprChange = this._onDprChange.event, this._onWindowChange = this.register(new r.EventEmitter), this.onWindowChange = this._onWindowChange.event, this.register(this.onWindowChange((e => this._screenDprMonitor.setWindow(e)))), this.register((0, r.forwardEvent)(this._screenDprMonitor.onDprChange, this._onDprChange)), this._textarea.addEventListener("focus", (() => this._isFocused = !0)), this._textarea.addEventListener("blur", (() => this._isFocused = !1))
                                    }
                                    get window() {
                                        return this._window
                                    }
                                    set window(e) {
                                        this._window !== e && (this._window = e, this._onWindowChange.fire(this._window))
                                    }
                                    get dpr() {
                                        return this.window.devicePixelRatio
                                    }
                                    get isFocused() {
                                        return void 0 === this._cachedIsFocused && (this._cachedIsFocused = this._isFocused && this._textarea.ownerDocument.hasFocus(), queueMicrotask((() => this._cachedIsFocused = void 0))), this._cachedIsFocused
                                    }
                                }
                                t.CoreBrowserService = o;
                                class a extends s.Disposable {
                                    constructor(e) {
                                        super(), this._parentWindow = e, this._windowResizeListener = this.register(new s.MutableDisposable), this._onDprChange = this.register(new r.EventEmitter), this.onDprChange = this._onDprChange.event, this._outerListener = () => this._setDprAndFireIfDiffers(), this._currentDevicePixelRatio = this._parentWindow.devicePixelRatio, this._updateDpr(), this._setWindowResizeListener(), this.register((0, s.toDisposable)((() => this.clearListener())))
                                    }
                                    setWindow(e) {
                                        this._parentWindow = e, this._setWindowResizeListener(), this._setDprAndFireIfDiffers()
                                    }
                                    _setWindowResizeListener() {
                                        this._windowResizeListener.value = (0, n.addDisposableDomListener)(this._parentWindow, "resize", (() => this._setDprAndFireIfDiffers()))
                                    }
                                    _setDprAndFireIfDiffers() {
                                        this._parentWindow.devicePixelRatio !== this._currentDevicePixelRatio && this._onDprChange.fire(this._parentWindow.devicePixelRatio), this._updateDpr()
                                    }
                                    _updateDpr() {
                                        this._outerListener && (this._resolutionMediaMatchList?.removeListener(this._outerListener), this._currentDevicePixelRatio = this._parentWindow.devicePixelRatio, this._resolutionMediaMatchList = this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`), this._resolutionMediaMatchList.addListener(this._outerListener))
                                    }
                                    clearListener() {
                                        this._resolutionMediaMatchList && this._outerListener && (this._resolutionMediaMatchList.removeListener(this._outerListener), this._resolutionMediaMatchList = void 0, this._outerListener = void 0)
                                    }
                                }
                            },
                            779: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.LinkProviderService = void 0;
                                const s = i(844);
                                class r extends s.Disposable {
                                    constructor() {
                                        super(), this.linkProviders = [], this.register((0, s.toDisposable)((() => this.linkProviders.length = 0)))
                                    }
                                    registerLinkProvider(e) {
                                        return this.linkProviders.push(e), {
                                            dispose: () => {
                                                const t = this.linkProviders.indexOf(e); - 1 !== t && this.linkProviders.splice(t, 1)
                                            }
                                        }
                                    }
                                }
                                t.LinkProviderService = r
                            },
                            8934: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.MouseService = void 0;
                                const n = i(4725),
                                    o = i(9806);
                                let a = t.MouseService = class {
                                    constructor(e, t) {
                                        this._renderService = e, this._charSizeService = t
                                    }
                                    getCoords(e, t, i, s, r) {
                                        return (0, o.getCoords)(window, e, t, i, s, this._charSizeService.hasValidSize, this._renderService.dimensions.css.cell.width, this._renderService.dimensions.css.cell.height, r)
                                    }
                                    getMouseReportCoords(e, t) {
                                        const i = (0, o.getCoordsRelativeToElement)(window, e, t);
                                        if (this._charSizeService.hasValidSize) return i[0] = Math.min(Math.max(i[0], 0), this._renderService.dimensions.css.canvas.width - 1), i[1] = Math.min(Math.max(i[1], 0), this._renderService.dimensions.css.canvas.height - 1), {
                                            col: Math.floor(i[0] / this._renderService.dimensions.css.cell.width),
                                            row: Math.floor(i[1] / this._renderService.dimensions.css.cell.height),
                                            x: Math.floor(i[0]),
                                            y: Math.floor(i[1])
                                        }
                                    }
                                };
                                t.MouseService = a = s([r(0, n.IRenderService), r(1, n.ICharSizeService)], a)
                            },
                            3230: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.RenderService = void 0;
                                const n = i(6193),
                                    o = i(4725),
                                    a = i(8460),
                                    h = i(844),
                                    l = i(7226),
                                    c = i(2585);
                                let d = t.RenderService = class extends h.Disposable {
                                    get dimensions() {
                                        return this._renderer.value.dimensions
                                    }
                                    constructor(e, t, i, s, r, o, c, d) {
                                        super(), this._rowCount = e, this._charSizeService = s, this._renderer = this.register(new h.MutableDisposable), this._pausedResizeTask = new l.DebouncedIdleTask, this._observerDisposable = this.register(new h.MutableDisposable), this._isPaused = !1, this._needsFullRefresh = !1, this._isNextRenderRedrawOnly = !0, this._needsSelectionRefresh = !1, this._canvasWidth = 0, this._canvasHeight = 0, this._selectionState = {
                                            start: void 0,
                                            end: void 0,
                                            columnSelectMode: !1
                                        }, this._onDimensionsChange = this.register(new a.EventEmitter), this.onDimensionsChange = this._onDimensionsChange.event, this._onRenderedViewportChange = this.register(new a.EventEmitter), this.onRenderedViewportChange = this._onRenderedViewportChange.event, this._onRender = this.register(new a.EventEmitter), this.onRender = this._onRender.event, this._onRefreshRequest = this.register(new a.EventEmitter), this.onRefreshRequest = this._onRefreshRequest.event, this._renderDebouncer = new n.RenderDebouncer(((e, t) => this._renderRows(e, t)), c), this.register(this._renderDebouncer), this.register(c.onDprChange((() => this.handleDevicePixelRatioChange()))), this.register(o.onResize((() => this._fullRefresh()))), this.register(o.buffers.onBufferActivate((() => this._renderer.value?.clear()))), this.register(i.onOptionChange((() => this._handleOptionsChanged()))), this.register(this._charSizeService.onCharSizeChange((() => this.handleCharSizeChanged()))), this.register(r.onDecorationRegistered((() => this._fullRefresh()))), this.register(r.onDecorationRemoved((() => this._fullRefresh()))), this.register(i.onMultipleOptionChange(["customGlyphs", "drawBoldTextInBrightColors", "letterSpacing", "lineHeight", "fontFamily", "fontSize", "fontWeight", "fontWeightBold", "minimumContrastRatio"], (() => {
                                            this.clear(), this.handleResize(o.cols, o.rows), this._fullRefresh()
                                        }))), this.register(i.onMultipleOptionChange(["cursorBlink", "cursorStyle"], (() => this.refreshRows(o.buffer.y, o.buffer.y, !0)))), this.register(d.onChangeColors((() => this._fullRefresh()))), this._registerIntersectionObserver(c.window, t), this.register(c.onWindowChange((e => this._registerIntersectionObserver(e, t))))
                                    }
                                    _registerIntersectionObserver(e, t) {
                                        if ("IntersectionObserver" in e) {
                                            const i = new e.IntersectionObserver((e => this._handleIntersectionChange(e[e.length - 1])), {
                                                threshold: 0
                                            });
                                            i.observe(t), this._observerDisposable.value = (0, h.toDisposable)((() => i.disconnect()))
                                        }
                                    }
                                    _handleIntersectionChange(e) {
                                        this._isPaused = void 0 === e.isIntersecting ? 0 === e.intersectionRatio : !e.isIntersecting, this._isPaused || this._charSizeService.hasValidSize || this._charSizeService.measure(), !this._isPaused && this._needsFullRefresh && (this._pausedResizeTask.flush(), this.refreshRows(0, this._rowCount - 1), this._needsFullRefresh = !1)
                                    }
                                    refreshRows(e, t, i = !1) {
                                        this._isPaused ? this._needsFullRefresh = !0 : (i || (this._isNextRenderRedrawOnly = !1), this._renderDebouncer.refresh(e, t, this._rowCount))
                                    }
                                    _renderRows(e, t) {
                                        this._renderer.value && (e = Math.min(e, this._rowCount - 1), t = Math.min(t, this._rowCount - 1), this._renderer.value.renderRows(e, t), this._needsSelectionRefresh && (this._renderer.value.handleSelectionChanged(this._selectionState.start, this._selectionState.end, this._selectionState.columnSelectMode), this._needsSelectionRefresh = !1), this._isNextRenderRedrawOnly || this._onRenderedViewportChange.fire({
                                            start: e,
                                            end: t
                                        }), this._onRender.fire({
                                            start: e,
                                            end: t
                                        }), this._isNextRenderRedrawOnly = !0)
                                    }
                                    resize(e, t) {
                                        this._rowCount = t, this._fireOnCanvasResize()
                                    }
                                    _handleOptionsChanged() {
                                        this._renderer.value && (this.refreshRows(0, this._rowCount - 1), this._fireOnCanvasResize())
                                    }
                                    _fireOnCanvasResize() {
                                        this._renderer.value && (this._renderer.value.dimensions.css.canvas.width === this._canvasWidth && this._renderer.value.dimensions.css.canvas.height === this._canvasHeight || this._onDimensionsChange.fire(this._renderer.value.dimensions))
                                    }
                                    hasRenderer() {
                                        return !!this._renderer.value
                                    }
                                    setRenderer(e) {
                                        this._renderer.value = e, this._renderer.value && (this._renderer.value.onRequestRedraw((e => this.refreshRows(e.start, e.end, !0))), this._needsSelectionRefresh = !0, this._fullRefresh())
                                    }
                                    addRefreshCallback(e) {
                                        return this._renderDebouncer.addRefreshCallback(e)
                                    }
                                    _fullRefresh() {
                                        this._isPaused ? this._needsFullRefresh = !0 : this.refreshRows(0, this._rowCount - 1)
                                    }
                                    clearTextureAtlas() {
                                        this._renderer.value && (this._renderer.value.clearTextureAtlas?.(), this._fullRefresh())
                                    }
                                    handleDevicePixelRatioChange() {
                                        this._charSizeService.measure(), this._renderer.value && (this._renderer.value.handleDevicePixelRatioChange(), this.refreshRows(0, this._rowCount - 1))
                                    }
                                    handleResize(e, t) {
                                        this._renderer.value && (this._isPaused ? this._pausedResizeTask.set((() => this._renderer.value?.handleResize(e, t))) : this._renderer.value.handleResize(e, t), this._fullRefresh())
                                    }
                                    handleCharSizeChanged() {
                                        this._renderer.value?.handleCharSizeChanged()
                                    }
                                    handleBlur() {
                                        this._renderer.value?.handleBlur()
                                    }
                                    handleFocus() {
                                        this._renderer.value?.handleFocus()
                                    }
                                    handleSelectionChanged(e, t, i) {
                                        this._selectionState.start = e, this._selectionState.end = t, this._selectionState.columnSelectMode = i, this._renderer.value?.handleSelectionChanged(e, t, i)
                                    }
                                    handleCursorMove() {
                                        this._renderer.value?.handleCursorMove()
                                    }
                                    clear() {
                                        this._renderer.value?.clear()
                                    }
                                };
                                t.RenderService = d = s([r(2, c.IOptionsService), r(3, o.ICharSizeService), r(4, c.IDecorationService), r(5, c.IBufferService), r(6, o.ICoreBrowserService), r(7, o.IThemeService)], d)
                            },
                            9312: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.SelectionService = void 0;
                                const n = i(9806),
                                    o = i(9504),
                                    a = i(456),
                                    h = i(4725),
                                    l = i(8460),
                                    c = i(844),
                                    d = i(6114),
                                    _ = i(4841),
                                    u = i(511),
                                    f = i(2585),
                                    g = String.fromCharCode(160),
                                    p = new RegExp(g, "g");
                                let v = t.SelectionService = class extends c.Disposable {
                                    constructor(e, t, i, s, r, n, o, h, d) {
                                        super(), this._element = e, this._screenElement = t, this._linkifier = i, this._bufferService = s, this._coreService = r, this._mouseService = n, this._optionsService = o, this._renderService = h, this._coreBrowserService = d, this._dragScrollAmount = 0, this._enabled = !0, this._workCell = new u.CellData, this._mouseDownTimeStamp = 0, this._oldHasSelection = !1, this._oldSelectionStart = void 0, this._oldSelectionEnd = void 0, this._onLinuxMouseSelection = this.register(new l.EventEmitter), this.onLinuxMouseSelection = this._onLinuxMouseSelection.event, this._onRedrawRequest = this.register(new l.EventEmitter), this.onRequestRedraw = this._onRedrawRequest.event, this._onSelectionChange = this.register(new l.EventEmitter), this.onSelectionChange = this._onSelectionChange.event, this._onRequestScrollLines = this.register(new l.EventEmitter), this.onRequestScrollLines = this._onRequestScrollLines.event, this._mouseMoveListener = e => this._handleMouseMove(e), this._mouseUpListener = e => this._handleMouseUp(e), this._coreService.onUserInput((() => {
                                            this.hasSelection && this.clearSelection()
                                        })), this._trimListener = this._bufferService.buffer.lines.onTrim((e => this._handleTrim(e))), this.register(this._bufferService.buffers.onBufferActivate((e => this._handleBufferActivate(e)))), this.enable(), this._model = new a.SelectionModel(this._bufferService), this._activeSelectionMode = 0, this.register((0, c.toDisposable)((() => {
                                            this._removeMouseDownListeners()
                                        })))
                                    }
                                    reset() {
                                        this.clearSelection()
                                    }
                                    disable() {
                                        this.clearSelection(), this._enabled = !1
                                    }
                                    enable() {
                                        this._enabled = !0
                                    }
                                    get selectionStart() {
                                        return this._model.finalSelectionStart
                                    }
                                    get selectionEnd() {
                                        return this._model.finalSelectionEnd
                                    }
                                    get hasSelection() {
                                        const e = this._model.finalSelectionStart,
                                            t = this._model.finalSelectionEnd;
                                        return !(!e || !t || e[0] === t[0] && e[1] === t[1])
                                    }
                                    get selectionText() {
                                        const e = this._model.finalSelectionStart,
                                            t = this._model.finalSelectionEnd;
                                        if (!e || !t) return "";
                                        const i = this._bufferService.buffer,
                                            s = [];
                                        if (3 === this._activeSelectionMode) {
                                            if (e[0] === t[0]) return "";
                                            const r = e[0] < t[0] ? e[0] : t[0],
                                                n = e[0] < t[0] ? t[0] : e[0];
                                            for (let o = e[1]; o <= t[1]; o++) {
                                                const e = i.translateBufferLineToString(o, !0, r, n);
                                                s.push(e)
                                            }
                                        } else {
                                            const r = e[1] === t[1] ? t[0] : void 0;
                                            s.push(i.translateBufferLineToString(e[1], !0, e[0], r));
                                            for (let r = e[1] + 1; r <= t[1] - 1; r++) {
                                                const e = i.lines.get(r),
                                                    t = i.translateBufferLineToString(r, !0);
                                                e?.isWrapped ? s[s.length - 1] += t : s.push(t)
                                            }
                                            if (e[1] !== t[1]) {
                                                const e = i.lines.get(t[1]),
                                                    r = i.translateBufferLineToString(t[1], !0, 0, t[0]);
                                                e && e.isWrapped ? s[s.length - 1] += r : s.push(r)
                                            }
                                        }
                                        return s.map((e => e.replace(p, " "))).join(d.isWindows ? "\r\n" : "\n")
                                    }
                                    clearSelection() {
                                        this._model.clearSelection(), this._removeMouseDownListeners(), this.refresh(), this._onSelectionChange.fire()
                                    }
                                    refresh(e) {
                                        this._refreshAnimationFrame || (this._refreshAnimationFrame = this._coreBrowserService.window.requestAnimationFrame((() => this._refresh()))), d.isLinux && e && this.selectionText.length && this._onLinuxMouseSelection.fire(this.selectionText)
                                    }
                                    _refresh() {
                                        this._refreshAnimationFrame = void 0, this._onRedrawRequest.fire({
                                            start: this._model.finalSelectionStart,
                                            end: this._model.finalSelectionEnd,
                                            columnSelectMode: 3 === this._activeSelectionMode
                                        })
                                    }
                                    _isClickInSelection(e) {
                                        const t = this._getMouseBufferCoords(e),
                                            i = this._model.finalSelectionStart,
                                            s = this._model.finalSelectionEnd;
                                        return !!(i && s && t) && this._areCoordsInSelection(t, i, s)
                                    }
                                    isCellInSelection(e, t) {
                                        const i = this._model.finalSelectionStart,
                                            s = this._model.finalSelectionEnd;
                                        return !(!i || !s) && this._areCoordsInSelection([e, t], i, s)
                                    }
                                    _areCoordsInSelection(e, t, i) {
                                        return e[1] > t[1] && e[1] < i[1] || t[1] === i[1] && e[1] === t[1] && e[0] >= t[0] && e[0] < i[0] || t[1] < i[1] && e[1] === i[1] && e[0] < i[0] || t[1] < i[1] && e[1] === t[1] && e[0] >= t[0]
                                    }
                                    _selectWordAtCursor(e, t) {
                                        const i = this._linkifier.currentLink?.link?.range;
                                        if (i) return this._model.selectionStart = [i.start.x - 1, i.start.y - 1], this._model.selectionStartLength = (0, _.getRangeLength)(i, this._bufferService.cols), this._model.selectionEnd = void 0, !0;
                                        const s = this._getMouseBufferCoords(e);
                                        return !!s && (this._selectWordAt(s, t), this._model.selectionEnd = void 0, !0)
                                    }
                                    selectAll() {
                                        this._model.isSelectAllActive = !0, this.refresh(), this._onSelectionChange.fire()
                                    }
                                    selectLines(e, t) {
                                        this._model.clearSelection(), e = Math.max(e, 0), t = Math.min(t, this._bufferService.buffer.lines.length - 1), this._model.selectionStart = [0, e], this._model.selectionEnd = [this._bufferService.cols, t], this.refresh(), this._onSelectionChange.fire()
                                    }
                                    _handleTrim(e) {
                                        this._model.handleTrim(e) && this.refresh()
                                    }
                                    _getMouseBufferCoords(e) {
                                        const t = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows, !0);
                                        if (t) return t[0]--, t[1]--, t[1] += this._bufferService.buffer.ydisp, t
                                    }
                                    _getMouseEventScrollAmount(e) {
                                        let t = (0, n.getCoordsRelativeToElement)(this._coreBrowserService.window, e, this._screenElement)[1];
                                        const i = this._renderService.dimensions.css.canvas.height;
                                        return t >= 0 && t <= i ? 0 : (t > i && (t -= i), t = Math.min(Math.max(t, -50), 50), t /= 50, t / Math.abs(t) + Math.round(14 * t))
                                    }
                                    shouldForceSelection(e) {
                                        return d.isMac ? e.altKey && this._optionsService.rawOptions.macOptionClickForcesSelection : e.shiftKey
                                    }
                                    handleMouseDown(e) {
                                        if (this._mouseDownTimeStamp = e.timeStamp, (2 !== e.button || !this.hasSelection) && 0 === e.button) {
                                            if (!this._enabled) {
                                                if (!this.shouldForceSelection(e)) return;
                                                e.stopPropagation()
                                            }
                                            e.preventDefault(), this._dragScrollAmount = 0, this._enabled && e.shiftKey ? this._handleIncrementalClick(e) : 1 === e.detail ? this._handleSingleClick(e) : 2 === e.detail ? this._handleDoubleClick(e) : 3 === e.detail && this._handleTripleClick(e), this._addMouseDownListeners(), this.refresh(!0)
                                        }
                                    }
                                    _addMouseDownListeners() {
                                        this._screenElement.ownerDocument && (this._screenElement.ownerDocument.addEventListener("mousemove", this._mouseMoveListener), this._screenElement.ownerDocument.addEventListener("mouseup", this._mouseUpListener)), this._dragScrollIntervalTimer = this._coreBrowserService.window.setInterval((() => this._dragScroll()), 50)
                                    }
                                    _removeMouseDownListeners() {
                                        this._screenElement.ownerDocument && (this._screenElement.ownerDocument.removeEventListener("mousemove", this._mouseMoveListener), this._screenElement.ownerDocument.removeEventListener("mouseup", this._mouseUpListener)), this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer), this._dragScrollIntervalTimer = void 0
                                    }
                                    _handleIncrementalClick(e) {
                                        this._model.selectionStart && (this._model.selectionEnd = this._getMouseBufferCoords(e))
                                    }
                                    _handleSingleClick(e) {
                                        if (this._model.selectionStartLength = 0, this._model.isSelectAllActive = !1, this._activeSelectionMode = this.shouldColumnSelect(e) ? 3 : 0, this._model.selectionStart = this._getMouseBufferCoords(e), !this._model.selectionStart) return;
                                        this._model.selectionEnd = void 0;
                                        const t = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);
                                        t && t.length !== this._model.selectionStart[0] && 0 === t.hasWidth(this._model.selectionStart[0]) && this._model.selectionStart[0]++
                                    }
                                    _handleDoubleClick(e) {
                                        this._selectWordAtCursor(e, !0) && (this._activeSelectionMode = 1)
                                    }
                                    _handleTripleClick(e) {
                                        const t = this._getMouseBufferCoords(e);
                                        t && (this._activeSelectionMode = 2, this._selectLineAt(t[1]))
                                    }
                                    shouldColumnSelect(e) {
                                        return e.altKey && !(d.isMac && this._optionsService.rawOptions.macOptionClickForcesSelection)
                                    }
                                    _handleMouseMove(e) {
                                        if (e.stopImmediatePropagation(), !this._model.selectionStart) return;
                                        const t = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
                                        if (this._model.selectionEnd = this._getMouseBufferCoords(e), !this._model.selectionEnd) return void this.refresh(!0);
                                        2 === this._activeSelectionMode ? this._model.selectionEnd[1] < this._model.selectionStart[1] ? this._model.selectionEnd[0] = 0 : this._model.selectionEnd[0] = this._bufferService.cols : 1 === this._activeSelectionMode && this._selectToWordAt(this._model.selectionEnd), this._dragScrollAmount = this._getMouseEventScrollAmount(e), 3 !== this._activeSelectionMode && (this._dragScrollAmount > 0 ? this._model.selectionEnd[0] = this._bufferService.cols : this._dragScrollAmount < 0 && (this._model.selectionEnd[0] = 0));
                                        const i = this._bufferService.buffer;
                                        if (this._model.selectionEnd[1] < i.lines.length) {
                                            const e = i.lines.get(this._model.selectionEnd[1]);
                                            e && 0 === e.hasWidth(this._model.selectionEnd[0]) && this._model.selectionEnd[0] < this._bufferService.cols && this._model.selectionEnd[0]++
                                        }
                                        t && t[0] === this._model.selectionEnd[0] && t[1] === this._model.selectionEnd[1] || this.refresh(!0)
                                    }
                                    _dragScroll() {
                                        if (this._model.selectionEnd && this._model.selectionStart && this._dragScrollAmount) {
                                            this._onRequestScrollLines.fire({
                                                amount: this._dragScrollAmount,
                                                suppressScrollEvent: !1
                                            });
                                            const e = this._bufferService.buffer;
                                            this._dragScrollAmount > 0 ? (3 !== this._activeSelectionMode && (this._model.selectionEnd[0] = this._bufferService.cols), this._model.selectionEnd[1] = Math.min(e.ydisp + this._bufferService.rows, e.lines.length - 1)) : (3 !== this._activeSelectionMode && (this._model.selectionEnd[0] = 0), this._model.selectionEnd[1] = e.ydisp), this.refresh()
                                        }
                                    }
                                    _handleMouseUp(e) {
                                        const t = e.timeStamp - this._mouseDownTimeStamp;
                                        if (this._removeMouseDownListeners(), this.selectionText.length <= 1 && t < 500 && e.altKey && this._optionsService.rawOptions.altClickMovesCursor) {
                                            if (this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {
                                                const t = this._mouseService.getCoords(e, this._element, this._bufferService.cols, this._bufferService.rows, !1);
                                                if (t && void 0 !== t[0] && void 0 !== t[1]) {
                                                    const e = (0, o.moveToCellSequence)(t[0] - 1, t[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);
                                                    this._coreService.triggerDataEvent(e, !0)
                                                }
                                            }
                                        } else this._fireEventIfSelectionChanged()
                                    }
                                    _fireEventIfSelectionChanged() {
                                        const e = this._model.finalSelectionStart,
                                            t = this._model.finalSelectionEnd,
                                            i = !(!e || !t || e[0] === t[0] && e[1] === t[1]);
                                        i ? e && t && (this._oldSelectionStart && this._oldSelectionEnd && e[0] === this._oldSelectionStart[0] && e[1] === this._oldSelectionStart[1] && t[0] === this._oldSelectionEnd[0] && t[1] === this._oldSelectionEnd[1] || this._fireOnSelectionChange(e, t, i)) : this._oldHasSelection && this._fireOnSelectionChange(e, t, i)
                                    }
                                    _fireOnSelectionChange(e, t, i) {
                                        this._oldSelectionStart = e, this._oldSelectionEnd = t, this._oldHasSelection = i, this._onSelectionChange.fire()
                                    }
                                    _handleBufferActivate(e) {
                                        this.clearSelection(), this._trimListener.dispose(), this._trimListener = e.activeBuffer.lines.onTrim((e => this._handleTrim(e)))
                                    }
                                    _convertViewportColToCharacterIndex(e, t) {
                                        let i = t;
                                        for (let s = 0; t >= s; s++) {
                                            const r = e.loadCell(s, this._workCell).getChars().length;
                                            0 === this._workCell.getWidth() ? i-- : r > 1 && t !== s && (i += r - 1)
                                        }
                                        return i
                                    }
                                    setSelection(e, t, i) {
                                        this._model.clearSelection(), this._removeMouseDownListeners(), this._model.selectionStart = [e, t], this._model.selectionStartLength = i, this.refresh(), this._fireEventIfSelectionChanged()
                                    }
                                    rightClickSelect(e) {
                                        this._isClickInSelection(e) || (this._selectWordAtCursor(e, !1) && this.refresh(!0), this._fireEventIfSelectionChanged())
                                    }
                                    _getWordAt(e, t, i = !0, s = !0) {
                                        if (e[0] >= this._bufferService.cols) return;
                                        const r = this._bufferService.buffer,
                                            n = r.lines.get(e[1]);
                                        if (!n) return;
                                        const o = r.translateBufferLineToString(e[1], !1);
                                        let a = this._convertViewportColToCharacterIndex(n, e[0]),
                                            h = a;
                                        const l = e[0] - a;
                                        let c = 0,
                                            d = 0,
                                            _ = 0,
                                            u = 0;
                                        if (" " === o.charAt(a)) {
                                            for (; a > 0 && " " === o.charAt(a - 1);) a--;
                                            for (; h < o.length && " " === o.charAt(h + 1);) h++
                                        } else {
                                            let t = e[0],
                                                i = e[0];
                                            0 === n.getWidth(t) && (c++, t--), 2 === n.getWidth(i) && (d++, i++);
                                            const s = n.getString(i).length;
                                            for (s > 1 && (u += s - 1, h += s - 1); t > 0 && a > 0 && !this._isCharWordSeparator(n.loadCell(t - 1, this._workCell));) {
                                                n.loadCell(t - 1, this._workCell);
                                                const e = this._workCell.getChars().length;
                                                0 === this._workCell.getWidth() ? (c++, t--) : e > 1 && (_ += e - 1, a -= e - 1), a--, t--
                                            }
                                            for (; i < n.length && h + 1 < o.length && !this._isCharWordSeparator(n.loadCell(i + 1, this._workCell));) {
                                                n.loadCell(i + 1, this._workCell);
                                                const e = this._workCell.getChars().length;
                                                2 === this._workCell.getWidth() ? (d++, i++) : e > 1 && (u += e - 1, h += e - 1), h++, i++
                                            }
                                        }
                                        h++;
                                        let f = a + l - c + _,
                                            g = Math.min(this._bufferService.cols, h - a + c + d - _ - u);
                                        if (t || "" !== o.slice(a, h).trim()) {
                                            if (i && 0 === f && 32 !== n.getCodePoint(0)) {
                                                const t = r.lines.get(e[1] - 1);
                                                if (t && n.isWrapped && 32 !== t.getCodePoint(this._bufferService.cols - 1)) {
                                                    const t = this._getWordAt([this._bufferService.cols - 1, e[1] - 1], !1, !0, !1);
                                                    if (t) {
                                                        const e = this._bufferService.cols - t.start;
                                                        f -= e, g += e
                                                    }
                                                }
                                            }
                                            if (s && f + g === this._bufferService.cols && 32 !== n.getCodePoint(this._bufferService.cols - 1)) {
                                                const t = r.lines.get(e[1] + 1);
                                                if (t?.isWrapped && 32 !== t.getCodePoint(0)) {
                                                    const t = this._getWordAt([0, e[1] + 1], !1, !1, !0);
                                                    t && (g += t.length)
                                                }
                                            }
                                            return {
                                                start: f,
                                                length: g
                                            }
                                        }
                                    }
                                    _selectWordAt(e, t) {
                                        const i = this._getWordAt(e, t);
                                        if (i) {
                                            for (; i.start < 0;) i.start += this._bufferService.cols, e[1]--;
                                            this._model.selectionStart = [i.start, e[1]], this._model.selectionStartLength = i.length
                                        }
                                    }
                                    _selectToWordAt(e) {
                                        const t = this._getWordAt(e, !0);
                                        if (t) {
                                            let i = e[1];
                                            for (; t.start < 0;) t.start += this._bufferService.cols, i--;
                                            if (!this._model.areSelectionValuesReversed())
                                                for (; t.start + t.length > this._bufferService.cols;) t.length -= this._bufferService.cols, i++;
                                            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? t.start : t.start + t.length, i]
                                        }
                                    }
                                    _isCharWordSeparator(e) {
                                        return 0 !== e.getWidth() && this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars()) >= 0
                                    }
                                    _selectLineAt(e) {
                                        const t = this._bufferService.buffer.getWrappedRangeForLine(e),
                                            i = {
                                                start: {
                                                    x: 0,
                                                    y: t.first
                                                },
                                                end: {
                                                    x: this._bufferService.cols - 1,
                                                    y: t.last
                                                }
                                            };
                                        this._model.selectionStart = [0, t.first], this._model.selectionEnd = void 0, this._model.selectionStartLength = (0, _.getRangeLength)(i, this._bufferService.cols)
                                    }
                                };
                                t.SelectionService = v = s([r(3, f.IBufferService), r(4, f.ICoreService), r(5, h.IMouseService), r(6, f.IOptionsService), r(7, h.IRenderService), r(8, h.ICoreBrowserService)], v)
                            },
                            4725: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ILinkProviderService = t.IThemeService = t.ICharacterJoinerService = t.ISelectionService = t.IRenderService = t.IMouseService = t.ICoreBrowserService = t.ICharSizeService = void 0;
                                const s = i(8343);
                                t.ICharSizeService = (0, s.createDecorator)("CharSizeService"), t.ICoreBrowserService = (0, s.createDecorator)("CoreBrowserService"), t.IMouseService = (0, s.createDecorator)("MouseService"), t.IRenderService = (0, s.createDecorator)("RenderService"), t.ISelectionService = (0, s.createDecorator)("SelectionService"), t.ICharacterJoinerService = (0, s.createDecorator)("CharacterJoinerService"), t.IThemeService = (0, s.createDecorator)("ThemeService"), t.ILinkProviderService = (0, s.createDecorator)("LinkProviderService")
                            },
                            6731: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ThemeService = t.DEFAULT_ANSI_COLORS = void 0;
                                const n = i(7239),
                                    o = i(8055),
                                    a = i(8460),
                                    h = i(844),
                                    l = i(2585),
                                    c = o.css.toColor("#ffffff"),
                                    d = o.css.toColor("#000000"),
                                    _ = o.css.toColor("#ffffff"),
                                    u = o.css.toColor("#000000"),
                                    f = {
                                        css: "rgba(255, 255, 255, 0.3)",
                                        rgba: 4294967117
                                    };
                                t.DEFAULT_ANSI_COLORS = Object.freeze((() => {
                                    const e = [o.css.toColor("#2e3436"), o.css.toColor("#cc0000"), o.css.toColor("#4e9a06"), o.css.toColor("#c4a000"), o.css.toColor("#3465a4"), o.css.toColor("#75507b"), o.css.toColor("#06989a"), o.css.toColor("#d3d7cf"), o.css.toColor("#555753"), o.css.toColor("#ef2929"), o.css.toColor("#8ae234"), o.css.toColor("#fce94f"), o.css.toColor("#729fcf"), o.css.toColor("#ad7fa8"), o.css.toColor("#34e2e2"), o.css.toColor("#eeeeec")],
                                        t = [0, 95, 135, 175, 215, 255];
                                    for (let i = 0; i < 216; i++) {
                                        const s = t[i / 36 % 6 | 0],
                                            r = t[i / 6 % 6 | 0],
                                            n = t[i % 6];
                                        e.push({
                                            css: o.channels.toCss(s, r, n),
                                            rgba: o.channels.toRgba(s, r, n)
                                        })
                                    }
                                    for (let t = 0; t < 24; t++) {
                                        const i = 8 + 10 * t;
                                        e.push({
                                            css: o.channels.toCss(i, i, i),
                                            rgba: o.channels.toRgba(i, i, i)
                                        })
                                    }
                                    return e
                                })());
                                let g = t.ThemeService = class extends h.Disposable {
                                    get colors() {
                                        return this._colors
                                    }
                                    constructor(e) {
                                        super(), this._optionsService = e, this._contrastCache = new n.ColorContrastCache, this._halfContrastCache = new n.ColorContrastCache, this._onChangeColors = this.register(new a.EventEmitter), this.onChangeColors = this._onChangeColors.event, this._colors = {
                                            foreground: c,
                                            background: d,
                                            cursor: _,
                                            cursorAccent: u,
                                            selectionForeground: void 0,
                                            selectionBackgroundTransparent: f,
                                            selectionBackgroundOpaque: o.color.blend(d, f),
                                            selectionInactiveBackgroundTransparent: f,
                                            selectionInactiveBackgroundOpaque: o.color.blend(d, f),
                                            ansi: t.DEFAULT_ANSI_COLORS.slice(),
                                            contrastCache: this._contrastCache,
                                            halfContrastCache: this._halfContrastCache
                                        }, this._updateRestoreColors(), this._setTheme(this._optionsService.rawOptions.theme), this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio", (() => this._contrastCache.clear()))), this.register(this._optionsService.onSpecificOptionChange("theme", (() => this._setTheme(this._optionsService.rawOptions.theme))))
                                    }
                                    _setTheme(e = {}) {
                                        const i = this._colors;
                                        if (i.foreground = p(e.foreground, c), i.background = p(e.background, d), i.cursor = p(e.cursor, _), i.cursorAccent = p(e.cursorAccent, u), i.selectionBackgroundTransparent = p(e.selectionBackground, f), i.selectionBackgroundOpaque = o.color.blend(i.background, i.selectionBackgroundTransparent), i.selectionInactiveBackgroundTransparent = p(e.selectionInactiveBackground, i.selectionBackgroundTransparent), i.selectionInactiveBackgroundOpaque = o.color.blend(i.background, i.selectionInactiveBackgroundTransparent), i.selectionForeground = e.selectionForeground ? p(e.selectionForeground, o.NULL_COLOR) : void 0, i.selectionForeground === o.NULL_COLOR && (i.selectionForeground = void 0), o.color.isOpaque(i.selectionBackgroundTransparent)) {
                                            const e = .3;
                                            i.selectionBackgroundTransparent = o.color.opacity(i.selectionBackgroundTransparent, e)
                                        }
                                        if (o.color.isOpaque(i.selectionInactiveBackgroundTransparent)) {
                                            const e = .3;
                                            i.selectionInactiveBackgroundTransparent = o.color.opacity(i.selectionInactiveBackgroundTransparent, e)
                                        }
                                        if (i.ansi = t.DEFAULT_ANSI_COLORS.slice(), i.ansi[0] = p(e.black, t.DEFAULT_ANSI_COLORS[0]), i.ansi[1] = p(e.red, t.DEFAULT_ANSI_COLORS[1]), i.ansi[2] = p(e.green, t.DEFAULT_ANSI_COLORS[2]), i.ansi[3] = p(e.yellow, t.DEFAULT_ANSI_COLORS[3]), i.ansi[4] = p(e.blue, t.DEFAULT_ANSI_COLORS[4]), i.ansi[5] = p(e.magenta, t.DEFAULT_ANSI_COLORS[5]), i.ansi[6] = p(e.cyan, t.DEFAULT_ANSI_COLORS[6]), i.ansi[7] = p(e.white, t.DEFAULT_ANSI_COLORS[7]), i.ansi[8] = p(e.brightBlack, t.DEFAULT_ANSI_COLORS[8]), i.ansi[9] = p(e.brightRed, t.DEFAULT_ANSI_COLORS[9]), i.ansi[10] = p(e.brightGreen, t.DEFAULT_ANSI_COLORS[10]), i.ansi[11] = p(e.brightYellow, t.DEFAULT_ANSI_COLORS[11]), i.ansi[12] = p(e.brightBlue, t.DEFAULT_ANSI_COLORS[12]), i.ansi[13] = p(e.brightMagenta, t.DEFAULT_ANSI_COLORS[13]), i.ansi[14] = p(e.brightCyan, t.DEFAULT_ANSI_COLORS[14]), i.ansi[15] = p(e.brightWhite, t.DEFAULT_ANSI_COLORS[15]), e.extendedAnsi) {
                                            const s = Math.min(i.ansi.length - 16, e.extendedAnsi.length);
                                            for (let r = 0; r < s; r++) i.ansi[r + 16] = p(e.extendedAnsi[r], t.DEFAULT_ANSI_COLORS[r + 16])
                                        }
                                        this._contrastCache.clear(), this._halfContrastCache.clear(), this._updateRestoreColors(), this._onChangeColors.fire(this.colors)
                                    }
                                    restoreColor(e) {
                                        this._restoreColor(e), this._onChangeColors.fire(this.colors)
                                    }
                                    _restoreColor(e) {
                                        if (void 0 !== e) switch (e) {
                                            case 256:
                                                this._colors.foreground = this._restoreColors.foreground;
                                                break;
                                            case 257:
                                                this._colors.background = this._restoreColors.background;
                                                break;
                                            case 258:
                                                this._colors.cursor = this._restoreColors.cursor;
                                                break;
                                            default:
                                                this._colors.ansi[e] = this._restoreColors.ansi[e]
                                        } else
                                            for (let e = 0; e < this._restoreColors.ansi.length; ++e) this._colors.ansi[e] = this._restoreColors.ansi[e]
                                    }
                                    modifyColors(e) {
                                        e(this._colors), this._onChangeColors.fire(this.colors)
                                    }
                                    _updateRestoreColors() {
                                        this._restoreColors = {
                                            foreground: this._colors.foreground,
                                            background: this._colors.background,
                                            cursor: this._colors.cursor,
                                            ansi: this._colors.ansi.slice()
                                        }
                                    }
                                };

                                function p(e, t) {
                                    if (void 0 !== e) try {
                                        return o.css.toColor(e)
                                    } catch {}
                                    return t
                                }
                                t.ThemeService = g = s([r(0, l.IOptionsService)], g)
                            },
                            6349: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CircularList = void 0;
                                const s = i(8460),
                                    r = i(844);
                                class n extends r.Disposable {
                                    constructor(e) {
                                        super(), this._maxLength = e, this.onDeleteEmitter = this.register(new s.EventEmitter), this.onDelete = this.onDeleteEmitter.event, this.onInsertEmitter = this.register(new s.EventEmitter), this.onInsert = this.onInsertEmitter.event, this.onTrimEmitter = this.register(new s.EventEmitter), this.onTrim = this.onTrimEmitter.event, this._array = new Array(this._maxLength), this._startIndex = 0, this._length = 0
                                    }
                                    get maxLength() {
                                        return this._maxLength
                                    }
                                    set maxLength(e) {
                                        if (this._maxLength === e) return;
                                        const t = new Array(e);
                                        for (let i = 0; i < Math.min(e, this.length); i++) t[i] = this._array[this._getCyclicIndex(i)];
                                        this._array = t, this._maxLength = e, this._startIndex = 0
                                    }
                                    get length() {
                                        return this._length
                                    }
                                    set length(e) {
                                        if (e > this._length)
                                            for (let t = this._length; t < e; t++) this._array[t] = void 0;
                                        this._length = e
                                    }
                                    get(e) {
                                        return this._array[this._getCyclicIndex(e)]
                                    }
                                    set(e, t) {
                                        this._array[this._getCyclicIndex(e)] = t
                                    }
                                    push(e) {
                                        this._array[this._getCyclicIndex(this._length)] = e, this._length === this._maxLength ? (this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1)) : this._length++
                                    }
                                    recycle() {
                                        if (this._length !== this._maxLength) throw new Error("Can only recycle when the buffer is full");
                                        return this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1), this._array[this._getCyclicIndex(this._length - 1)]
                                    }
                                    get isFull() {
                                        return this._length === this._maxLength
                                    }
                                    pop() {
                                        return this._array[this._getCyclicIndex(this._length-- - 1)]
                                    }
                                    splice(e, t, ...i) {
                                        if (t) {
                                            for (let i = e; i < this._length - t; i++) this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + t)];
                                            this._length -= t, this.onDeleteEmitter.fire({
                                                index: e,
                                                amount: t
                                            })
                                        }
                                        for (let t = this._length - 1; t >= e; t--) this._array[this._getCyclicIndex(t + i.length)] = this._array[this._getCyclicIndex(t)];
                                        for (let t = 0; t < i.length; t++) this._array[this._getCyclicIndex(e + t)] = i[t];
                                        if (i.length && this.onInsertEmitter.fire({
                                                index: e,
                                                amount: i.length
                                            }), this._length + i.length > this._maxLength) {
                                            const e = this._length + i.length - this._maxLength;
                                            this._startIndex += e, this._length = this._maxLength, this.onTrimEmitter.fire(e)
                                        } else this._length += i.length
                                    }
                                    trimStart(e) {
                                        e > this._length && (e = this._length), this._startIndex += e, this._length -= e, this.onTrimEmitter.fire(e)
                                    }
                                    shiftElements(e, t, i) {
                                        if (!(t <= 0)) {
                                            if (e < 0 || e >= this._length) throw new Error("start argument out of range");
                                            if (e + i < 0) throw new Error("Cannot shift elements in list beyond index 0");
                                            if (i > 0) {
                                                for (let s = t - 1; s >= 0; s--) this.set(e + s + i, this.get(e + s));
                                                const s = e + t + i - this._length;
                                                if (s > 0)
                                                    for (this._length += s; this._length > this._maxLength;) this._length--, this._startIndex++, this.onTrimEmitter.fire(1)
                                            } else
                                                for (let s = 0; s < t; s++) this.set(e + s + i, this.get(e + s))
                                        }
                                    }
                                    _getCyclicIndex(e) {
                                        return (this._startIndex + e) % this._maxLength
                                    }
                                }
                                t.CircularList = n
                            },
                            1439: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.clone = void 0, t.clone = function e(t, i = 5) {
                                    if ("object" != typeof t) return t;
                                    const s = Array.isArray(t) ? [] : {};
                                    for (const r in t) s[r] = i <= 1 ? t[r] : t[r] && e(t[r], i - 1);
                                    return s
                                }
                            },
                            8055: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.contrastRatio = t.toPaddedHex = t.rgba = t.rgb = t.css = t.color = t.channels = t.NULL_COLOR = void 0;
                                const s = i(6114);
                                let r = 0,
                                    n = 0,
                                    o = 0,
                                    a = 0;
                                var h, l, c, d, _;

                                function u(e) {
                                    const t = e.toString(16);
                                    return t.length < 2 ? "0" + t : t
                                }

                                function f(e, t) {
                                    return e < t ? (t + .05) / (e + .05) : (e + .05) / (t + .05)
                                }
                                t.NULL_COLOR = {
                                        css: "#00000000",
                                        rgba: 0
                                    },
                                    function(e) {
                                        e.toCss = function(e, t, i, s) {
                                            return void 0 !== s ? `#${u(e)}${u(t)}${u(i)}${u(s)}` : `#${u(e)}${u(t)}${u(i)}`
                                        }, e.toRgba = function(e, t, i, s = 255) {
                                            return (e << 24 | t << 16 | i << 8 | s) >>> 0
                                        }, e.toColor = function(t, i, s, r) {
                                            return {
                                                css: e.toCss(t, i, s, r),
                                                rgba: e.toRgba(t, i, s, r)
                                            }
                                        }
                                    }(h || (t.channels = h = {})),
                                    function(e) {
                                        function t(e, t) {
                                            return a = Math.round(255 * t), [r, n, o] = _.toChannels(e.rgba), {
                                                css: h.toCss(r, n, o, a),
                                                rgba: h.toRgba(r, n, o, a)
                                            }
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t.rgba) / 255, 1 === a) return {
                                                css: t.css,
                                                rgba: t.rgba
                                            };
                                            const i = t.rgba >> 24 & 255,
                                                s = t.rgba >> 16 & 255,
                                                l = t.rgba >> 8 & 255,
                                                c = e.rgba >> 24 & 255,
                                                d = e.rgba >> 16 & 255,
                                                _ = e.rgba >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), {
                                                css: h.toCss(r, n, o),
                                                rgba: h.toRgba(r, n, o)
                                            }
                                        }, e.isOpaque = function(e) {
                                            return 255 == (255 & e.rgba)
                                        }, e.ensureContrastRatio = function(e, t, i) {
                                            const s = _.ensureContrastRatio(e.rgba, t.rgba, i);
                                            if (s) return h.toColor(s >> 24 & 255, s >> 16 & 255, s >> 8 & 255)
                                        }, e.opaque = function(e) {
                                            const t = (255 | e.rgba) >>> 0;
                                            return [r, n, o] = _.toChannels(t), {
                                                css: h.toCss(r, n, o),
                                                rgba: t
                                            }
                                        }, e.opacity = t, e.multiplyOpacity = function(e, i) {
                                            return a = 255 & e.rgba, t(e, a * i / 255)
                                        }, e.toColorRGB = function(e) {
                                            return [e.rgba >> 24 & 255, e.rgba >> 16 & 255, e.rgba >> 8 & 255]
                                        }
                                    }(l || (t.color = l = {})),
                                    function(e) {
                                        let t, i;
                                        if (!s.isNode) {
                                            const e = document.createElement("canvas");
                                            e.width = 1, e.height = 1;
                                            const s = e.getContext("2d", {
                                                willReadFrequently: !0
                                            });
                                            s && (t = s, t.globalCompositeOperation = "copy", i = t.createLinearGradient(0, 0, 1, 1))
                                        }
                                        e.toColor = function(e) {
                                            if (e.match(/#[\da-f]{3,8}/i)) switch (e.length) {
                                                case 4:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), h.toColor(r, n, o);
                                                case 5:
                                                    return r = parseInt(e.slice(1, 2).repeat(2), 16), n = parseInt(e.slice(2, 3).repeat(2), 16), o = parseInt(e.slice(3, 4).repeat(2), 16), a = parseInt(e.slice(4, 5).repeat(2), 16), h.toColor(r, n, o, a);
                                                case 7:
                                                    return {
                                                        css: e, rgba: (parseInt(e.slice(1), 16) << 8 | 255) >>> 0
                                                    };
                                                case 9:
                                                    return {
                                                        css: e, rgba: parseInt(e.slice(1), 16) >>> 0
                                                    }
                                            }
                                            const s = e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);
                                            if (s) return r = parseInt(s[1]), n = parseInt(s[2]), o = parseInt(s[3]), a = Math.round(255 * (void 0 === s[5] ? 1 : parseFloat(s[5]))), h.toColor(r, n, o, a);
                                            if (!t || !i) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillStyle = i, t.fillStyle = e, "string" != typeof t.fillStyle) throw new Error("css.toColor: Unsupported css format");
                                            if (t.fillRect(0, 0, 1, 1), [r, n, o, a] = t.getImageData(0, 0, 1, 1).data, 255 !== a) throw new Error("css.toColor: Unsupported css format");
                                            return {
                                                rgba: h.toRgba(r, n, o, a),
                                                css: e
                                            }
                                        }
                                    }(c || (t.css = c = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e / 255,
                                                r = t / 255,
                                                n = i / 255;
                                            return .2126 * (s <= .03928 ? s / 12.92 : Math.pow((s + .055) / 1.055, 2.4)) + .7152 * (r <= .03928 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4)) + .0722 * (n <= .03928 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4))
                                        }
                                        e.relativeLuminance = function(e) {
                                            return t(e >> 16 & 255, e >> 8 & 255, 255 & e)
                                        }, e.relativeLuminance2 = t
                                    }(d || (t.rgb = d = {})),
                                    function(e) {
                                        function t(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o > 0 || a > 0 || h > 0);) o -= Math.max(0, Math.ceil(.1 * o)), a -= Math.max(0, Math.ceil(.1 * a)), h -= Math.max(0, Math.ceil(.1 * h)), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }

                                        function i(e, t, i) {
                                            const s = e >> 24 & 255,
                                                r = e >> 16 & 255,
                                                n = e >> 8 & 255;
                                            let o = t >> 24 & 255,
                                                a = t >> 16 & 255,
                                                h = t >> 8 & 255,
                                                l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            for (; l < i && (o < 255 || a < 255 || h < 255);) o = Math.min(255, o + Math.ceil(.1 * (255 - o))), a = Math.min(255, a + Math.ceil(.1 * (255 - a))), h = Math.min(255, h + Math.ceil(.1 * (255 - h))), l = f(d.relativeLuminance2(o, a, h), d.relativeLuminance2(s, r, n));
                                            return (o << 24 | a << 16 | h << 8 | 255) >>> 0
                                        }
                                        e.blend = function(e, t) {
                                            if (a = (255 & t) / 255, 1 === a) return t;
                                            const i = t >> 24 & 255,
                                                s = t >> 16 & 255,
                                                l = t >> 8 & 255,
                                                c = e >> 24 & 255,
                                                d = e >> 16 & 255,
                                                _ = e >> 8 & 255;
                                            return r = c + Math.round((i - c) * a), n = d + Math.round((s - d) * a), o = _ + Math.round((l - _) * a), h.toRgba(r, n, o)
                                        }, e.ensureContrastRatio = function(e, s, r) {
                                            const n = d.relativeLuminance(e >> 8),
                                                o = d.relativeLuminance(s >> 8);
                                            if (f(n, o) < r) {
                                                if (o < n) {
                                                    const o = t(e, s, r),
                                                        a = f(n, d.relativeLuminance(o >> 8));
                                                    if (a < r) {
                                                        const t = i(e, s, r);
                                                        return a > f(n, d.relativeLuminance(t >> 8)) ? o : t
                                                    }
                                                    return o
                                                }
                                                const a = i(e, s, r),
                                                    h = f(n, d.relativeLuminance(a >> 8));
                                                if (h < r) {
                                                    const i = t(e, s, r);
                                                    return h > f(n, d.relativeLuminance(i >> 8)) ? a : i
                                                }
                                                return a
                                            }
                                        }, e.reduceLuminance = t, e.increaseLuminance = i, e.toChannels = function(e) {
                                            return [e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e]
                                        }
                                    }(_ || (t.rgba = _ = {})), t.toPaddedHex = u, t.contrastRatio = f
                            },
                            8969: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CoreTerminal = void 0;
                                const s = i(844),
                                    r = i(2585),
                                    n = i(4348),
                                    o = i(7866),
                                    a = i(744),
                                    h = i(7302),
                                    l = i(6975),
                                    c = i(8460),
                                    d = i(1753),
                                    _ = i(1480),
                                    u = i(7994),
                                    f = i(9282),
                                    g = i(5435),
                                    p = i(5981),
                                    v = i(2660);
                                let m = !1;
                                class A extends s.Disposable {
                                    get onScroll() {
                                        return this._onScrollApi || (this._onScrollApi = this.register(new c.EventEmitter), this._onScroll.event((e => {
                                            this._onScrollApi?.fire(e.position)
                                        }))), this._onScrollApi.event
                                    }
                                    get cols() {
                                        return this._bufferService.cols
                                    }
                                    get rows() {
                                        return this._bufferService.rows
                                    }
                                    get buffers() {
                                        return this._bufferService.buffers
                                    }
                                    get options() {
                                        return this.optionsService.options
                                    }
                                    set options(e) {
                                        for (const t in e) this.optionsService.options[t] = e[t]
                                    }
                                    constructor(e) {
                                        super(), this._windowsWrappingHeuristics = this.register(new s.MutableDisposable), this._onBinary = this.register(new c.EventEmitter), this.onBinary = this._onBinary.event, this._onData = this.register(new c.EventEmitter), this.onData = this._onData.event, this._onLineFeed = this.register(new c.EventEmitter), this.onLineFeed = this._onLineFeed.event, this._onResize = this.register(new c.EventEmitter), this.onResize = this._onResize.event, this._onWriteParsed = this.register(new c.EventEmitter), this.onWriteParsed = this._onWriteParsed.event, this._onScroll = this.register(new c.EventEmitter), this._instantiationService = new n.InstantiationService, this.optionsService = this.register(new h.OptionsService(e)), this._instantiationService.setService(r.IOptionsService, this.optionsService), this._bufferService = this.register(this._instantiationService.createInstance(a.BufferService)), this._instantiationService.setService(r.IBufferService, this._bufferService), this._logService = this.register(this._instantiationService.createInstance(o.LogService)), this._instantiationService.setService(r.ILogService, this._logService), this.coreService = this.register(this._instantiationService.createInstance(l.CoreService)), this._instantiationService.setService(r.ICoreService, this.coreService), this.coreMouseService = this.register(this._instantiationService.createInstance(d.CoreMouseService)), this._instantiationService.setService(r.ICoreMouseService, this.coreMouseService), this.unicodeService = this.register(this._instantiationService.createInstance(_.UnicodeService)), this._instantiationService.setService(r.IUnicodeService, this.unicodeService), this._charsetService = this._instantiationService.createInstance(u.CharsetService), this._instantiationService.setService(r.ICharsetService, this._charsetService), this._oscLinkService = this._instantiationService.createInstance(v.OscLinkService), this._instantiationService.setService(r.IOscLinkService, this._oscLinkService), this._inputHandler = this.register(new g.InputHandler(this._bufferService, this._charsetService, this.coreService, this._logService, this.optionsService, this._oscLinkService, this.coreMouseService, this.unicodeService)), this.register((0, c.forwardEvent)(this._inputHandler.onLineFeed, this._onLineFeed)), this.register(this._inputHandler), this.register((0, c.forwardEvent)(this._bufferService.onResize, this._onResize)), this.register((0, c.forwardEvent)(this.coreService.onData, this._onData)), this.register((0, c.forwardEvent)(this.coreService.onBinary, this._onBinary)), this.register(this.coreService.onRequestScrollToBottom((() => this.scrollToBottom()))), this.register(this.coreService.onUserInput((() => this._writeBuffer.handleUserInput()))), this.register(this.optionsService.onMultipleOptionChange(["windowsMode", "windowsPty"], (() => this._handleWindowsPtyOptionChange()))), this.register(this._bufferService.onScroll((e => {
                                            this._onScroll.fire({
                                                position: this._bufferService.buffer.ydisp,
                                                source: 0
                                            }), this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom)
                                        }))), this.register(this._inputHandler.onScroll((e => {
                                            this._onScroll.fire({
                                                position: this._bufferService.buffer.ydisp,
                                                source: 0
                                            }), this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom)
                                        }))), this._writeBuffer = this.register(new p.WriteBuffer(((e, t) => this._inputHandler.parse(e, t)))), this.register((0, c.forwardEvent)(this._writeBuffer.onWriteParsed, this._onWriteParsed))
                                    }
                                    write(e, t) {
                                        this._writeBuffer.write(e, t)
                                    }
                                    writeSync(e, t) {
                                        this._logService.logLevel <= r.LogLevelEnum.WARN && !m && (this._logService.warn("writeSync is unreliable and will be removed soon."), m = !0), this._writeBuffer.writeSync(e, t)
                                    }
                                    input(e, t = !0) {
                                        this.coreService.triggerDataEvent(e, t)
                                    }
                                    resize(e, t) {
                                        isNaN(e) || isNaN(t) || (e = Math.max(e, a.MINIMUM_COLS), t = Math.max(t, a.MINIMUM_ROWS), this._bufferService.resize(e, t))
                                    }
                                    scroll(e, t = !1) {
                                        this._bufferService.scroll(e, t)
                                    }
                                    scrollLines(e, t, i) {
                                        this._bufferService.scrollLines(e, t, i)
                                    }
                                    scrollPages(e) {
                                        this.scrollLines(e * (this.rows - 1))
                                    }
                                    scrollToTop() {
                                        this.scrollLines(-this._bufferService.buffer.ydisp)
                                    }
                                    scrollToBottom() {
                                        this.scrollLines(this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp)
                                    }
                                    scrollToLine(e) {
                                        const t = e - this._bufferService.buffer.ydisp;
                                        0 !== t && this.scrollLines(t)
                                    }
                                    registerEscHandler(e, t) {
                                        return this._inputHandler.registerEscHandler(e, t)
                                    }
                                    registerDcsHandler(e, t) {
                                        return this._inputHandler.registerDcsHandler(e, t)
                                    }
                                    registerCsiHandler(e, t) {
                                        return this._inputHandler.registerCsiHandler(e, t)
                                    }
                                    registerOscHandler(e, t) {
                                        return this._inputHandler.registerOscHandler(e, t)
                                    }
                                    _setup() {
                                        this._handleWindowsPtyOptionChange()
                                    }
                                    reset() {
                                        this._inputHandler.reset(), this._bufferService.reset(), this._charsetService.reset(), this.coreService.reset(), this.coreMouseService.reset()
                                    }
                                    _handleWindowsPtyOptionChange() {
                                        let e = !1;
                                        const t = this.optionsService.rawOptions.windowsPty;
                                        t && void 0 !== t.buildNumber && void 0 !== t.buildNumber ? e = !!("conpty" === t.backend && t.buildNumber < 21376) : this.optionsService.rawOptions.windowsMode && (e = !0), e ? this._enableWindowsWrappingHeuristics() : this._windowsWrappingHeuristics.clear()
                                    }
                                    _enableWindowsWrappingHeuristics() {
                                        if (!this._windowsWrappingHeuristics.value) {
                                            const e = [];
                                            e.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null, this._bufferService))), e.push(this.registerCsiHandler({
                                                final: "H"
                                            }, (() => ((0, f.updateWindowsModeWrappedState)(this._bufferService), !1)))), this._windowsWrappingHeuristics.value = (0, s.toDisposable)((() => {
                                                for (const t of e) t.dispose()
                                            }))
                                        }
                                    }
                                }
                                t.CoreTerminal = A
                            },
                            8460: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.runAndSubscribe = t.forwardEvent = t.EventEmitter = void 0, t.EventEmitter = class {
                                    constructor() {
                                        this._listeners = [], this._disposed = !1
                                    }
                                    get event() {
                                        return this._event || (this._event = e => (this._listeners.push(e), {
                                            dispose: () => {
                                                if (!this._disposed)
                                                    for (let t = 0; t < this._listeners.length; t++)
                                                        if (this._listeners[t] === e) return void this._listeners.splice(t, 1)
                                            }
                                        })), this._event
                                    }
                                    fire(e, t) {
                                        const i = [];
                                        for (let e = 0; e < this._listeners.length; e++) i.push(this._listeners[e]);
                                        for (let s = 0; s < i.length; s++) i[s].call(void 0, e, t)
                                    }
                                    dispose() {
                                        this.clearListeners(), this._disposed = !0
                                    }
                                    clearListeners() {
                                        this._listeners && (this._listeners.length = 0)
                                    }
                                }, t.forwardEvent = function(e, t) {
                                    return e((e => t.fire(e)))
                                }, t.runAndSubscribe = function(e, t) {
                                    return t(void 0), e((e => t(e)))
                                }
                            },
                            5435: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.InputHandler = t.WindowsOptionsReportType = void 0;
                                const n = i(2584),
                                    o = i(7116),
                                    a = i(2015),
                                    h = i(844),
                                    l = i(482),
                                    c = i(8437),
                                    d = i(8460),
                                    _ = i(643),
                                    u = i(511),
                                    f = i(3734),
                                    g = i(2585),
                                    p = i(1480),
                                    v = i(6242),
                                    m = i(6351),
                                    A = i(5941),
                                    C = {
                                        "(": 0,
                                        ")": 1,
                                        "*": 2,
                                        "+": 3,
                                        "-": 1,
                                        ".": 2
                                    },
                                    w = 131072;

                                function b(e, t) {
                                    if (e > 24) return t.setWinLines || !1;
                                    switch (e) {
                                        case 1:
                                            return !!t.restoreWin;
                                        case 2:
                                            return !!t.minimizeWin;
                                        case 3:
                                            return !!t.setWinPosition;
                                        case 4:
                                            return !!t.setWinSizePixels;
                                        case 5:
                                            return !!t.raiseWin;
                                        case 6:
                                            return !!t.lowerWin;
                                        case 7:
                                            return !!t.refreshWin;
                                        case 8:
                                            return !!t.setWinSizeChars;
                                        case 9:
                                            return !!t.maximizeWin;
                                        case 10:
                                            return !!t.fullscreenWin;
                                        case 11:
                                            return !!t.getWinState;
                                        case 13:
                                            return !!t.getWinPosition;
                                        case 14:
                                            return !!t.getWinSizePixels;
                                        case 15:
                                            return !!t.getScreenSizePixels;
                                        case 16:
                                            return !!t.getCellSizePixels;
                                        case 18:
                                            return !!t.getWinSizeChars;
                                        case 19:
                                            return !!t.getScreenSizeChars;
                                        case 20:
                                            return !!t.getIconTitle;
                                        case 21:
                                            return !!t.getWinTitle;
                                        case 22:
                                            return !!t.pushTitle;
                                        case 23:
                                            return !!t.popTitle;
                                        case 24:
                                            return !!t.setWinLines
                                    }
                                    return !1
                                }
                                var y;
                                ! function(e) {
                                    e[e.GET_WIN_SIZE_PIXELS = 0] = "GET_WIN_SIZE_PIXELS", e[e.GET_CELL_SIZE_PIXELS = 1] = "GET_CELL_SIZE_PIXELS"
                                }(y || (t.WindowsOptionsReportType = y = {}));
                                let S = 0;
                                class E extends h.Disposable {
                                    getAttrData() {
                                        return this._curAttrData
                                    }
                                    constructor(e, t, i, s, r, h, _, f, g = new a.EscapeSequenceParser) {
                                        super(), this._bufferService = e, this._charsetService = t, this._coreService = i, this._logService = s, this._optionsService = r, this._oscLinkService = h, this._coreMouseService = _, this._unicodeService = f, this._parser = g, this._parseBuffer = new Uint32Array(4096), this._stringDecoder = new l.StringToUtf32, this._utf8Decoder = new l.Utf8ToUtf32, this._workCell = new u.CellData, this._windowTitle = "", this._iconName = "", this._windowTitleStack = [], this._iconNameStack = [], this._curAttrData = c.DEFAULT_ATTR_DATA.clone(), this._eraseAttrDataInternal = c.DEFAULT_ATTR_DATA.clone(), this._onRequestBell = this.register(new d.EventEmitter), this.onRequestBell = this._onRequestBell.event, this._onRequestRefreshRows = this.register(new d.EventEmitter), this.onRequestRefreshRows = this._onRequestRefreshRows.event, this._onRequestReset = this.register(new d.EventEmitter), this.onRequestReset = this._onRequestReset.event, this._onRequestSendFocus = this.register(new d.EventEmitter), this.onRequestSendFocus = this._onRequestSendFocus.event, this._onRequestSyncScrollBar = this.register(new d.EventEmitter), this.onRequestSyncScrollBar = this._onRequestSyncScrollBar.event, this._onRequestWindowsOptionsReport = this.register(new d.EventEmitter), this.onRequestWindowsOptionsReport = this._onRequestWindowsOptionsReport.event, this._onA11yChar = this.register(new d.EventEmitter), this.onA11yChar = this._onA11yChar.event, this._onA11yTab = this.register(new d.EventEmitter), this.onA11yTab = this._onA11yTab.event, this._onCursorMove = this.register(new d.EventEmitter), this.onCursorMove = this._onCursorMove.event, this._onLineFeed = this.register(new d.EventEmitter), this.onLineFeed = this._onLineFeed.event, this._onScroll = this.register(new d.EventEmitter), this.onScroll = this._onScroll.event, this._onTitleChange = this.register(new d.EventEmitter), this.onTitleChange = this._onTitleChange.event, this._onColor = this.register(new d.EventEmitter), this.onColor = this._onColor.event, this._parseStack = {
                                            paused: !1,
                                            cursorStartX: 0,
                                            cursorStartY: 0,
                                            decodedLength: 0,
                                            position: 0
                                        }, this._specialColors = [256, 257, 258], this.register(this._parser), this._dirtyRowTracker = new x(this._bufferService), this._activeBuffer = this._bufferService.buffer, this.register(this._bufferService.buffers.onBufferActivate((e => this._activeBuffer = e.activeBuffer))), this._parser.setCsiHandlerFallback(((e, t) => {
                                            this._logService.debug("Unknown CSI code: ", {
                                                identifier: this._parser.identToString(e),
                                                params: t.toArray()
                                            })
                                        })), this._parser.setEscHandlerFallback((e => {
                                            this._logService.debug("Unknown ESC code: ", {
                                                identifier: this._parser.identToString(e)
                                            })
                                        })), this._parser.setExecuteHandlerFallback((e => {
                                            this._logService.debug("Unknown EXECUTE code: ", {
                                                code: e
                                            })
                                        })), this._parser.setOscHandlerFallback(((e, t, i) => {
                                            this._logService.debug("Unknown OSC code: ", {
                                                identifier: e,
                                                action: t,
                                                data: i
                                            })
                                        })), this._parser.setDcsHandlerFallback(((e, t, i) => {
                                            "HOOK" === t && (i = i.toArray()), this._logService.debug("Unknown DCS code: ", {
                                                identifier: this._parser.identToString(e),
                                                action: t,
                                                payload: i
                                            })
                                        })), this._parser.setPrintHandler(((e, t, i) => this.print(e, t, i))), this._parser.registerCsiHandler({
                                            final: "@"
                                        }, (e => this.insertChars(e))), this._parser.registerCsiHandler({
                                            intermediates: " ",
                                            final: "@"
                                        }, (e => this.scrollLeft(e))), this._parser.registerCsiHandler({
                                            final: "A"
                                        }, (e => this.cursorUp(e))), this._parser.registerCsiHandler({
                                            intermediates: " ",
                                            final: "A"
                                        }, (e => this.scrollRight(e))), this._parser.registerCsiHandler({
                                            final: "B"
                                        }, (e => this.cursorDown(e))), this._parser.registerCsiHandler({
                                            final: "C"
                                        }, (e => this.cursorForward(e))), this._parser.registerCsiHandler({
                                            final: "D"
                                        }, (e => this.cursorBackward(e))), this._parser.registerCsiHandler({
                                            final: "E"
                                        }, (e => this.cursorNextLine(e))), this._parser.registerCsiHandler({
                                            final: "F"
                                        }, (e => this.cursorPrecedingLine(e))), this._parser.registerCsiHandler({
                                            final: "G"
                                        }, (e => this.cursorCharAbsolute(e))), this._parser.registerCsiHandler({
                                            final: "H"
                                        }, (e => this.cursorPosition(e))), this._parser.registerCsiHandler({
                                            final: "I"
                                        }, (e => this.cursorForwardTab(e))), this._parser.registerCsiHandler({
                                            final: "J"
                                        }, (e => this.eraseInDisplay(e, !1))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            final: "J"
                                        }, (e => this.eraseInDisplay(e, !0))), this._parser.registerCsiHandler({
                                            final: "K"
                                        }, (e => this.eraseInLine(e, !1))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            final: "K"
                                        }, (e => this.eraseInLine(e, !0))), this._parser.registerCsiHandler({
                                            final: "L"
                                        }, (e => this.insertLines(e))), this._parser.registerCsiHandler({
                                            final: "M"
                                        }, (e => this.deleteLines(e))), this._parser.registerCsiHandler({
                                            final: "P"
                                        }, (e => this.deleteChars(e))), this._parser.registerCsiHandler({
                                            final: "S"
                                        }, (e => this.scrollUp(e))), this._parser.registerCsiHandler({
                                            final: "T"
                                        }, (e => this.scrollDown(e))), this._parser.registerCsiHandler({
                                            final: "X"
                                        }, (e => this.eraseChars(e))), this._parser.registerCsiHandler({
                                            final: "Z"
                                        }, (e => this.cursorBackwardTab(e))), this._parser.registerCsiHandler({
                                            final: "`"
                                        }, (e => this.charPosAbsolute(e))), this._parser.registerCsiHandler({
                                            final: "a"
                                        }, (e => this.hPositionRelative(e))), this._parser.registerCsiHandler({
                                            final: "b"
                                        }, (e => this.repeatPrecedingCharacter(e))), this._parser.registerCsiHandler({
                                            final: "c"
                                        }, (e => this.sendDeviceAttributesPrimary(e))), this._parser.registerCsiHandler({
                                            prefix: ">",
                                            final: "c"
                                        }, (e => this.sendDeviceAttributesSecondary(e))), this._parser.registerCsiHandler({
                                            final: "d"
                                        }, (e => this.linePosAbsolute(e))), this._parser.registerCsiHandler({
                                            final: "e"
                                        }, (e => this.vPositionRelative(e))), this._parser.registerCsiHandler({
                                            final: "f"
                                        }, (e => this.hVPosition(e))), this._parser.registerCsiHandler({
                                            final: "g"
                                        }, (e => this.tabClear(e))), this._parser.registerCsiHandler({
                                            final: "h"
                                        }, (e => this.setMode(e))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            final: "h"
                                        }, (e => this.setModePrivate(e))), this._parser.registerCsiHandler({
                                            final: "l"
                                        }, (e => this.resetMode(e))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            final: "l"
                                        }, (e => this.resetModePrivate(e))), this._parser.registerCsiHandler({
                                            final: "m"
                                        }, (e => this.charAttributes(e))), this._parser.registerCsiHandler({
                                            final: "n"
                                        }, (e => this.deviceStatus(e))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            final: "n"
                                        }, (e => this.deviceStatusPrivate(e))), this._parser.registerCsiHandler({
                                            intermediates: "!",
                                            final: "p"
                                        }, (e => this.softReset(e))), this._parser.registerCsiHandler({
                                            intermediates: " ",
                                            final: "q"
                                        }, (e => this.setCursorStyle(e))), this._parser.registerCsiHandler({
                                            final: "r"
                                        }, (e => this.setScrollRegion(e))), this._parser.registerCsiHandler({
                                            final: "s"
                                        }, (e => this.saveCursor(e))), this._parser.registerCsiHandler({
                                            final: "t"
                                        }, (e => this.windowOptions(e))), this._parser.registerCsiHandler({
                                            final: "u"
                                        }, (e => this.restoreCursor(e))), this._parser.registerCsiHandler({
                                            intermediates: "'",
                                            final: "}"
                                        }, (e => this.insertColumns(e))), this._parser.registerCsiHandler({
                                            intermediates: "'",
                                            final: "~"
                                        }, (e => this.deleteColumns(e))), this._parser.registerCsiHandler({
                                            intermediates: '"',
                                            final: "q"
                                        }, (e => this.selectProtected(e))), this._parser.registerCsiHandler({
                                            intermediates: "$",
                                            final: "p"
                                        }, (e => this.requestMode(e, !0))), this._parser.registerCsiHandler({
                                            prefix: "?",
                                            intermediates: "$",
                                            final: "p"
                                        }, (e => this.requestMode(e, !1))), this._parser.setExecuteHandler(n.C0.BEL, (() => this.bell())), this._parser.setExecuteHandler(n.C0.LF, (() => this.lineFeed())), this._parser.setExecuteHandler(n.C0.VT, (() => this.lineFeed())), this._parser.setExecuteHandler(n.C0.FF, (() => this.lineFeed())), this._parser.setExecuteHandler(n.C0.CR, (() => this.carriageReturn())), this._parser.setExecuteHandler(n.C0.BS, (() => this.backspace())), this._parser.setExecuteHandler(n.C0.HT, (() => this.tab())), this._parser.setExecuteHandler(n.C0.SO, (() => this.shiftOut())), this._parser.setExecuteHandler(n.C0.SI, (() => this.shiftIn())), this._parser.setExecuteHandler(n.C1.IND, (() => this.index())), this._parser.setExecuteHandler(n.C1.NEL, (() => this.nextLine())), this._parser.setExecuteHandler(n.C1.HTS, (() => this.tabSet())), this._parser.registerOscHandler(0, new v.OscHandler((e => (this.setTitle(e), this.setIconName(e), !0)))), this._parser.registerOscHandler(1, new v.OscHandler((e => this.setIconName(e)))), this._parser.registerOscHandler(2, new v.OscHandler((e => this.setTitle(e)))), this._parser.registerOscHandler(4, new v.OscHandler((e => this.setOrReportIndexedColor(e)))), this._parser.registerOscHandler(8, new v.OscHandler((e => this.setHyperlink(e)))), this._parser.registerOscHandler(10, new v.OscHandler((e => this.setOrReportFgColor(e)))), this._parser.registerOscHandler(11, new v.OscHandler((e => this.setOrReportBgColor(e)))), this._parser.registerOscHandler(12, new v.OscHandler((e => this.setOrReportCursorColor(e)))), this._parser.registerOscHandler(104, new v.OscHandler((e => this.restoreIndexedColor(e)))), this._parser.registerOscHandler(110, new v.OscHandler((e => this.restoreFgColor(e)))), this._parser.registerOscHandler(111, new v.OscHandler((e => this.restoreBgColor(e)))), this._parser.registerOscHandler(112, new v.OscHandler((e => this.restoreCursorColor(e)))), this._parser.registerEscHandler({
                                            final: "7"
                                        }, (() => this.saveCursor())), this._parser.registerEscHandler({
                                            final: "8"
                                        }, (() => this.restoreCursor())), this._parser.registerEscHandler({
                                            final: "D"
                                        }, (() => this.index())), this._parser.registerEscHandler({
                                            final: "E"
                                        }, (() => this.nextLine())), this._parser.registerEscHandler({
                                            final: "H"
                                        }, (() => this.tabSet())), this._parser.registerEscHandler({
                                            final: "M"
                                        }, (() => this.reverseIndex())), this._parser.registerEscHandler({
                                            final: "="
                                        }, (() => this.keypadApplicationMode())), this._parser.registerEscHandler({
                                            final: ">"
                                        }, (() => this.keypadNumericMode())), this._parser.registerEscHandler({
                                            final: "c"
                                        }, (() => this.fullReset())), this._parser.registerEscHandler({
                                            final: "n"
                                        }, (() => this.setgLevel(2))), this._parser.registerEscHandler({
                                            final: "o"
                                        }, (() => this.setgLevel(3))), this._parser.registerEscHandler({
                                            final: "|"
                                        }, (() => this.setgLevel(3))), this._parser.registerEscHandler({
                                            final: "}"
                                        }, (() => this.setgLevel(2))), this._parser.registerEscHandler({
                                            final: "~"
                                        }, (() => this.setgLevel(1))), this._parser.registerEscHandler({
                                            intermediates: "%",
                                            final: "@"
                                        }, (() => this.selectDefaultCharset())), this._parser.registerEscHandler({
                                            intermediates: "%",
                                            final: "G"
                                        }, (() => this.selectDefaultCharset()));
                                        for (const e in o.CHARSETS) this._parser.registerEscHandler({
                                            intermediates: "(",
                                            final: e
                                        }, (() => this.selectCharset("(" + e))), this._parser.registerEscHandler({
                                            intermediates: ")",
                                            final: e
                                        }, (() => this.selectCharset(")" + e))), this._parser.registerEscHandler({
                                            intermediates: "*",
                                            final: e
                                        }, (() => this.selectCharset("*" + e))), this._parser.registerEscHandler({
                                            intermediates: "+",
                                            final: e
                                        }, (() => this.selectCharset("+" + e))), this._parser.registerEscHandler({
                                            intermediates: "-",
                                            final: e
                                        }, (() => this.selectCharset("-" + e))), this._parser.registerEscHandler({
                                            intermediates: ".",
                                            final: e
                                        }, (() => this.selectCharset("." + e))), this._parser.registerEscHandler({
                                            intermediates: "/",
                                            final: e
                                        }, (() => this.selectCharset("/" + e)));
                                        this._parser.registerEscHandler({
                                            intermediates: "#",
                                            final: "8"
                                        }, (() => this.screenAlignmentPattern())), this._parser.setErrorHandler((e => (this._logService.error("Parsing error: ", e), e))), this._parser.registerDcsHandler({
                                            intermediates: "$",
                                            final: "q"
                                        }, new m.DcsHandler(((e, t) => this.requestStatusString(e, t))))
                                    }
                                    _preserveStack(e, t, i, s) {
                                        this._parseStack.paused = !0, this._parseStack.cursorStartX = e, this._parseStack.cursorStartY = t, this._parseStack.decodedLength = i, this._parseStack.position = s
                                    }
                                    _logSlowResolvingAsync(e) {
                                        this._logService.logLevel <= g.LogLevelEnum.WARN && Promise.race([e, new Promise(((e, t) => setTimeout((() => t("#SLOW_TIMEOUT")), 5e3)))]).catch((e => {
                                            if ("#SLOW_TIMEOUT" !== e) throw e;
                                            console.warn("async parser handler taking longer than 5000 ms")
                                        }))
                                    }
                                    _getCurrentLinkId() {
                                        return this._curAttrData.extended.urlId
                                    }
                                    parse(e, t) {
                                        let i, s = this._activeBuffer.x,
                                            r = this._activeBuffer.y,
                                            n = 0;
                                        const o = this._parseStack.paused;
                                        if (o) {
                                            if (i = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, t)) return this._logSlowResolvingAsync(i), i;
                                            s = this._parseStack.cursorStartX, r = this._parseStack.cursorStartY, this._parseStack.paused = !1, e.length > w && (n = this._parseStack.position + w)
                                        }
                                        if (this._logService.logLevel <= g.LogLevelEnum.DEBUG && this._logService.debug("parsing data" + ("string" == typeof e ? ` "${e}"` : ` "${Array.prototype.map.call(e, (e => String.fromCharCode(e))).join("")}"`), "string" == typeof e ? e.split("").map((e => e.charCodeAt(0))) : e), this._parseBuffer.length < e.length && this._parseBuffer.length < w && (this._parseBuffer = new Uint32Array(Math.min(e.length, w))), o || this._dirtyRowTracker.clearRange(), e.length > w)
                                            for (let t = n; t < e.length; t += w) {
                                                const n = t + w < e.length ? t + w : e.length,
                                                    o = "string" == typeof e ? this._stringDecoder.decode(e.substring(t, n), this._parseBuffer) : this._utf8Decoder.decode(e.subarray(t, n), this._parseBuffer);
                                                if (i = this._parser.parse(this._parseBuffer, o)) return this._preserveStack(s, r, o, t), this._logSlowResolvingAsync(i), i
                                            } else if (!o) {
                                                const t = "string" == typeof e ? this._stringDecoder.decode(e, this._parseBuffer) : this._utf8Decoder.decode(e, this._parseBuffer);
                                                if (i = this._parser.parse(this._parseBuffer, t)) return this._preserveStack(s, r, t, 0), this._logSlowResolvingAsync(i), i
                                            } this._activeBuffer.x === s && this._activeBuffer.y === r || this._onCursorMove.fire();
                                        const a = this._dirtyRowTracker.end + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp),
                                            h = this._dirtyRowTracker.start + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
                                        h < this._bufferService.rows && this._onRequestRefreshRows.fire(Math.min(h, this._bufferService.rows - 1), Math.min(a, this._bufferService.rows - 1))
                                    }
                                    print(e, t, i) {
                                        let s, r;
                                        const n = this._charsetService.charset,
                                            o = this._optionsService.rawOptions.screenReaderMode,
                                            a = this._bufferService.cols,
                                            h = this._coreService.decPrivateModes.wraparound,
                                            d = this._coreService.modes.insertMode,
                                            u = this._curAttrData;
                                        let f = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
                                        this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._activeBuffer.x && i - t > 0 && 2 === f.getWidth(this._activeBuffer.x - 1) && f.setCellFromCodepoint(this._activeBuffer.x - 1, 0, 1, u);
                                        let g = this._parser.precedingJoinState;
                                        for (let v = t; v < i; ++v) {
                                            if (s = e[v], s < 127 && n) {
                                                const e = n[String.fromCharCode(s)];
                                                e && (s = e.charCodeAt(0))
                                            }
                                            const t = this._unicodeService.charProperties(s, g);
                                            r = p.UnicodeService.extractWidth(t);
                                            const i = p.UnicodeService.extractShouldJoin(t),
                                                m = i ? p.UnicodeService.extractWidth(g) : 0;
                                            if (g = t, o && this._onA11yChar.fire((0, l.stringFromCodePoint)(s)), this._getCurrentLinkId() && this._oscLinkService.addLineToLink(this._getCurrentLinkId(), this._activeBuffer.ybase + this._activeBuffer.y), this._activeBuffer.x + r - m > a)
                                                if (h) {
                                                    const e = f;
                                                    let t = this._activeBuffer.x - m;
                                                    for (this._activeBuffer.x = m, this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData(), !0)) : (this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = !0), f = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y), m > 0 && f instanceof c.BufferLine && f.copyCellsFrom(e, t, 0, m, !1); t < a;) e.setCellFromCodepoint(t++, 0, 1, u)
                                                } else if (this._activeBuffer.x = a - 1, 2 === r) continue;
                                            if (i && this._activeBuffer.x) {
                                                const e = f.getWidth(this._activeBuffer.x - 1) ? 1 : 2;
                                                f.addCodepointToCell(this._activeBuffer.x - e, s, r);
                                                for (let e = r - m; --e >= 0;) f.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, u)
                                            } else if (d && (f.insertCells(this._activeBuffer.x, r - m, this._activeBuffer.getNullCell(u)), 2 === f.getWidth(a - 1) && f.setCellFromCodepoint(a - 1, _.NULL_CELL_CODE, _.NULL_CELL_WIDTH, u)), f.setCellFromCodepoint(this._activeBuffer.x++, s, r, u), r > 0)
                                                for (; --r;) f.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, u)
                                        }
                                        this._parser.precedingJoinState = g, this._activeBuffer.x < a && i - t > 0 && 0 === f.getWidth(this._activeBuffer.x) && !f.hasContent(this._activeBuffer.x) && f.setCellFromCodepoint(this._activeBuffer.x, 0, 1, u), this._dirtyRowTracker.markDirty(this._activeBuffer.y)
                                    }
                                    registerCsiHandler(e, t) {
                                        return "t" !== e.final || e.prefix || e.intermediates ? this._parser.registerCsiHandler(e, t) : this._parser.registerCsiHandler(e, (e => !b(e.params[0], this._optionsService.rawOptions.windowOptions) || t(e)))
                                    }
                                    registerDcsHandler(e, t) {
                                        return this._parser.registerDcsHandler(e, new m.DcsHandler(t))
                                    }
                                    registerEscHandler(e, t) {
                                        return this._parser.registerEscHandler(e, t)
                                    }
                                    registerOscHandler(e, t) {
                                        return this._parser.registerOscHandler(e, new v.OscHandler(t))
                                    }
                                    bell() {
                                        return this._onRequestBell.fire(), !0
                                    }
                                    lineFeed() {
                                        return this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._optionsService.rawOptions.convertEol && (this._activeBuffer.x = 0), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows ? this._activeBuffer.y = this._bufferService.rows - 1 : this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = !1, this._activeBuffer.x >= this._bufferService.cols && this._activeBuffer.x--, this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._onLineFeed.fire(), !0
                                    }
                                    carriageReturn() {
                                        return this._activeBuffer.x = 0, !0
                                    }
                                    backspace() {
                                        if (!this._coreService.decPrivateModes.reverseWraparound) return this._restrictCursor(), this._activeBuffer.x > 0 && this._activeBuffer.x--, !0;
                                        if (this._restrictCursor(this._bufferService.cols), this._activeBuffer.x > 0) this._activeBuffer.x--;
                                        else if (0 === this._activeBuffer.x && this._activeBuffer.y > this._activeBuffer.scrollTop && this._activeBuffer.y <= this._activeBuffer.scrollBottom && this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)?.isWrapped) {
                                            this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = !1, this._activeBuffer.y--, this._activeBuffer.x = this._bufferService.cols - 1;
                                            const e = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
                                            e.hasWidth(this._activeBuffer.x) && !e.hasContent(this._activeBuffer.x) && this._activeBuffer.x--
                                        }
                                        return this._restrictCursor(), !0
                                    }
                                    tab() {
                                        if (this._activeBuffer.x >= this._bufferService.cols) return !0;
                                        const e = this._activeBuffer.x;
                                        return this._activeBuffer.x = this._activeBuffer.nextStop(), this._optionsService.rawOptions.screenReaderMode && this._onA11yTab.fire(this._activeBuffer.x - e), !0
                                    }
                                    shiftOut() {
                                        return this._charsetService.setgLevel(1), !0
                                    }
                                    shiftIn() {
                                        return this._charsetService.setgLevel(0), !0
                                    }
                                    _restrictCursor(e = this._bufferService.cols - 1) {
                                        this._activeBuffer.x = Math.min(e, Math.max(0, this._activeBuffer.x)), this._activeBuffer.y = this._coreService.decPrivateModes.origin ? Math.min(this._activeBuffer.scrollBottom, Math.max(this._activeBuffer.scrollTop, this._activeBuffer.y)) : Math.min(this._bufferService.rows - 1, Math.max(0, this._activeBuffer.y)), this._dirtyRowTracker.markDirty(this._activeBuffer.y)
                                    }
                                    _setCursor(e, t) {
                                        this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._coreService.decPrivateModes.origin ? (this._activeBuffer.x = e, this._activeBuffer.y = this._activeBuffer.scrollTop + t) : (this._activeBuffer.x = e, this._activeBuffer.y = t), this._restrictCursor(), this._dirtyRowTracker.markDirty(this._activeBuffer.y)
                                    }
                                    _moveCursor(e, t) {
                                        this._restrictCursor(), this._setCursor(this._activeBuffer.x + e, this._activeBuffer.y + t)
                                    }
                                    cursorUp(e) {
                                        const t = this._activeBuffer.y - this._activeBuffer.scrollTop;
                                        return t >= 0 ? this._moveCursor(0, -Math.min(t, e.params[0] || 1)) : this._moveCursor(0, -(e.params[0] || 1)), !0
                                    }
                                    cursorDown(e) {
                                        const t = this._activeBuffer.scrollBottom - this._activeBuffer.y;
                                        return t >= 0 ? this._moveCursor(0, Math.min(t, e.params[0] || 1)) : this._moveCursor(0, e.params[0] || 1), !0
                                    }
                                    cursorForward(e) {
                                        return this._moveCursor(e.params[0] || 1, 0), !0
                                    }
                                    cursorBackward(e) {
                                        return this._moveCursor(-(e.params[0] || 1), 0), !0
                                    }
                                    cursorNextLine(e) {
                                        return this.cursorDown(e), this._activeBuffer.x = 0, !0
                                    }
                                    cursorPrecedingLine(e) {
                                        return this.cursorUp(e), this._activeBuffer.x = 0, !0
                                    }
                                    cursorCharAbsolute(e) {
                                        return this._setCursor((e.params[0] || 1) - 1, this._activeBuffer.y), !0
                                    }
                                    cursorPosition(e) {
                                        return this._setCursor(e.length >= 2 ? (e.params[1] || 1) - 1 : 0, (e.params[0] || 1) - 1), !0
                                    }
                                    charPosAbsolute(e) {
                                        return this._setCursor((e.params[0] || 1) - 1, this._activeBuffer.y), !0
                                    }
                                    hPositionRelative(e) {
                                        return this._moveCursor(e.params[0] || 1, 0), !0
                                    }
                                    linePosAbsolute(e) {
                                        return this._setCursor(this._activeBuffer.x, (e.params[0] || 1) - 1), !0
                                    }
                                    vPositionRelative(e) {
                                        return this._moveCursor(0, e.params[0] || 1), !0
                                    }
                                    hVPosition(e) {
                                        return this.cursorPosition(e), !0
                                    }
                                    tabClear(e) {
                                        const t = e.params[0];
                                        return 0 === t ? delete this._activeBuffer.tabs[this._activeBuffer.x] : 3 === t && (this._activeBuffer.tabs = {}), !0
                                    }
                                    cursorForwardTab(e) {
                                        if (this._activeBuffer.x >= this._bufferService.cols) return !0;
                                        let t = e.params[0] || 1;
                                        for (; t--;) this._activeBuffer.x = this._activeBuffer.nextStop();
                                        return !0
                                    }
                                    cursorBackwardTab(e) {
                                        if (this._activeBuffer.x >= this._bufferService.cols) return !0;
                                        let t = e.params[0] || 1;
                                        for (; t--;) this._activeBuffer.x = this._activeBuffer.prevStop();
                                        return !0
                                    }
                                    selectProtected(e) {
                                        const t = e.params[0];
                                        return 1 === t && (this._curAttrData.bg |= 536870912), 2 !== t && 0 !== t || (this._curAttrData.bg &= -536870913), !0
                                    }
                                    _eraseInBufferLine(e, t, i, s = !1, r = !1) {
                                        const n = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                        n.replaceCells(t, i, this._activeBuffer.getNullCell(this._eraseAttrData()), r), s && (n.isWrapped = !1)
                                    }
                                    _resetBufferLine(e, t = !1) {
                                        const i = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                        i && (i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()), t), this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase + e), i.isWrapped = !1)
                                    }
                                    eraseInDisplay(e, t = !1) {
                                        let i;
                                        switch (this._restrictCursor(this._bufferService.cols), e.params[0]) {
                                            case 0:
                                                for (i = this._activeBuffer.y, this._dirtyRowTracker.markDirty(i), this._eraseInBufferLine(i++, this._activeBuffer.x, this._bufferService.cols, 0 === this._activeBuffer.x, t); i < this._bufferService.rows; i++) this._resetBufferLine(i, t);
                                                this._dirtyRowTracker.markDirty(i);
                                                break;
                                            case 1:
                                                for (i = this._activeBuffer.y, this._dirtyRowTracker.markDirty(i), this._eraseInBufferLine(i, 0, this._activeBuffer.x + 1, !0, t), this._activeBuffer.x + 1 >= this._bufferService.cols && (this._activeBuffer.lines.get(i + 1).isWrapped = !1); i--;) this._resetBufferLine(i, t);
                                                this._dirtyRowTracker.markDirty(0);
                                                break;
                                            case 2:
                                                for (i = this._bufferService.rows, this._dirtyRowTracker.markDirty(i - 1); i--;) this._resetBufferLine(i, t);
                                                this._dirtyRowTracker.markDirty(0);
                                                break;
                                            case 3:
                                                const e = this._activeBuffer.lines.length - this._bufferService.rows;
                                                e > 0 && (this._activeBuffer.lines.trimStart(e), this._activeBuffer.ybase = Math.max(this._activeBuffer.ybase - e, 0), this._activeBuffer.ydisp = Math.max(this._activeBuffer.ydisp - e, 0), this._onScroll.fire(0))
                                        }
                                        return !0
                                    }
                                    eraseInLine(e, t = !1) {
                                        switch (this._restrictCursor(this._bufferService.cols), e.params[0]) {
                                            case 0:
                                                this._eraseInBufferLine(this._activeBuffer.y, this._activeBuffer.x, this._bufferService.cols, 0 === this._activeBuffer.x, t);
                                                break;
                                            case 1:
                                                this._eraseInBufferLine(this._activeBuffer.y, 0, this._activeBuffer.x + 1, !1, t);
                                                break;
                                            case 2:
                                                this._eraseInBufferLine(this._activeBuffer.y, 0, this._bufferService.cols, !0, t)
                                        }
                                        return this._dirtyRowTracker.markDirty(this._activeBuffer.y), !0
                                    }
                                    insertLines(e) {
                                        this._restrictCursor();
                                        let t = e.params[0] || 1;
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const i = this._activeBuffer.ybase + this._activeBuffer.y,
                                            s = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom,
                                            r = this._bufferService.rows - 1 + this._activeBuffer.ybase - s + 1;
                                        for (; t--;) this._activeBuffer.lines.splice(r - 1, 1), this._activeBuffer.lines.splice(i, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, !0
                                    }
                                    deleteLines(e) {
                                        this._restrictCursor();
                                        let t = e.params[0] || 1;
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const i = this._activeBuffer.ybase + this._activeBuffer.y;
                                        let s;
                                        for (s = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom, s = this._bufferService.rows - 1 + this._activeBuffer.ybase - s; t--;) this._activeBuffer.lines.splice(i, 1), this._activeBuffer.lines.splice(s, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, !0
                                    }
                                    insertChars(e) {
                                        this._restrictCursor();
                                        const t = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
                                        return t && (t.insertCells(this._activeBuffer.x, e.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), !0
                                    }
                                    deleteChars(e) {
                                        this._restrictCursor();
                                        const t = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
                                        return t && (t.deleteCells(this._activeBuffer.x, e.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), !0
                                    }
                                    scrollUp(e) {
                                        let t = e.params[0] || 1;
                                        for (; t--;) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    scrollDown(e) {
                                        let t = e.params[0] || 1;
                                        for (; t--;) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 0, this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    scrollLeft(e) {
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const t = e.params[0] || 1;
                                        for (let e = this._activeBuffer.scrollTop; e <= this._activeBuffer.scrollBottom; ++e) {
                                            const i = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                            i.deleteCells(0, t, this._activeBuffer.getNullCell(this._eraseAttrData())), i.isWrapped = !1
                                        }
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    scrollRight(e) {
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const t = e.params[0] || 1;
                                        for (let e = this._activeBuffer.scrollTop; e <= this._activeBuffer.scrollBottom; ++e) {
                                            const i = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                            i.insertCells(0, t, this._activeBuffer.getNullCell(this._eraseAttrData())), i.isWrapped = !1
                                        }
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    insertColumns(e) {
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const t = e.params[0] || 1;
                                        for (let e = this._activeBuffer.scrollTop; e <= this._activeBuffer.scrollBottom; ++e) {
                                            const i = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                            i.insertCells(this._activeBuffer.x, t, this._activeBuffer.getNullCell(this._eraseAttrData())), i.isWrapped = !1
                                        }
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    deleteColumns(e) {
                                        if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return !0;
                                        const t = e.params[0] || 1;
                                        for (let e = this._activeBuffer.scrollTop; e <= this._activeBuffer.scrollBottom; ++e) {
                                            const i = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
                                            i.deleteCells(this._activeBuffer.x, t, this._activeBuffer.getNullCell(this._eraseAttrData())), i.isWrapped = !1
                                        }
                                        return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), !0
                                    }
                                    eraseChars(e) {
                                        this._restrictCursor();
                                        const t = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
                                        return t && (t.replaceCells(this._activeBuffer.x, this._activeBuffer.x + (e.params[0] || 1), this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), !0
                                    }
                                    repeatPrecedingCharacter(e) {
                                        const t = this._parser.precedingJoinState;
                                        if (!t) return !0;
                                        const i = e.params[0] || 1,
                                            s = p.UnicodeService.extractWidth(t),
                                            r = this._activeBuffer.x - s,
                                            n = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).getString(r),
                                            o = new Uint32Array(n.length * i);
                                        let a = 0;
                                        for (let e = 0; e < n.length;) {
                                            const t = n.codePointAt(e) || 0;
                                            o[a++] = t, e += t > 65535 ? 2 : 1
                                        }
                                        let h = a;
                                        for (let e = 1; e < i; ++e) o.copyWithin(h, 0, a), h += a;
                                        return this.print(o, 0, h), !0
                                    }
                                    sendDeviceAttributesPrimary(e) {
                                        return e.params[0] > 0 || (this._is("xterm") || this._is("rxvt-unicode") || this._is("screen") ? this._coreService.triggerDataEvent(n.C0.ESC + "[?1;2c") : this._is("linux") && this._coreService.triggerDataEvent(n.C0.ESC + "[?6c")), !0
                                    }
                                    sendDeviceAttributesSecondary(e) {
                                        return e.params[0] > 0 || (this._is("xterm") ? this._coreService.triggerDataEvent(n.C0.ESC + "[>0;276;0c") : this._is("rxvt-unicode") ? this._coreService.triggerDataEvent(n.C0.ESC + "[>85;95;0c") : this._is("linux") ? this._coreService.triggerDataEvent(e.params[0] + "c") : this._is("screen") && this._coreService.triggerDataEvent(n.C0.ESC + "[>83;40003;0c")), !0
                                    }
                                    _is(e) {
                                        return 0 === (this._optionsService.rawOptions.termName + "").indexOf(e)
                                    }
                                    setMode(e) {
                                        for (let t = 0; t < e.length; t++) switch (e.params[t]) {
                                            case 4:
                                                this._coreService.modes.insertMode = !0;
                                                break;
                                            case 20:
                                                this._optionsService.options.convertEol = !0
                                        }
                                        return !0
                                    }
                                    setModePrivate(e) {
                                        for (let t = 0; t < e.length; t++) switch (e.params[t]) {
                                            case 1:
                                                this._coreService.decPrivateModes.applicationCursorKeys = !0;
                                                break;
                                            case 2:
                                                this._charsetService.setgCharset(0, o.DEFAULT_CHARSET), this._charsetService.setgCharset(1, o.DEFAULT_CHARSET), this._charsetService.setgCharset(2, o.DEFAULT_CHARSET), this._charsetService.setgCharset(3, o.DEFAULT_CHARSET);
                                                break;
                                            case 3:
                                                this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(132, this._bufferService.rows), this._onRequestReset.fire());
                                                break;
                                            case 6:
                                                this._coreService.decPrivateModes.origin = !0, this._setCursor(0, 0);
                                                break;
                                            case 7:
                                                this._coreService.decPrivateModes.wraparound = !0;
                                                break;
                                            case 12:
                                                this._optionsService.options.cursorBlink = !0;
                                                break;
                                            case 45:
                                                this._coreService.decPrivateModes.reverseWraparound = !0;
                                                break;
                                            case 66:
                                                this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = !0, this._onRequestSyncScrollBar.fire();
                                                break;
                                            case 9:
                                                this._coreMouseService.activeProtocol = "X10";
                                                break;
                                            case 1e3:
                                                this._coreMouseService.activeProtocol = "VT200";
                                                break;
                                            case 1002:
                                                this._coreMouseService.activeProtocol = "DRAG";
                                                break;
                                            case 1003:
                                                this._coreMouseService.activeProtocol = "ANY";
                                                break;
                                            case 1004:
                                                this._coreService.decPrivateModes.sendFocus = !0, this._onRequestSendFocus.fire();
                                                break;
                                            case 1005:
                                                this._logService.debug("DECSET 1005 not supported (see #2507)");
                                                break;
                                            case 1006:
                                                this._coreMouseService.activeEncoding = "SGR";
                                                break;
                                            case 1015:
                                                this._logService.debug("DECSET 1015 not supported (see #2507)");
                                                break;
                                            case 1016:
                                                this._coreMouseService.activeEncoding = "SGR_PIXELS";
                                                break;
                                            case 25:
                                                this._coreService.isCursorHidden = !1;
                                                break;
                                            case 1048:
                                                this.saveCursor();
                                                break;
                                            case 1049:
                                                this.saveCursor();
                                            case 47:
                                            case 1047:
                                                this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()), this._coreService.isCursorInitialized = !0, this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1), this._onRequestSyncScrollBar.fire();
                                                break;
                                            case 2004:
                                                this._coreService.decPrivateModes.bracketedPasteMode = !0
                                        }
                                        return !0
                                    }
                                    resetMode(e) {
                                        for (let t = 0; t < e.length; t++) switch (e.params[t]) {
                                            case 4:
                                                this._coreService.modes.insertMode = !1;
                                                break;
                                            case 20:
                                                this._optionsService.options.convertEol = !1
                                        }
                                        return !0
                                    }
                                    resetModePrivate(e) {
                                        for (let t = 0; t < e.length; t++) switch (e.params[t]) {
                                            case 1:
                                                this._coreService.decPrivateModes.applicationCursorKeys = !1;
                                                break;
                                            case 3:
                                                this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(80, this._bufferService.rows), this._onRequestReset.fire());
                                                break;
                                            case 6:
                                                this._coreService.decPrivateModes.origin = !1, this._setCursor(0, 0);
                                                break;
                                            case 7:
                                                this._coreService.decPrivateModes.wraparound = !1;
                                                break;
                                            case 12:
                                                this._optionsService.options.cursorBlink = !1;
                                                break;
                                            case 45:
                                                this._coreService.decPrivateModes.reverseWraparound = !1;
                                                break;
                                            case 66:
                                                this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = !1, this._onRequestSyncScrollBar.fire();
                                                break;
                                            case 9:
                                            case 1e3:
                                            case 1002:
                                            case 1003:
                                                this._coreMouseService.activeProtocol = "NONE";
                                                break;
                                            case 1004:
                                                this._coreService.decPrivateModes.sendFocus = !1;
                                                break;
                                            case 1005:
                                                this._logService.debug("DECRST 1005 not supported (see #2507)");
                                                break;
                                            case 1006:
                                            case 1016:
                                                this._coreMouseService.activeEncoding = "DEFAULT";
                                                break;
                                            case 1015:
                                                this._logService.debug("DECRST 1015 not supported (see #2507)");
                                                break;
                                            case 25:
                                                this._coreService.isCursorHidden = !0;
                                                break;
                                            case 1048:
                                                this.restoreCursor();
                                                break;
                                            case 1049:
                                            case 47:
                                            case 1047:
                                                this._bufferService.buffers.activateNormalBuffer(), 1049 === e.params[t] && this.restoreCursor(), this._coreService.isCursorInitialized = !0, this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1), this._onRequestSyncScrollBar.fire();
                                                break;
                                            case 2004:
                                                this._coreService.decPrivateModes.bracketedPasteMode = !1
                                        }
                                        return !0
                                    }
                                    requestMode(e, t) {
                                        const i = this._coreService.decPrivateModes,
                                            {
                                                activeProtocol: s,
                                                activeEncoding: r
                                            } = this._coreMouseService,
                                            o = this._coreService,
                                            {
                                                buffers: a,
                                                cols: h
                                            } = this._bufferService,
                                            {
                                                active: l,
                                                alt: c
                                            } = a,
                                            d = this._optionsService.rawOptions,
                                            _ = e => e ? 1 : 2,
                                            u = e.params[0];
                                        return f = u, g = t ? 2 === u ? 4 : 4 === u ? _(o.modes.insertMode) : 12 === u ? 3 : 20 === u ? _(d.convertEol) : 0 : 1 === u ? _(i.applicationCursorKeys) : 3 === u ? d.windowOptions.setWinLines ? 80 === h ? 2 : 132 === h ? 1 : 0 : 0 : 6 === u ? _(i.origin) : 7 === u ? _(i.wraparound) : 8 === u ? 3 : 9 === u ? _("X10" === s) : 12 === u ? _(d.cursorBlink) : 25 === u ? _(!o.isCursorHidden) : 45 === u ? _(i.reverseWraparound) : 66 === u ? _(i.applicationKeypad) : 67 === u ? 4 : 1e3 === u ? _("VT200" === s) : 1002 === u ? _("DRAG" === s) : 1003 === u ? _("ANY" === s) : 1004 === u ? _(i.sendFocus) : 1005 === u ? 4 : 1006 === u ? _("SGR" === r) : 1015 === u ? 4 : 1016 === u ? _("SGR_PIXELS" === r) : 1048 === u ? 1 : 47 === u || 1047 === u || 1049 === u ? _(l === c) : 2004 === u ? _(i.bracketedPasteMode) : 0, o.triggerDataEvent(`${n.C0.ESC}[${t ? "" : "?"}${f};${g}$y`), !0;
                                        var f, g
                                    }
                                    _updateAttrColor(e, t, i, s, r) {
                                        return 2 === t ? (e |= 50331648, e &= -16777216, e |= f.AttributeData.fromColorRGB([i, s, r])) : 5 === t && (e &= -50331904, e |= 33554432 | 255 & i), e
                                    }
                                    _extractColor(e, t, i) {
                                        const s = [0, 0, -1, 0, 0, 0];
                                        let r = 0,
                                            n = 0;
                                        do {
                                            if (s[n + r] = e.params[t + n], e.hasSubParams(t + n)) {
                                                const i = e.getSubParams(t + n);
                                                let o = 0;
                                                do {
                                                    5 === s[1] && (r = 1), s[n + o + 1 + r] = i[o]
                                                } while (++o < i.length && o + n + 1 + r < s.length);
                                                break
                                            }
                                            if (5 === s[1] && n + r >= 2 || 2 === s[1] && n + r >= 5) break;
                                            s[1] && (r = 1)
                                        } while (++n + t < e.length && n + r < s.length);
                                        for (let e = 2; e < s.length; ++e) - 1 === s[e] && (s[e] = 0);
                                        switch (s[0]) {
                                            case 38:
                                                i.fg = this._updateAttrColor(i.fg, s[1], s[3], s[4], s[5]);
                                                break;
                                            case 48:
                                                i.bg = this._updateAttrColor(i.bg, s[1], s[3], s[4], s[5]);
                                                break;
                                            case 58:
                                                i.extended = i.extended.clone(), i.extended.underlineColor = this._updateAttrColor(i.extended.underlineColor, s[1], s[3], s[4], s[5])
                                        }
                                        return n
                                    }
                                    _processUnderline(e, t) {
                                        t.extended = t.extended.clone(), (!~e || e > 5) && (e = 1), t.extended.underlineStyle = e, t.fg |= 268435456, 0 === e && (t.fg &= -268435457), t.updateExtended()
                                    }
                                    _processSGR0(e) {
                                        e.fg = c.DEFAULT_ATTR_DATA.fg, e.bg = c.DEFAULT_ATTR_DATA.bg, e.extended = e.extended.clone(), e.extended.underlineStyle = 0, e.extended.underlineColor &= -67108864, e.updateExtended()
                                    }
                                    charAttributes(e) {
                                        if (1 === e.length && 0 === e.params[0]) return this._processSGR0(this._curAttrData), !0;
                                        const t = e.length;
                                        let i;
                                        const s = this._curAttrData;
                                        for (let r = 0; r < t; r++) i = e.params[r], i >= 30 && i <= 37 ? (s.fg &= -50331904, s.fg |= 16777216 | i - 30) : i >= 40 && i <= 47 ? (s.bg &= -50331904, s.bg |= 16777216 | i - 40) : i >= 90 && i <= 97 ? (s.fg &= -50331904, s.fg |= 16777224 | i - 90) : i >= 100 && i <= 107 ? (s.bg &= -50331904, s.bg |= 16777224 | i - 100) : 0 === i ? this._processSGR0(s) : 1 === i ? s.fg |= 134217728 : 3 === i ? s.bg |= 67108864 : 4 === i ? (s.fg |= 268435456, this._processUnderline(e.hasSubParams(r) ? e.getSubParams(r)[0] : 1, s)) : 5 === i ? s.fg |= 536870912 : 7 === i ? s.fg |= 67108864 : 8 === i ? s.fg |= 1073741824 : 9 === i ? s.fg |= 2147483648 : 2 === i ? s.bg |= 134217728 : 21 === i ? this._processUnderline(2, s) : 22 === i ? (s.fg &= -134217729, s.bg &= -134217729) : 23 === i ? s.bg &= -67108865 : 24 === i ? (s.fg &= -268435457, this._processUnderline(0, s)) : 25 === i ? s.fg &= -536870913 : 27 === i ? s.fg &= -67108865 : 28 === i ? s.fg &= -1073741825 : 29 === i ? s.fg &= 2147483647 : 39 === i ? (s.fg &= -67108864, s.fg |= 16777215 & c.DEFAULT_ATTR_DATA.fg) : 49 === i ? (s.bg &= -67108864, s.bg |= 16777215 & c.DEFAULT_ATTR_DATA.bg) : 38 === i || 48 === i || 58 === i ? r += this._extractColor(e, r, s) : 53 === i ? s.bg |= 1073741824 : 55 === i ? s.bg &= -1073741825 : 59 === i ? (s.extended = s.extended.clone(), s.extended.underlineColor = -1, s.updateExtended()) : 100 === i ? (s.fg &= -67108864, s.fg |= 16777215 & c.DEFAULT_ATTR_DATA.fg, s.bg &= -67108864, s.bg |= 16777215 & c.DEFAULT_ATTR_DATA.bg) : this._logService.debug("Unknown SGR attribute: %d.", i);
                                        return !0
                                    }
                                    deviceStatus(e) {
                                        switch (e.params[0]) {
                                            case 5:
                                                this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);
                                                break;
                                            case 6:
                                                const e = this._activeBuffer.y + 1,
                                                    t = this._activeBuffer.x + 1;
                                                this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)
                                        }
                                        return !0
                                    }
                                    deviceStatusPrivate(e) {
                                        if (6 === e.params[0]) {
                                            const e = this._activeBuffer.y + 1,
                                                t = this._activeBuffer.x + 1;
                                            this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)
                                        }
                                        return !0
                                    }
                                    softReset(e) {
                                        return this._coreService.isCursorHidden = !1, this._onRequestSyncScrollBar.fire(), this._activeBuffer.scrollTop = 0, this._activeBuffer.scrollBottom = this._bufferService.rows - 1, this._curAttrData = c.DEFAULT_ATTR_DATA.clone(), this._coreService.reset(), this._charsetService.reset(), this._activeBuffer.savedX = 0, this._activeBuffer.savedY = this._activeBuffer.ybase, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, this._coreService.decPrivateModes.origin = !1, !0
                                    }
                                    setCursorStyle(e) {
                                        const t = e.params[0] || 1;
                                        switch (t) {
                                            case 1:
                                            case 2:
                                                this._optionsService.options.cursorStyle = "block";
                                                break;
                                            case 3:
                                            case 4:
                                                this._optionsService.options.cursorStyle = "underline";
                                                break;
                                            case 5:
                                            case 6:
                                                this._optionsService.options.cursorStyle = "bar"
                                        }
                                        const i = t % 2 == 1;
                                        return this._optionsService.options.cursorBlink = i, !0
                                    }
                                    setScrollRegion(e) {
                                        const t = e.params[0] || 1;
                                        let i;
                                        return (e.length < 2 || (i = e.params[1]) > this._bufferService.rows || 0 === i) && (i = this._bufferService.rows), i > t && (this._activeBuffer.scrollTop = t - 1, this._activeBuffer.scrollBottom = i - 1, this._setCursor(0, 0)), !0
                                    }
                                    windowOptions(e) {
                                        if (!b(e.params[0], this._optionsService.rawOptions.windowOptions)) return !0;
                                        const t = e.length > 1 ? e.params[1] : 0;
                                        switch (e.params[0]) {
                                            case 14:
                                                2 !== t && this._onRequestWindowsOptionsReport.fire(y.GET_WIN_SIZE_PIXELS);
                                                break;
                                            case 16:
                                                this._onRequestWindowsOptionsReport.fire(y.GET_CELL_SIZE_PIXELS);
                                                break;
                                            case 18:
                                                this._bufferService && this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);
                                                break;
                                            case 22:
                                                0 !== t && 2 !== t || (this._windowTitleStack.push(this._windowTitle), this._windowTitleStack.length > 10 && this._windowTitleStack.shift()), 0 !== t && 1 !== t || (this._iconNameStack.push(this._iconName), this._iconNameStack.length > 10 && this._iconNameStack.shift());
                                                break;
                                            case 23:
                                                0 !== t && 2 !== t || this._windowTitleStack.length && this.setTitle(this._windowTitleStack.pop()), 0 !== t && 1 !== t || this._iconNameStack.length && this.setIconName(this._iconNameStack.pop())
                                        }
                                        return !0
                                    }
                                    saveCursor(e) {
                                        return this._activeBuffer.savedX = this._activeBuffer.x, this._activeBuffer.savedY = this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, !0
                                    }
                                    restoreCursor(e) {
                                        return this._activeBuffer.x = this._activeBuffer.savedX || 0, this._activeBuffer.y = Math.max(this._activeBuffer.savedY - this._activeBuffer.ybase, 0), this._curAttrData.fg = this._activeBuffer.savedCurAttrData.fg, this._curAttrData.bg = this._activeBuffer.savedCurAttrData.bg, this._charsetService.charset = this._savedCharset, this._activeBuffer.savedCharset && (this._charsetService.charset = this._activeBuffer.savedCharset), this._restrictCursor(), !0
                                    }
                                    setTitle(e) {
                                        return this._windowTitle = e, this._onTitleChange.fire(e), !0
                                    }
                                    setIconName(e) {
                                        return this._iconName = e, !0
                                    }
                                    setOrReportIndexedColor(e) {
                                        const t = [],
                                            i = e.split(";");
                                        for (; i.length > 1;) {
                                            const e = i.shift(),
                                                s = i.shift();
                                            if (/^\d+$/.exec(e)) {
                                                const i = parseInt(e);
                                                if (L(i))
                                                    if ("?" === s) t.push({
                                                        type: 0,
                                                        index: i
                                                    });
                                                    else {
                                                        const e = (0, A.parseColor)(s);
                                                        e && t.push({
                                                            type: 1,
                                                            index: i,
                                                            color: e
                                                        })
                                                    }
                                            }
                                        }
                                        return t.length && this._onColor.fire(t), !0
                                    }
                                    setHyperlink(e) {
                                        const t = e.split(";");
                                        return !(t.length < 2) && (t[1] ? this._createHyperlink(t[0], t[1]) : !t[0] && this._finishHyperlink())
                                    }
                                    _createHyperlink(e, t) {
                                        this._getCurrentLinkId() && this._finishHyperlink();
                                        const i = e.split(":");
                                        let s;
                                        const r = i.findIndex((e => e.startsWith("id=")));
                                        return -1 !== r && (s = i[r].slice(3) || void 0), this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = this._oscLinkService.registerLink({
                                            id: s,
                                            uri: t
                                        }), this._curAttrData.updateExtended(), !0
                                    }
                                    _finishHyperlink() {
                                        return this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = 0, this._curAttrData.updateExtended(), !0
                                    }
                                    _setOrReportSpecialColor(e, t) {
                                        const i = e.split(";");
                                        for (let e = 0; e < i.length && !(t >= this._specialColors.length); ++e, ++t)
                                            if ("?" === i[e]) this._onColor.fire([{
                                                type: 0,
                                                index: this._specialColors[t]
                                            }]);
                                            else {
                                                const s = (0, A.parseColor)(i[e]);
                                                s && this._onColor.fire([{
                                                    type: 1,
                                                    index: this._specialColors[t],
                                                    color: s
                                                }])
                                            } return !0
                                    }
                                    setOrReportFgColor(e) {
                                        return this._setOrReportSpecialColor(e, 0)
                                    }
                                    setOrReportBgColor(e) {
                                        return this._setOrReportSpecialColor(e, 1)
                                    }
                                    setOrReportCursorColor(e) {
                                        return this._setOrReportSpecialColor(e, 2)
                                    }
                                    restoreIndexedColor(e) {
                                        if (!e) return this._onColor.fire([{
                                            type: 2
                                        }]), !0;
                                        const t = [],
                                            i = e.split(";");
                                        for (let e = 0; e < i.length; ++e)
                                            if (/^\d+$/.exec(i[e])) {
                                                const s = parseInt(i[e]);
                                                L(s) && t.push({
                                                    type: 2,
                                                    index: s
                                                })
                                            } return t.length && this._onColor.fire(t), !0
                                    }
                                    restoreFgColor(e) {
                                        return this._onColor.fire([{
                                            type: 2,
                                            index: 256
                                        }]), !0
                                    }
                                    restoreBgColor(e) {
                                        return this._onColor.fire([{
                                            type: 2,
                                            index: 257
                                        }]), !0
                                    }
                                    restoreCursorColor(e) {
                                        return this._onColor.fire([{
                                            type: 2,
                                            index: 258
                                        }]), !0
                                    }
                                    nextLine() {
                                        return this._activeBuffer.x = 0, this.index(), !0
                                    }
                                    keypadApplicationMode() {
                                        return this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = !0, this._onRequestSyncScrollBar.fire(), !0
                                    }
                                    keypadNumericMode() {
                                        return this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = !1, this._onRequestSyncScrollBar.fire(), !0
                                    }
                                    selectDefaultCharset() {
                                        return this._charsetService.setgLevel(0), this._charsetService.setgCharset(0, o.DEFAULT_CHARSET), !0
                                    }
                                    selectCharset(e) {
                                        return 2 !== e.length ? (this.selectDefaultCharset(), !0) : ("/" === e[0] || this._charsetService.setgCharset(C[e[0]], o.CHARSETS[e[1]] || o.DEFAULT_CHARSET), !0)
                                    }
                                    index() {
                                        return this._restrictCursor(), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._restrictCursor(), !0
                                    }
                                    tabSet() {
                                        return this._activeBuffer.tabs[this._activeBuffer.x] = !0, !0
                                    }
                                    reverseIndex() {
                                        if (this._restrictCursor(), this._activeBuffer.y === this._activeBuffer.scrollTop) {
                                            const e = this._activeBuffer.scrollBottom - this._activeBuffer.scrollTop;
                                            this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase + this._activeBuffer.y, e, 1), this._activeBuffer.lines.set(this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.getBlankLine(this._eraseAttrData())), this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom)
                                        } else this._activeBuffer.y--, this._restrictCursor();
                                        return !0
                                    }
                                    fullReset() {
                                        return this._parser.reset(), this._onRequestReset.fire(), !0
                                    }
                                    reset() {
                                        this._curAttrData = c.DEFAULT_ATTR_DATA.clone(), this._eraseAttrDataInternal = c.DEFAULT_ATTR_DATA.clone()
                                    }
                                    _eraseAttrData() {
                                        return this._eraseAttrDataInternal.bg &= -67108864, this._eraseAttrDataInternal.bg |= 67108863 & this._curAttrData.bg, this._eraseAttrDataInternal
                                    }
                                    setgLevel(e) {
                                        return this._charsetService.setgLevel(e), !0
                                    }
                                    screenAlignmentPattern() {
                                        const e = new u.CellData;
                                        e.content = 1 << 22 | "E".charCodeAt(0), e.fg = this._curAttrData.fg, e.bg = this._curAttrData.bg, this._setCursor(0, 0);
                                        for (let t = 0; t < this._bufferService.rows; ++t) {
                                            const i = this._activeBuffer.ybase + this._activeBuffer.y + t,
                                                s = this._activeBuffer.lines.get(i);
                                            s && (s.fill(e), s.isWrapped = !1)
                                        }
                                        return this._dirtyRowTracker.markAllDirty(), this._setCursor(0, 0), !0
                                    }
                                    requestStatusString(e, t) {
                                        const i = this._bufferService.buffer,
                                            s = this._optionsService.rawOptions;
                                        return (e => (this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\`), !0))('"q' === e ? `P1$r${this._curAttrData.isProtected() ? 1 : 0}"q` : '"p' === e ? 'P1$r61;1"p' : "r" === e ? `P1$r${i.scrollTop + 1};${i.scrollBottom + 1}r` : "m" === e ? "P1$r0m" : " q" === e ? `P1$r${{ block: 2, underline: 4, bar: 6 }[s.cursorStyle] - (s.cursorBlink ? 1 : 0)} q` : "P0$r")
                                    }
                                    markRangeDirty(e, t) {
                                        this._dirtyRowTracker.markRangeDirty(e, t)
                                    }
                                }
                                t.InputHandler = E;
                                let x = class {
                                    constructor(e) {
                                        this._bufferService = e, this.clearRange()
                                    }
                                    clearRange() {
                                        this.start = this._bufferService.buffer.y, this.end = this._bufferService.buffer.y
                                    }
                                    markDirty(e) {
                                        e < this.start ? this.start = e : e > this.end && (this.end = e)
                                    }
                                    markRangeDirty(e, t) {
                                        e > t && (S = e, e = t, t = S), e < this.start && (this.start = e), t > this.end && (this.end = t)
                                    }
                                    markAllDirty() {
                                        this.markRangeDirty(0, this._bufferService.rows - 1)
                                    }
                                };

                                function L(e) {
                                    return 0 <= e && e < 256
                                }
                                x = s([r(0, g.IBufferService)], x)
                            },
                            844: (e, t) => {
                                function i(e) {
                                    for (const t of e) t.dispose();
                                    e.length = 0
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getDisposeArrayDisposable = t.disposeArray = t.toDisposable = t.MutableDisposable = t.Disposable = void 0, t.Disposable = class {
                                    constructor() {
                                        this._disposables = [], this._isDisposed = !1
                                    }
                                    dispose() {
                                        this._isDisposed = !0;
                                        for (const e of this._disposables) e.dispose();
                                        this._disposables.length = 0
                                    }
                                    register(e) {
                                        return this._disposables.push(e), e
                                    }
                                    unregister(e) {
                                        const t = this._disposables.indexOf(e); - 1 !== t && this._disposables.splice(t, 1)
                                    }
                                }, t.MutableDisposable = class {
                                    constructor() {
                                        this._isDisposed = !1
                                    }
                                    get value() {
                                        return this._isDisposed ? void 0 : this._value
                                    }
                                    set value(e) {
                                        this._isDisposed || e === this._value || (this._value?.dispose(), this._value = e)
                                    }
                                    clear() {
                                        this.value = void 0
                                    }
                                    dispose() {
                                        this._isDisposed = !0, this._value?.dispose(), this._value = void 0
                                    }
                                }, t.toDisposable = function(e) {
                                    return {
                                        dispose: e
                                    }
                                }, t.disposeArray = i, t.getDisposeArrayDisposable = function(e) {
                                    return {
                                        dispose: () => i(e)
                                    }
                                }
                            },
                            1505: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.FourKeyMap = t.TwoKeyMap = void 0;
                                class i {
                                    constructor() {
                                        this._data = {}
                                    }
                                    set(e, t, i) {
                                        this._data[e] || (this._data[e] = {}), this._data[e][t] = i
                                    }
                                    get(e, t) {
                                        return this._data[e] ? this._data[e][t] : void 0
                                    }
                                    clear() {
                                        this._data = {}
                                    }
                                }
                                t.TwoKeyMap = i, t.FourKeyMap = class {
                                    constructor() {
                                        this._data = new i
                                    }
                                    set(e, t, s, r, n) {
                                        this._data.get(e, t) || this._data.set(e, t, new i), this._data.get(e, t).set(s, r, n)
                                    }
                                    get(e, t, i, s) {
                                        return this._data.get(e, t)?.get(i, s)
                                    }
                                    clear() {
                                        this._data.clear()
                                    }
                                }
                            },
                            6114: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.isChromeOS = t.isLinux = t.isWindows = t.isIphone = t.isIpad = t.isMac = t.getSafariVersion = t.isSafari = t.isLegacyEdge = t.isFirefox = t.isNode = void 0, t.isNode = "undefined" != typeof process;
                                const i = t.isNode ? "node" : navigator.userAgent,
                                    s = t.isNode ? "node" : navigator.platform;
                                t.isFirefox = i.includes("Firefox"), t.isLegacyEdge = i.includes("Edge"), t.isSafari = /^((?!chrome|android).)*safari/i.test(i), t.getSafariVersion = function() {
                                    if (!t.isSafari) return 0;
                                    const e = i.match(/Version\/(\d+)/);
                                    return null === e || e.length < 2 ? 0 : parseInt(e[1])
                                }, t.isMac = ["Macintosh", "MacIntel", "MacPPC", "Mac68K"].includes(s), t.isIpad = "iPad" === s, t.isIphone = "iPhone" === s, t.isWindows = ["Windows", "Win16", "Win32", "WinCE"].includes(s), t.isLinux = s.indexOf("Linux") >= 0, t.isChromeOS = /\bCrOS\b/.test(i)
                            },
                            6106: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.SortedList = void 0;
                                let i = 0;
                                t.SortedList = class {
                                    constructor(e) {
                                        this._getKey = e, this._array = []
                                    }
                                    clear() {
                                        this._array.length = 0
                                    }
                                    insert(e) {
                                        0 !== this._array.length ? (i = this._search(this._getKey(e)), this._array.splice(i, 0, e)) : this._array.push(e)
                                    }
                                    delete(e) {
                                        if (0 === this._array.length) return !1;
                                        const t = this._getKey(e);
                                        if (void 0 === t) return !1;
                                        if (i = this._search(t), -1 === i) return !1;
                                        if (this._getKey(this._array[i]) !== t) return !1;
                                        do {
                                            if (this._array[i] === e) return this._array.splice(i, 1), !0
                                        } while (++i < this._array.length && this._getKey(this._array[i]) === t);
                                        return !1
                                    }* getKeyIterator(e) {
                                        if (0 !== this._array.length && (i = this._search(e), !(i < 0 || i >= this._array.length) && this._getKey(this._array[i]) === e))
                                            do {
                                                yield this._array[i]
                                            } while (++i < this._array.length && this._getKey(this._array[i]) === e)
                                    }
                                    forEachByKey(e, t) {
                                        if (0 !== this._array.length && (i = this._search(e), !(i < 0 || i >= this._array.length) && this._getKey(this._array[i]) === e))
                                            do {
                                                t(this._array[i])
                                            } while (++i < this._array.length && this._getKey(this._array[i]) === e)
                                    }
                                    values() {
                                        return [...this._array].values()
                                    }
                                    _search(e) {
                                        let t = 0,
                                            i = this._array.length - 1;
                                        for (; i >= t;) {
                                            let s = t + i >> 1;
                                            const r = this._getKey(this._array[s]);
                                            if (r > e) i = s - 1;
                                            else {
                                                if (!(r < e)) {
                                                    for (; s > 0 && this._getKey(this._array[s - 1]) === e;) s--;
                                                    return s
                                                }
                                                t = s + 1
                                            }
                                        }
                                        return t
                                    }
                                }
                            },
                            7226: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DebouncedIdleTask = t.IdleTaskQueue = t.PriorityTaskQueue = void 0;
                                const s = i(6114);
                                class r {
                                    constructor() {
                                        this._tasks = [], this._i = 0
                                    }
                                    enqueue(e) {
                                        this._tasks.push(e), this._start()
                                    }
                                    flush() {
                                        for (; this._i < this._tasks.length;) this._tasks[this._i]() || this._i++;
                                        this.clear()
                                    }
                                    clear() {
                                        this._idleCallback && (this._cancelCallback(this._idleCallback), this._idleCallback = void 0), this._i = 0, this._tasks.length = 0
                                    }
                                    _start() {
                                        this._idleCallback || (this._idleCallback = this._requestCallback(this._process.bind(this)))
                                    }
                                    _process(e) {
                                        this._idleCallback = void 0;
                                        let t = 0,
                                            i = 0,
                                            s = e.timeRemaining(),
                                            r = 0;
                                        for (; this._i < this._tasks.length;) {
                                            if (t = Date.now(), this._tasks[this._i]() || this._i++, t = Math.max(1, Date.now() - t), i = Math.max(t, i), r = e.timeRemaining(), 1.5 * i > r) return s - t < -20 && console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s - t))}ms`), void this._start();
                                            s = r
                                        }
                                        this.clear()
                                    }
                                }
                                class n extends r {
                                    _requestCallback(e) {
                                        return setTimeout((() => e(this._createDeadline(16))))
                                    }
                                    _cancelCallback(e) {
                                        clearTimeout(e)
                                    }
                                    _createDeadline(e) {
                                        const t = Date.now() + e;
                                        return {
                                            timeRemaining: () => Math.max(0, t - Date.now())
                                        }
                                    }
                                }
                                t.PriorityTaskQueue = n, t.IdleTaskQueue = !s.isNode && "requestIdleCallback" in window ? class extends r {
                                    _requestCallback(e) {
                                        return requestIdleCallback(e)
                                    }
                                    _cancelCallback(e) {
                                        cancelIdleCallback(e)
                                    }
                                } : n, t.DebouncedIdleTask = class {
                                    constructor() {
                                        this._queue = new t.IdleTaskQueue
                                    }
                                    set(e) {
                                        this._queue.clear(), this._queue.enqueue(e)
                                    }
                                    flush() {
                                        this._queue.flush()
                                    }
                                }
                            },
                            9282: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.updateWindowsModeWrappedState = void 0;
                                const s = i(643);
                                t.updateWindowsModeWrappedState = function(e) {
                                    const t = e.buffer.lines.get(e.buffer.ybase + e.buffer.y - 1),
                                        i = t?.get(e.cols - 1),
                                        r = e.buffer.lines.get(e.buffer.ybase + e.buffer.y);
                                    r && i && (r.isWrapped = i[s.CHAR_DATA_CODE_INDEX] !== s.NULL_CELL_CODE && i[s.CHAR_DATA_CODE_INDEX] !== s.WHITESPACE_CELL_CODE)
                                }
                            },
                            3734: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ExtendedAttrs = t.AttributeData = void 0;
                                class i {
                                    constructor() {
                                        this.fg = 0, this.bg = 0, this.extended = new s
                                    }
                                    static toColorRGB(e) {
                                        return [e >>> 16 & 255, e >>> 8 & 255, 255 & e]
                                    }
                                    static fromColorRGB(e) {
                                        return (255 & e[0]) << 16 | (255 & e[1]) << 8 | 255 & e[2]
                                    }
                                    clone() {
                                        const e = new i;
                                        return e.fg = this.fg, e.bg = this.bg, e.extended = this.extended.clone(), e
                                    }
                                    isInverse() {
                                        return 67108864 & this.fg
                                    }
                                    isBold() {
                                        return 134217728 & this.fg
                                    }
                                    isUnderline() {
                                        return this.hasExtendedAttrs() && 0 !== this.extended.underlineStyle ? 1 : 268435456 & this.fg
                                    }
                                    isBlink() {
                                        return 536870912 & this.fg
                                    }
                                    isInvisible() {
                                        return 1073741824 & this.fg
                                    }
                                    isItalic() {
                                        return 67108864 & this.bg
                                    }
                                    isDim() {
                                        return 134217728 & this.bg
                                    }
                                    isStrikethrough() {
                                        return 2147483648 & this.fg
                                    }
                                    isProtected() {
                                        return 536870912 & this.bg
                                    }
                                    isOverline() {
                                        return 1073741824 & this.bg
                                    }
                                    getFgColorMode() {
                                        return 50331648 & this.fg
                                    }
                                    getBgColorMode() {
                                        return 50331648 & this.bg
                                    }
                                    isFgRGB() {
                                        return 50331648 == (50331648 & this.fg)
                                    }
                                    isBgRGB() {
                                        return 50331648 == (50331648 & this.bg)
                                    }
                                    isFgPalette() {
                                        return 16777216 == (50331648 & this.fg) || 33554432 == (50331648 & this.fg)
                                    }
                                    isBgPalette() {
                                        return 16777216 == (50331648 & this.bg) || 33554432 == (50331648 & this.bg)
                                    }
                                    isFgDefault() {
                                        return 0 == (50331648 & this.fg)
                                    }
                                    isBgDefault() {
                                        return 0 == (50331648 & this.bg)
                                    }
                                    isAttributeDefault() {
                                        return 0 === this.fg && 0 === this.bg
                                    }
                                    getFgColor() {
                                        switch (50331648 & this.fg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.fg;
                                            case 50331648:
                                                return 16777215 & this.fg;
                                            default:
                                                return -1
                                        }
                                    }
                                    getBgColor() {
                                        switch (50331648 & this.bg) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.bg;
                                            case 50331648:
                                                return 16777215 & this.bg;
                                            default:
                                                return -1
                                        }
                                    }
                                    hasExtendedAttrs() {
                                        return 268435456 & this.bg
                                    }
                                    updateExtended() {
                                        this.extended.isEmpty() ? this.bg &= -268435457 : this.bg |= 268435456
                                    }
                                    getUnderlineColor() {
                                        if (268435456 & this.bg && ~this.extended.underlineColor) switch (50331648 & this.extended.underlineColor) {
                                            case 16777216:
                                            case 33554432:
                                                return 255 & this.extended.underlineColor;
                                            case 50331648:
                                                return 16777215 & this.extended.underlineColor;
                                            default:
                                                return this.getFgColor()
                                        }
                                        return this.getFgColor()
                                    }
                                    getUnderlineColorMode() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 & this.extended.underlineColor : this.getFgColorMode()
                                    }
                                    isUnderlineColorRGB() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 50331648 == (50331648 & this.extended.underlineColor) : this.isFgRGB()
                                    }
                                    isUnderlineColorPalette() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 16777216 == (50331648 & this.extended.underlineColor) || 33554432 == (50331648 & this.extended.underlineColor) : this.isFgPalette()
                                    }
                                    isUnderlineColorDefault() {
                                        return 268435456 & this.bg && ~this.extended.underlineColor ? 0 == (50331648 & this.extended.underlineColor) : this.isFgDefault()
                                    }
                                    getUnderlineStyle() {
                                        return 268435456 & this.fg ? 268435456 & this.bg ? this.extended.underlineStyle : 1 : 0
                                    }
                                    getUnderlineVariantOffset() {
                                        return this.extended.underlineVariantOffset
                                    }
                                }
                                t.AttributeData = i;
                                class s {
                                    get ext() {
                                        return this._urlId ? -469762049 & this._ext | this.underlineStyle << 26 : this._ext
                                    }
                                    set ext(e) {
                                        this._ext = e
                                    }
                                    get underlineStyle() {
                                        return this._urlId ? 5 : (469762048 & this._ext) >> 26
                                    }
                                    set underlineStyle(e) {
                                        this._ext &= -469762049, this._ext |= e << 26 & 469762048
                                    }
                                    get underlineColor() {
                                        return 67108863 & this._ext
                                    }
                                    set underlineColor(e) {
                                        this._ext &= -67108864, this._ext |= 67108863 & e
                                    }
                                    get urlId() {
                                        return this._urlId
                                    }
                                    set urlId(e) {
                                        this._urlId = e
                                    }
                                    get underlineVariantOffset() {
                                        const e = (3758096384 & this._ext) >> 29;
                                        return e < 0 ? 4294967288 ^ e : e
                                    }
                                    set underlineVariantOffset(e) {
                                        this._ext &= 536870911, this._ext |= e << 29 & 3758096384
                                    }
                                    constructor(e = 0, t = 0) {
                                        this._ext = 0, this._urlId = 0, this._ext = e, this._urlId = t
                                    }
                                    clone() {
                                        return new s(this._ext, this._urlId)
                                    }
                                    isEmpty() {
                                        return 0 === this.underlineStyle && 0 === this._urlId
                                    }
                                }
                                t.ExtendedAttrs = s
                            },
                            9092: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Buffer = t.MAX_BUFFER_SIZE = void 0;
                                const s = i(6349),
                                    r = i(7226),
                                    n = i(3734),
                                    o = i(8437),
                                    a = i(4634),
                                    h = i(511),
                                    l = i(643),
                                    c = i(4863),
                                    d = i(7116);
                                t.MAX_BUFFER_SIZE = 4294967295, t.Buffer = class {
                                    constructor(e, t, i) {
                                        this._hasScrollback = e, this._optionsService = t, this._bufferService = i, this.ydisp = 0, this.ybase = 0, this.y = 0, this.x = 0, this.tabs = {}, this.savedY = 0, this.savedX = 0, this.savedCurAttrData = o.DEFAULT_ATTR_DATA.clone(), this.savedCharset = d.DEFAULT_CHARSET, this.markers = [], this._nullCell = h.CellData.fromCharData([0, l.NULL_CELL_CHAR, l.NULL_CELL_WIDTH, l.NULL_CELL_CODE]), this._whitespaceCell = h.CellData.fromCharData([0, l.WHITESPACE_CELL_CHAR, l.WHITESPACE_CELL_WIDTH, l.WHITESPACE_CELL_CODE]), this._isClearing = !1, this._memoryCleanupQueue = new r.IdleTaskQueue, this._memoryCleanupPosition = 0, this._cols = this._bufferService.cols, this._rows = this._bufferService.rows, this.lines = new s.CircularList(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops()
                                    }
                                    getNullCell(e) {
                                        return e ? (this._nullCell.fg = e.fg, this._nullCell.bg = e.bg, this._nullCell.extended = e.extended) : (this._nullCell.fg = 0, this._nullCell.bg = 0, this._nullCell.extended = new n.ExtendedAttrs), this._nullCell
                                    }
                                    getWhitespaceCell(e) {
                                        return e ? (this._whitespaceCell.fg = e.fg, this._whitespaceCell.bg = e.bg, this._whitespaceCell.extended = e.extended) : (this._whitespaceCell.fg = 0, this._whitespaceCell.bg = 0, this._whitespaceCell.extended = new n.ExtendedAttrs), this._whitespaceCell
                                    }
                                    getBlankLine(e, t) {
                                        return new o.BufferLine(this._bufferService.cols, this.getNullCell(e), t)
                                    }
                                    get hasScrollback() {
                                        return this._hasScrollback && this.lines.maxLength > this._rows
                                    }
                                    get isCursorInViewport() {
                                        const e = this.ybase + this.y - this.ydisp;
                                        return e >= 0 && e < this._rows
                                    }
                                    _getCorrectBufferLength(e) {
                                        if (!this._hasScrollback) return e;
                                        const i = e + this._optionsService.rawOptions.scrollback;
                                        return i > t.MAX_BUFFER_SIZE ? t.MAX_BUFFER_SIZE : i
                                    }
                                    fillViewportRows(e) {
                                        if (0 === this.lines.length) {
                                            void 0 === e && (e = o.DEFAULT_ATTR_DATA);
                                            let t = this._rows;
                                            for (; t--;) this.lines.push(this.getBlankLine(e))
                                        }
                                    }
                                    clear() {
                                        this.ydisp = 0, this.ybase = 0, this.y = 0, this.x = 0, this.lines = new s.CircularList(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops()
                                    }
                                    resize(e, t) {
                                        const i = this.getNullCell(o.DEFAULT_ATTR_DATA);
                                        let s = 0;
                                        const r = this._getCorrectBufferLength(t);
                                        if (r > this.lines.maxLength && (this.lines.maxLength = r), this.lines.length > 0) {
                                            if (this._cols < e)
                                                for (let t = 0; t < this.lines.length; t++) s += +this.lines.get(t).resize(e, i);
                                            let n = 0;
                                            if (this._rows < t)
                                                for (let s = this._rows; s < t; s++) this.lines.length < t + this.ybase && (this._optionsService.rawOptions.windowsMode || void 0 !== this._optionsService.rawOptions.windowsPty.backend || void 0 !== this._optionsService.rawOptions.windowsPty.buildNumber ? this.lines.push(new o.BufferLine(e, i)) : this.ybase > 0 && this.lines.length <= this.ybase + this.y + n + 1 ? (this.ybase--, n++, this.ydisp > 0 && this.ydisp--) : this.lines.push(new o.BufferLine(e, i)));
                                            else
                                                for (let e = this._rows; e > t; e--) this.lines.length > t + this.ybase && (this.lines.length > this.ybase + this.y + 1 ? this.lines.pop() : (this.ybase++, this.ydisp++));
                                            if (r < this.lines.maxLength) {
                                                const e = this.lines.length - r;
                                                e > 0 && (this.lines.trimStart(e), this.ybase = Math.max(this.ybase - e, 0), this.ydisp = Math.max(this.ydisp - e, 0), this.savedY = Math.max(this.savedY - e, 0)), this.lines.maxLength = r
                                            }
                                            this.x = Math.min(this.x, e - 1), this.y = Math.min(this.y, t - 1), n && (this.y += n), this.savedX = Math.min(this.savedX, e - 1), this.scrollTop = 0
                                        }
                                        if (this.scrollBottom = t - 1, this._isReflowEnabled && (this._reflow(e, t), this._cols > e))
                                            for (let t = 0; t < this.lines.length; t++) s += +this.lines.get(t).resize(e, i);
                                        this._cols = e, this._rows = t, this._memoryCleanupQueue.clear(), s > .1 * this.lines.length && (this._memoryCleanupPosition = 0, this._memoryCleanupQueue.enqueue((() => this._batchedMemoryCleanup())))
                                    }
                                    _batchedMemoryCleanup() {
                                        let e = !0;
                                        this._memoryCleanupPosition >= this.lines.length && (this._memoryCleanupPosition = 0, e = !1);
                                        let t = 0;
                                        for (; this._memoryCleanupPosition < this.lines.length;)
                                            if (t += this.lines.get(this._memoryCleanupPosition++).cleanupMemory(), t > 100) return !0;
                                        return e
                                    }
                                    get _isReflowEnabled() {
                                        const e = this._optionsService.rawOptions.windowsPty;
                                        return e && e.buildNumber ? this._hasScrollback && "conpty" === e.backend && e.buildNumber >= 21376 : this._hasScrollback && !this._optionsService.rawOptions.windowsMode
                                    }
                                    _reflow(e, t) {
                                        this._cols !== e && (e > this._cols ? this._reflowLarger(e, t) : this._reflowSmaller(e, t))
                                    }
                                    _reflowLarger(e, t) {
                                        const i = (0, a.reflowLargerGetLinesToRemove)(this.lines, this._cols, e, this.ybase + this.y, this.getNullCell(o.DEFAULT_ATTR_DATA));
                                        if (i.length > 0) {
                                            const s = (0, a.reflowLargerCreateNewLayout)(this.lines, i);
                                            (0, a.reflowLargerApplyNewLayout)(this.lines, s.layout), this._reflowLargerAdjustViewport(e, t, s.countRemoved)
                                        }
                                    }
                                    _reflowLargerAdjustViewport(e, t, i) {
                                        const s = this.getNullCell(o.DEFAULT_ATTR_DATA);
                                        let r = i;
                                        for (; r-- > 0;) 0 === this.ybase ? (this.y > 0 && this.y--, this.lines.length < t && this.lines.push(new o.BufferLine(e, s))) : (this.ydisp === this.ybase && this.ydisp--, this.ybase--);
                                        this.savedY = Math.max(this.savedY - i, 0)
                                    }
                                    _reflowSmaller(e, t) {
                                        const i = this.getNullCell(o.DEFAULT_ATTR_DATA),
                                            s = [];
                                        let r = 0;
                                        for (let n = this.lines.length - 1; n >= 0; n--) {
                                            let h = this.lines.get(n);
                                            if (!h || !h.isWrapped && h.getTrimmedLength() <= e) continue;
                                            const l = [h];
                                            for (; h.isWrapped && n > 0;) h = this.lines.get(--n), l.unshift(h);
                                            const c = this.ybase + this.y;
                                            if (c >= n && c < n + l.length) continue;
                                            const d = l[l.length - 1].getTrimmedLength(),
                                                _ = (0, a.reflowSmallerGetNewLineLengths)(l, this._cols, e),
                                                u = _.length - l.length;
                                            let f;
                                            f = 0 === this.ybase && this.y !== this.lines.length - 1 ? Math.max(0, this.y - this.lines.maxLength + u) : Math.max(0, this.lines.length - this.lines.maxLength + u);
                                            const g = [];
                                            for (let e = 0; e < u; e++) {
                                                const e = this.getBlankLine(o.DEFAULT_ATTR_DATA, !0);
                                                g.push(e)
                                            }
                                            g.length > 0 && (s.push({
                                                start: n + l.length + r,
                                                newLines: g
                                            }), r += g.length), l.push(...g);
                                            let p = _.length - 1,
                                                v = _[p];
                                            0 === v && (p--, v = _[p]);
                                            let m = l.length - u - 1,
                                                A = d;
                                            for (; m >= 0;) {
                                                const e = Math.min(A, v);
                                                if (void 0 === l[p]) break;
                                                if (l[p].copyCellsFrom(l[m], A - e, v - e, e, !0), v -= e, 0 === v && (p--, v = _[p]), A -= e, 0 === A) {
                                                    m--;
                                                    const e = Math.max(m, 0);
                                                    A = (0, a.getWrappedLineTrimmedLength)(l, e, this._cols)
                                                }
                                            }
                                            for (let t = 0; t < l.length; t++) _[t] < e && l[t].setCell(_[t], i);
                                            let C = u - f;
                                            for (; C-- > 0;) 0 === this.ybase ? this.y < t - 1 ? (this.y++, this.lines.pop()) : (this.ybase++, this.ydisp++) : this.ybase < Math.min(this.lines.maxLength, this.lines.length + r) - t && (this.ybase === this.ydisp && this.ydisp++, this.ybase++);
                                            this.savedY = Math.min(this.savedY + u, this.ybase + t - 1)
                                        }
                                        if (s.length > 0) {
                                            const e = [],
                                                t = [];
                                            for (let e = 0; e < this.lines.length; e++) t.push(this.lines.get(e));
                                            const i = this.lines.length;
                                            let n = i - 1,
                                                o = 0,
                                                a = s[o];
                                            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + r);
                                            let h = 0;
                                            for (let l = Math.min(this.lines.maxLength - 1, i + r - 1); l >= 0; l--)
                                                if (a && a.start > n + h) {
                                                    for (let e = a.newLines.length - 1; e >= 0; e--) this.lines.set(l--, a.newLines[e]);
                                                    l++, e.push({
                                                        index: n + 1,
                                                        amount: a.newLines.length
                                                    }), h += a.newLines.length, a = s[++o]
                                                } else this.lines.set(l, t[n--]);
                                            let l = 0;
                                            for (let t = e.length - 1; t >= 0; t--) e[t].index += l, this.lines.onInsertEmitter.fire(e[t]), l += e[t].amount;
                                            const c = Math.max(0, i + r - this.lines.maxLength);
                                            c > 0 && this.lines.onTrimEmitter.fire(c)
                                        }
                                    }
                                    translateBufferLineToString(e, t, i = 0, s) {
                                        const r = this.lines.get(e);
                                        return r ? r.translateToString(t, i, s) : ""
                                    }
                                    getWrappedRangeForLine(e) {
                                        let t = e,
                                            i = e;
                                        for (; t > 0 && this.lines.get(t).isWrapped;) t--;
                                        for (; i + 1 < this.lines.length && this.lines.get(i + 1).isWrapped;) i++;
                                        return {
                                            first: t,
                                            last: i
                                        }
                                    }
                                    setupTabStops(e) {
                                        for (null != e ? this.tabs[e] || (e = this.prevStop(e)) : (this.tabs = {}, e = 0); e < this._cols; e += this._optionsService.rawOptions.tabStopWidth) this.tabs[e] = !0
                                    }
                                    prevStop(e) {
                                        for (null == e && (e = this.x); !this.tabs[--e] && e > 0;);
                                        return e >= this._cols ? this._cols - 1 : e < 0 ? 0 : e
                                    }
                                    nextStop(e) {
                                        for (null == e && (e = this.x); !this.tabs[++e] && e < this._cols;);
                                        return e >= this._cols ? this._cols - 1 : e < 0 ? 0 : e
                                    }
                                    clearMarkers(e) {
                                        this._isClearing = !0;
                                        for (let t = 0; t < this.markers.length; t++) this.markers[t].line === e && (this.markers[t].dispose(), this.markers.splice(t--, 1));
                                        this._isClearing = !1
                                    }
                                    clearAllMarkers() {
                                        this._isClearing = !0;
                                        for (let e = 0; e < this.markers.length; e++) this.markers[e].dispose(), this.markers.splice(e--, 1);
                                        this._isClearing = !1
                                    }
                                    addMarker(e) {
                                        const t = new c.Marker(e);
                                        return this.markers.push(t), t.register(this.lines.onTrim((e => {
                                            t.line -= e, t.line < 0 && t.dispose()
                                        }))), t.register(this.lines.onInsert((e => {
                                            t.line >= e.index && (t.line += e.amount)
                                        }))), t.register(this.lines.onDelete((e => {
                                            t.line >= e.index && t.line < e.index + e.amount && t.dispose(), t.line > e.index && (t.line -= e.amount)
                                        }))), t.register(t.onDispose((() => this._removeMarker(t)))), t
                                    }
                                    _removeMarker(e) {
                                        this._isClearing || this.markers.splice(this.markers.indexOf(e), 1)
                                    }
                                }
                            },
                            8437: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferLine = t.DEFAULT_ATTR_DATA = void 0;
                                const s = i(3734),
                                    r = i(511),
                                    n = i(643),
                                    o = i(482);
                                t.DEFAULT_ATTR_DATA = Object.freeze(new s.AttributeData);
                                let a = 0;
                                class h {
                                    constructor(e, t, i = !1) {
                                        this.isWrapped = i, this._combined = {}, this._extendedAttrs = {}, this._data = new Uint32Array(3 * e);
                                        const s = t || r.CellData.fromCharData([0, n.NULL_CELL_CHAR, n.NULL_CELL_WIDTH, n.NULL_CELL_CODE]);
                                        for (let t = 0; t < e; ++t) this.setCell(t, s);
                                        this.length = e
                                    }
                                    get(e) {
                                        const t = this._data[3 * e + 0],
                                            i = 2097151 & t;
                                        return [this._data[3 * e + 1], 2097152 & t ? this._combined[e] : i ? (0, o.stringFromCodePoint)(i) : "", t >> 22, 2097152 & t ? this._combined[e].charCodeAt(this._combined[e].length - 1) : i]
                                    }
                                    set(e, t) {
                                        this._data[3 * e + 1] = t[n.CHAR_DATA_ATTR_INDEX], t[n.CHAR_DATA_CHAR_INDEX].length > 1 ? (this._combined[e] = t[1], this._data[3 * e + 0] = 2097152 | e | t[n.CHAR_DATA_WIDTH_INDEX] << 22) : this._data[3 * e + 0] = t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | t[n.CHAR_DATA_WIDTH_INDEX] << 22
                                    }
                                    getWidth(e) {
                                        return this._data[3 * e + 0] >> 22
                                    }
                                    hasWidth(e) {
                                        return 12582912 & this._data[3 * e + 0]
                                    }
                                    getFg(e) {
                                        return this._data[3 * e + 1]
                                    }
                                    getBg(e) {
                                        return this._data[3 * e + 2]
                                    }
                                    hasContent(e) {
                                        return 4194303 & this._data[3 * e + 0]
                                    }
                                    getCodePoint(e) {
                                        const t = this._data[3 * e + 0];
                                        return 2097152 & t ? this._combined[e].charCodeAt(this._combined[e].length - 1) : 2097151 & t
                                    }
                                    isCombined(e) {
                                        return 2097152 & this._data[3 * e + 0]
                                    }
                                    getString(e) {
                                        const t = this._data[3 * e + 0];
                                        return 2097152 & t ? this._combined[e] : 2097151 & t ? (0, o.stringFromCodePoint)(2097151 & t) : ""
                                    }
                                    isProtected(e) {
                                        return 536870912 & this._data[3 * e + 2]
                                    }
                                    loadCell(e, t) {
                                        return a = 3 * e, t.content = this._data[a + 0], t.fg = this._data[a + 1], t.bg = this._data[a + 2], 2097152 & t.content && (t.combinedData = this._combined[e]), 268435456 & t.bg && (t.extended = this._extendedAttrs[e]), t
                                    }
                                    setCell(e, t) {
                                        2097152 & t.content && (this._combined[e] = t.combinedData), 268435456 & t.bg && (this._extendedAttrs[e] = t.extended), this._data[3 * e + 0] = t.content, this._data[3 * e + 1] = t.fg, this._data[3 * e + 2] = t.bg
                                    }
                                    setCellFromCodepoint(e, t, i, s) {
                                        268435456 & s.bg && (this._extendedAttrs[e] = s.extended), this._data[3 * e + 0] = t | i << 22, this._data[3 * e + 1] = s.fg, this._data[3 * e + 2] = s.bg
                                    }
                                    addCodepointToCell(e, t, i) {
                                        let s = this._data[3 * e + 0];
                                        2097152 & s ? this._combined[e] += (0, o.stringFromCodePoint)(t) : 2097151 & s ? (this._combined[e] = (0, o.stringFromCodePoint)(2097151 & s) + (0, o.stringFromCodePoint)(t), s &= -2097152, s |= 2097152) : s = t | 1 << 22, i && (s &= -12582913, s |= i << 22), this._data[3 * e + 0] = s
                                    }
                                    insertCells(e, t, i) {
                                        if ((e %= this.length) && 2 === this.getWidth(e - 1) && this.setCellFromCodepoint(e - 1, 0, 1, i), t < this.length - e) {
                                            const s = new r.CellData;
                                            for (let i = this.length - e - t - 1; i >= 0; --i) this.setCell(e + t + i, this.loadCell(e + i, s));
                                            for (let s = 0; s < t; ++s) this.setCell(e + s, i)
                                        } else
                                            for (let t = e; t < this.length; ++t) this.setCell(t, i);
                                        2 === this.getWidth(this.length - 1) && this.setCellFromCodepoint(this.length - 1, 0, 1, i)
                                    }
                                    deleteCells(e, t, i) {
                                        if (e %= this.length, t < this.length - e) {
                                            const s = new r.CellData;
                                            for (let i = 0; i < this.length - e - t; ++i) this.setCell(e + i, this.loadCell(e + t + i, s));
                                            for (let e = this.length - t; e < this.length; ++e) this.setCell(e, i)
                                        } else
                                            for (let t = e; t < this.length; ++t) this.setCell(t, i);
                                        e && 2 === this.getWidth(e - 1) && this.setCellFromCodepoint(e - 1, 0, 1, i), 0 !== this.getWidth(e) || this.hasContent(e) || this.setCellFromCodepoint(e, 0, 1, i)
                                    }
                                    replaceCells(e, t, i, s = !1) {
                                        if (s)
                                            for (e && 2 === this.getWidth(e - 1) && !this.isProtected(e - 1) && this.setCellFromCodepoint(e - 1, 0, 1, i), t < this.length && 2 === this.getWidth(t - 1) && !this.isProtected(t) && this.setCellFromCodepoint(t, 0, 1, i); e < t && e < this.length;) this.isProtected(e) || this.setCell(e, i), e++;
                                        else
                                            for (e && 2 === this.getWidth(e - 1) && this.setCellFromCodepoint(e - 1, 0, 1, i), t < this.length && 2 === this.getWidth(t - 1) && this.setCellFromCodepoint(t, 0, 1, i); e < t && e < this.length;) this.setCell(e++, i)
                                    }
                                    resize(e, t) {
                                        if (e === this.length) return 4 * this._data.length * 2 < this._data.buffer.byteLength;
                                        const i = 3 * e;
                                        if (e > this.length) {
                                            if (this._data.buffer.byteLength >= 4 * i) this._data = new Uint32Array(this._data.buffer, 0, i);
                                            else {
                                                const e = new Uint32Array(i);
                                                e.set(this._data), this._data = e
                                            }
                                            for (let i = this.length; i < e; ++i) this.setCell(i, t)
                                        } else {
                                            this._data = this._data.subarray(0, i);
                                            const t = Object.keys(this._combined);
                                            for (let i = 0; i < t.length; i++) {
                                                const s = parseInt(t[i], 10);
                                                s >= e && delete this._combined[s]
                                            }
                                            const s = Object.keys(this._extendedAttrs);
                                            for (let t = 0; t < s.length; t++) {
                                                const i = parseInt(s[t], 10);
                                                i >= e && delete this._extendedAttrs[i]
                                            }
                                        }
                                        return this.length = e, 4 * i * 2 < this._data.buffer.byteLength
                                    }
                                    cleanupMemory() {
                                        if (4 * this._data.length * 2 < this._data.buffer.byteLength) {
                                            const e = new Uint32Array(this._data.length);
                                            return e.set(this._data), this._data = e, 1
                                        }
                                        return 0
                                    }
                                    fill(e, t = !1) {
                                        if (t)
                                            for (let t = 0; t < this.length; ++t) this.isProtected(t) || this.setCell(t, e);
                                        else {
                                            this._combined = {}, this._extendedAttrs = {};
                                            for (let t = 0; t < this.length; ++t) this.setCell(t, e)
                                        }
                                    }
                                    copyFrom(e) {
                                        this.length !== e.length ? this._data = new Uint32Array(e._data) : this._data.set(e._data), this.length = e.length, this._combined = {};
                                        for (const t in e._combined) this._combined[t] = e._combined[t];
                                        this._extendedAttrs = {};
                                        for (const t in e._extendedAttrs) this._extendedAttrs[t] = e._extendedAttrs[t];
                                        this.isWrapped = e.isWrapped
                                    }
                                    clone() {
                                        const e = new h(0);
                                        e._data = new Uint32Array(this._data), e.length = this.length;
                                        for (const t in this._combined) e._combined[t] = this._combined[t];
                                        for (const t in this._extendedAttrs) e._extendedAttrs[t] = this._extendedAttrs[t];
                                        return e.isWrapped = this.isWrapped, e
                                    }
                                    getTrimmedLength() {
                                        for (let e = this.length - 1; e >= 0; --e)
                                            if (4194303 & this._data[3 * e + 0]) return e + (this._data[3 * e + 0] >> 22);
                                        return 0
                                    }
                                    getNoBgTrimmedLength() {
                                        for (let e = this.length - 1; e >= 0; --e)
                                            if (4194303 & this._data[3 * e + 0] || 50331648 & this._data[3 * e + 2]) return e + (this._data[3 * e + 0] >> 22);
                                        return 0
                                    }
                                    copyCellsFrom(e, t, i, s, r) {
                                        const n = e._data;
                                        if (r)
                                            for (let r = s - 1; r >= 0; r--) {
                                                for (let e = 0; e < 3; e++) this._data[3 * (i + r) + e] = n[3 * (t + r) + e];
                                                268435456 & n[3 * (t + r) + 2] && (this._extendedAttrs[i + r] = e._extendedAttrs[t + r])
                                            } else
                                                for (let r = 0; r < s; r++) {
                                                    for (let e = 0; e < 3; e++) this._data[3 * (i + r) + e] = n[3 * (t + r) + e];
                                                    268435456 & n[3 * (t + r) + 2] && (this._extendedAttrs[i + r] = e._extendedAttrs[t + r])
                                                }
                                        const o = Object.keys(e._combined);
                                        for (let s = 0; s < o.length; s++) {
                                            const r = parseInt(o[s], 10);
                                            r >= t && (this._combined[r - t + i] = e._combined[r])
                                        }
                                    }
                                    translateToString(e, t, i, s) {
                                        t = t ?? 0, i = i ?? this.length, e && (i = Math.min(i, this.getTrimmedLength())), s && (s.length = 0);
                                        let r = "";
                                        for (; t < i;) {
                                            const e = this._data[3 * t + 0],
                                                i = 2097151 & e,
                                                a = 2097152 & e ? this._combined[t] : i ? (0, o.stringFromCodePoint)(i) : n.WHITESPACE_CELL_CHAR;
                                            if (r += a, s)
                                                for (let e = 0; e < a.length; ++e) s.push(t);
                                            t += e >> 22 || 1
                                        }
                                        return s && s.push(t), r
                                    }
                                }
                                t.BufferLine = h
                            },
                            4841: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getRangeLength = void 0, t.getRangeLength = function(e, t) {
                                    if (e.start.y > e.end.y) throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);
                                    return t * (e.end.y - e.start.y) + (e.end.x - e.start.x + 1)
                                }
                            },
                            4634: (e, t) => {
                                function i(e, t, i) {
                                    if (t === e.length - 1) return e[t].getTrimmedLength();
                                    const s = !e[t].hasContent(i - 1) && 1 === e[t].getWidth(i - 1),
                                        r = 2 === e[t + 1].getWidth(0);
                                    return s && r ? i - 1 : i
                                }
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.getWrappedLineTrimmedLength = t.reflowSmallerGetNewLineLengths = t.reflowLargerApplyNewLayout = t.reflowLargerCreateNewLayout = t.reflowLargerGetLinesToRemove = void 0, t.reflowLargerGetLinesToRemove = function(e, t, s, r, n) {
                                    const o = [];
                                    for (let a = 0; a < e.length - 1; a++) {
                                        let h = a,
                                            l = e.get(++h);
                                        if (!l.isWrapped) continue;
                                        const c = [e.get(a)];
                                        for (; h < e.length && l.isWrapped;) c.push(l), l = e.get(++h);
                                        if (r >= a && r < h) {
                                            a += c.length - 1;
                                            continue
                                        }
                                        let d = 0,
                                            _ = i(c, d, t),
                                            u = 1,
                                            f = 0;
                                        for (; u < c.length;) {
                                            const e = i(c, u, t),
                                                r = e - f,
                                                o = s - _,
                                                a = Math.min(r, o);
                                            c[d].copyCellsFrom(c[u], f, _, a, !1), _ += a, _ === s && (d++, _ = 0), f += a, f === e && (u++, f = 0), 0 === _ && 0 !== d && 2 === c[d - 1].getWidth(s - 1) && (c[d].copyCellsFrom(c[d - 1], s - 1, _++, 1, !1), c[d - 1].setCell(s - 1, n))
                                        }
                                        c[d].replaceCells(_, s, n);
                                        let g = 0;
                                        for (let e = c.length - 1; e > 0 && (e > d || 0 === c[e].getTrimmedLength()); e--) g++;
                                        g > 0 && (o.push(a + c.length - g), o.push(g)), a += c.length - 1
                                    }
                                    return o
                                }, t.reflowLargerCreateNewLayout = function(e, t) {
                                    const i = [];
                                    let s = 0,
                                        r = t[s],
                                        n = 0;
                                    for (let o = 0; o < e.length; o++)
                                        if (r === o) {
                                            const i = t[++s];
                                            e.onDeleteEmitter.fire({
                                                index: o - n,
                                                amount: i
                                            }), o += i - 1, n += i, r = t[++s]
                                        } else i.push(o);
                                    return {
                                        layout: i,
                                        countRemoved: n
                                    }
                                }, t.reflowLargerApplyNewLayout = function(e, t) {
                                    const i = [];
                                    for (let s = 0; s < t.length; s++) i.push(e.get(t[s]));
                                    for (let t = 0; t < i.length; t++) e.set(t, i[t]);
                                    e.length = t.length
                                }, t.reflowSmallerGetNewLineLengths = function(e, t, s) {
                                    const r = [],
                                        n = e.map(((s, r) => i(e, r, t))).reduce(((e, t) => e + t));
                                    let o = 0,
                                        a = 0,
                                        h = 0;
                                    for (; h < n;) {
                                        if (n - h < s) {
                                            r.push(n - h);
                                            break
                                        }
                                        o += s;
                                        const l = i(e, a, t);
                                        o > l && (o -= l, a++);
                                        const c = 2 === e[a].getWidth(o - 1);
                                        c && o--;
                                        const d = c ? s - 1 : s;
                                        r.push(d), h += d
                                    }
                                    return r
                                }, t.getWrappedLineTrimmedLength = i
                            },
                            5295: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferSet = void 0;
                                const s = i(8460),
                                    r = i(844),
                                    n = i(9092);
                                class o extends r.Disposable {
                                    constructor(e, t) {
                                        super(), this._optionsService = e, this._bufferService = t, this._onBufferActivate = this.register(new s.EventEmitter), this.onBufferActivate = this._onBufferActivate.event, this.reset(), this.register(this._optionsService.onSpecificOptionChange("scrollback", (() => this.resize(this._bufferService.cols, this._bufferService.rows)))), this.register(this._optionsService.onSpecificOptionChange("tabStopWidth", (() => this.setupTabStops())))
                                    }
                                    reset() {
                                        this._normal = new n.Buffer(!0, this._optionsService, this._bufferService), this._normal.fillViewportRows(), this._alt = new n.Buffer(!1, this._optionsService, this._bufferService), this._activeBuffer = this._normal, this._onBufferActivate.fire({
                                            activeBuffer: this._normal,
                                            inactiveBuffer: this._alt
                                        }), this.setupTabStops()
                                    }
                                    get alt() {
                                        return this._alt
                                    }
                                    get active() {
                                        return this._activeBuffer
                                    }
                                    get normal() {
                                        return this._normal
                                    }
                                    activateNormalBuffer() {
                                        this._activeBuffer !== this._normal && (this._normal.x = this._alt.x, this._normal.y = this._alt.y, this._alt.clearAllMarkers(), this._alt.clear(), this._activeBuffer = this._normal, this._onBufferActivate.fire({
                                            activeBuffer: this._normal,
                                            inactiveBuffer: this._alt
                                        }))
                                    }
                                    activateAltBuffer(e) {
                                        this._activeBuffer !== this._alt && (this._alt.fillViewportRows(e), this._alt.x = this._normal.x, this._alt.y = this._normal.y, this._activeBuffer = this._alt, this._onBufferActivate.fire({
                                            activeBuffer: this._alt,
                                            inactiveBuffer: this._normal
                                        }))
                                    }
                                    resize(e, t) {
                                        this._normal.resize(e, t), this._alt.resize(e, t), this.setupTabStops(e)
                                    }
                                    setupTabStops(e) {
                                        this._normal.setupTabStops(e), this._alt.setupTabStops(e)
                                    }
                                }
                                t.BufferSet = o
                            },
                            511: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CellData = void 0;
                                const s = i(482),
                                    r = i(643),
                                    n = i(3734);
                                class o extends n.AttributeData {
                                    constructor() {
                                        super(...arguments), this.content = 0, this.fg = 0, this.bg = 0, this.extended = new n.ExtendedAttrs, this.combinedData = ""
                                    }
                                    static fromCharData(e) {
                                        const t = new o;
                                        return t.setFromCharData(e), t
                                    }
                                    isCombined() {
                                        return 2097152 & this.content
                                    }
                                    getWidth() {
                                        return this.content >> 22
                                    }
                                    getChars() {
                                        return 2097152 & this.content ? this.combinedData : 2097151 & this.content ? (0, s.stringFromCodePoint)(2097151 & this.content) : ""
                                    }
                                    getCode() {
                                        return this.isCombined() ? this.combinedData.charCodeAt(this.combinedData.length - 1) : 2097151 & this.content
                                    }
                                    setFromCharData(e) {
                                        this.fg = e[r.CHAR_DATA_ATTR_INDEX], this.bg = 0;
                                        let t = !1;
                                        if (e[r.CHAR_DATA_CHAR_INDEX].length > 2) t = !0;
                                        else if (2 === e[r.CHAR_DATA_CHAR_INDEX].length) {
                                            const i = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
                                            if (55296 <= i && i <= 56319) {
                                                const s = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                                                56320 <= s && s <= 57343 ? this.content = 1024 * (i - 55296) + s - 56320 + 65536 | e[r.CHAR_DATA_WIDTH_INDEX] << 22 : t = !0
                                            } else t = !0
                                        } else this.content = e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | e[r.CHAR_DATA_WIDTH_INDEX] << 22;
                                        t && (this.combinedData = e[r.CHAR_DATA_CHAR_INDEX], this.content = 2097152 | e[r.CHAR_DATA_WIDTH_INDEX] << 22)
                                    }
                                    getAsCharData() {
                                        return [this.fg, this.getChars(), this.getWidth(), this.getCode()]
                                    }
                                }
                                t.CellData = o
                            },
                            643: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.WHITESPACE_CELL_CODE = t.WHITESPACE_CELL_WIDTH = t.WHITESPACE_CELL_CHAR = t.NULL_CELL_CODE = t.NULL_CELL_WIDTH = t.NULL_CELL_CHAR = t.CHAR_DATA_CODE_INDEX = t.CHAR_DATA_WIDTH_INDEX = t.CHAR_DATA_CHAR_INDEX = t.CHAR_DATA_ATTR_INDEX = t.DEFAULT_EXT = t.DEFAULT_ATTR = t.DEFAULT_COLOR = void 0, t.DEFAULT_COLOR = 0, t.DEFAULT_ATTR = 256 | t.DEFAULT_COLOR << 9, t.DEFAULT_EXT = 0, t.CHAR_DATA_ATTR_INDEX = 0, t.CHAR_DATA_CHAR_INDEX = 1, t.CHAR_DATA_WIDTH_INDEX = 2, t.CHAR_DATA_CODE_INDEX = 3, t.NULL_CELL_CHAR = "", t.NULL_CELL_WIDTH = 1, t.NULL_CELL_CODE = 0, t.WHITESPACE_CELL_CHAR = " ", t.WHITESPACE_CELL_WIDTH = 1, t.WHITESPACE_CELL_CODE = 32
                            },
                            4863: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Marker = void 0;
                                const s = i(8460),
                                    r = i(844);
                                class n {
                                    get id() {
                                        return this._id
                                    }
                                    constructor(e) {
                                        this.line = e, this.isDisposed = !1, this._disposables = [], this._id = n._nextId++, this._onDispose = this.register(new s.EventEmitter), this.onDispose = this._onDispose.event
                                    }
                                    dispose() {
                                        this.isDisposed || (this.isDisposed = !0, this.line = -1, this._onDispose.fire(), (0, r.disposeArray)(this._disposables), this._disposables.length = 0)
                                    }
                                    register(e) {
                                        return this._disposables.push(e), e
                                    }
                                }
                                t.Marker = n, n._nextId = 1
                            },
                            7116: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DEFAULT_CHARSET = t.CHARSETS = void 0, t.CHARSETS = {}, t.DEFAULT_CHARSET = t.CHARSETS.B, t.CHARSETS[0] = {
                                    "`": "",
                                    a: "",
                                    b: "",
                                    c: "",
                                    d: "",
                                    e: "",
                                    f: "",
                                    g: "",
                                    h: "",
                                    i: "",
                                    j: "",
                                    k: "",
                                    l: "",
                                    m: "",
                                    n: "",
                                    o: "",
                                    p: "",
                                    q: "",
                                    r: "",
                                    s: "",
                                    t: "",
                                    u: "",
                                    v: "",
                                    w: "",
                                    x: "",
                                    y: "",
                                    z: "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.A = {
                                    "#": ""
                                }, t.CHARSETS.B = void 0, t.CHARSETS[4] = {
                                    "#": "",
                                    "@": "",
                                    "[": "ij",
                                    "\\": "",
                                    "]": "|",
                                    "{": "",
                                    "|": "f",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.C = t.CHARSETS[5] = {
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "^": "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.R = {
                                    "#": "",
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.Q = {
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "^": "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.K = {
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.Y = {
                                    "#": "",
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.E = t.CHARSETS[6] = {
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "^": "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS.Z = {
                                    "#": "",
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "{": "",
                                    "|": "",
                                    "}": ""
                                }, t.CHARSETS.H = t.CHARSETS[7] = {
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "^": "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }, t.CHARSETS["="] = {
                                    "#": "",
                                    "@": "",
                                    "[": "",
                                    "\\": "",
                                    "]": "",
                                    "^": "",
                                    _: "",
                                    "`": "",
                                    "{": "",
                                    "|": "",
                                    "}": "",
                                    "~": ""
                                }
                            },
                            2584: (e, t) => {
                                var i, s, r;
                                Object.defineProperty(t, "__esModule", {
                                        value: !0
                                    }), t.C1_ESCAPED = t.C1 = t.C0 = void 0,
                                    function(e) {
                                        e.NUL = "\0", e.SOH = "", e.STX = "", e.ETX = "", e.EOT = "", e.ENQ = "", e.ACK = "", e.BEL = "", e.BS = "\b", e.HT = "\t", e.LF = "\n", e.VT = "\v", e.FF = "\f", e.CR = "\r", e.SO = "", e.SI = "", e.DLE = "", e.DC1 = "", e.DC2 = "", e.DC3 = "", e.DC4 = "", e.NAK = "", e.SYN = "", e.ETB = "", e.CAN = "", e.EM = "", e.SUB = "", e.ESC = "", e.FS = "", e.GS = "", e.RS = "", e.US = "", e.SP = " ", e.DEL = ""
                                    }(i || (t.C0 = i = {})),
                                    function(e) {
                                        e.PAD = "", e.HOP = "", e.BPH = "", e.NBH = "", e.IND = "", e.NEL = "", e.SSA = "", e.ESA = "", e.HTS = "", e.HTJ = "", e.VTS = "", e.PLD = "", e.PLU = "", e.RI = "", e.SS2 = "", e.SS3 = "", e.DCS = "", e.PU1 = "", e.PU2 = "", e.STS = "", e.CCH = "", e.MW = "", e.SPA = "", e.EPA = "", e.SOS = "", e.SGCI = "", e.SCI = "", e.CSI = "", e.ST = "", e.OSC = "", e.PM = "", e.APC = ""
                                    }(s || (t.C1 = s = {})),
                                    function(e) {
                                        e.ST = `${i.ESC}\\`
                                    }(r || (t.C1_ESCAPED = r = {}))
                            },
                            7399: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.evaluateKeyboardEvent = void 0;
                                const s = i(2584),
                                    r = {
                                        48: ["0", ")"],
                                        49: ["1", "!"],
                                        50: ["2", "@"],
                                        51: ["3", "#"],
                                        52: ["4", "$"],
                                        53: ["5", "%"],
                                        54: ["6", "^"],
                                        55: ["7", "&"],
                                        56: ["8", "*"],
                                        57: ["9", "("],
                                        186: [";", ":"],
                                        187: ["=", "+"],
                                        188: [",", "<"],
                                        189: ["-", "_"],
                                        190: [".", ">"],
                                        191: ["/", "?"],
                                        192: ["`", "~"],
                                        219: ["[", "{"],
                                        220: ["\\", "|"],
                                        221: ["]", "}"],
                                        222: ["'", '"']
                                    };
                                t.evaluateKeyboardEvent = function(e, t, i, n) {
                                    const o = {
                                            type: 0,
                                            cancel: !1,
                                            key: void 0
                                        },
                                        a = (e.shiftKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.ctrlKey ? 4 : 0) | (e.metaKey ? 8 : 0);
                                    switch (e.keyCode) {
                                        case 0:
                                            "UIKeyInputUpArrow" === e.key ? o.key = t ? s.C0.ESC + "OA" : s.C0.ESC + "[A" : "UIKeyInputLeftArrow" === e.key ? o.key = t ? s.C0.ESC + "OD" : s.C0.ESC + "[D" : "UIKeyInputRightArrow" === e.key ? o.key = t ? s.C0.ESC + "OC" : s.C0.ESC + "[C" : "UIKeyInputDownArrow" === e.key && (o.key = t ? s.C0.ESC + "OB" : s.C0.ESC + "[B");
                                            break;
                                        case 8:
                                            o.key = e.ctrlKey ? "\b" : s.C0.DEL, e.altKey && (o.key = s.C0.ESC + o.key);
                                            break;
                                        case 9:
                                            if (e.shiftKey) {
                                                o.key = s.C0.ESC + "[Z";
                                                break
                                            }
                                            o.key = s.C0.HT, o.cancel = !0;
                                            break;
                                        case 13:
                                            o.key = e.altKey ? s.C0.ESC + s.C0.CR : s.C0.CR, o.cancel = !0;
                                            break;
                                        case 27:
                                            o.key = s.C0.ESC, e.altKey && (o.key = s.C0.ESC + s.C0.ESC), o.cancel = !0;
                                            break;
                                        case 37:
                                            if (e.metaKey) break;
                                            a ? (o.key = s.C0.ESC + "[1;" + (a + 1) + "D", o.key === s.C0.ESC + "[1;3D" && (o.key = s.C0.ESC + (i ? "b" : "[1;5D"))) : o.key = t ? s.C0.ESC + "OD" : s.C0.ESC + "[D";
                                            break;
                                        case 39:
                                            if (e.metaKey) break;
                                            a ? (o.key = s.C0.ESC + "[1;" + (a + 1) + "C", o.key === s.C0.ESC + "[1;3C" && (o.key = s.C0.ESC + (i ? "f" : "[1;5C"))) : o.key = t ? s.C0.ESC + "OC" : s.C0.ESC + "[C";
                                            break;
                                        case 38:
                                            if (e.metaKey) break;
                                            a ? (o.key = s.C0.ESC + "[1;" + (a + 1) + "A", i || o.key !== s.C0.ESC + "[1;3A" || (o.key = s.C0.ESC + "[1;5A")) : o.key = t ? s.C0.ESC + "OA" : s.C0.ESC + "[A";
                                            break;
                                        case 40:
                                            if (e.metaKey) break;
                                            a ? (o.key = s.C0.ESC + "[1;" + (a + 1) + "B", i || o.key !== s.C0.ESC + "[1;3B" || (o.key = s.C0.ESC + "[1;5B")) : o.key = t ? s.C0.ESC + "OB" : s.C0.ESC + "[B";
                                            break;
                                        case 45:
                                            e.shiftKey || e.ctrlKey || (o.key = s.C0.ESC + "[2~");
                                            break;
                                        case 46:
                                            o.key = a ? s.C0.ESC + "[3;" + (a + 1) + "~" : s.C0.ESC + "[3~";
                                            break;
                                        case 36:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "H" : t ? s.C0.ESC + "OH" : s.C0.ESC + "[H";
                                            break;
                                        case 35:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "F" : t ? s.C0.ESC + "OF" : s.C0.ESC + "[F";
                                            break;
                                        case 33:
                                            e.shiftKey ? o.type = 2 : e.ctrlKey ? o.key = s.C0.ESC + "[5;" + (a + 1) + "~" : o.key = s.C0.ESC + "[5~";
                                            break;
                                        case 34:
                                            e.shiftKey ? o.type = 3 : e.ctrlKey ? o.key = s.C0.ESC + "[6;" + (a + 1) + "~" : o.key = s.C0.ESC + "[6~";
                                            break;
                                        case 112:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "P" : s.C0.ESC + "OP";
                                            break;
                                        case 113:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "Q" : s.C0.ESC + "OQ";
                                            break;
                                        case 114:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "R" : s.C0.ESC + "OR";
                                            break;
                                        case 115:
                                            o.key = a ? s.C0.ESC + "[1;" + (a + 1) + "S" : s.C0.ESC + "OS";
                                            break;
                                        case 116:
                                            o.key = a ? s.C0.ESC + "[15;" + (a + 1) + "~" : s.C0.ESC + "[15~";
                                            break;
                                        case 117:
                                            o.key = a ? s.C0.ESC + "[17;" + (a + 1) + "~" : s.C0.ESC + "[17~";
                                            break;
                                        case 118:
                                            o.key = a ? s.C0.ESC + "[18;" + (a + 1) + "~" : s.C0.ESC + "[18~";
                                            break;
                                        case 119:
                                            o.key = a ? s.C0.ESC + "[19;" + (a + 1) + "~" : s.C0.ESC + "[19~";
                                            break;
                                        case 120:
                                            o.key = a ? s.C0.ESC + "[20;" + (a + 1) + "~" : s.C0.ESC + "[20~";
                                            break;
                                        case 121:
                                            o.key = a ? s.C0.ESC + "[21;" + (a + 1) + "~" : s.C0.ESC + "[21~";
                                            break;
                                        case 122:
                                            o.key = a ? s.C0.ESC + "[23;" + (a + 1) + "~" : s.C0.ESC + "[23~";
                                            break;
                                        case 123:
                                            o.key = a ? s.C0.ESC + "[24;" + (a + 1) + "~" : s.C0.ESC + "[24~";
                                            break;
                                        default:
                                            if (!e.ctrlKey || e.shiftKey || e.altKey || e.metaKey)
                                                if (i && !n || !e.altKey || e.metaKey) !i || e.altKey || e.ctrlKey || e.shiftKey || !e.metaKey ? e.key && !e.ctrlKey && !e.altKey && !e.metaKey && e.keyCode >= 48 && 1 === e.key.length ? o.key = e.key : e.key && e.ctrlKey && ("_" === e.key && (o.key = s.C0.US), "@" === e.key && (o.key = s.C0.NUL)) : 65 === e.keyCode && (o.type = 1);
                                                else {
                                                    const t = r[e.keyCode],
                                                        i = t?.[e.shiftKey ? 1 : 0];
                                                    if (i) o.key = s.C0.ESC + i;
                                                    else if (e.keyCode >= 65 && e.keyCode <= 90) {
                                                        const t = e.ctrlKey ? e.keyCode - 64 : e.keyCode + 32;
                                                        let i = String.fromCharCode(t);
                                                        e.shiftKey && (i = i.toUpperCase()), o.key = s.C0.ESC + i
                                                    } else if (32 === e.keyCode) o.key = s.C0.ESC + (e.ctrlKey ? s.C0.NUL : " ");
                                                    else if ("Dead" === e.key && e.code.startsWith("Key")) {
                                                        let t = e.code.slice(3, 4);
                                                        e.shiftKey || (t = t.toLowerCase()), o.key = s.C0.ESC + t, o.cancel = !0
                                                    }
                                                }
                                            else e.keyCode >= 65 && e.keyCode <= 90 ? o.key = String.fromCharCode(e.keyCode - 64) : 32 === e.keyCode ? o.key = s.C0.NUL : e.keyCode >= 51 && e.keyCode <= 55 ? o.key = String.fromCharCode(e.keyCode - 51 + 27) : 56 === e.keyCode ? o.key = s.C0.DEL : 219 === e.keyCode ? o.key = s.C0.ESC : 220 === e.keyCode ? o.key = s.C0.FS : 221 === e.keyCode && (o.key = s.C0.GS)
                                    }
                                    return o
                                }
                            },
                            482: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Utf8ToUtf32 = t.StringToUtf32 = t.utf32ToString = t.stringFromCodePoint = void 0, t.stringFromCodePoint = function(e) {
                                    return e > 65535 ? (e -= 65536, String.fromCharCode(55296 + (e >> 10)) + String.fromCharCode(e % 1024 + 56320)) : String.fromCharCode(e)
                                }, t.utf32ToString = function(e, t = 0, i = e.length) {
                                    let s = "";
                                    for (let r = t; r < i; ++r) {
                                        let t = e[r];
                                        t > 65535 ? (t -= 65536, s += String.fromCharCode(55296 + (t >> 10)) + String.fromCharCode(t % 1024 + 56320)) : s += String.fromCharCode(t)
                                    }
                                    return s
                                }, t.StringToUtf32 = class {
                                    constructor() {
                                        this._interim = 0
                                    }
                                    clear() {
                                        this._interim = 0
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s = 0,
                                            r = 0;
                                        if (this._interim) {
                                            const i = e.charCodeAt(r++);
                                            56320 <= i && i <= 57343 ? t[s++] = 1024 * (this._interim - 55296) + i - 56320 + 65536 : (t[s++] = this._interim, t[s++] = i), this._interim = 0
                                        }
                                        for (let n = r; n < i; ++n) {
                                            const r = e.charCodeAt(n);
                                            if (55296 <= r && r <= 56319) {
                                                if (++n >= i) return this._interim = r, s;
                                                const o = e.charCodeAt(n);
                                                56320 <= o && o <= 57343 ? t[s++] = 1024 * (r - 55296) + o - 56320 + 65536 : (t[s++] = r, t[s++] = o)
                                            } else 65279 !== r && (t[s++] = r)
                                        }
                                        return s
                                    }
                                }, t.Utf8ToUtf32 = class {
                                    constructor() {
                                        this.interim = new Uint8Array(3)
                                    }
                                    clear() {
                                        this.interim.fill(0)
                                    }
                                    decode(e, t) {
                                        const i = e.length;
                                        if (!i) return 0;
                                        let s, r, n, o, a = 0,
                                            h = 0,
                                            l = 0;
                                        if (this.interim[0]) {
                                            let s = !1,
                                                r = this.interim[0];
                                            r &= 192 == (224 & r) ? 31 : 224 == (240 & r) ? 15 : 7;
                                            let n, o = 0;
                                            for (;
                                                (n = 63 & this.interim[++o]) && o < 4;) r <<= 6, r |= n;
                                            const h = 192 == (224 & this.interim[0]) ? 2 : 224 == (240 & this.interim[0]) ? 3 : 4,
                                                c = h - o;
                                            for (; l < c;) {
                                                if (l >= i) return 0;
                                                if (n = e[l++], 128 != (192 & n)) {
                                                    l--, s = !0;
                                                    break
                                                }
                                                this.interim[o++] = n, r <<= 6, r |= 63 & n
                                            }
                                            s || (2 === h ? r < 128 ? l-- : t[a++] = r : 3 === h ? r < 2048 || r >= 55296 && r <= 57343 || 65279 === r || (t[a++] = r) : r < 65536 || r > 1114111 || (t[a++] = r)), this.interim.fill(0)
                                        }
                                        const c = i - 4;
                                        let d = l;
                                        for (; d < i;) {
                                            for (; !(!(d < c) || 128 & (s = e[d]) || 128 & (r = e[d + 1]) || 128 & (n = e[d + 2]) || 128 & (o = e[d + 3]));) t[a++] = s, t[a++] = r, t[a++] = n, t[a++] = o, d += 4;
                                            if (s = e[d++], s < 128) t[a++] = s;
                                            else if (192 == (224 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (31 & s) << 6 | 63 & r, h < 128) {
                                                    d--;
                                                    continue
                                                }
                                                t[a++] = h
                                            } else if (224 == (240 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (15 & s) << 12 | (63 & r) << 6 | 63 & n, h < 2048 || h >= 55296 && h <= 57343 || 65279 === h) continue;
                                                t[a++] = h
                                            } else if (240 == (248 & s)) {
                                                if (d >= i) return this.interim[0] = s, a;
                                                if (r = e[d++], 128 != (192 & r)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, a;
                                                if (n = e[d++], 128 != (192 & n)) {
                                                    d--;
                                                    continue
                                                }
                                                if (d >= i) return this.interim[0] = s, this.interim[1] = r, this.interim[2] = n, a;
                                                if (o = e[d++], 128 != (192 & o)) {
                                                    d--;
                                                    continue
                                                }
                                                if (h = (7 & s) << 18 | (63 & r) << 12 | (63 & n) << 6 | 63 & o, h < 65536 || h > 1114111) continue;
                                                t[a++] = h
                                            }
                                        }
                                        return a
                                    }
                                }
                            },
                            225: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeV6 = void 0;
                                const s = i(1480),
                                    r = [
                                        [768, 879],
                                        [1155, 1158],
                                        [1160, 1161],
                                        [1425, 1469],
                                        [1471, 1471],
                                        [1473, 1474],
                                        [1476, 1477],
                                        [1479, 1479],
                                        [1536, 1539],
                                        [1552, 1557],
                                        [1611, 1630],
                                        [1648, 1648],
                                        [1750, 1764],
                                        [1767, 1768],
                                        [1770, 1773],
                                        [1807, 1807],
                                        [1809, 1809],
                                        [1840, 1866],
                                        [1958, 1968],
                                        [2027, 2035],
                                        [2305, 2306],
                                        [2364, 2364],
                                        [2369, 2376],
                                        [2381, 2381],
                                        [2385, 2388],
                                        [2402, 2403],
                                        [2433, 2433],
                                        [2492, 2492],
                                        [2497, 2500],
                                        [2509, 2509],
                                        [2530, 2531],
                                        [2561, 2562],
                                        [2620, 2620],
                                        [2625, 2626],
                                        [2631, 2632],
                                        [2635, 2637],
                                        [2672, 2673],
                                        [2689, 2690],
                                        [2748, 2748],
                                        [2753, 2757],
                                        [2759, 2760],
                                        [2765, 2765],
                                        [2786, 2787],
                                        [2817, 2817],
                                        [2876, 2876],
                                        [2879, 2879],
                                        [2881, 2883],
                                        [2893, 2893],
                                        [2902, 2902],
                                        [2946, 2946],
                                        [3008, 3008],
                                        [3021, 3021],
                                        [3134, 3136],
                                        [3142, 3144],
                                        [3146, 3149],
                                        [3157, 3158],
                                        [3260, 3260],
                                        [3263, 3263],
                                        [3270, 3270],
                                        [3276, 3277],
                                        [3298, 3299],
                                        [3393, 3395],
                                        [3405, 3405],
                                        [3530, 3530],
                                        [3538, 3540],
                                        [3542, 3542],
                                        [3633, 3633],
                                        [3636, 3642],
                                        [3655, 3662],
                                        [3761, 3761],
                                        [3764, 3769],
                                        [3771, 3772],
                                        [3784, 3789],
                                        [3864, 3865],
                                        [3893, 3893],
                                        [3895, 3895],
                                        [3897, 3897],
                                        [3953, 3966],
                                        [3968, 3972],
                                        [3974, 3975],
                                        [3984, 3991],
                                        [3993, 4028],
                                        [4038, 4038],
                                        [4141, 4144],
                                        [4146, 4146],
                                        [4150, 4151],
                                        [4153, 4153],
                                        [4184, 4185],
                                        [4448, 4607],
                                        [4959, 4959],
                                        [5906, 5908],
                                        [5938, 5940],
                                        [5970, 5971],
                                        [6002, 6003],
                                        [6068, 6069],
                                        [6071, 6077],
                                        [6086, 6086],
                                        [6089, 6099],
                                        [6109, 6109],
                                        [6155, 6157],
                                        [6313, 6313],
                                        [6432, 6434],
                                        [6439, 6440],
                                        [6450, 6450],
                                        [6457, 6459],
                                        [6679, 6680],
                                        [6912, 6915],
                                        [6964, 6964],
                                        [6966, 6970],
                                        [6972, 6972],
                                        [6978, 6978],
                                        [7019, 7027],
                                        [7616, 7626],
                                        [7678, 7679],
                                        [8203, 8207],
                                        [8234, 8238],
                                        [8288, 8291],
                                        [8298, 8303],
                                        [8400, 8431],
                                        [12330, 12335],
                                        [12441, 12442],
                                        [43014, 43014],
                                        [43019, 43019],
                                        [43045, 43046],
                                        [64286, 64286],
                                        [65024, 65039],
                                        [65056, 65059],
                                        [65279, 65279],
                                        [65529, 65531]
                                    ],
                                    n = [
                                        [68097, 68099],
                                        [68101, 68102],
                                        [68108, 68111],
                                        [68152, 68154],
                                        [68159, 68159],
                                        [119143, 119145],
                                        [119155, 119170],
                                        [119173, 119179],
                                        [119210, 119213],
                                        [119362, 119364],
                                        [917505, 917505],
                                        [917536, 917631],
                                        [917760, 917999]
                                    ];
                                let o;
                                t.UnicodeV6 = class {
                                    constructor() {
                                        if (this.version = "6", !o) {
                                            o = new Uint8Array(65536), o.fill(1), o[0] = 0, o.fill(0, 1, 32), o.fill(0, 127, 160), o.fill(2, 4352, 4448), o[9001] = 2, o[9002] = 2, o.fill(2, 11904, 42192), o[12351] = 1, o.fill(2, 44032, 55204), o.fill(2, 63744, 64256), o.fill(2, 65040, 65050), o.fill(2, 65072, 65136), o.fill(2, 65280, 65377), o.fill(2, 65504, 65511);
                                            for (let e = 0; e < r.length; ++e) o.fill(0, r[e][0], r[e][1] + 1)
                                        }
                                    }
                                    wcwidth(e) {
                                        return e < 32 ? 0 : e < 127 ? 1 : e < 65536 ? o[e] : function(e, t) {
                                            let i, s = 0,
                                                r = t.length - 1;
                                            if (e < t[0][0] || e > t[r][1]) return !1;
                                            for (; r >= s;)
                                                if (i = s + r >> 1, e > t[i][1]) s = i + 1;
                                                else {
                                                    if (!(e < t[i][0])) return !0;
                                                    r = i - 1
                                                } return !1
                                        }(e, n) ? 0 : e >= 131072 && e <= 196605 || e >= 196608 && e <= 262141 ? 2 : 1
                                    }
                                    charProperties(e, t) {
                                        let i = this.wcwidth(e),
                                            r = 0 === i && 0 !== t;
                                        if (r) {
                                            const e = s.UnicodeService.extractWidth(t);
                                            0 === e ? r = !1 : e > i && (i = e)
                                        }
                                        return s.UnicodeService.createPropertyValue(0, i, r)
                                    }
                                }
                            },
                            5981: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.WriteBuffer = void 0;
                                const s = i(8460),
                                    r = i(844);
                                class n extends r.Disposable {
                                    constructor(e) {
                                        super(), this._action = e, this._writeBuffer = [], this._callbacks = [], this._pendingData = 0, this._bufferOffset = 0, this._isSyncWriting = !1, this._syncCalls = 0, this._didUserInput = !1, this._onWriteParsed = this.register(new s.EventEmitter), this.onWriteParsed = this._onWriteParsed.event
                                    }
                                    handleUserInput() {
                                        this._didUserInput = !0
                                    }
                                    writeSync(e, t) {
                                        if (void 0 !== t && this._syncCalls > t) return void(this._syncCalls = 0);
                                        if (this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(void 0), this._syncCalls++, this._isSyncWriting) return;
                                        let i;
                                        for (this._isSyncWriting = !0; i = this._writeBuffer.shift();) {
                                            this._action(i);
                                            const e = this._callbacks.shift();
                                            e && e()
                                        }
                                        this._pendingData = 0, this._bufferOffset = 2147483647, this._isSyncWriting = !1, this._syncCalls = 0
                                    }
                                    write(e, t) {
                                        if (this._pendingData > 5e7) throw new Error("write data discarded, use flow control to avoid losing data");
                                        if (!this._writeBuffer.length) {
                                            if (this._bufferOffset = 0, this._didUserInput) return this._didUserInput = !1, this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(t), void this._innerWrite();
                                            setTimeout((() => this._innerWrite()))
                                        }
                                        this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(t)
                                    }
                                    _innerWrite(e = 0, t = !0) {
                                        const i = e || Date.now();
                                        for (; this._writeBuffer.length > this._bufferOffset;) {
                                            const e = this._writeBuffer[this._bufferOffset],
                                                s = this._action(e, t);
                                            if (s) {
                                                const e = e => Date.now() - i >= 12 ? setTimeout((() => this._innerWrite(0, e))) : this._innerWrite(i, e);
                                                return void s.catch((e => (queueMicrotask((() => {
                                                    throw e
                                                })), Promise.resolve(!1)))).then(e)
                                            }
                                            const r = this._callbacks[this._bufferOffset];
                                            if (r && r(), this._bufferOffset++, this._pendingData -= e.length, Date.now() - i >= 12) break
                                        }
                                        this._writeBuffer.length > this._bufferOffset ? (this._bufferOffset > 50 && (this._writeBuffer = this._writeBuffer.slice(this._bufferOffset), this._callbacks = this._callbacks.slice(this._bufferOffset), this._bufferOffset = 0), setTimeout((() => this._innerWrite()))) : (this._writeBuffer.length = 0, this._callbacks.length = 0, this._pendingData = 0, this._bufferOffset = 0), this._onWriteParsed.fire()
                                    }
                                }
                                t.WriteBuffer = n
                            },
                            5941: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.toRgbString = t.parseColor = void 0;
                                const i = /^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,
                                    s = /^[\da-f]+$/;

                                function r(e, t) {
                                    const i = e.toString(16),
                                        s = i.length < 2 ? "0" + i : i;
                                    switch (t) {
                                        case 4:
                                            return i[0];
                                        case 8:
                                            return s;
                                        case 12:
                                            return (s + s).slice(0, 3);
                                        default:
                                            return s + s
                                    }
                                }
                                t.parseColor = function(e) {
                                    if (!e) return;
                                    let t = e.toLowerCase();
                                    if (0 === t.indexOf("rgb:")) {
                                        t = t.slice(4);
                                        const e = i.exec(t);
                                        if (e) {
                                            const t = e[1] ? 15 : e[4] ? 255 : e[7] ? 4095 : 65535;
                                            return [Math.round(parseInt(e[1] || e[4] || e[7] || e[10], 16) / t * 255), Math.round(parseInt(e[2] || e[5] || e[8] || e[11], 16) / t * 255), Math.round(parseInt(e[3] || e[6] || e[9] || e[12], 16) / t * 255)]
                                        }
                                    } else if (0 === t.indexOf("#") && (t = t.slice(1), s.exec(t) && [3, 6, 9, 12].includes(t.length))) {
                                        const e = t.length / 3,
                                            i = [0, 0, 0];
                                        for (let s = 0; s < 3; ++s) {
                                            const r = parseInt(t.slice(e * s, e * s + e), 16);
                                            i[s] = 1 === e ? r << 4 : 2 === e ? r : 3 === e ? r >> 4 : r >> 8
                                        }
                                        return i
                                    }
                                }, t.toRgbString = function(e, t = 16) {
                                    const [i, s, n] = e;
                                    return `rgb:${r(i, t)}/${r(s, t)}/${r(n, t)}`
                                }
                            },
                            5770: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.PAYLOAD_LIMIT = void 0, t.PAYLOAD_LIMIT = 1e7
                            },
                            6351: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DcsHandler = t.DcsParser = void 0;
                                const s = i(482),
                                    r = i(8742),
                                    n = i(5770),
                                    o = [];
                                t.DcsParser = class {
                                    constructor() {
                                        this._handlers = Object.create(null), this._active = o, this._ident = 0, this._handlerFb = () => {}, this._stack = {
                                            paused: !1,
                                            loopPosition: 0,
                                            fallThrough: !1
                                        }
                                    }
                                    dispose() {
                                        this._handlers = Object.create(null), this._handlerFb = () => {}, this._active = o
                                    }
                                    registerHandler(e, t) {
                                        void 0 === this._handlers[e] && (this._handlers[e] = []);
                                        const i = this._handlers[e];
                                        return i.push(t), {
                                            dispose: () => {
                                                const e = i.indexOf(t); - 1 !== e && i.splice(e, 1)
                                            }
                                        }
                                    }
                                    clearHandler(e) {
                                        this._handlers[e] && delete this._handlers[e]
                                    }
                                    setHandlerFallback(e) {
                                        this._handlerFb = e
                                    }
                                    reset() {
                                        if (this._active.length)
                                            for (let e = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; e >= 0; --e) this._active[e].unhook(!1);
                                        this._stack.paused = !1, this._active = o, this._ident = 0
                                    }
                                    hook(e, t) {
                                        if (this.reset(), this._ident = e, this._active = this._handlers[e] || o, this._active.length)
                                            for (let e = this._active.length - 1; e >= 0; e--) this._active[e].hook(t);
                                        else this._handlerFb(this._ident, "HOOK", t)
                                    }
                                    put(e, t, i) {
                                        if (this._active.length)
                                            for (let s = this._active.length - 1; s >= 0; s--) this._active[s].put(e, t, i);
                                        else this._handlerFb(this._ident, "PUT", (0, s.utf32ToString)(e, t, i))
                                    }
                                    unhook(e, t = !0) {
                                        if (this._active.length) {
                                            let i = !1,
                                                s = this._active.length - 1,
                                                r = !1;
                                            if (this._stack.paused && (s = this._stack.loopPosition - 1, i = t, r = this._stack.fallThrough, this._stack.paused = !1), !r && !1 === i) {
                                                for (; s >= 0 && (i = this._active[s].unhook(e), !0 !== i); s--)
                                                    if (i instanceof Promise) return this._stack.paused = !0, this._stack.loopPosition = s, this._stack.fallThrough = !1, i;
                                                s--
                                            }
                                            for (; s >= 0; s--)
                                                if (i = this._active[s].unhook(!1), i instanceof Promise) return this._stack.paused = !0, this._stack.loopPosition = s, this._stack.fallThrough = !0, i
                                        } else this._handlerFb(this._ident, "UNHOOK", e);
                                        this._active = o, this._ident = 0
                                    }
                                };
                                const a = new r.Params;
                                a.addParam(0), t.DcsHandler = class {
                                    constructor(e) {
                                        this._handler = e, this._data = "", this._params = a, this._hitLimit = !1
                                    }
                                    hook(e) {
                                        this._params = e.length > 1 || e.params[0] ? e.clone() : a, this._data = "", this._hitLimit = !1
                                    }
                                    put(e, t, i) {
                                        this._hitLimit || (this._data += (0, s.utf32ToString)(e, t, i), this._data.length > n.PAYLOAD_LIMIT && (this._data = "", this._hitLimit = !0))
                                    }
                                    unhook(e) {
                                        let t = !1;
                                        if (this._hitLimit) t = !1;
                                        else if (e && (t = this._handler(this._data, this._params), t instanceof Promise)) return t.then((e => (this._params = a, this._data = "", this._hitLimit = !1, e)));
                                        return this._params = a, this._data = "", this._hitLimit = !1, t
                                    }
                                }
                            },
                            2015: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.EscapeSequenceParser = t.VT500_TRANSITION_TABLE = t.TransitionTable = void 0;
                                const s = i(844),
                                    r = i(8742),
                                    n = i(6242),
                                    o = i(6351);
                                class a {
                                    constructor(e) {
                                        this.table = new Uint8Array(e)
                                    }
                                    setDefault(e, t) {
                                        this.table.fill(e << 4 | t)
                                    }
                                    add(e, t, i, s) {
                                        this.table[t << 8 | e] = i << 4 | s
                                    }
                                    addMany(e, t, i, s) {
                                        for (let r = 0; r < e.length; r++) this.table[t << 8 | e[r]] = i << 4 | s
                                    }
                                }
                                t.TransitionTable = a;
                                const h = 160;
                                t.VT500_TRANSITION_TABLE = function() {
                                    const e = new a(4095),
                                        t = Array.apply(null, Array(256)).map(((e, t) => t)),
                                        i = (e, i) => t.slice(e, i),
                                        s = i(32, 127),
                                        r = i(0, 24);
                                    r.push(25), r.push.apply(r, i(28, 32));
                                    const n = i(0, 14);
                                    let o;
                                    for (o in e.setDefault(1, 0), e.addMany(s, 0, 2, 0), n) e.addMany([24, 26, 153, 154], o, 3, 0), e.addMany(i(128, 144), o, 3, 0), e.addMany(i(144, 152), o, 3, 0), e.add(156, o, 0, 0), e.add(27, o, 11, 1), e.add(157, o, 4, 8), e.addMany([152, 158, 159], o, 0, 7), e.add(155, o, 11, 3), e.add(144, o, 11, 9);
                                    return e.addMany(r, 0, 3, 0), e.addMany(r, 1, 3, 1), e.add(127, 1, 0, 1), e.addMany(r, 8, 0, 8), e.addMany(r, 3, 3, 3), e.add(127, 3, 0, 3), e.addMany(r, 4, 3, 4), e.add(127, 4, 0, 4), e.addMany(r, 6, 3, 6), e.addMany(r, 5, 3, 5), e.add(127, 5, 0, 5), e.addMany(r, 2, 3, 2), e.add(127, 2, 0, 2), e.add(93, 1, 4, 8), e.addMany(s, 8, 5, 8), e.add(127, 8, 5, 8), e.addMany([156, 27, 24, 26, 7], 8, 6, 0), e.addMany(i(28, 32), 8, 0, 8), e.addMany([88, 94, 95], 1, 0, 7), e.addMany(s, 7, 0, 7), e.addMany(r, 7, 0, 7), e.add(156, 7, 0, 0), e.add(127, 7, 0, 7), e.add(91, 1, 11, 3), e.addMany(i(64, 127), 3, 7, 0), e.addMany(i(48, 60), 3, 8, 4), e.addMany([60, 61, 62, 63], 3, 9, 4), e.addMany(i(48, 60), 4, 8, 4), e.addMany(i(64, 127), 4, 7, 0), e.addMany([60, 61, 62, 63], 4, 0, 6), e.addMany(i(32, 64), 6, 0, 6), e.add(127, 6, 0, 6), e.addMany(i(64, 127), 6, 0, 0), e.addMany(i(32, 48), 3, 9, 5), e.addMany(i(32, 48), 5, 9, 5), e.addMany(i(48, 64), 5, 0, 6), e.addMany(i(64, 127), 5, 7, 0), e.addMany(i(32, 48), 4, 9, 5), e.addMany(i(32, 48), 1, 9, 2), e.addMany(i(32, 48), 2, 9, 2), e.addMany(i(48, 127), 2, 10, 0), e.addMany(i(48, 80), 1, 10, 0), e.addMany(i(81, 88), 1, 10, 0), e.addMany([89, 90, 92], 1, 10, 0), e.addMany(i(96, 127), 1, 10, 0), e.add(80, 1, 11, 9), e.addMany(r, 9, 0, 9), e.add(127, 9, 0, 9), e.addMany(i(28, 32), 9, 0, 9), e.addMany(i(32, 48), 9, 9, 12), e.addMany(i(48, 60), 9, 8, 10), e.addMany([60, 61, 62, 63], 9, 9, 10), e.addMany(r, 11, 0, 11), e.addMany(i(32, 128), 11, 0, 11), e.addMany(i(28, 32), 11, 0, 11), e.addMany(r, 10, 0, 10), e.add(127, 10, 0, 10), e.addMany(i(28, 32), 10, 0, 10), e.addMany(i(48, 60), 10, 8, 10), e.addMany([60, 61, 62, 63], 10, 0, 11), e.addMany(i(32, 48), 10, 9, 12), e.addMany(r, 12, 0, 12), e.add(127, 12, 0, 12), e.addMany(i(28, 32), 12, 0, 12), e.addMany(i(32, 48), 12, 9, 12), e.addMany(i(48, 64), 12, 0, 11), e.addMany(i(64, 127), 12, 12, 13), e.addMany(i(64, 127), 10, 12, 13), e.addMany(i(64, 127), 9, 12, 13), e.addMany(r, 13, 13, 13), e.addMany(s, 13, 13, 13), e.add(127, 13, 0, 13), e.addMany([27, 156, 24, 26], 13, 14, 0), e.add(h, 0, 2, 0), e.add(h, 8, 5, 8), e.add(h, 6, 0, 6), e.add(h, 11, 0, 11), e.add(h, 13, 13, 13), e
                                }();
                                class l extends s.Disposable {
                                    constructor(e = t.VT500_TRANSITION_TABLE) {
                                        super(), this._transitions = e, this._parseStack = {
                                            state: 0,
                                            handlers: [],
                                            handlerPos: 0,
                                            transition: 0,
                                            chunkPos: 0
                                        }, this.initialState = 0, this.currentState = this.initialState, this._params = new r.Params, this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, this._printHandlerFb = (e, t, i) => {}, this._executeHandlerFb = e => {}, this._csiHandlerFb = (e, t) => {}, this._escHandlerFb = e => {}, this._errorHandlerFb = e => e, this._printHandler = this._printHandlerFb, this._executeHandlers = Object.create(null), this._csiHandlers = Object.create(null), this._escHandlers = Object.create(null), this.register((0, s.toDisposable)((() => {
                                            this._csiHandlers = Object.create(null), this._executeHandlers = Object.create(null), this._escHandlers = Object.create(null)
                                        }))), this._oscParser = this.register(new n.OscParser), this._dcsParser = this.register(new o.DcsParser), this._errorHandler = this._errorHandlerFb, this.registerEscHandler({
                                            final: "\\"
                                        }, (() => !0))
                                    }
                                    _identifier(e, t = [64, 126]) {
                                        let i = 0;
                                        if (e.prefix) {
                                            if (e.prefix.length > 1) throw new Error("only one byte as prefix supported");
                                            if (i = e.prefix.charCodeAt(0), i && 60 > i || i > 63) throw new Error("prefix must be in range 0x3c .. 0x3f")
                                        }
                                        if (e.intermediates) {
                                            if (e.intermediates.length > 2) throw new Error("only two bytes as intermediates are supported");
                                            for (let t = 0; t < e.intermediates.length; ++t) {
                                                const s = e.intermediates.charCodeAt(t);
                                                if (32 > s || s > 47) throw new Error("intermediate must be in range 0x20 .. 0x2f");
                                                i <<= 8, i |= s
                                            }
                                        }
                                        if (1 !== e.final.length) throw new Error("final must be a single byte");
                                        const s = e.final.charCodeAt(0);
                                        if (t[0] > s || s > t[1]) throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);
                                        return i <<= 8, i |= s, i
                                    }
                                    identToString(e) {
                                        const t = [];
                                        for (; e;) t.push(String.fromCharCode(255 & e)), e >>= 8;
                                        return t.reverse().join("")
                                    }
                                    setPrintHandler(e) {
                                        this._printHandler = e
                                    }
                                    clearPrintHandler() {
                                        this._printHandler = this._printHandlerFb
                                    }
                                    registerEscHandler(e, t) {
                                        const i = this._identifier(e, [48, 126]);
                                        void 0 === this._escHandlers[i] && (this._escHandlers[i] = []);
                                        const s = this._escHandlers[i];
                                        return s.push(t), {
                                            dispose: () => {
                                                const e = s.indexOf(t); - 1 !== e && s.splice(e, 1)
                                            }
                                        }
                                    }
                                    clearEscHandler(e) {
                                        this._escHandlers[this._identifier(e, [48, 126])] && delete this._escHandlers[this._identifier(e, [48, 126])]
                                    }
                                    setEscHandlerFallback(e) {
                                        this._escHandlerFb = e
                                    }
                                    setExecuteHandler(e, t) {
                                        this._executeHandlers[e.charCodeAt(0)] = t
                                    }
                                    clearExecuteHandler(e) {
                                        this._executeHandlers[e.charCodeAt(0)] && delete this._executeHandlers[e.charCodeAt(0)]
                                    }
                                    setExecuteHandlerFallback(e) {
                                        this._executeHandlerFb = e
                                    }
                                    registerCsiHandler(e, t) {
                                        const i = this._identifier(e);
                                        void 0 === this._csiHandlers[i] && (this._csiHandlers[i] = []);
                                        const s = this._csiHandlers[i];
                                        return s.push(t), {
                                            dispose: () => {
                                                const e = s.indexOf(t); - 1 !== e && s.splice(e, 1)
                                            }
                                        }
                                    }
                                    clearCsiHandler(e) {
                                        this._csiHandlers[this._identifier(e)] && delete this._csiHandlers[this._identifier(e)]
                                    }
                                    setCsiHandlerFallback(e) {
                                        this._csiHandlerFb = e
                                    }
                                    registerDcsHandler(e, t) {
                                        return this._dcsParser.registerHandler(this._identifier(e), t)
                                    }
                                    clearDcsHandler(e) {
                                        this._dcsParser.clearHandler(this._identifier(e))
                                    }
                                    setDcsHandlerFallback(e) {
                                        this._dcsParser.setHandlerFallback(e)
                                    }
                                    registerOscHandler(e, t) {
                                        return this._oscParser.registerHandler(e, t)
                                    }
                                    clearOscHandler(e) {
                                        this._oscParser.clearHandler(e)
                                    }
                                    setOscHandlerFallback(e) {
                                        this._oscParser.setHandlerFallback(e)
                                    }
                                    setErrorHandler(e) {
                                        this._errorHandler = e
                                    }
                                    clearErrorHandler() {
                                        this._errorHandler = this._errorHandlerFb
                                    }
                                    reset() {
                                        this.currentState = this.initialState, this._oscParser.reset(), this._dcsParser.reset(), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, 0 !== this._parseStack.state && (this._parseStack.state = 2, this._parseStack.handlers = [])
                                    }
                                    _preserveStack(e, t, i, s, r) {
                                        this._parseStack.state = e, this._parseStack.handlers = t, this._parseStack.handlerPos = i, this._parseStack.transition = s, this._parseStack.chunkPos = r
                                    }
                                    parse(e, t, i) {
                                        let s, r = 0,
                                            n = 0,
                                            o = 0;
                                        if (this._parseStack.state)
                                            if (2 === this._parseStack.state) this._parseStack.state = 0, o = this._parseStack.chunkPos + 1;
                                            else {
                                                if (void 0 === i || 1 === this._parseStack.state) throw this._parseStack.state = 1, new Error("improper continuation due to previous async handler, giving up parsing");
                                                const t = this._parseStack.handlers;
                                                let n = this._parseStack.handlerPos - 1;
                                                switch (this._parseStack.state) {
                                                    case 3:
                                                        if (!1 === i && n > -1)
                                                            for (; n >= 0 && (s = t[n](this._params), !0 !== s); n--)
                                                                if (s instanceof Promise) return this._parseStack.handlerPos = n, s;
                                                        this._parseStack.handlers = [];
                                                        break;
                                                    case 4:
                                                        if (!1 === i && n > -1)
                                                            for (; n >= 0 && (s = t[n](), !0 !== s); n--)
                                                                if (s instanceof Promise) return this._parseStack.handlerPos = n, s;
                                                        this._parseStack.handlers = [];
                                                        break;
                                                    case 6:
                                                        if (r = e[this._parseStack.chunkPos], s = this._dcsParser.unhook(24 !== r && 26 !== r, i), s) return s;
                                                        27 === r && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0;
                                                        break;
                                                    case 5:
                                                        if (r = e[this._parseStack.chunkPos], s = this._oscParser.end(24 !== r && 26 !== r, i), s) return s;
                                                        27 === r && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0
                                                }
                                                this._parseStack.state = 0, o = this._parseStack.chunkPos + 1, this.precedingJoinState = 0, this.currentState = 15 & this._parseStack.transition
                                            } for (let i = o; i < t; ++i) {
                                            switch (r = e[i], n = this._transitions.table[this.currentState << 8 | (r < 160 ? r : h)], n >> 4) {
                                                case 2:
                                                    for (let s = i + 1;; ++s) {
                                                        if (s >= t || (r = e[s]) < 32 || r > 126 && r < h) {
                                                            this._printHandler(e, i, s), i = s - 1;
                                                            break
                                                        }
                                                        if (++s >= t || (r = e[s]) < 32 || r > 126 && r < h) {
                                                            this._printHandler(e, i, s), i = s - 1;
                                                            break
                                                        }
                                                        if (++s >= t || (r = e[s]) < 32 || r > 126 && r < h) {
                                                            this._printHandler(e, i, s), i = s - 1;
                                                            break
                                                        }
                                                        if (++s >= t || (r = e[s]) < 32 || r > 126 && r < h) {
                                                            this._printHandler(e, i, s), i = s - 1;
                                                            break
                                                        }
                                                    }
                                                    break;
                                                case 3:
                                                    this._executeHandlers[r] ? this._executeHandlers[r]() : this._executeHandlerFb(r), this.precedingJoinState = 0;
                                                    break;
                                                case 0:
                                                    break;
                                                case 1:
                                                    if (this._errorHandler({
                                                            position: i,
                                                            code: r,
                                                            currentState: this.currentState,
                                                            collect: this._collect,
                                                            params: this._params,
                                                            abort: !1
                                                        }).abort) return;
                                                    break;
                                                case 7:
                                                    const o = this._csiHandlers[this._collect << 8 | r];
                                                    let a = o ? o.length - 1 : -1;
                                                    for (; a >= 0 && (s = o[a](this._params), !0 !== s); a--)
                                                        if (s instanceof Promise) return this._preserveStack(3, o, a, n, i), s;
                                                    a < 0 && this._csiHandlerFb(this._collect << 8 | r, this._params), this.precedingJoinState = 0;
                                                    break;
                                                case 8:
                                                    do {
                                                        switch (r) {
                                                            case 59:
                                                                this._params.addParam(0);
                                                                break;
                                                            case 58:
                                                                this._params.addSubParam(-1);
                                                                break;
                                                            default:
                                                                this._params.addDigit(r - 48)
                                                        }
                                                    } while (++i < t && (r = e[i]) > 47 && r < 60);
                                                    i--;
                                                    break;
                                                case 9:
                                                    this._collect <<= 8, this._collect |= r;
                                                    break;
                                                case 10:
                                                    const l = this._escHandlers[this._collect << 8 | r];
                                                    let c = l ? l.length - 1 : -1;
                                                    for (; c >= 0 && (s = l[c](), !0 !== s); c--)
                                                        if (s instanceof Promise) return this._preserveStack(4, l, c, n, i), s;
                                                    c < 0 && this._escHandlerFb(this._collect << 8 | r), this.precedingJoinState = 0;
                                                    break;
                                                case 11:
                                                    this._params.reset(), this._params.addParam(0), this._collect = 0;
                                                    break;
                                                case 12:
                                                    this._dcsParser.hook(this._collect << 8 | r, this._params);
                                                    break;
                                                case 13:
                                                    for (let s = i + 1;; ++s)
                                                        if (s >= t || 24 === (r = e[s]) || 26 === r || 27 === r || r > 127 && r < h) {
                                                            this._dcsParser.put(e, i, s), i = s - 1;
                                                            break
                                                        } break;
                                                case 14:
                                                    if (s = this._dcsParser.unhook(24 !== r && 26 !== r), s) return this._preserveStack(6, [], 0, n, i), s;
                                                    27 === r && (n |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0;
                                                    break;
                                                case 4:
                                                    this._oscParser.start();
                                                    break;
                                                case 5:
                                                    for (let s = i + 1;; s++)
                                                        if (s >= t || (r = e[s]) < 32 || r > 127 && r < h) {
                                                            this._oscParser.put(e, i, s), i = s - 1;
                                                            break
                                                        } break;
                                                case 6:
                                                    if (s = this._oscParser.end(24 !== r && 26 !== r), s) return this._preserveStack(5, [], 0, n, i), s;
                                                    27 === r && (n |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0
                                            }
                                            this.currentState = 15 & n
                                        }
                                    }
                                }
                                t.EscapeSequenceParser = l
                            },
                            6242: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.OscHandler = t.OscParser = void 0;
                                const s = i(5770),
                                    r = i(482),
                                    n = [];
                                t.OscParser = class {
                                    constructor() {
                                        this._state = 0, this._active = n, this._id = -1, this._handlers = Object.create(null), this._handlerFb = () => {}, this._stack = {
                                            paused: !1,
                                            loopPosition: 0,
                                            fallThrough: !1
                                        }
                                    }
                                    registerHandler(e, t) {
                                        void 0 === this._handlers[e] && (this._handlers[e] = []);
                                        const i = this._handlers[e];
                                        return i.push(t), {
                                            dispose: () => {
                                                const e = i.indexOf(t); - 1 !== e && i.splice(e, 1)
                                            }
                                        }
                                    }
                                    clearHandler(e) {
                                        this._handlers[e] && delete this._handlers[e]
                                    }
                                    setHandlerFallback(e) {
                                        this._handlerFb = e
                                    }
                                    dispose() {
                                        this._handlers = Object.create(null), this._handlerFb = () => {}, this._active = n
                                    }
                                    reset() {
                                        if (2 === this._state)
                                            for (let e = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; e >= 0; --e) this._active[e].end(!1);
                                        this._stack.paused = !1, this._active = n, this._id = -1, this._state = 0
                                    }
                                    _start() {
                                        if (this._active = this._handlers[this._id] || n, this._active.length)
                                            for (let e = this._active.length - 1; e >= 0; e--) this._active[e].start();
                                        else this._handlerFb(this._id, "START")
                                    }
                                    _put(e, t, i) {
                                        if (this._active.length)
                                            for (let s = this._active.length - 1; s >= 0; s--) this._active[s].put(e, t, i);
                                        else this._handlerFb(this._id, "PUT", (0, r.utf32ToString)(e, t, i))
                                    }
                                    start() {
                                        this.reset(), this._state = 1
                                    }
                                    put(e, t, i) {
                                        if (3 !== this._state) {
                                            if (1 === this._state)
                                                for (; t < i;) {
                                                    const i = e[t++];
                                                    if (59 === i) {
                                                        this._state = 2, this._start();
                                                        break
                                                    }
                                                    if (i < 48 || 57 < i) return void(this._state = 3); - 1 === this._id && (this._id = 0), this._id = 10 * this._id + i - 48
                                                }
                                            2 === this._state && i - t > 0 && this._put(e, t, i)
                                        }
                                    }
                                    end(e, t = !0) {
                                        if (0 !== this._state) {
                                            if (3 !== this._state)
                                                if (1 === this._state && this._start(), this._active.length) {
                                                    let i = !1,
                                                        s = this._active.length - 1,
                                                        r = !1;
                                                    if (this._stack.paused && (s = this._stack.loopPosition - 1, i = t, r = this._stack.fallThrough, this._stack.paused = !1), !r && !1 === i) {
                                                        for (; s >= 0 && (i = this._active[s].end(e), !0 !== i); s--)
                                                            if (i instanceof Promise) return this._stack.paused = !0, this._stack.loopPosition = s, this._stack.fallThrough = !1, i;
                                                        s--
                                                    }
                                                    for (; s >= 0; s--)
                                                        if (i = this._active[s].end(!1), i instanceof Promise) return this._stack.paused = !0, this._stack.loopPosition = s, this._stack.fallThrough = !0, i
                                                } else this._handlerFb(this._id, "END", e);
                                            this._active = n, this._id = -1, this._state = 0
                                        }
                                    }
                                }, t.OscHandler = class {
                                    constructor(e) {
                                        this._handler = e, this._data = "", this._hitLimit = !1
                                    }
                                    start() {
                                        this._data = "", this._hitLimit = !1
                                    }
                                    put(e, t, i) {
                                        this._hitLimit || (this._data += (0, r.utf32ToString)(e, t, i), this._data.length > s.PAYLOAD_LIMIT && (this._data = "", this._hitLimit = !0))
                                    }
                                    end(e) {
                                        let t = !1;
                                        if (this._hitLimit) t = !1;
                                        else if (e && (t = this._handler(this._data), t instanceof Promise)) return t.then((e => (this._data = "", this._hitLimit = !1, e)));
                                        return this._data = "", this._hitLimit = !1, t
                                    }
                                }
                            },
                            8742: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.Params = void 0;
                                const i = 2147483647;
                                class s {
                                    static fromArray(e) {
                                        const t = new s;
                                        if (!e.length) return t;
                                        for (let i = Array.isArray(e[0]) ? 1 : 0; i < e.length; ++i) {
                                            const s = e[i];
                                            if (Array.isArray(s))
                                                for (let e = 0; e < s.length; ++e) t.addSubParam(s[e]);
                                            else t.addParam(s)
                                        }
                                        return t
                                    }
                                    constructor(e = 32, t = 32) {
                                        if (this.maxLength = e, this.maxSubParamsLength = t, t > 256) throw new Error("maxSubParamsLength must not be greater than 256");
                                        this.params = new Int32Array(e), this.length = 0, this._subParams = new Int32Array(t), this._subParamsLength = 0, this._subParamsIdx = new Uint16Array(e), this._rejectDigits = !1, this._rejectSubDigits = !1, this._digitIsSub = !1
                                    }
                                    clone() {
                                        const e = new s(this.maxLength, this.maxSubParamsLength);
                                        return e.params.set(this.params), e.length = this.length, e._subParams.set(this._subParams), e._subParamsLength = this._subParamsLength, e._subParamsIdx.set(this._subParamsIdx), e._rejectDigits = this._rejectDigits, e._rejectSubDigits = this._rejectSubDigits, e._digitIsSub = this._digitIsSub, e
                                    }
                                    toArray() {
                                        const e = [];
                                        for (let t = 0; t < this.length; ++t) {
                                            e.push(this.params[t]);
                                            const i = this._subParamsIdx[t] >> 8,
                                                s = 255 & this._subParamsIdx[t];
                                            s - i > 0 && e.push(Array.prototype.slice.call(this._subParams, i, s))
                                        }
                                        return e
                                    }
                                    reset() {
                                        this.length = 0, this._subParamsLength = 0, this._rejectDigits = !1, this._rejectSubDigits = !1, this._digitIsSub = !1
                                    }
                                    addParam(e) {
                                        if (this._digitIsSub = !1, this.length >= this.maxLength) this._rejectDigits = !0;
                                        else {
                                            if (e < -1) throw new Error("values lesser than -1 are not allowed");
                                            this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength, this.params[this.length++] = e > i ? i : e
                                        }
                                    }
                                    addSubParam(e) {
                                        if (this._digitIsSub = !0, this.length)
                                            if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) this._rejectSubDigits = !0;
                                            else {
                                                if (e < -1) throw new Error("values lesser than -1 are not allowed");
                                                this._subParams[this._subParamsLength++] = e > i ? i : e, this._subParamsIdx[this.length - 1]++
                                            }
                                    }
                                    hasSubParams(e) {
                                        return (255 & this._subParamsIdx[e]) - (this._subParamsIdx[e] >> 8) > 0
                                    }
                                    getSubParams(e) {
                                        const t = this._subParamsIdx[e] >> 8,
                                            i = 255 & this._subParamsIdx[e];
                                        return i - t > 0 ? this._subParams.subarray(t, i) : null
                                    }
                                    getSubParamsAll() {
                                        const e = {};
                                        for (let t = 0; t < this.length; ++t) {
                                            const i = this._subParamsIdx[t] >> 8,
                                                s = 255 & this._subParamsIdx[t];
                                            s - i > 0 && (e[t] = this._subParams.slice(i, s))
                                        }
                                        return e
                                    }
                                    addDigit(e) {
                                        let t;
                                        if (this._rejectDigits || !(t = this._digitIsSub ? this._subParamsLength : this.length) || this._digitIsSub && this._rejectSubDigits) return;
                                        const s = this._digitIsSub ? this._subParams : this.params,
                                            r = s[t - 1];
                                        s[t - 1] = ~r ? Math.min(10 * r + e, i) : e
                                    }
                                }
                                t.Params = s
                            },
                            5741: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.AddonManager = void 0, t.AddonManager = class {
                                    constructor() {
                                        this._addons = []
                                    }
                                    dispose() {
                                        for (let e = this._addons.length - 1; e >= 0; e--) this._addons[e].instance.dispose()
                                    }
                                    loadAddon(e, t) {
                                        const i = {
                                            instance: t,
                                            dispose: t.dispose,
                                            isDisposed: !1
                                        };
                                        this._addons.push(i), t.dispose = () => this._wrappedAddonDispose(i), t.activate(e)
                                    }
                                    _wrappedAddonDispose(e) {
                                        if (e.isDisposed) return;
                                        let t = -1;
                                        for (let i = 0; i < this._addons.length; i++)
                                            if (this._addons[i] === e) {
                                                t = i;
                                                break
                                            } if (-1 === t) throw new Error("Could not dispose an addon that has not been loaded");
                                        e.isDisposed = !0, e.dispose.apply(e.instance), this._addons.splice(t, 1)
                                    }
                                }
                            },
                            8771: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferApiView = void 0;
                                const s = i(3785),
                                    r = i(511);
                                t.BufferApiView = class {
                                    constructor(e, t) {
                                        this._buffer = e, this.type = t
                                    }
                                    init(e) {
                                        return this._buffer = e, this
                                    }
                                    get cursorY() {
                                        return this._buffer.y
                                    }
                                    get cursorX() {
                                        return this._buffer.x
                                    }
                                    get viewportY() {
                                        return this._buffer.ydisp
                                    }
                                    get baseY() {
                                        return this._buffer.ybase
                                    }
                                    get length() {
                                        return this._buffer.lines.length
                                    }
                                    getLine(e) {
                                        const t = this._buffer.lines.get(e);
                                        if (t) return new s.BufferLineApiView(t)
                                    }
                                    getNullCell() {
                                        return new r.CellData
                                    }
                                }
                            },
                            3785: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferLineApiView = void 0;
                                const s = i(511);
                                t.BufferLineApiView = class {
                                    constructor(e) {
                                        this._line = e
                                    }
                                    get isWrapped() {
                                        return this._line.isWrapped
                                    }
                                    get length() {
                                        return this._line.length
                                    }
                                    getCell(e, t) {
                                        if (!(e < 0 || e >= this._line.length)) return t ? (this._line.loadCell(e, t), t) : this._line.loadCell(e, new s.CellData)
                                    }
                                    translateToString(e, t, i) {
                                        return this._line.translateToString(e, t, i)
                                    }
                                }
                            },
                            8285: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferNamespaceApi = void 0;
                                const s = i(8771),
                                    r = i(8460),
                                    n = i(844);
                                class o extends n.Disposable {
                                    constructor(e) {
                                        super(), this._core = e, this._onBufferChange = this.register(new r.EventEmitter), this.onBufferChange = this._onBufferChange.event, this._normal = new s.BufferApiView(this._core.buffers.normal, "normal"), this._alternate = new s.BufferApiView(this._core.buffers.alt, "alternate"), this._core.buffers.onBufferActivate((() => this._onBufferChange.fire(this.active)))
                                    }
                                    get active() {
                                        if (this._core.buffers.active === this._core.buffers.normal) return this.normal;
                                        if (this._core.buffers.active === this._core.buffers.alt) return this.alternate;
                                        throw new Error("Active buffer is neither normal nor alternate")
                                    }
                                    get normal() {
                                        return this._normal.init(this._core.buffers.normal)
                                    }
                                    get alternate() {
                                        return this._alternate.init(this._core.buffers.alt)
                                    }
                                }
                                t.BufferNamespaceApi = o
                            },
                            7975: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.ParserApi = void 0, t.ParserApi = class {
                                    constructor(e) {
                                        this._core = e
                                    }
                                    registerCsiHandler(e, t) {
                                        return this._core.registerCsiHandler(e, (e => t(e.toArray())))
                                    }
                                    addCsiHandler(e, t) {
                                        return this.registerCsiHandler(e, t)
                                    }
                                    registerDcsHandler(e, t) {
                                        return this._core.registerDcsHandler(e, ((e, i) => t(e, i.toArray())))
                                    }
                                    addDcsHandler(e, t) {
                                        return this.registerDcsHandler(e, t)
                                    }
                                    registerEscHandler(e, t) {
                                        return this._core.registerEscHandler(e, t)
                                    }
                                    addEscHandler(e, t) {
                                        return this.registerEscHandler(e, t)
                                    }
                                    registerOscHandler(e, t) {
                                        return this._core.registerOscHandler(e, t)
                                    }
                                    addOscHandler(e, t) {
                                        return this.registerOscHandler(e, t)
                                    }
                                }
                            },
                            7090: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeApi = void 0, t.UnicodeApi = class {
                                    constructor(e) {
                                        this._core = e
                                    }
                                    register(e) {
                                        this._core.unicodeService.register(e)
                                    }
                                    get versions() {
                                        return this._core.unicodeService.versions
                                    }
                                    get activeVersion() {
                                        return this._core.unicodeService.activeVersion
                                    }
                                    set activeVersion(e) {
                                        this._core.unicodeService.activeVersion = e
                                    }
                                }
                            },
                            744: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.BufferService = t.MINIMUM_ROWS = t.MINIMUM_COLS = void 0;
                                const n = i(8460),
                                    o = i(844),
                                    a = i(5295),
                                    h = i(2585);
                                t.MINIMUM_COLS = 2, t.MINIMUM_ROWS = 1;
                                let l = t.BufferService = class extends o.Disposable {
                                    get buffer() {
                                        return this.buffers.active
                                    }
                                    constructor(e) {
                                        super(), this.isUserScrolling = !1, this._onResize = this.register(new n.EventEmitter), this.onResize = this._onResize.event, this._onScroll = this.register(new n.EventEmitter), this.onScroll = this._onScroll.event, this.cols = Math.max(e.rawOptions.cols || 0, t.MINIMUM_COLS), this.rows = Math.max(e.rawOptions.rows || 0, t.MINIMUM_ROWS), this.buffers = this.register(new a.BufferSet(e, this))
                                    }
                                    resize(e, t) {
                                        this.cols = e, this.rows = t, this.buffers.resize(e, t), this._onResize.fire({
                                            cols: e,
                                            rows: t
                                        })
                                    }
                                    reset() {
                                        this.buffers.reset(), this.isUserScrolling = !1
                                    }
                                    scroll(e, t = !1) {
                                        const i = this.buffer;
                                        let s;
                                        s = this._cachedBlankLine, s && s.length === this.cols && s.getFg(0) === e.fg && s.getBg(0) === e.bg || (s = i.getBlankLine(e, t), this._cachedBlankLine = s), s.isWrapped = t;
                                        const r = i.ybase + i.scrollTop,
                                            n = i.ybase + i.scrollBottom;
                                        if (0 === i.scrollTop) {
                                            const e = i.lines.isFull;
                                            n === i.lines.length - 1 ? e ? i.lines.recycle().copyFrom(s) : i.lines.push(s.clone()) : i.lines.splice(n + 1, 0, s.clone()), e ? this.isUserScrolling && (i.ydisp = Math.max(i.ydisp - 1, 0)) : (i.ybase++, this.isUserScrolling || i.ydisp++)
                                        } else {
                                            const e = n - r + 1;
                                            i.lines.shiftElements(r + 1, e - 1, -1), i.lines.set(n, s.clone())
                                        }
                                        this.isUserScrolling || (i.ydisp = i.ybase), this._onScroll.fire(i.ydisp)
                                    }
                                    scrollLines(e, t, i) {
                                        const s = this.buffer;
                                        if (e < 0) {
                                            if (0 === s.ydisp) return;
                                            this.isUserScrolling = !0
                                        } else e + s.ydisp >= s.ybase && (this.isUserScrolling = !1);
                                        const r = s.ydisp;
                                        s.ydisp = Math.max(Math.min(s.ydisp + e, s.ybase), 0), r !== s.ydisp && (t || this._onScroll.fire(s.ydisp))
                                    }
                                };
                                t.BufferService = l = s([r(0, h.IOptionsService)], l)
                            },
                            7994: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CharsetService = void 0, t.CharsetService = class {
                                    constructor() {
                                        this.glevel = 0, this._charsets = []
                                    }
                                    reset() {
                                        this.charset = void 0, this._charsets = [], this.glevel = 0
                                    }
                                    setgLevel(e) {
                                        this.glevel = e, this.charset = this._charsets[e]
                                    }
                                    setgCharset(e, t) {
                                        this._charsets[e] = t, this.glevel === e && (this.charset = t)
                                    }
                                }
                            },
                            1753: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CoreMouseService = void 0;
                                const n = i(2585),
                                    o = i(8460),
                                    a = i(844),
                                    h = {
                                        NONE: {
                                            events: 0,
                                            restrict: () => !1
                                        },
                                        X10: {
                                            events: 1,
                                            restrict: e => 4 !== e.button && 1 === e.action && (e.ctrl = !1, e.alt = !1, e.shift = !1, !0)
                                        },
                                        VT200: {
                                            events: 19,
                                            restrict: e => 32 !== e.action
                                        },
                                        DRAG: {
                                            events: 23,
                                            restrict: e => 32 !== e.action || 3 !== e.button
                                        },
                                        ANY: {
                                            events: 31,
                                            restrict: e => !0
                                        }
                                    };

                                function l(e, t) {
                                    let i = (e.ctrl ? 16 : 0) | (e.shift ? 4 : 0) | (e.alt ? 8 : 0);
                                    return 4 === e.button ? (i |= 64, i |= e.action) : (i |= 3 & e.button, 4 & e.button && (i |= 64), 8 & e.button && (i |= 128), 32 === e.action ? i |= 32 : 0 !== e.action || t || (i |= 3)), i
                                }
                                const c = String.fromCharCode,
                                    d = {
                                        DEFAULT: e => {
                                            const t = [l(e, !1) + 32, e.col + 32, e.row + 32];
                                            return t[0] > 255 || t[1] > 255 || t[2] > 255 ? "" : `[M${c(t[0])}${c(t[1])}${c(t[2])}`
                                        },
                                        SGR: e => {
                                            const t = 0 === e.action && 4 !== e.button ? "m" : "M";
                                            return `[<${l(e, !0)};${e.col};${e.row}${t}`
                                        },
                                        SGR_PIXELS: e => {
                                            const t = 0 === e.action && 4 !== e.button ? "m" : "M";
                                            return `[<${l(e, !0)};${e.x};${e.y}${t}`
                                        }
                                    };
                                let _ = t.CoreMouseService = class extends a.Disposable {
                                    constructor(e, t) {
                                        super(), this._bufferService = e, this._coreService = t, this._protocols = {}, this._encodings = {}, this._activeProtocol = "", this._activeEncoding = "", this._lastEvent = null, this._onProtocolChange = this.register(new o.EventEmitter), this.onProtocolChange = this._onProtocolChange.event;
                                        for (const e of Object.keys(h)) this.addProtocol(e, h[e]);
                                        for (const e of Object.keys(d)) this.addEncoding(e, d[e]);
                                        this.reset()
                                    }
                                    addProtocol(e, t) {
                                        this._protocols[e] = t
                                    }
                                    addEncoding(e, t) {
                                        this._encodings[e] = t
                                    }
                                    get activeProtocol() {
                                        return this._activeProtocol
                                    }
                                    get areMouseEventsActive() {
                                        return 0 !== this._protocols[this._activeProtocol].events
                                    }
                                    set activeProtocol(e) {
                                        if (!this._protocols[e]) throw new Error(`unknown protocol "${e}"`);
                                        this._activeProtocol = e, this._onProtocolChange.fire(this._protocols[e].events)
                                    }
                                    get activeEncoding() {
                                        return this._activeEncoding
                                    }
                                    set activeEncoding(e) {
                                        if (!this._encodings[e]) throw new Error(`unknown encoding "${e}"`);
                                        this._activeEncoding = e
                                    }
                                    reset() {
                                        this.activeProtocol = "NONE", this.activeEncoding = "DEFAULT", this._lastEvent = null
                                    }
                                    triggerMouseEvent(e) {
                                        if (e.col < 0 || e.col >= this._bufferService.cols || e.row < 0 || e.row >= this._bufferService.rows) return !1;
                                        if (4 === e.button && 32 === e.action) return !1;
                                        if (3 === e.button && 32 !== e.action) return !1;
                                        if (4 !== e.button && (2 === e.action || 3 === e.action)) return !1;
                                        if (e.col++, e.row++, 32 === e.action && this._lastEvent && this._equalEvents(this._lastEvent, e, "SGR_PIXELS" === this._activeEncoding)) return !1;
                                        if (!this._protocols[this._activeProtocol].restrict(e)) return !1;
                                        const t = this._encodings[this._activeEncoding](e);
                                        return t && ("DEFAULT" === this._activeEncoding ? this._coreService.triggerBinaryEvent(t) : this._coreService.triggerDataEvent(t, !0)), this._lastEvent = e, !0
                                    }
                                    explainEvents(e) {
                                        return {
                                            down: !!(1 & e),
                                            up: !!(2 & e),
                                            drag: !!(4 & e),
                                            move: !!(8 & e),
                                            wheel: !!(16 & e)
                                        }
                                    }
                                    _equalEvents(e, t, i) {
                                        if (i) {
                                            if (e.x !== t.x) return !1;
                                            if (e.y !== t.y) return !1
                                        } else {
                                            if (e.col !== t.col) return !1;
                                            if (e.row !== t.row) return !1
                                        }
                                        return e.button === t.button && e.action === t.action && e.ctrl === t.ctrl && e.alt === t.alt && e.shift === t.shift
                                    }
                                };
                                t.CoreMouseService = _ = s([r(0, n.IBufferService), r(1, n.ICoreService)], _)
                            },
                            6975: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.CoreService = void 0;
                                const n = i(1439),
                                    o = i(8460),
                                    a = i(844),
                                    h = i(2585),
                                    l = Object.freeze({
                                        insertMode: !1
                                    }),
                                    c = Object.freeze({
                                        applicationCursorKeys: !1,
                                        applicationKeypad: !1,
                                        bracketedPasteMode: !1,
                                        origin: !1,
                                        reverseWraparound: !1,
                                        sendFocus: !1,
                                        wraparound: !0
                                    });
                                let d = t.CoreService = class extends a.Disposable {
                                    constructor(e, t, i) {
                                        super(), this._bufferService = e, this._logService = t, this._optionsService = i, this.isCursorInitialized = !1, this.isCursorHidden = !1, this._onData = this.register(new o.EventEmitter), this.onData = this._onData.event, this._onUserInput = this.register(new o.EventEmitter), this.onUserInput = this._onUserInput.event, this._onBinary = this.register(new o.EventEmitter), this.onBinary = this._onBinary.event, this._onRequestScrollToBottom = this.register(new o.EventEmitter), this.onRequestScrollToBottom = this._onRequestScrollToBottom.event, this.modes = (0, n.clone)(l), this.decPrivateModes = (0, n.clone)(c)
                                    }
                                    reset() {
                                        this.modes = (0, n.clone)(l), this.decPrivateModes = (0, n.clone)(c)
                                    }
                                    triggerDataEvent(e, t = !1) {
                                        if (this._optionsService.rawOptions.disableStdin) return;
                                        const i = this._bufferService.buffer;
                                        t && this._optionsService.rawOptions.scrollOnUserInput && i.ybase !== i.ydisp && this._onRequestScrollToBottom.fire(), t && this._onUserInput.fire(), this._logService.debug(`sending data "${e}"`, (() => e.split("").map((e => e.charCodeAt(0))))), this._onData.fire(e)
                                    }
                                    triggerBinaryEvent(e) {
                                        this._optionsService.rawOptions.disableStdin || (this._logService.debug(`sending binary "${e}"`, (() => e.split("").map((e => e.charCodeAt(0))))), this._onBinary.fire(e))
                                    }
                                };
                                t.CoreService = d = s([r(0, h.IBufferService), r(1, h.ILogService), r(2, h.IOptionsService)], d)
                            },
                            9074: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.DecorationService = void 0;
                                const s = i(8055),
                                    r = i(8460),
                                    n = i(844),
                                    o = i(6106);
                                let a = 0,
                                    h = 0;
                                class l extends n.Disposable {
                                    get decorations() {
                                        return this._decorations.values()
                                    }
                                    constructor() {
                                        super(), this._decorations = new o.SortedList((e => e?.marker.line)), this._onDecorationRegistered = this.register(new r.EventEmitter), this.onDecorationRegistered = this._onDecorationRegistered.event, this._onDecorationRemoved = this.register(new r.EventEmitter), this.onDecorationRemoved = this._onDecorationRemoved.event, this.register((0, n.toDisposable)((() => this.reset())))
                                    }
                                    registerDecoration(e) {
                                        if (e.marker.isDisposed) return;
                                        const t = new c(e);
                                        if (t) {
                                            const e = t.marker.onDispose((() => t.dispose()));
                                            t.onDispose((() => {
                                                t && (this._decorations.delete(t) && this._onDecorationRemoved.fire(t), e.dispose())
                                            })), this._decorations.insert(t), this._onDecorationRegistered.fire(t)
                                        }
                                        return t
                                    }
                                    reset() {
                                        for (const e of this._decorations.values()) e.dispose();
                                        this._decorations.clear()
                                    }* getDecorationsAtCell(e, t, i) {
                                        let s = 0,
                                            r = 0;
                                        for (const n of this._decorations.getKeyIterator(t)) s = n.options.x ?? 0, r = s + (n.options.width ?? 1), e >= s && e < r && (!i || (n.options.layer ?? "bottom") === i) && (yield n)
                                    }
                                    forEachDecorationAtCell(e, t, i, s) {
                                        this._decorations.forEachByKey(t, (t => {
                                            a = t.options.x ?? 0, h = a + (t.options.width ?? 1), e >= a && e < h && (!i || (t.options.layer ?? "bottom") === i) && s(t)
                                        }))
                                    }
                                }
                                t.DecorationService = l;
                                class c extends n.Disposable {
                                    get isDisposed() {
                                        return this._isDisposed
                                    }
                                    get backgroundColorRGB() {
                                        return null === this._cachedBg && (this.options.backgroundColor ? this._cachedBg = s.css.toColor(this.options.backgroundColor) : this._cachedBg = void 0), this._cachedBg
                                    }
                                    get foregroundColorRGB() {
                                        return null === this._cachedFg && (this.options.foregroundColor ? this._cachedFg = s.css.toColor(this.options.foregroundColor) : this._cachedFg = void 0), this._cachedFg
                                    }
                                    constructor(e) {
                                        super(), this.options = e, this.onRenderEmitter = this.register(new r.EventEmitter), this.onRender = this.onRenderEmitter.event, this._onDispose = this.register(new r.EventEmitter), this.onDispose = this._onDispose.event, this._cachedBg = null, this._cachedFg = null, this.marker = e.marker, this.options.overviewRulerOptions && !this.options.overviewRulerOptions.position && (this.options.overviewRulerOptions.position = "full")
                                    }
                                    dispose() {
                                        this._onDispose.fire(), super.dispose()
                                    }
                                }
                            },
                            4348: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.InstantiationService = t.ServiceCollection = void 0;
                                const s = i(2585),
                                    r = i(8343);
                                class n {
                                    constructor(...e) {
                                        this._entries = new Map;
                                        for (const [t, i] of e) this.set(t, i)
                                    }
                                    set(e, t) {
                                        const i = this._entries.get(e);
                                        return this._entries.set(e, t), i
                                    }
                                    forEach(e) {
                                        for (const [t, i] of this._entries.entries()) e(t, i)
                                    }
                                    has(e) {
                                        return this._entries.has(e)
                                    }
                                    get(e) {
                                        return this._entries.get(e)
                                    }
                                }
                                t.ServiceCollection = n, t.InstantiationService = class {
                                    constructor() {
                                        this._services = new n, this._services.set(s.IInstantiationService, this)
                                    }
                                    setService(e, t) {
                                        this._services.set(e, t)
                                    }
                                    getService(e) {
                                        return this._services.get(e)
                                    }
                                    createInstance(e, ...t) {
                                        const i = (0, r.getServiceDependencies)(e).sort(((e, t) => e.index - t.index)),
                                            s = [];
                                        for (const t of i) {
                                            const i = this._services.get(t.id);
                                            if (!i) throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);
                                            s.push(i)
                                        }
                                        const n = i.length > 0 ? i[0].index : t.length;
                                        if (t.length !== n) throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n + 1} conflicts with ${t.length} static arguments`);
                                        return new e(...[...t, ...s])
                                    }
                                }
                            },
                            7866: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.traceCall = t.setTraceLogger = t.LogService = void 0;
                                const n = i(844),
                                    o = i(2585),
                                    a = {
                                        trace: o.LogLevelEnum.TRACE,
                                        debug: o.LogLevelEnum.DEBUG,
                                        info: o.LogLevelEnum.INFO,
                                        warn: o.LogLevelEnum.WARN,
                                        error: o.LogLevelEnum.ERROR,
                                        off: o.LogLevelEnum.OFF
                                    };
                                let h, l = t.LogService = class extends n.Disposable {
                                    get logLevel() {
                                        return this._logLevel
                                    }
                                    constructor(e) {
                                        super(), this._optionsService = e, this._logLevel = o.LogLevelEnum.OFF, this._updateLogLevel(), this.register(this._optionsService.onSpecificOptionChange("logLevel", (() => this._updateLogLevel()))), h = this
                                    }
                                    _updateLogLevel() {
                                        this._logLevel = a[this._optionsService.rawOptions.logLevel]
                                    }
                                    _evalLazyOptionalParams(e) {
                                        for (let t = 0; t < e.length; t++) "function" == typeof e[t] && (e[t] = e[t]())
                                    }
                                    _log(e, t, i) {
                                        this._evalLazyOptionalParams(i), e.call(console, (this._optionsService.options.logger ? "" : "xterm.js: ") + t, ...i)
                                    }
                                    trace(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.TRACE && this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    debug(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.DEBUG && this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, e, t)
                                    }
                                    info(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.INFO && this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, e, t)
                                    }
                                    warn(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.WARN && this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, e, t)
                                    }
                                    error(e, ...t) {
                                        this._logLevel <= o.LogLevelEnum.ERROR && this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, e, t)
                                    }
                                };
                                t.LogService = l = s([r(0, o.IOptionsService)], l), t.setTraceLogger = function(e) {
                                    h = e
                                }, t.traceCall = function(e, t, i) {
                                    if ("function" != typeof i.value) throw new Error("not supported");
                                    const s = i.value;
                                    i.value = function(...e) {
                                        if (h.logLevel !== o.LogLevelEnum.TRACE) return s.apply(this, e);
                                        h.trace(`GlyphRenderer#${s.name}(${e.map((e => JSON.stringify(e))).join(", ")})`);
                                        const t = s.apply(this, e);
                                        return h.trace(`GlyphRenderer#${s.name} return`, t), t
                                    }
                                }
                            },
                            7302: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.OptionsService = t.DEFAULT_OPTIONS = void 0;
                                const s = i(8460),
                                    r = i(844),
                                    n = i(6114);
                                t.DEFAULT_OPTIONS = {
                                    cols: 80,
                                    rows: 24,
                                    cursorBlink: !1,
                                    cursorStyle: "block",
                                    cursorWidth: 1,
                                    cursorInactiveStyle: "outline",
                                    customGlyphs: !0,
                                    drawBoldTextInBrightColors: !0,
                                    documentOverride: null,
                                    fastScrollModifier: "alt",
                                    fastScrollSensitivity: 5,
                                    fontFamily: "courier-new, courier, monospace",
                                    fontSize: 15,
                                    fontWeight: "normal",
                                    fontWeightBold: "bold",
                                    ignoreBracketedPasteMode: !1,
                                    lineHeight: 1,
                                    letterSpacing: 0,
                                    linkHandler: null,
                                    logLevel: "info",
                                    logger: null,
                                    scrollback: 1e3,
                                    scrollOnUserInput: !0,
                                    scrollSensitivity: 1,
                                    screenReaderMode: !1,
                                    smoothScrollDuration: 0,
                                    macOptionIsMeta: !1,
                                    macOptionClickForcesSelection: !1,
                                    minimumContrastRatio: 1,
                                    disableStdin: !1,
                                    allowProposedApi: !1,
                                    allowTransparency: !1,
                                    tabStopWidth: 8,
                                    theme: {},
                                    rightClickSelectsWord: n.isMac,
                                    windowOptions: {},
                                    windowsMode: !1,
                                    windowsPty: {},
                                    wordSeparator: " ()[]{}',\"`",
                                    altClickMovesCursor: !0,
                                    convertEol: !1,
                                    termName: "xterm",
                                    cancelEvents: !1,
                                    overviewRulerWidth: 0
                                };
                                const o = ["normal", "bold", "100", "200", "300", "400", "500", "600", "700", "800", "900"];
                                class a extends r.Disposable {
                                    constructor(e) {
                                        super(), this._onOptionChange = this.register(new s.EventEmitter), this.onOptionChange = this._onOptionChange.event;
                                        const i = {
                                            ...t.DEFAULT_OPTIONS
                                        };
                                        for (const t in e)
                                            if (t in i) try {
                                                const s = e[t];
                                                i[t] = this._sanitizeAndValidateOption(t, s)
                                            } catch (e) {
                                                console.error(e)
                                            }
                                        this.rawOptions = i, this.options = {
                                            ...i
                                        }, this._setupOptions(), this.register((0, r.toDisposable)((() => {
                                            this.rawOptions.linkHandler = null, this.rawOptions.documentOverride = null
                                        })))
                                    }
                                    onSpecificOptionChange(e, t) {
                                        return this.onOptionChange((i => {
                                            i === e && t(this.rawOptions[e])
                                        }))
                                    }
                                    onMultipleOptionChange(e, t) {
                                        return this.onOptionChange((i => {
                                            -1 !== e.indexOf(i) && t()
                                        }))
                                    }
                                    _setupOptions() {
                                        const e = e => {
                                                if (!(e in t.DEFAULT_OPTIONS)) throw new Error(`No option with key "${e}"`);
                                                return this.rawOptions[e]
                                            },
                                            i = (e, i) => {
                                                if (!(e in t.DEFAULT_OPTIONS)) throw new Error(`No option with key "${e}"`);
                                                i = this._sanitizeAndValidateOption(e, i), this.rawOptions[e] !== i && (this.rawOptions[e] = i, this._onOptionChange.fire(e))
                                            };
                                        for (const t in this.rawOptions) {
                                            const s = {
                                                get: e.bind(this, t),
                                                set: i.bind(this, t)
                                            };
                                            Object.defineProperty(this.options, t, s)
                                        }
                                    }
                                    _sanitizeAndValidateOption(e, i) {
                                        switch (e) {
                                            case "cursorStyle":
                                                if (i || (i = t.DEFAULT_OPTIONS[e]), ! function(e) {
                                                        return "block" === e || "underline" === e || "bar" === e
                                                    }(i)) throw new Error(`"${i}" is not a valid value for ${e}`);
                                                break;
                                            case "wordSeparator":
                                                i || (i = t.DEFAULT_OPTIONS[e]);
                                                break;
                                            case "fontWeight":
                                            case "fontWeightBold":
                                                if ("number" == typeof i && 1 <= i && i <= 1e3) break;
                                                i = o.includes(i) ? i : t.DEFAULT_OPTIONS[e];
                                                break;
                                            case "cursorWidth":
                                                i = Math.floor(i);
                                            case "lineHeight":
                                            case "tabStopWidth":
                                                if (i < 1) throw new Error(`${e} cannot be less than 1, value: ${i}`);
                                                break;
                                            case "minimumContrastRatio":
                                                i = Math.max(1, Math.min(21, Math.round(10 * i) / 10));
                                                break;
                                            case "scrollback":
                                                if ((i = Math.min(i, 4294967295)) < 0) throw new Error(`${e} cannot be less than 0, value: ${i}`);
                                                break;
                                            case "fastScrollSensitivity":
                                            case "scrollSensitivity":
                                                if (i <= 0) throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);
                                                break;
                                            case "rows":
                                            case "cols":
                                                if (!i && 0 !== i) throw new Error(`${e} must be numeric, value: ${i}`);
                                                break;
                                            case "windowsPty":
                                                i = i ?? {}
                                        }
                                        return i
                                    }
                                }
                                t.OptionsService = a
                            },
                            2660: function(e, t, i) {
                                var s = this && this.__decorate || function(e, t, i, s) {
                                        var r, n = arguments.length,
                                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                                        else
                                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                                        return n > 3 && o && Object.defineProperty(t, i, o), o
                                    },
                                    r = this && this.__param || function(e, t) {
                                        return function(i, s) {
                                            t(i, s, e)
                                        }
                                    };
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.OscLinkService = void 0;
                                const n = i(2585);
                                let o = t.OscLinkService = class {
                                    constructor(e) {
                                        this._bufferService = e, this._nextId = 1, this._entriesWithId = new Map, this._dataByLinkId = new Map
                                    }
                                    registerLink(e) {
                                        const t = this._bufferService.buffer;
                                        if (void 0 === e.id) {
                                            const i = t.addMarker(t.ybase + t.y),
                                                s = {
                                                    data: e,
                                                    id: this._nextId++,
                                                    lines: [i]
                                                };
                                            return i.onDispose((() => this._removeMarkerFromLink(s, i))), this._dataByLinkId.set(s.id, s), s.id
                                        }
                                        const i = e,
                                            s = this._getEntryIdKey(i),
                                            r = this._entriesWithId.get(s);
                                        if (r) return this.addLineToLink(r.id, t.ybase + t.y), r.id;
                                        const n = t.addMarker(t.ybase + t.y),
                                            o = {
                                                id: this._nextId++,
                                                key: this._getEntryIdKey(i),
                                                data: i,
                                                lines: [n]
                                            };
                                        return n.onDispose((() => this._removeMarkerFromLink(o, n))), this._entriesWithId.set(o.key, o), this._dataByLinkId.set(o.id, o), o.id
                                    }
                                    addLineToLink(e, t) {
                                        const i = this._dataByLinkId.get(e);
                                        if (i && i.lines.every((e => e.line !== t))) {
                                            const e = this._bufferService.buffer.addMarker(t);
                                            i.lines.push(e), e.onDispose((() => this._removeMarkerFromLink(i, e)))
                                        }
                                    }
                                    getLinkData(e) {
                                        return this._dataByLinkId.get(e)?.data
                                    }
                                    _getEntryIdKey(e) {
                                        return `${e.id};;${e.uri}`
                                    }
                                    _removeMarkerFromLink(e, t) {
                                        const i = e.lines.indexOf(t); - 1 !== i && (e.lines.splice(i, 1), 0 === e.lines.length && (void 0 !== e.data.id && this._entriesWithId.delete(e.key), this._dataByLinkId.delete(e.id)))
                                    }
                                };
                                t.OscLinkService = o = s([r(0, n.IBufferService)], o)
                            },
                            8343: (e, t) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.createDecorator = t.getServiceDependencies = t.serviceRegistry = void 0;
                                const i = "di$target",
                                    s = "di$dependencies";
                                t.serviceRegistry = new Map, t.getServiceDependencies = function(e) {
                                    return e[s] || []
                                }, t.createDecorator = function(e) {
                                    if (t.serviceRegistry.has(e)) return t.serviceRegistry.get(e);
                                    const r = function(e, t, n) {
                                        if (3 !== arguments.length) throw new Error("@IServiceName-decorator can only be used to decorate a parameter");
                                        ! function(e, t, r) {
                                            t[i] === t ? t[s].push({
                                                id: e,
                                                index: r
                                            }) : (t[s] = [{
                                                id: e,
                                                index: r
                                            }], t[i] = t)
                                        }(r, e, n)
                                    };
                                    return r.toString = () => e, t.serviceRegistry.set(e, r), r
                                }
                            },
                            2585: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.IDecorationService = t.IUnicodeService = t.IOscLinkService = t.IOptionsService = t.ILogService = t.LogLevelEnum = t.IInstantiationService = t.ICharsetService = t.ICoreService = t.ICoreMouseService = t.IBufferService = void 0;
                                const s = i(8343);
                                var r;
                                t.IBufferService = (0, s.createDecorator)("BufferService"), t.ICoreMouseService = (0, s.createDecorator)("CoreMouseService"), t.ICoreService = (0, s.createDecorator)("CoreService"), t.ICharsetService = (0, s.createDecorator)("CharsetService"), t.IInstantiationService = (0, s.createDecorator)("InstantiationService"),
                                    function(e) {
                                        e[e.TRACE = 0] = "TRACE", e[e.DEBUG = 1] = "DEBUG", e[e.INFO = 2] = "INFO", e[e.WARN = 3] = "WARN", e[e.ERROR = 4] = "ERROR", e[e.OFF = 5] = "OFF"
                                    }(r || (t.LogLevelEnum = r = {})), t.ILogService = (0, s.createDecorator)("LogService"), t.IOptionsService = (0, s.createDecorator)("OptionsService"), t.IOscLinkService = (0, s.createDecorator)("OscLinkService"), t.IUnicodeService = (0, s.createDecorator)("UnicodeService"), t.IDecorationService = (0, s.createDecorator)("DecorationService")
                            },
                            1480: (e, t, i) => {
                                Object.defineProperty(t, "__esModule", {
                                    value: !0
                                }), t.UnicodeService = void 0;
                                const s = i(8460),
                                    r = i(225);
                                class n {
                                    static extractShouldJoin(e) {
                                        return 0 != (1 & e)
                                    }
                                    static extractWidth(e) {
                                        return e >> 1 & 3
                                    }
                                    static extractCharKind(e) {
                                        return e >> 3
                                    }
                                    static createPropertyValue(e, t, i = !1) {
                                        return (16777215 & e) << 3 | (3 & t) << 1 | (i ? 1 : 0)
                                    }
                                    constructor() {
                                        this._providers = Object.create(null), this._active = "", this._onChange = new s.EventEmitter, this.onChange = this._onChange.event;
                                        const e = new r.UnicodeV6;
                                        this.register(e), this._active = e.version, this._activeProvider = e
                                    }
                                    dispose() {
                                        this._onChange.dispose()
                                    }
                                    get versions() {
                                        return Object.keys(this._providers)
                                    }
                                    get activeVersion() {
                                        return this._active
                                    }
                                    set activeVersion(e) {
                                        if (!this._providers[e]) throw new Error(`unknown Unicode version "${e}"`);
                                        this._active = e, this._activeProvider = this._providers[e], this._onChange.fire(e)
                                    }
                                    register(e) {
                                        this._providers[e.version] = e
                                    }
                                    wcwidth(e) {
                                        return this._activeProvider.wcwidth(e)
                                    }
                                    getStringCellWidth(e) {
                                        let t = 0,
                                            i = 0;
                                        const s = e.length;
                                        for (let r = 0; r < s; ++r) {
                                            let o = e.charCodeAt(r);
                                            if (55296 <= o && o <= 56319) {
                                                if (++r >= s) return t + this.wcwidth(o);
                                                const i = e.charCodeAt(r);
                                                56320 <= i && i <= 57343 ? o = 1024 * (o - 55296) + i - 56320 + 65536 : t += this.wcwidth(i)
                                            }
                                            const a = this.charProperties(o, i);
                                            let h = n.extractWidth(a);
                                            n.extractShouldJoin(a) && (h -= n.extractWidth(i)), t += h, i = a
                                        }
                                        return t
                                    }
                                    charProperties(e, t) {
                                        return this._activeProvider.charProperties(e, t)
                                    }
                                }
                                t.UnicodeService = n
                            }
                        },
                        t = {};

                    function i(s) {
                        var r = t[s];
                        if (void 0 !== r) return r.exports;
                        var n = t[s] = {
                            exports: {}
                        };
                        return e[s].call(n.exports, n, n.exports, i), n.exports
                    }
                    var s = {};
                    return (() => {
                        var e = s;
                        Object.defineProperty(e, "__esModule", {
                            value: !0
                        }), e.Terminal = void 0;
                        const t = i(9042),
                            r = i(3236),
                            n = i(844),
                            o = i(5741),
                            a = i(8285),
                            h = i(7975),
                            l = i(7090),
                            c = ["cols", "rows"];
                        class d extends n.Disposable {
                            constructor(e) {
                                super(), this._core = this.register(new r.Terminal(e)), this._addonManager = this.register(new o.AddonManager), this._publicOptions = {
                                    ...this._core.options
                                };
                                const t = e => this._core.options[e],
                                    i = (e, t) => {
                                        this._checkReadonlyOptions(e), this._core.options[e] = t
                                    };
                                for (const e in this._core.options) {
                                    const s = {
                                        get: t.bind(this, e),
                                        set: i.bind(this, e)
                                    };
                                    Object.defineProperty(this._publicOptions, e, s)
                                }
                            }
                            _checkReadonlyOptions(e) {
                                if (c.includes(e)) throw new Error(`Option "${e}" can only be set in the constructor`)
                            }
                            _checkProposedApi() {
                                if (!this._core.optionsService.rawOptions.allowProposedApi) throw new Error("You must set the allowProposedApi option to true to use proposed API")
                            }
                            get onBell() {
                                return this._core.onBell
                            }
                            get onBinary() {
                                return this._core.onBinary
                            }
                            get onCursorMove() {
                                return this._core.onCursorMove
                            }
                            get onData() {
                                return this._core.onData
                            }
                            get onKey() {
                                return this._core.onKey
                            }
                            get onLineFeed() {
                                return this._core.onLineFeed
                            }
                            get onRender() {
                                return this._core.onRender
                            }
                            get onResize() {
                                return this._core.onResize
                            }
                            get onScroll() {
                                return this._core.onScroll
                            }
                            get onSelectionChange() {
                                return this._core.onSelectionChange
                            }
                            get onTitleChange() {
                                return this._core.onTitleChange
                            }
                            get onWriteParsed() {
                                return this._core.onWriteParsed
                            }
                            get element() {
                                return this._core.element
                            }
                            get parser() {
                                return this._parser || (this._parser = new h.ParserApi(this._core)), this._parser
                            }
                            get unicode() {
                                return this._checkProposedApi(), new l.UnicodeApi(this._core)
                            }
                            get textarea() {
                                return this._core.textarea
                            }
                            get rows() {
                                return this._core.rows
                            }
                            get cols() {
                                return this._core.cols
                            }
                            get buffer() {
                                return this._buffer || (this._buffer = this.register(new a.BufferNamespaceApi(this._core))), this._buffer
                            }
                            get markers() {
                                return this._checkProposedApi(), this._core.markers
                            }
                            get modes() {
                                const e = this._core.coreService.decPrivateModes;
                                let t = "none";
                                switch (this._core.coreMouseService.activeProtocol) {
                                    case "X10":
                                        t = "x10";
                                        break;
                                    case "VT200":
                                        t = "vt200";
                                        break;
                                    case "DRAG":
                                        t = "drag";
                                        break;
                                    case "ANY":
                                        t = "any"
                                }
                                return {
                                    applicationCursorKeysMode: e.applicationCursorKeys,
                                    applicationKeypadMode: e.applicationKeypad,
                                    bracketedPasteMode: e.bracketedPasteMode,
                                    insertMode: this._core.coreService.modes.insertMode,
                                    mouseTrackingMode: t,
                                    originMode: e.origin,
                                    reverseWraparoundMode: e.reverseWraparound,
                                    sendFocusMode: e.sendFocus,
                                    wraparoundMode: e.wraparound
                                }
                            }
                            get options() {
                                return this._publicOptions
                            }
                            set options(e) {
                                for (const t in e) this._publicOptions[t] = e[t]
                            }
                            blur() {
                                this._core.blur()
                            }
                            focus() {
                                this._core.focus()
                            }
                            input(e, t = !0) {
                                this._core.input(e, t)
                            }
                            resize(e, t) {
                                this._verifyIntegers(e, t), this._core.resize(e, t)
                            }
                            open(e) {
                                this._core.open(e)
                            }
                            attachCustomKeyEventHandler(e) {
                                this._core.attachCustomKeyEventHandler(e)
                            }
                            attachCustomWheelEventHandler(e) {
                                this._core.attachCustomWheelEventHandler(e)
                            }
                            registerLinkProvider(e) {
                                return this._core.registerLinkProvider(e)
                            }
                            registerCharacterJoiner(e) {
                                return this._checkProposedApi(), this._core.registerCharacterJoiner(e)
                            }
                            deregisterCharacterJoiner(e) {
                                this._checkProposedApi(), this._core.deregisterCharacterJoiner(e)
                            }
                            registerMarker(e = 0) {
                                return this._verifyIntegers(e), this._core.registerMarker(e)
                            }
                            registerDecoration(e) {
                                return this._checkProposedApi(), this._verifyPositiveIntegers(e.x ?? 0, e.width ?? 0, e.height ?? 0), this._core.registerDecoration(e)
                            }
                            hasSelection() {
                                return this._core.hasSelection()
                            }
                            select(e, t, i) {
                                this._verifyIntegers(e, t, i), this._core.select(e, t, i)
                            }
                            getSelection() {
                                return this._core.getSelection()
                            }
                            getSelectionPosition() {
                                return this._core.getSelectionPosition()
                            }
                            clearSelection() {
                                this._core.clearSelection()
                            }
                            selectAll() {
                                this._core.selectAll()
                            }
                            selectLines(e, t) {
                                this._verifyIntegers(e, t), this._core.selectLines(e, t)
                            }
                            dispose() {
                                super.dispose()
                            }
                            scrollLines(e) {
                                this._verifyIntegers(e), this._core.scrollLines(e)
                            }
                            scrollPages(e) {
                                this._verifyIntegers(e), this._core.scrollPages(e)
                            }
                            scrollToTop() {
                                this._core.scrollToTop()
                            }
                            scrollToBottom() {
                                this._core.scrollToBottom()
                            }
                            scrollToLine(e) {
                                this._verifyIntegers(e), this._core.scrollToLine(e)
                            }
                            clear() {
                                this._core.clear()
                            }
                            write(e, t) {
                                this._core.write(e, t)
                            }
                            writeln(e, t) {
                                this._core.write(e), this._core.write("\r\n", t)
                            }
                            paste(e) {
                                this._core.paste(e)
                            }
                            refresh(e, t) {
                                this._verifyIntegers(e, t), this._core.refresh(e, t)
                            }
                            reset() {
                                this._core.reset()
                            }
                            clearTextureAtlas() {
                                this._core.clearTextureAtlas()
                            }
                            loadAddon(e) {
                                this._addonManager.loadAddon(this, e)
                            }
                            static get strings() {
                                return t
                            }
                            _verifyIntegers(...e) {
                                for (const t of e)
                                    if (t === 1 / 0 || isNaN(t) || t % 1 != 0) throw new Error("This API only accepts integers")
                            }
                            _verifyPositiveIntegers(...e) {
                                for (const t of e)
                                    if (t && (t === 1 / 0 || isNaN(t) || t % 1 != 0 || t < 0)) throw new Error("This API only accepts positive integers")
                            }
                        }
                        e.Terminal = d
                    })(), s
                })(), e.exports = t()
            },
            338: (e, t) => {
                var i;
                i = function(e) {
                    e.version = "1.2.0";
                    var t = function() {
                        for (var e = 0, t = new Array(256), i = 0; 256 != i; ++i) e = 1 & (e = 1 & (e = 1 & (e = 1 & (e = 1 & (e = 1 & (e = 1 & (e = 1 & (e = i) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1) ? -306674912 ^ e >>> 1 : e >>> 1, t[i] = e;
                        return "undefined" != typeof Int32Array ? new Int32Array(t) : t
                    }();
                    e.table = t, e.bstr = function(e, i) {
                        for (var s = -1 ^ i, r = e.length - 1, n = 0; n < r;) s = (s = s >>> 8 ^ t[255 & (s ^ e.charCodeAt(n++))]) >>> 8 ^ t[255 & (s ^ e.charCodeAt(n++))];
                        return n === r && (s = s >>> 8 ^ t[255 & (s ^ e.charCodeAt(n))]), -1 ^ s
                    }, e.buf = function(e, i) {
                        if (e.length > 1e4) return function(e, i) {
                            for (var s = -1 ^ i, r = e.length - 7, n = 0; n < r;) s = (s = (s = (s = (s = (s = (s = (s = s >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])];
                            for (; n < r + 7;) s = s >>> 8 ^ t[255 & (s ^ e[n++])];
                            return -1 ^ s
                        }(e, i);
                        for (var s = -1 ^ i, r = e.length - 3, n = 0; n < r;) s = (s = (s = (s = s >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])]) >>> 8 ^ t[255 & (s ^ e[n++])];
                        for (; n < r + 3;) s = s >>> 8 ^ t[255 & (s ^ e[n++])];
                        return -1 ^ s
                    }, e.str = function(e, i) {
                        for (var s, r, n = -1 ^ i, o = 0, a = e.length; o < a;)(s = e.charCodeAt(o++)) < 128 ? n = n >>> 8 ^ t[255 & (n ^ s)] : s < 2048 ? n = (n = n >>> 8 ^ t[255 & (n ^ (192 | s >> 6 & 31))]) >>> 8 ^ t[255 & (n ^ (128 | 63 & s))] : s >= 55296 && s < 57344 ? (s = 64 + (1023 & s), r = 1023 & e.charCodeAt(o++), n = (n = (n = (n = n >>> 8 ^ t[255 & (n ^ (240 | s >> 8 & 7))]) >>> 8 ^ t[255 & (n ^ (128 | s >> 2 & 63))]) >>> 8 ^ t[255 & (n ^ (128 | r >> 6 & 15 | (3 & s) << 4))]) >>> 8 ^ t[255 & (n ^ (128 | 63 & r))]) : n = (n = (n = n >>> 8 ^ t[255 & (n ^ (224 | s >> 12 & 15))]) >>> 8 ^ t[255 & (n ^ (128 | s >> 6 & 63))]) >>> 8 ^ t[255 & (n ^ (128 | 63 & s))];
                        return -1 ^ n
                    }
                }, "undefined" == typeof DO_NOT_EXPORT_CRC ? i(t) : i({})
            },
            304: function(e, t) {
                var i, s, r;
                s = [t], i = function(e) {
                    "use strict";
                    e.__esModule = !0;
                    var t = {},
                        i = Object.prototype.hasOwnProperty,
                        s = {
                            memoize: function(e) {
                                var s = arguments.length <= 1 || void 0 === arguments[1] ? t : arguments[1],
                                    r = s.cache || {};
                                return function() {
                                    for (var t = arguments.length, n = Array(t), o = 0; o < t; o++) n[o] = arguments[o];
                                    var a = String(n[0]);
                                    return !1 === s.caseSensitive && (a = a.toLowerCase()), i.call(r, a) ? r[a] : r[a] = e.apply(this, n)
                                }
                            },
                            debounce: function(e, t) {
                                if ("function" == typeof t) {
                                    var i = e;
                                    e = t, t = i
                                }
                                var s = t && t.delay || t || 0,
                                    r = void 0,
                                    n = void 0,
                                    o = void 0;
                                return function() {
                                    for (var t = arguments.length, i = Array(t), a = 0; a < t; a++) i[a] = arguments[a];
                                    r = i, n = this, o || (o = setTimeout((function() {
                                        e.apply(n, r), r = n = o = null
                                    }), s))
                                }
                            },
                            bind: function(e, t, i) {
                                var s = i.value;
                                return {
                                    configurable: !0,
                                    get: function() {
                                        var e = s.bind(this);
                                        return Object.defineProperty(this, t, {
                                            value: e,
                                            configurable: !0,
                                            writable: !0
                                        }), e
                                    }
                                }
                            }
                        },
                        r = a(s.memoize),
                        n = a(s.debounce),
                        o = a((function(e, t) {
                            return e.bind(t)
                        }), (function() {
                            return s.bind
                        }));

                    function a(e, t) {
                        var i = (t = t || e.decorate || h(e))();
                        return function() {
                            for (var s = arguments.length, r = Array(s), n = 0; n < s; n++) r[n] = arguments[n];
                            var o = r.length;
                            return (o < 2 ? t : o > 2 ? i : e).apply(void 0, r)
                        }
                    }

                    function h(e) {
                        return function(t) {
                            return "function" == typeof t ? e(t) : function(i, s, r) {
                                r.value = e(r.value, t, i, s, r)
                            }
                        }
                    }
                    e.memoize = r, e.debounce = n, e.bind = o, e.default = {
                        memoize: r,
                        debounce: n,
                        bind: o
                    }
                }, void 0 === (r = "function" == typeof i ? i.apply(t, s) : i) || (e.exports = r)
            },
            249: function(e, t, i) {
                var s, r, n;
                r = [], void 0 === (n = "function" == typeof(s = function() {
                    "use strict";

                    function t(e, t) {
                        return void 0 === t ? t = {
                            autoBom: !1
                        } : "object" != typeof t && (console.warn("Deprecated: Expected third argument to be a object"), t = {
                            autoBom: !t
                        }), t.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob(["\ufeff", e], {
                            type: e.type
                        }) : e
                    }

                    function s(e, t, i) {
                        var s = new XMLHttpRequest;
                        s.open("GET", e), s.responseType = "blob", s.onload = function() {
                            h(s.response, t, i)
                        }, s.onerror = function() {
                            console.error("could not download file")
                        }, s.send()
                    }

                    function r(e) {
                        var t = new XMLHttpRequest;
                        t.open("HEAD", e, !1);
                        try {
                            t.send()
                        } catch (e) {}
                        return 200 <= t.status && 299 >= t.status
                    }

                    function n(e) {
                        try {
                            e.dispatchEvent(new MouseEvent("click"))
                        } catch (i) {
                            var t = document.createEvent("MouseEvents");
                            t.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), e.dispatchEvent(t)
                        }
                    }
                    var o = "object" == typeof window && window.window === window ? window : "object" == typeof self && self.self === self ? self : "object" == typeof i.g && i.g.global === i.g ? i.g : void 0,
                        a = o.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent),
                        h = o.saveAs || ("object" != typeof window || window !== o ? function() {} : "download" in HTMLAnchorElement.prototype && !a ? function(e, t, i) {
                            var a = o.URL || o.webkitURL,
                                h = document.createElement("a");
                            t = t || e.name || "download", h.download = t, h.rel = "noopener", "string" == typeof e ? (h.href = e, h.origin === location.origin ? n(h) : r(h.href) ? s(e, t, i) : n(h, h.target = "_blank")) : (h.href = a.createObjectURL(e), setTimeout((function() {
                                a.revokeObjectURL(h.href)
                            }), 4e4), setTimeout((function() {
                                n(h)
                            }), 0))
                        } : "msSaveOrOpenBlob" in navigator ? function(e, i, o) {
                            if (i = i || e.name || "download", "string" != typeof e) navigator.msSaveOrOpenBlob(t(e, o), i);
                            else if (r(e)) s(e, i, o);
                            else {
                                var a = document.createElement("a");
                                a.href = e, a.target = "_blank", setTimeout((function() {
                                    n(a)
                                }))
                            }
                        } : function(e, t, i, r) {
                            if ((r = r || open("", "_blank")) && (r.document.title = r.document.body.innerText = "downloading..."), "string" == typeof e) return s(e, t, i);
                            var n = "application/octet-stream" === e.type,
                                h = /constructor/i.test(o.HTMLElement) || o.safari,
                                l = /CriOS\/[\d]+/.test(navigator.userAgent);
                            if ((l || n && h || a) && "undefined" != typeof FileReader) {
                                var c = new FileReader;
                                c.onloadend = function() {
                                    var e = c.result;
                                    e = l ? e : e.replace(/^data:[^;]*;/, "data:attachment/file;"), r ? r.location.href = e : location = e, r = null
                                }, c.readAsDataURL(e)
                            } else {
                                var d = o.URL || o.webkitURL,
                                    _ = d.createObjectURL(e);
                                r ? r.location = _ : location.href = _, r = null, setTimeout((function() {
                                    d.revokeObjectURL(_)
                                }), 4e4)
                            }
                        });
                    o.saveAs = h.saveAs = h, e.exports = h
                }) ? s.apply(t, r) : s) || (e.exports = n)
            },
            687: (e, t, i) => {
                "use strict";
                i.r(t)
            },
            491: (e, t, i) => {
                "use strict";
                i.r(t)
            },
            423: (e, t, i) => {
                "use strict";
                i.r(t)
            },
            616: (e, t, i) => {
                "use strict";
                i.r(t), i.d(t, {
                    Component: () => b,
                    Fragment: () => w,
                    cloneElement: () => G,
                    createContext: () => j,
                    createElement: () => m,
                    createRef: () => C,
                    h: () => m,
                    hydrate: () => $,
                    isValidElement: () => o,
                    options: () => r,
                    render: () => W,
                    toChildArray: () => k
                });
                var s, r, n, o, a, h, l, c, d, _ = {},
                    u = [],
                    f = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,
                    g = Array.isArray;

                function p(e, t) {
                    for (var i in t) e[i] = t[i];
                    return e
                }

                function v(e) {
                    var t = e.parentNode;
                    t && t.removeChild(e)
                }

                function m(e, t, i) {
                    var r, n, o, a = {};
                    for (o in t) "key" == o ? r = t[o] : "ref" == o ? n = t[o] : a[o] = t[o];
                    if (arguments.length > 2 && (a.children = arguments.length > 3 ? s.call(arguments, 2) : i), "function" == typeof e && null != e.defaultProps)
                        for (o in e.defaultProps) void 0 === a[o] && (a[o] = e.defaultProps[o]);
                    return A(e, a, r, n, null)
                }

                function A(e, t, i, s, o) {
                    var a = {
                        type: e,
                        props: t,
                        key: i,
                        ref: s,
                        __k: null,
                        __: null,
                        __b: 0,
                        __e: null,
                        __d: void 0,
                        __c: null,
                        constructor: void 0,
                        __v: null == o ? ++n : o,
                        __i: -1,
                        __u: 0
                    };
                    return null == o && null != r.vnode && r.vnode(a), a
                }

                function C() {
                    return {
                        current: null
                    }
                }

                function w(e) {
                    return e.children
                }

                function b(e, t) {
                    this.props = e, this.context = t
                }

                function y(e, t) {
                    if (null == t) return e.__ ? y(e.__, e.__i + 1) : null;
                    for (var i; t < e.__k.length; t++)
                        if (null != (i = e.__k[t]) && null != i.__e) return i.__e;
                    return "function" == typeof e.type ? y(e) : null
                }

                function S(e, t, i) {
                    var s, n = e.__v,
                        o = n.__e,
                        a = e.__P;
                    if (a) return (s = p({}, n)).__v = n.__v + 1, r.vnode && r.vnode(s), F(a, s, n, e.__n, void 0 !== a.ownerSVGElement, 32 & n.__u ? [o] : null, t, null == o ? y(n) : o, !!(32 & n.__u), i), s.__v = n.__v, s.__.__k[s.__i] = s, s.__d = void 0, s.__e != o && E(s), s
                }

                function E(e) {
                    var t, i;
                    if (null != (e = e.__) && null != e.__c) {
                        for (e.__e = e.__c.base = null, t = 0; t < e.__k.length; t++)
                            if (null != (i = e.__k[t]) && null != i.__e) {
                                e.__e = e.__c.base = i.__e;
                                break
                            } return E(e)
                    }
                }

                function x(e) {
                    (!e.__d && (e.__d = !0) && a.push(e) && !L.__r++ || h !== r.debounceRendering) && ((h = r.debounceRendering) || l)(L)
                }

                function L() {
                    var e, t, i, s = [],
                        n = [];
                    for (a.sort(c); e = a.shift();) e.__d && (i = a.length, t = S(e, s, n) || t, 0 === i || a.length > i ? (H(s, t, n), n.length = s.length = 0, t = void 0, a.sort(c)) : t && r.__c && r.__c(t, u));
                    t && H(s, t, n), L.__r = 0
                }

                function I(e, t, i, s, r, n, o, a, h, l, c) {
                    var d, f, g, p, v, m = s && s.__k || u,
                        A = t.length;
                    for (i.__d = h, B(i, t, m), h = i.__d, d = 0; d < A; d++) null != (g = i.__k[d]) && "boolean" != typeof g && "function" != typeof g && (f = -1 === g.__i ? _ : m[g.__i] || _, g.__i = d, F(e, g, f, r, n, o, a, h, l, c), p = g.__e, g.ref && f.ref != g.ref && (f.ref && N(f.ref, null, g), c.push(g.ref, g.__c || p, g)), null == v && null != p && (v = p), 65536 & g.__u || f.__k === g.__k ? h = D(g, h, e) : "function" == typeof g.type && void 0 !== g.__d ? h = g.__d : p && (h = p.nextSibling), g.__d = void 0, g.__u &= -196609);
                    i.__d = h, i.__e = v
                }

                function B(e, t, i) {
                    var s, r, n, o, a, h = t.length,
                        l = i.length,
                        c = l,
                        d = 0;
                    for (e.__k = [], s = 0; s < h; s++) o = s + d, null != (r = e.__k[s] = null == (r = t[s]) || "boolean" == typeof r || "function" == typeof r ? null : "string" == typeof r || "number" == typeof r || "bigint" == typeof r || r.constructor == String ? A(null, r, null, null, null) : g(r) ? A(w, {
                        children: r
                    }, null, null, null) : void 0 === r.constructor && r.__b > 0 ? A(r.type, r.props, r.key, r.ref ? r.ref : null, r.__v) : r) ? (r.__ = e, r.__b = e.__b + 1, a = R(r, i, o, c), r.__i = a, n = null, -1 !== a && (c--, (n = i[a]) && (n.__u |= 131072)), null == n || null === n.__v ? (-1 == a && d--, "function" != typeof r.type && (r.__u |= 65536)) : a !== o && (a === o + 1 ? d++ : a > o ? c > h - o ? d += a - o : d-- : a < o ? a == o - 1 && (d = a - o) : d = 0, a !== s + d && (r.__u |= 65536))) : (n = i[o]) && null == n.key && n.__e && 0 == (131072 & n.__u) && (n.__e == e.__d && (e.__d = y(n)), U(n, n, !1), i[o] = null, c--);
                    if (c)
                        for (s = 0; s < l; s++) null != (n = i[s]) && 0 == (131072 & n.__u) && (n.__e == e.__d && (e.__d = y(n)), U(n, n))
                }

                function D(e, t, i) {
                    var s, r;
                    if ("function" == typeof e.type) {
                        for (s = e.__k, r = 0; s && r < s.length; r++) s[r] && (s[r].__ = e, t = D(s[r], t, i));
                        return t
                    }
                    e.__e != t && (i.insertBefore(e.__e, t || null), t = e.__e);
                    do {
                        t = t && t.nextSibling
                    } while (null != t && 8 === t.nodeType);
                    return t
                }

                function k(e, t) {
                    return t = t || [], null == e || "boolean" == typeof e || (g(e) ? e.some((function(e) {
                        k(e, t)
                    })) : t.push(e)), t
                }

                function R(e, t, i, s) {
                    var r = e.key,
                        n = e.type,
                        o = i - 1,
                        a = i + 1,
                        h = t[i];
                    if (null === h || h && r == h.key && n === h.type && 0 == (131072 & h.__u)) return i;
                    if (s > (null != h && 0 == (131072 & h.__u) ? 1 : 0))
                        for (; o >= 0 || a < t.length;) {
                            if (o >= 0) {
                                if ((h = t[o]) && 0 == (131072 & h.__u) && r == h.key && n === h.type) return o;
                                o--
                            }
                            if (a < t.length) {
                                if ((h = t[a]) && 0 == (131072 & h.__u) && r == h.key && n === h.type) return a;
                                a++
                            }
                        }
                    return -1
                }

                function M(e, t, i) {
                    "-" === t[0] ? e.setProperty(t, null == i ? "" : i) : e[t] = null == i ? "" : "number" != typeof i || f.test(t) ? i : i + "px"
                }

                function T(e, t, i, s, r) {
                    var n;
                    e: if ("style" === t)
                        if ("string" == typeof i) e.style.cssText = i;
                        else {
                            if ("string" == typeof s && (e.style.cssText = s = ""), s)
                                for (t in s) i && t in i || M(e.style, t, "");
                            if (i)
                                for (t in i) s && i[t] === s[t] || M(e.style, t, i[t])
                        }
                    else if ("o" === t[0] && "n" === t[1]) n = t !== (t = t.replace(/(PointerCapture)$|Capture$/i, "$1")), t = t.toLowerCase() in e ? t.toLowerCase().slice(2) : t.slice(2), e.l || (e.l = {}), e.l[t + n] = i, i ? s ? i.u = s.u : (i.u = Date.now(), e.addEventListener(t, n ? P : O, n)) : e.removeEventListener(t, n ? P : O, n);
                    else {
                        if (r) t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
                        else if ("width" !== t && "height" !== t && "href" !== t && "list" !== t && "form" !== t && "tabIndex" !== t && "download" !== t && "rowSpan" !== t && "colSpan" !== t && "role" !== t && t in e) try {
                            e[t] = null == i ? "" : i;
                            break e
                        } catch (e) {}
                        "function" == typeof i || (null == i || !1 === i && "-" !== t[4] ? e.removeAttribute(t) : e.setAttribute(t, i))
                    }
                }

                function O(e) {
                    if (this.l) {
                        var t = this.l[e.type + !1];
                        if (e.t) {
                            if (e.t <= t.u) return
                        } else e.t = Date.now();
                        return t(r.event ? r.event(e) : e)
                    }
                }

                function P(e) {
                    if (this.l) return this.l[e.type + !0](r.event ? r.event(e) : e)
                }

                function F(e, t, i, s, n, o, a, h, l, c) {
                    var d, _, u, f, v, m, A, C, y, S, E, x, L, B, D, k = t.type;
                    if (void 0 !== t.constructor) return null;
                    128 & i.__u && (l = !!(32 & i.__u), o = [h = t.__e = i.__e]), (d = r.__b) && d(t);
                    e: if ("function" == typeof k) try {
                        if (C = t.props, y = (d = k.contextType) && s[d.__c], S = d ? y ? y.props.value : d.__ : s, i.__c ? A = (_ = t.__c = i.__c).__ = _.__E : ("prototype" in k && k.prototype.render ? t.__c = _ = new k(C, S) : (t.__c = _ = new b(C, S), _.constructor = k, _.render = z), y && y.sub(_), _.props = C, _.state || (_.state = {}), _.context = S, _.__n = s, u = _.__d = !0, _.__h = [], _._sb = []), null == _.__s && (_.__s = _.state), null != k.getDerivedStateFromProps && (_.__s == _.state && (_.__s = p({}, _.__s)), p(_.__s, k.getDerivedStateFromProps(C, _.__s))), f = _.props, v = _.state, _.__v = t, u) null == k.getDerivedStateFromProps && null != _.componentWillMount && _.componentWillMount(), null != _.componentDidMount && _.__h.push(_.componentDidMount);
                        else {
                            if (null == k.getDerivedStateFromProps && C !== f && null != _.componentWillReceiveProps && _.componentWillReceiveProps(C, S), !_.__e && (null != _.shouldComponentUpdate && !1 === _.shouldComponentUpdate(C, _.__s, S) || t.__v === i.__v)) {
                                for (t.__v !== i.__v && (_.props = C, _.state = _.__s, _.__d = !1), t.__e = i.__e, t.__k = i.__k, t.__k.forEach((function(e) {
                                        e && (e.__ = t)
                                    })), E = 0; E < _._sb.length; E++) _.__h.push(_._sb[E]);
                                _._sb = [], _.__h.length && a.push(_);
                                break e
                            }
                            null != _.componentWillUpdate && _.componentWillUpdate(C, _.__s, S), null != _.componentDidUpdate && _.__h.push((function() {
                                _.componentDidUpdate(f, v, m)
                            }))
                        }
                        if (_.context = S, _.props = C, _.__P = e, _.__e = !1, x = r.__r, L = 0, "prototype" in k && k.prototype.render) {
                            for (_.state = _.__s, _.__d = !1, x && x(t), d = _.render(_.props, _.state, _.context), B = 0; B < _._sb.length; B++) _.__h.push(_._sb[B]);
                            _._sb = []
                        } else
                            do {
                                _.__d = !1, x && x(t), d = _.render(_.props, _.state, _.context), _.state = _.__s
                            } while (_.__d && ++L < 25);
                        _.state = _.__s, null != _.getChildContext && (s = p(p({}, s), _.getChildContext())), u || null == _.getSnapshotBeforeUpdate || (m = _.getSnapshotBeforeUpdate(f, v)), I(e, g(D = null != d && d.type === w && null == d.key ? d.props.children : d) ? D : [D], t, i, s, n, o, a, h, l, c), _.base = t.__e, t.__u &= -161, _.__h.length && a.push(_), A && (_.__E = _.__ = null)
                    } catch (e) {
                        t.__v = null, l || null != o ? (t.__e = h, t.__u |= l ? 160 : 32, o[o.indexOf(h)] = null) : (t.__e = i.__e, t.__k = i.__k), r.__e(e, t, i)
                    } else null == o && t.__v === i.__v ? (t.__k = i.__k, t.__e = i.__e) : t.__e = Q(i.__e, t, i, s, n, o, a, l, c);
                    (d = r.diffed) && d(t)
                }

                function H(e, t, i) {
                    for (var s = 0; s < i.length; s++) N(i[s], i[++s], i[++s]);
                    r.__c && r.__c(t, e), e.some((function(t) {
                        try {
                            e = t.__h, t.__h = [], e.some((function(e) {
                                e.call(t)
                            }))
                        } catch (e) {
                            r.__e(e, t.__v)
                        }
                    }))
                }

                function Q(e, t, i, r, n, o, a, h, l) {
                    var c, d, u, f, p, m, A, C = i.props,
                        w = t.props,
                        b = t.type;
                    if ("svg" === b && (n = !0), null != o)
                        for (c = 0; c < o.length; c++)
                            if ((p = o[c]) && "setAttribute" in p == !!b && (b ? p.localName === b : 3 === p.nodeType)) {
                                e = p, o[c] = null;
                                break
                            } if (null == e) {
                        if (null === b) return document.createTextNode(w);
                        e = n ? document.createElementNS("http://www.w3.org/2000/svg", b) : document.createElement(b, w.is && w), o = null, h = !1
                    }
                    if (null === b) C === w || h && e.data === w || (e.data = w);
                    else {
                        if (o = o && s.call(e.childNodes), C = i.props || _, !h && null != o)
                            for (C = {}, c = 0; c < e.attributes.length; c++) C[(p = e.attributes[c]).name] = p.value;
                        for (c in C) p = C[c], "children" == c || ("dangerouslySetInnerHTML" == c ? u = p : "key" === c || c in w || T(e, c, null, p, n));
                        for (c in w) p = w[c], "children" == c ? f = p : "dangerouslySetInnerHTML" == c ? d = p : "value" == c ? m = p : "checked" == c ? A = p : "key" === c || h && "function" != typeof p || C[c] === p || T(e, c, p, C[c], n);
                        if (d) h || u && (d.__html === u.__html || d.__html === e.innerHTML) || (e.innerHTML = d.__html), t.__k = [];
                        else if (u && (e.innerHTML = ""), I(e, g(f) ? f : [f], t, i, r, n && "foreignObject" !== b, o, a, o ? o[0] : i.__k && y(i, 0), h, l), null != o)
                            for (c = o.length; c--;) null != o[c] && v(o[c]);
                        h || (c = "value", void 0 !== m && (m !== e[c] || "progress" === b && !m || "option" === b && m !== C[c]) && T(e, c, m, C[c], !1), c = "checked", void 0 !== A && A !== e[c] && T(e, c, A, C[c], !1))
                    }
                    return e
                }

                function N(e, t, i) {
                    try {
                        "function" == typeof e ? e(t) : e.current = t
                    } catch (e) {
                        r.__e(e, i)
                    }
                }

                function U(e, t, i) {
                    var s, n;
                    if (r.unmount && r.unmount(e), (s = e.ref) && (s.current && s.current !== e.__e || N(s, null, t)), null != (s = e.__c)) {
                        if (s.componentWillUnmount) try {
                            s.componentWillUnmount()
                        } catch (e) {
                            r.__e(e, t)
                        }
                        s.base = s.__P = null, e.__c = void 0
                    }
                    if (s = e.__k)
                        for (n = 0; n < s.length; n++) s[n] && U(s[n], t, i || "function" != typeof e.type);
                    i || null == e.__e || v(e.__e), e.__ = e.__e = e.__d = void 0
                }

                function z(e, t, i) {
                    return this.constructor(e, i)
                }

                function W(e, t, i) {
                    var n, o, a, h;
                    r.__ && r.__(e, t), o = (n = "function" == typeof i) ? null : i && i.__k || t.__k, a = [], h = [], F(t, e = (!n && i || t).__k = m(w, null, [e]), o || _, _, void 0 !== t.ownerSVGElement, !n && i ? [i] : o ? null : t.firstChild ? s.call(t.childNodes) : null, a, !n && i ? i : o ? o.__e : t.firstChild, n, h), e.__d = void 0, H(a, e, h)
                }

                function $(e, t) {
                    W(e, t, $)
                }

                function G(e, t, i) {
                    var r, n, o, a, h = p({}, e.props);
                    for (o in e.type && e.type.defaultProps && (a = e.type.defaultProps), t) "key" == o ? r = t[o] : "ref" == o ? n = t[o] : h[o] = void 0 === t[o] && void 0 !== a ? a[o] : t[o];
                    return arguments.length > 2 && (h.children = arguments.length > 3 ? s.call(arguments, 2) : i), A(e.type, h, r || e.key, n || e.ref, null)
                }

                function j(e, t) {
                    var i = {
                        __c: t = "__cC" + d++,
                        __: e,
                        Consumer: function(e, t) {
                            return e.children(t)
                        },
                        Provider: function(e) {
                            var i, s;
                            return this.getChildContext || (i = [], (s = {})[t] = this, this.getChildContext = function() {
                                return s
                            }, this.shouldComponentUpdate = function(e) {
                                this.props.value !== e.value && i.some((function(e) {
                                    e.__e = !0, x(e)
                                }))
                            }, this.sub = function(e) {
                                i.push(e);
                                var t = e.componentWillUnmount;
                                e.componentWillUnmount = function() {
                                    i.splice(i.indexOf(e), 1), t && t.call(e)
                                }
                            }), e.children
                        }
                    };
                    return i.Provider.__ = i.Consumer.contextType = i
                }
                s = u.slice, r = {
                    __e: function(e, t, i, s) {
                        for (var r, n, o; t = t.__;)
                            if ((r = t.__c) && !r.__) try {
                                if ((n = r.constructor) && null != n.getDerivedStateFromError && (r.setState(n.getDerivedStateFromError(e)), o = r.__d), null != r.componentDidCatch && (r.componentDidCatch(e, s || {}), o = r.__d), o) return r.__E = r
                            } catch (t) {
                                e = t
                            }
                        throw e
                    }
                }, n = 0, o = function(e) {
                    return null != e && null == e.constructor
                }, b.prototype.setState = function(e, t) {
                    var i;
                    i = null != this.__s && this.__s !== this.state ? this.__s : this.__s = p({}, this.state), "function" == typeof e && (e = e(p({}, i), this.props)), e && p(i, e), null != e && this.__v && (t && this._sb.push(t), x(this))
                }, b.prototype.forceUpdate = function(e) {
                    this.__v && (this.__e = !0, e && this.__h.push(e), x(this))
                }, b.prototype.render = w, a = [], l = "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, c = function(e, t) {
                    return e.__v.__b - t.__v.__b
                }, L.__r = 0, d = 0
            },
            211: (e, t, i) => {
                "use strict";
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.App = void 0;
                const s = i(616),
                    r = i(529),
                    n = "https:" === window.location.protocol ? "wss:" : "ws:",
                    o = window.location.pathname.replace(/[/]+$/, ""),
                    a = [n, "//", window.location.host, o, "/../../../../../websockets/ide/terminal", window.location.search].join(""),
                    h = [window.location.protocol, "//", window.location.host, o, "/../../../js/ide-terminal/js/token.js"].join(""),
                    l = {
                        rendererType: "webgl",
                        disableLeaveAlert: 1,
                        disableResizeOverlay: !1,
                        enableZmodem: !1,
                        enableTrzsz: !1,
                        enableSixel: !1,
                        isWindows: !1,
                        unicodeVersion: "11"
                    },
                    c = {
                        fontSize: 13,
                        fontFamily: "Consolas,Liberation Mono,Menlo,Courier,monospace",
                        theme: {
                            foreground: "#d2d2d2",
                            background: "#2b2b2b",
                            cursor: "#adadad",
                            black: "#000000",
                            red: "#d81e00",
                            green: "#5ea702",
                            yellow: "#cfae00",
                            blue: "#427ab3",
                            magenta: "#89658e",
                            cyan: "#00a7aa",
                            white: "#dbded8",
                            brightBlack: "#686a66",
                            brightRed: "#f54235",
                            brightGreen: "#99e343",
                            brightYellow: "#fdeb61",
                            brightBlue: "#84b0d8",
                            brightMagenta: "#bc94b7",
                            brightCyan: "#37e6e8",
                            brightWhite: "#f1f1f0"
                        },
                        allowProposedApi: !0
                    },
                    d = {
                        limit: 1e5,
                        highWater: 10,
                        lowWater: 4
                    };
                class _ extends s.Component {
                    render() {
                        return (0, s.h)(r.Terminal, {
                            id: "terminal-container",
                            wsUrl: a,
                            tokenUrl: h,
                            clientOptions: l,
                            termOptions: c,
                            flowControl: d
                        })
                    }
                }
                t.App = _
            },
            12: (e, t, i) => {
                "use strict";
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.Modal = void 0;
                const s = i(616);
                i(491);
                class r extends s.Component {
                    constructor(e) {
                        super(e)
                    }
                    render({
                        show: e,
                        children: t
                    }) {
                        return e && (0, s.h)("div", {
                            className: "modal"
                        }, (0, s.h)("div", {
                            className: "modal-background"
                        }), (0, s.h)("div", {
                            className: "modal-content"
                        }, (0, s.h)("div", {
                            className: "box"
                        }, t)))
                    }
                }
                t.Modal = r
            },
            529: function(e, t, i) {
                "use strict";
                var s = this && this.__decorate || function(e, t, i, s) {
                    var r, n = arguments.length,
                        o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                    else
                        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                    return n > 3 && o && Object.defineProperty(t, i, o), o
                };
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.Terminal = void 0;
                const r = i(304),
                    n = i(616),
                    o = i(354);
                i(687);
                const a = i(12);
                class h extends n.Component {
                    constructor(e) {
                        super(), this.xterm = new o.Xterm(e, this.showModal)
                    }
                    async componentDidMount() {
                        await this.xterm.refreshToken(), this.xterm.open(this.container), this.xterm.connect()
                    }
                    componentWillUnmount() {
                        this.xterm.dispose()
                    }
                    render({
                        id: e
                    }, {
                        modal: t
                    }) {
                        return (0, n.h)("div", {
                            id: e,
                            ref: e => this.container = e
                        }, (0, n.h)(a.Modal, {
                            show: t
                        }, (0, n.h)("label", {
                            class: "file-label"
                        }, (0, n.h)("input", {
                            onChange: this.sendFile,
                            class: "file-input",
                            type: "file",
                            multiple: !0
                        }), (0, n.h)("span", {
                            class: "file-cta"
                        }, "Choose files"))))
                    }
                    showModal() {
                        this.setState({
                            modal: !0
                        })
                    }
                    sendFile(e) {
                        this.setState({
                            modal: !1
                        });
                        const t = e.target.files;
                        t && this.xterm.sendFile(t)
                    }
                }
                t.Terminal = h, s([r.bind], h.prototype, "showModal", null), s([r.bind], h.prototype, "sendFile", null)
            },
            316: function(e, t, i) {
                "use strict";
                var s = this && this.__decorate || function(e, t, i, s) {
                    var r, n = arguments.length,
                        o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                    else
                        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                    return n > 3 && o && Object.defineProperty(t, i, o), o
                };
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.OverlayAddon = void 0;
                const r = i(304);
                class n {
                    constructor() {
                        this.overlayNode = document.createElement("div"), this.overlayNode.style.cssText = "border-radius: 15px;\nfont-size: xx-large;\nopacity: 0.75;\npadding: 0.2em 0.5em 0.2em 0.5em;\nposition: absolute;\n-webkit-user-select: none;\n-webkit-transition: opacity 180ms ease-in;\n-moz-user-select: none;\n-moz-transition: opacity 180ms ease-in;", this.overlayNode.addEventListener("mousedown", (e => {
                            e.preventDefault(), e.stopPropagation()
                        }), !0)
                    }
                    activate(e) {
                        this.terminal = e
                    }
                    dispose() {}
                    showOverlay(e, t) {
                        const {
                            terminal: i,
                            overlayNode: s
                        } = this;
                        if (!i.element) return;
                        s.style.color = "#101010", s.style.backgroundColor = "#f0f0f0", s.textContent = e, s.style.opacity = "0.75", s.parentNode || i.element.appendChild(s);
                        const r = i.element.getBoundingClientRect(),
                            n = s.getBoundingClientRect();
                        s.style.top = (r.height - n.height) / 2 + "px", s.style.left = (r.width - n.width) / 2 + "px", this.overlayTimeout && clearTimeout(this.overlayTimeout), t && (this.overlayTimeout = window.setTimeout((() => {
                            s.style.opacity = "0", this.overlayTimeout = window.setTimeout((() => {
                                s.parentNode && s.parentNode.removeChild(s), this.overlayTimeout = void 0, s.style.opacity = "0.75"
                            }), 200)
                        }), t || 1500))
                    }
                }
                t.OverlayAddon = n, s([r.bind], n.prototype, "showOverlay", null)
            },
            414: function(e, t, i) {
                "use strict";
                var s = this && this.__createBinding || (Object.create ? function(e, t, i, s) {
                        void 0 === s && (s = i);
                        var r = Object.getOwnPropertyDescriptor(t, i);
                        r && !("get" in r ? !t.__esModule : r.writable || r.configurable) || (r = {
                            enumerable: !0,
                            get: function() {
                                return t[i]
                            }
                        }), Object.defineProperty(e, s, r)
                    } : function(e, t, i, s) {
                        void 0 === s && (s = i), e[s] = t[i]
                    }),
                    r = this && this.__setModuleDefault || (Object.create ? function(e, t) {
                        Object.defineProperty(e, "default", {
                            enumerable: !0,
                            value: t
                        })
                    } : function(e, t) {
                        e.default = t
                    }),
                    n = this && this.__decorate || function(e, t, i, s) {
                        var r, n = arguments.length,
                            o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                        else
                            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                        return n > 3 && o && Object.defineProperty(t, i, o), o
                    },
                    o = this && this.__importStar || function(e) {
                        if (e && e.__esModule) return e;
                        var t = {};
                        if (null != e)
                            for (var i in e) "default" !== i && Object.prototype.hasOwnProperty.call(e, i) && s(t, e, i);
                        return r(t, e), t
                    };
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.ZmodemAddon = void 0;
                const a = i(304),
                    h = i(249),
                    l = o(i(160)),
                    c = i(549);
                class d {
                    constructor(e) {
                        this.options = e, this.disposables = []
                    }
                    activate(e) {
                        this.terminal = e, this.options.zmodem && this.zmodemInit(), this.options.trzsz && this.trzszInit()
                    }
                    dispose() {
                        for (const e of this.disposables) e.dispose();
                        this.disposables.length = 0
                    }
                    consume(e) {
                        try {
                            this.options.trzsz ? this.trzszFilter.processServerOutput(e) : this.sentry.consume(e)
                        } catch (e) {
                            console.error("[ttyd] zmodem consume: ", e), this.reset()
                        }
                    }
                    reset() {
                        this.terminal.options.disableStdin = !1, this.terminal.focus()
                    }
                    addDisposableListener(e, t, i) {
                        e.addEventListener(t, i), this.disposables.push({
                            dispose: () => e.removeEventListener(t, i)
                        })
                    }
                    trzszInit() {
                        const {
                            terminal: e
                        } = this, {
                            sender: t,
                            writer: i,
                            zmodem: s
                        } = this.options;
                        this.trzszFilter = new c.TrzszFilter({
                            writeToTerminal: e => {
                                !this.trzszFilter.isTransferringFiles() && s ? this.sentry.consume(e) : i("string" == typeof e ? e : new Uint8Array(e))
                            },
                            sendToServer: e => t(e),
                            terminalColumns: e.cols,
                            isWindowsShell: this.options.windows,
                            dragInitTimeout: this.options.trzszDragInitTimeout
                        });
                        const r = e.element;
                        this.addDisposableListener(r, "dragover", (e => e.preventDefault())), this.addDisposableListener(r, "drop", (e => {
                            var t;
                            e.preventDefault(), this.trzszFilter.uploadFiles(null === (t = e.dataTransfer) || void 0 === t ? void 0 : t.items).then((() => console.log("[ttyd] upload success"))).catch((e => console.log("[ttyd] upload failed: " + e)))
                        })), this.disposables.push(e.onResize((e => this.trzszFilter.setTerminalColumns(e.cols))))
                    }
                    zmodemInit() {
                        const {
                            sender: e,
                            writer: t
                        } = this.options, {
                            terminal: i,
                            reset: s,
                            zmodemDetect: r
                        } = this;
                        this.session = null, this.sentry = new l.Sentry({
                            to_terminal: e => t(new Uint8Array(e)),
                            sender: t => e(new Uint8Array(t)),
                            on_retract: () => s(),
                            on_detect: e => r(e)
                        }), this.disposables.push(i.onKey((e => {
                            const t = e.domEvent;
                            t.ctrlKey && "c" === t.key && this.denier && this.denier()
                        })))
                    }
                    zmodemDetect(e) {
                        const {
                            terminal: t,
                            receiveFile: i
                        } = this;
                        t.options.disableStdin = !0, this.denier = () => e.deny(), this.session = e.confirm(), this.session.on("session_end", (() => this.reset())), "send" === this.session.type ? this.options.onSend() : i()
                    }
                    sendFile(e) {
                        const {
                            session: t,
                            writeProgress: i
                        } = this;
                        l.Browser.send_files(t, e, {
                            on_progress: (e, t) => i(t)
                        }).then((() => t.close())).catch((() => this.reset()))
                    }
                    receiveFile() {
                        const {
                            session: e,
                            writeProgress: t
                        } = this;
                        e.on("offer", (e => {
                            e.on("input", (() => t(e))), e.accept().then((t => {
                                const i = new Blob(t, {
                                    type: "application/octet-stream"
                                });
                                (0, h.saveAs)(i, e.get_details().name)
                            })).catch((() => this.reset()))
                        })), e.start()
                    }
                    writeProgress(e) {
                        const {
                            bytesHuman: t
                        } = this, i = e.get_details(), s = i.name, r = i.size, n = e.get_offset(), o = (100 * n / r).toFixed(2);
                        this.options.writer(`${s} ${o}% ${t(n, 2)}/${t(r, 2)}\r`)
                    }
                    bytesHuman(e, t) {
                        if (!/^([-+])?|(\.\d+)(\d+(\.\d+)?|(\d+\.)|Infinity)$/.test(e)) return "-";
                        if (0 === e) return "0";
                        void 0 === t && (t = 1);
                        const i = Math.floor(Math.log(e) / Math.log(1024));
                        return `${(e / Math.pow(1024, Math.floor(i))).toFixed(t)} ${["bytes", "KB", "MB", "GB", "TB", "PB"][i]}`
                    }
                }
                t.ZmodemAddon = d, n([a.bind], d.prototype, "reset", null), n([a.bind], d.prototype, "trzszInit", null), n([a.bind], d.prototype, "zmodemInit", null), n([a.bind], d.prototype, "zmodemDetect", null), n([a.bind], d.prototype, "sendFile", null), n([a.bind], d.prototype, "receiveFile", null), n([a.bind], d.prototype, "writeProgress", null)
            },
            354: function(e, t, i) {
                "use strict";
                var s = this && this.__decorate || function(e, t, i, s) {
                    var r, n = arguments.length,
                        o = n < 3 ? t : null === s ? s = Object.getOwnPropertyDescriptor(t, i) : s;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, i, s);
                    else
                        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (o = (n < 3 ? r(o) : n > 3 ? r(t, i, o) : r(t, i)) || o);
                    return n > 3 && o && Object.defineProperty(t, i, o), o
                };
                Object.defineProperty(t, "__esModule", {
                    value: !0
                }), t.Xterm = void 0;
                const r = i(304),
                    n = i(436),
                    o = i(852),
                    a = i(768),
                    h = i(308),
                    l = i(100),
                    c = i(288),
                    d = i(716),
                    _ = i(316),
                    u = i(414);
                var f;

                function g(e, t, i) {
                    return e.addEventListener(t, i), {
                        dispose: () => e.removeEventListener(t, i)
                    }
                }
                i(687),
                    function(e) {
                        e.OUTPUT = "0", e.SET_WINDOW_TITLE = "1", e.SET_PREFERENCES = "2", e.INPUT = "0", e.RESIZE_TERMINAL = "1", e.PAUSE = "2", e.RESUME = "3"
                    }(f || (f = {}));
                class p {
                    constructor(e, t) {
                        this.options = e, this.sendCb = t, this.disposables = [], this.textEncoder = new TextEncoder, this.textDecoder = new TextDecoder, this.written = 0, this.pending = 0, this.fitAddon = new h.FitAddon, this.overlayAddon = new _.OverlayAddon, this.opened = !1, this.resizeOverlay = !0, this.reconnect = !0, this.doReconnect = !0, this.writeFunc = e => this.writeData(new Uint8Array(e))
                    }
                    dispose() {
                        for (const e of this.disposables) e.dispose();
                        this.disposables.length = 0
                    }
                    register(e) {
                        return this.disposables.push(e), e
                    }
                    sendFile(e) {
                        var t;
                        null === (t = this.zmodemAddon) || void 0 === t || t.sendFile(e)
                    }
                    async refreshToken() {
                        try {
                            const e = await fetch(this.options.tokenUrl);
                            if (e.ok) {
                                const t = await e.json();
                                this.token = t.token
                            }
                        } catch (e) {
                            console.error(`[ttyd] fetch ${this.options.tokenUrl}: `, e)
                        }
                    }
                    onWindowUnload(e) {
                        var t;
                        if (e.preventDefault(), (null === (t = this.socket) || void 0 === t ? void 0 : t.readyState) === WebSocket.OPEN) {
                            const t = "Close terminal? this will also terminate the command.";
                            return e.returnValue = t, t
                        }
                    }
                    open(e) {
                        this.terminal = new n.Terminal(this.options.termOptions);
                        const {
                            terminal: t,
                            fitAddon: i,
                            overlayAddon: s
                        } = this;
                        window.term = t, window.term.fit = () => {
                            this.fitAddon.fit()
                        }, t.loadAddon(i), t.loadAddon(s), t.loadAddon(new l.WebLinksAddon), t.open(e), i.fit()
                    }
                    initListeners() {
                        const {
                            terminal: e,
                            fitAddon: t,
                            overlayAddon: i,
                            register: s,
                            sendData: r
                        } = this;
                        s(e.onTitleChange((e => {
                            e && "" !== e && !this.titleFixed && (document.title = e + " | " + this.title)
                        }))), s(e.onData((e => r(e)))), s(e.onBinary((e => r(Uint8Array.from(e, (e => e.charCodeAt(0))))))), s(e.onResize((({
                            cols: e,
                            rows: t
                        }) => {
                            var s;
                            const r = JSON.stringify({
                                columns: e,
                                rows: t
                            });
                            null === (s = this.socket) || void 0 === s || s.send(this.textEncoder.encode(f.RESIZE_TERMINAL + r)), this.resizeOverlay && i.showOverlay(`${e}x${t}`, 300)
                        }))), s(e.onSelectionChange((() => {
                            var e;
                            if ("" !== this.terminal.getSelection()) {
                                try {
                                    document.execCommand("copy")
                                } catch (e) {
                                    return
                                }
                                null === (e = this.overlayAddon) || void 0 === e || e.showOverlay("", 200)
                            }
                        }))), s(g(window, "resize", (() => t.fit()))), s(g(window, "beforeunload", this.onWindowUnload))
                    }
                    writeData(e) {
                        var t;
                        const {
                            terminal: i,
                            textEncoder: s
                        } = this, {
                            limit: r,
                            highWater: n,
                            lowWater: o
                        } = this.options.flowControl;
                        this.written += e.length, this.written > r ? (i.write(e, (() => {
                            var e;
                            this.pending = Math.max(this.pending - 1, 0), this.pending < o && (null === (e = this.socket) || void 0 === e || e.send(s.encode(f.RESUME)))
                        })), this.pending++, this.written = 0, this.pending > n && (null === (t = this.socket) || void 0 === t || t.send(s.encode(f.PAUSE)))) : i.write(e)
                    }
                    sendData(e) {
                        const {
                            socket: t,
                            textEncoder: i
                        } = this;
                        if ((null == t ? void 0 : t.readyState) === WebSocket.OPEN)
                            if ("string" == typeof e) {
                                const s = new Uint8Array(3 * e.length + 1);
                                s[0] = f.INPUT.charCodeAt(0);
                                const r = i.encodeInto(e, s.subarray(1));
                                t.send(s.subarray(0, r.written + 1))
                            } else {
                                const i = new Uint8Array(e.length + 1);
                                i[0] = f.INPUT.charCodeAt(0), i.set(e, 1), t.send(i)
                            }
                    }
                    connect() {
                        this.socket = new WebSocket(this.options.wsUrl, ["tty"]);
                        const {
                            socket: e,
                            register: t
                        } = this;
                        e.binaryType = "arraybuffer", t(g(e, "open", this.onSocketOpen)), t(g(e, "message", this.onSocketData)), t(g(e, "close", this.onSocketClose)), t(g(e, "error", (() => this.doReconnect = !1)))
                    }
                    onSocketOpen() {
                        var e;
                        console.log("[ttyd] websocket connection opened");
                        const {
                            textEncoder: t,
                            terminal: i,
                            overlayAddon: s
                        } = this, r = JSON.stringify({
                            AuthToken: this.token,
                            columns: i.cols,
                            rows: i.rows
                        });
                        null === (e = this.socket) || void 0 === e || e.send(t.encode(r)), this.opened ? (i.reset(), i.options.disableStdin = !1, s.showOverlay("Reconnected", 300)) : this.opened = !0, this.doReconnect = this.reconnect, this.initListeners(), i.focus()
                    }
                    onSocketClose(e) {
                        console.log(`[ttyd] websocket connection closed with code: ${e.code}`);
                        const {
                            refreshToken: t,
                            connect: i,
                            doReconnect: s,
                            overlayAddon: r
                        } = this;
                        if (r.showOverlay("Connection Closed"), this.dispose(), 1e3 !== e.code && s) r.showOverlay("Reconnecting..."), t().then(i);
                        else {
                            const {
                                terminal: e
                            } = this, s = e.onKey((e => {
                                "Enter" === e.domEvent.key && (s.dispose(), r.showOverlay("Reconnecting..."), t().then(i))
                            }));
                            r.showOverlay("Press  to Reconnect")
                        }
                    }
                    parseOptsFromUrlQuery(e) {
                        const {
                            terminal: t
                        } = this, {
                            clientOptions: i
                        } = this.options, s = {}, r = Array.from(new URLSearchParams(e));
                        for (const [e, n] of r) {
                            let r = i[e];
                            switch (void 0 === r && (r = t.options[e]), typeof r) {
                                case "boolean":
                                    s[e] = "true" === n || "1" === n;
                                    break;
                                case "number":
                                case "bigint":
                                    s[e] = Number.parseInt(n, 10);
                                    break;
                                case "string":
                                    s[e] = n;
                                    break;
                                case "object":
                                    s[e] = JSON.parse(n);
                                    break;
                                default:
                                    console.warn(`[ttyd] maybe unknown option: ${e}=${n}, treating as string`), s[e] = n
                            }
                        }
                        return s
                    }
                    onSocketData(e) {
                        const {
                            textDecoder: t
                        } = this, i = e.data, s = String.fromCharCode(new Uint8Array(i)[0]), r = i.slice(1);
                        switch (s) {
                            case f.OUTPUT:
                                this.writeFunc(r);
                                break;
                            case f.SET_WINDOW_TITLE:
                                this.title = t.decode(r), document.title = this.title;
                                break;
                            case f.SET_PREFERENCES:
                                this.applyPreferences({
                                    ...this.options.clientOptions,
                                    ...JSON.parse(t.decode(r)),
                                    ...this.parseOptsFromUrlQuery(window.location.search)
                                });
                                break;
                            default:
                                console.warn(`[ttyd] unknown command: ${s}`)
                        }
                    }
                    applyPreferences(e) {
                        const {
                            terminal: t,
                            fitAddon: i,
                            register: s
                        } = this;
                        (e.enableZmodem || e.enableTrzsz) && (this.zmodemAddon = new u.ZmodemAddon({
                            zmodem: e.enableZmodem,
                            trzsz: e.enableTrzsz,
                            windows: e.isWindows,
                            trzszDragInitTimeout: e.trzszDragInitTimeout,
                            onSend: this.sendCb,
                            sender: this.sendData,
                            writer: this.writeData
                        }), this.writeFunc = e => {
                            var t;
                            return null === (t = this.zmodemAddon) || void 0 === t ? void 0 : t.consume(e)
                        }, t.loadAddon(s(this.zmodemAddon)));
                        for (const [r, n] of Object.entries(e)) switch (r) {
                            case "rendererType":
                                this.setRendererType(n);
                                break;
                            case "disableLeaveAlert":
                                n && (window.removeEventListener("beforeunload", this.onWindowUnload), console.log("[ttyd] Leave site alert disabled"));
                                break;
                            case "disableResizeOverlay":
                                n && (console.log("[ttyd] Resize overlay disabled"), this.resizeOverlay = !1);
                                break;
                            case "disableReconnect":
                                n && (console.log("[ttyd] Reconnect disabled"), this.reconnect = !1, this.doReconnect = !1);
                                break;
                            case "enableZmodem":
                                n && console.log("[ttyd] Zmodem enabled");
                                break;
                            case "enableTrzsz":
                                n && console.log("[ttyd] trzsz enabled");
                                break;
                            case "trzszDragInitTimeout":
                                n && console.log(`[ttyd] trzsz drag init timeout: ${n}`);
                                break;
                            case "enableSixel":
                                n && (t.loadAddon(s(new c.ImageAddon)), console.log("[ttyd] Sixel enabled"));
                                break;
                            case "titleFixed":
                                if (!n || "" === n) return;
                                console.log(`[ttyd] setting fixed title: ${n}`), this.titleFixed = n, document.title = n;
                                break;
                            case "isWindows":
                                n && console.log("[ttyd] is windows");
                                break;
                            case "unicodeVersion":
                                switch (n) {
                                    case 6:
                                    case "6":
                                        console.log("[ttyd] setting Unicode version: 6");
                                        break;
                                    default:
                                        console.log("[ttyd] setting Unicode version: 11"), t.loadAddon(new d.Unicode11Addon), t.unicode.activeVersion = "11"
                                }
                                break;
                            default:
                                console.log(`[ttyd] option: ${r}=${JSON.stringify(n)}`), t.options[r] instanceof Object ? t.options[r] = Object.assign({}, t.options[r], n) : t.options[r] = n, 0 === r.indexOf("font") && i.fit()
                        }
                    }
                    setRendererType(e) {
                        const {
                            terminal: t
                        } = this, i = () => {
                            var e;
                            try {
                                null === (e = this.canvasAddon) || void 0 === e || e.dispose()
                            } catch (e) {}
                            this.canvasAddon = void 0
                        }, s = () => {
                            var e;
                            try {
                                null === (e = this.webglAddon) || void 0 === e || e.dispose()
                            } catch (e) {}
                            this.webglAddon = void 0
                        }, r = () => {
                            if (!this.canvasAddon) {
                                this.canvasAddon = new o.CanvasAddon, s();
                                try {
                                    this.terminal.loadAddon(this.canvasAddon), console.log("[ttyd] canvas renderer loaded")
                                } catch (e) {
                                    console.log("[ttyd] canvas renderer could not be loaded, falling back to dom renderer", e), i()
                                }
                            }
                        }, n = () => {
                            if (!this.webglAddon) {
                                this.webglAddon = new a.WebglAddon, i();
                                try {
                                    this.webglAddon.onContextLoss((() => {
                                        var e;
                                        null === (e = this.webglAddon) || void 0 === e || e.dispose()
                                    })), t.loadAddon(this.webglAddon), console.log("[ttyd] WebGL renderer loaded")
                                } catch (e) {
                                    console.log("[ttyd] WebGL renderer could not be loaded, falling back to canvas renderer", e), s(), r()
                                }
                            }
                        };
                        switch (e) {
                            case "canvas":
                                r();
                                break;
                            case "webgl":
                                n();
                                break;
                            case "dom":
                                s(), i(), console.log("[ttyd] dom renderer loaded")
                        }
                    }
                }
                t.Xterm = p, s([r.bind], p.prototype, "register", null), s([r.bind], p.prototype, "sendFile", null), s([r.bind], p.prototype, "refreshToken", null), s([r.bind], p.prototype, "onWindowUnload", null), s([r.bind], p.prototype, "open", null), s([r.bind], p.prototype, "initListeners", null), s([r.bind], p.prototype, "writeData", null), s([r.bind], p.prototype, "sendData", null), s([r.bind], p.prototype, "connect", null), s([r.bind], p.prototype, "onSocketOpen", null), s([r.bind], p.prototype, "onSocketClose", null), s([r.bind], p.prototype, "parseOptsFromUrlQuery", null), s([r.bind], p.prototype, "onSocketData", null), s([r.bind], p.prototype, "applyPreferences", null), s([r.bind], p.prototype, "setRendererType", null)
            },
            956: (e, t, i) => {
                "use strict";
                i.r(t), i.d(t, {
                    DOMException: () => w,
                    Headers: () => c,
                    Request: () => v,
                    Response: () => A,
                    fetch: () => b
                });
                var s = "undefined" != typeof globalThis && globalThis || "undefined" != typeof self && self || void 0 !== i.g && i.g || {},
                    r = {
                        searchParams: "URLSearchParams" in s,
                        iterable: "Symbol" in s && "iterator" in Symbol,
                        blob: "FileReader" in s && "Blob" in s && function() {
                            try {
                                return new Blob, !0
                            } catch (e) {
                                return !1
                            }
                        }(),
                        formData: "FormData" in s,
                        arrayBuffer: "ArrayBuffer" in s
                    };
                if (r.arrayBuffer) var n = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"],
                    o = ArrayBuffer.isView || function(e) {
                        return e && n.indexOf(Object.prototype.toString.call(e)) > -1
                    };

                function a(e) {
                    if ("string" != typeof e && (e = String(e)), /[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e) || "" === e) throw new TypeError('Invalid character in header field name: "' + e + '"');
                    return e.toLowerCase()
                }

                function h(e) {
                    return "string" != typeof e && (e = String(e)), e
                }

                function l(e) {
                    var t = {
                        next: function() {
                            var t = e.shift();
                            return {
                                done: void 0 === t,
                                value: t
                            }
                        }
                    };
                    return r.iterable && (t[Symbol.iterator] = function() {
                        return t
                    }), t
                }

                function c(e) {
                    this.map = {}, e instanceof c ? e.forEach((function(e, t) {
                        this.append(t, e)
                    }), this) : Array.isArray(e) ? e.forEach((function(e) {
                        if (2 != e.length) throw new TypeError("Headers constructor: expected name/value pair to be length 2, found" + e.length);
                        this.append(e[0], e[1])
                    }), this) : e && Object.getOwnPropertyNames(e).forEach((function(t) {
                        this.append(t, e[t])
                    }), this)
                }

                function d(e) {
                    if (!e._noBody) return e.bodyUsed ? Promise.reject(new TypeError("Already read")) : void(e.bodyUsed = !0)
                }

                function _(e) {
                    return new Promise((function(t, i) {
                        e.onload = function() {
                            t(e.result)
                        }, e.onerror = function() {
                            i(e.error)
                        }
                    }))
                }

                function u(e) {
                    var t = new FileReader,
                        i = _(t);
                    return t.readAsArrayBuffer(e), i
                }

                function f(e) {
                    if (e.slice) return e.slice(0);
                    var t = new Uint8Array(e.byteLength);
                    return t.set(new Uint8Array(e)), t.buffer
                }

                function g() {
                    return this.bodyUsed = !1, this._initBody = function(e) {
                        var t;
                        this.bodyUsed = this.bodyUsed, this._bodyInit = e, e ? "string" == typeof e ? this._bodyText = e : r.blob && Blob.prototype.isPrototypeOf(e) ? this._bodyBlob = e : r.formData && FormData.prototype.isPrototypeOf(e) ? this._bodyFormData = e : r.searchParams && URLSearchParams.prototype.isPrototypeOf(e) ? this._bodyText = e.toString() : r.arrayBuffer && r.blob && ((t = e) && DataView.prototype.isPrototypeOf(t)) ? (this._bodyArrayBuffer = f(e.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : r.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(e) || o(e)) ? this._bodyArrayBuffer = f(e) : this._bodyText = e = Object.prototype.toString.call(e) : (this._noBody = !0, this._bodyText = ""), this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : r.searchParams && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
                    }, r.blob && (this.blob = function() {
                        var e = d(this);
                        if (e) return e;
                        if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
                        if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));
                        if (this._bodyFormData) throw new Error("could not read FormData body as blob");
                        return Promise.resolve(new Blob([this._bodyText]))
                    }), this.arrayBuffer = function() {
                        if (this._bodyArrayBuffer) {
                            var e = d(this);
                            return e || (ArrayBuffer.isView(this._bodyArrayBuffer) ? Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset, this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength)) : Promise.resolve(this._bodyArrayBuffer))
                        }
                        if (r.blob) return this.blob().then(u);
                        throw new Error("could not read as ArrayBuffer")
                    }, this.text = function() {
                        var e, t, i, s, r, n = d(this);
                        if (n) return n;
                        if (this._bodyBlob) return e = this._bodyBlob, t = new FileReader, i = _(t), s = /charset=([A-Za-z0-9_-]+)/.exec(e.type), r = s ? s[1] : "utf-8", t.readAsText(e, r), i;
                        if (this._bodyArrayBuffer) return Promise.resolve(function(e) {
                            for (var t = new Uint8Array(e), i = new Array(t.length), s = 0; s < t.length; s++) i[s] = String.fromCharCode(t[s]);
                            return i.join("")
                        }(this._bodyArrayBuffer));
                        if (this._bodyFormData) throw new Error("could not read FormData body as text");
                        return Promise.resolve(this._bodyText)
                    }, r.formData && (this.formData = function() {
                        return this.text().then(m)
                    }), this.json = function() {
                        return this.text().then(JSON.parse)
                    }, this
                }
                c.prototype.append = function(e, t) {
                    e = a(e), t = h(t);
                    var i = this.map[e];
                    this.map[e] = i ? i + ", " + t : t
                }, c.prototype.delete = function(e) {
                    delete this.map[a(e)]
                }, c.prototype.get = function(e) {
                    return e = a(e), this.has(e) ? this.map[e] : null
                }, c.prototype.has = function(e) {
                    return this.map.hasOwnProperty(a(e))
                }, c.prototype.set = function(e, t) {
                    this.map[a(e)] = h(t)
                }, c.prototype.forEach = function(e, t) {
                    for (var i in this.map) this.map.hasOwnProperty(i) && e.call(t, this.map[i], i, this)
                }, c.prototype.keys = function() {
                    var e = [];
                    return this.forEach((function(t, i) {
                        e.push(i)
                    })), l(e)
                }, c.prototype.values = function() {
                    var e = [];
                    return this.forEach((function(t) {
                        e.push(t)
                    })), l(e)
                }, c.prototype.entries = function() {
                    var e = [];
                    return this.forEach((function(t, i) {
                        e.push([i, t])
                    })), l(e)
                }, r.iterable && (c.prototype[Symbol.iterator] = c.prototype.entries);
                var p = ["CONNECT", "DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT", "TRACE"];

                function v(e, t) {
                    if (!(this instanceof v)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                    var i, r, n = (t = t || {}).body;
                    if (e instanceof v) {
                        if (e.bodyUsed) throw new TypeError("Already read");
                        this.url = e.url, this.credentials = e.credentials, t.headers || (this.headers = new c(e.headers)), this.method = e.method, this.mode = e.mode, this.signal = e.signal, n || null == e._bodyInit || (n = e._bodyInit, e.bodyUsed = !0)
                    } else this.url = String(e);
                    if (this.credentials = t.credentials || this.credentials || "same-origin", !t.headers && this.headers || (this.headers = new c(t.headers)), this.method = (i = t.method || this.method || "GET", r = i.toUpperCase(), p.indexOf(r) > -1 ? r : i), this.mode = t.mode || this.mode || null, this.signal = t.signal || this.signal || function() {
                            if ("AbortController" in s) return (new AbortController).signal
                        }(), this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && n) throw new TypeError("Body not allowed for GET or HEAD requests");
                    if (this._initBody(n), !("GET" !== this.method && "HEAD" !== this.method || "no-store" !== t.cache && "no-cache" !== t.cache)) {
                        var o = /([?&])_=[^&]*/;
                        if (o.test(this.url)) this.url = this.url.replace(o, "$1_=" + (new Date).getTime());
                        else {
                            this.url += (/\?/.test(this.url) ? "&" : "?") + "_=" + (new Date).getTime()
                        }
                    }
                }

                function m(e) {
                    var t = new FormData;
                    return e.trim().split("&").forEach((function(e) {
                        if (e) {
                            var i = e.split("="),
                                s = i.shift().replace(/\+/g, " "),
                                r = i.join("=").replace(/\+/g, " ");
                            t.append(decodeURIComponent(s), decodeURIComponent(r))
                        }
                    })), t
                }

                function A(e, t) {
                    if (!(this instanceof A)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                    if (t || (t = {}), this.type = "default", this.status = void 0 === t.status ? 200 : t.status, this.status < 200 || this.status > 599) throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");
                    this.ok = this.status >= 200 && this.status < 300, this.statusText = void 0 === t.statusText ? "" : "" + t.statusText, this.headers = new c(t.headers), this.url = t.url || "", this._initBody(e)
                }
                v.prototype.clone = function() {
                    return new v(this, {
                        body: this._bodyInit
                    })
                }, g.call(v.prototype), g.call(A.prototype), A.prototype.clone = function() {
                    return new A(this._bodyInit, {
                        status: this.status,
                        statusText: this.statusText,
                        headers: new c(this.headers),
                        url: this.url
                    })
                }, A.error = function() {
                    var e = new A(null, {
                        status: 200,
                        statusText: ""
                    });
                    return e.ok = !1, e.status = 0, e.type = "error", e
                };
                var C = [301, 302, 303, 307, 308];
                A.redirect = function(e, t) {
                    if (-1 === C.indexOf(t)) throw new RangeError("Invalid status code");
                    return new A(null, {
                        status: t,
                        headers: {
                            location: e
                        }
                    })
                };
                var w = s.DOMException;
                try {
                    new w
                } catch (e) {
                    (w = function(e, t) {
                        this.message = e, this.name = t;
                        var i = Error(e);
                        this.stack = i.stack
                    }).prototype = Object.create(Error.prototype), w.prototype.constructor = w
                }

                function b(e, t) {
                    return new Promise((function(i, n) {
                        var o = new v(e, t);
                        if (o.signal && o.signal.aborted) return n(new w("Aborted", "AbortError"));
                        var l = new XMLHttpRequest;

                        function d() {
                            l.abort()
                        }
                        if (l.onload = function() {
                                var e, t, s = {
                                    statusText: l.statusText,
                                    headers: (e = l.getAllResponseHeaders() || "", t = new c, e.replace(/\r?\n[\t ]+/g, " ").split("\r").map((function(e) {
                                        return 0 === e.indexOf("\n") ? e.substr(1, e.length) : e
                                    })).forEach((function(e) {
                                        var i = e.split(":"),
                                            s = i.shift().trim();
                                        if (s) {
                                            var r = i.join(":").trim();
                                            try {
                                                t.append(s, r)
                                            } catch (e) {
                                                console.warn("Response " + e.message)
                                            }
                                        }
                                    })), t)
                                };
                                0 === o.url.indexOf("file://") && (l.status < 200 || l.status > 599) ? s.status = 200 : s.status = l.status, s.url = "responseURL" in l ? l.responseURL : s.headers.get("X-Request-URL");
                                var r = "response" in l ? l.response : l.responseText;
                                setTimeout((function() {
                                    i(new A(r, s))
                                }), 0)
                            }, l.onerror = function() {
                                setTimeout((function() {
                                    n(new TypeError("Network request failed"))
                                }), 0)
                            }, l.ontimeout = function() {
                                setTimeout((function() {
                                    n(new TypeError("Network request timed out"))
                                }), 0)
                            }, l.onabort = function() {
                                setTimeout((function() {
                                    n(new w("Aborted", "AbortError"))
                                }), 0)
                            }, l.open(o.method, function(e) {
                                try {
                                    return "" === e && s.location.href ? s.location.href : e
                                } catch (t) {
                                    return e
                                }
                            }(o.url), !0), "include" === o.credentials ? l.withCredentials = !0 : "omit" === o.credentials && (l.withCredentials = !1), "responseType" in l && (r.blob ? l.responseType = "blob" : r.arrayBuffer && (l.responseType = "arraybuffer")), t && "object" == typeof t.headers && !(t.headers instanceof c || s.Headers && t.headers instanceof s.Headers)) {
                            var _ = [];
                            Object.getOwnPropertyNames(t.headers).forEach((function(e) {
                                _.push(a(e)), l.setRequestHeader(e, h(t.headers[e]))
                            })), o.headers.forEach((function(e, t) {
                                -1 === _.indexOf(t) && l.setRequestHeader(t, e)
                            }))
                        } else o.headers.forEach((function(e, t) {
                            l.setRequestHeader(t, e)
                        }));
                        o.signal && (o.signal.addEventListener("abort", d), l.onreadystatechange = function() {
                            4 === l.readyState && o.signal.removeEventListener("abort", d)
                        }), l.send(void 0 === o._bodyInit ? null : o._bodyInit)
                    }))
                }
                b.polyfill = !0, s.fetch || (s.fetch = b, s.Headers = c, s.Request = v, s.Response = A)
            },
            337: e => {
                "use strict";
                var t = e.exports;
                const i = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 97, 98, 99, 100, 101, 102],
                    s = {};
                for (var r = 0; r < i.length; r++) s[i[r]] = r;
                t.ENCODELIB = {
                    pack_u16_be: function(e) {
                        if (e > 65535) throw "Number cannot exceed 16 bits: " + e;
                        return [e >> 8, 255 & e]
                    },
                    pack_u32_le: function(e) {
                        var t = e / 65536;
                        return [255 & e, (65535 & e) >> 8, 255 & t, t >> 8]
                    },
                    unpack_u16_be: function(e) {
                        return (e[0] << 8) + e[1]
                    },
                    unpack_u32_le: function(e) {
                        return e[0] + (e[1] << 8) + (e[2] << 16) + 16777216 * e[3]
                    },
                    octets_to_hex: function(e) {
                        for (var t = [], s = 0; s < e.length; s++) t.push(i[e[s] >> 4], i[15 & e[s]]);
                        return t
                    },
                    parse_hex_octets: function(e) {
                        for (var t = new Array(e.length / 2), i = 0; i < t.length; i++) t[i] = (s[e[2 * i]] << 4) + s[e[1 + 2 * i]];
                        return t
                    }
                }
            },
            536: e => {
                e.exports.Text = {
                    Encoder: "undefined" != typeof TextEncoder ? TextEncoder : class {
                        encode(e) {
                            e = unescape(encodeURIComponent(e));
                            for (var t = new Array(e.length), i = 0; i < e.length; i++) t[i] = e.charCodeAt(i);
                            return new Uint8Array(t)
                        }
                    },
                    Decoder: "undefined" != typeof TextDecoder ? TextDecoder : class {
                        decode(e) {
                            return decodeURIComponent(escape(String.fromCharCode.apply(String, e)))
                        }
                    }
                }
            },
            367: (e, t, i) => {
                "use strict";
                const s = i(338);
                var r, n = e.exports;
                Object.assign(n, i(963), i(337));
                const o = 16,
                    a = 4129,
                    h = 65535,
                    l = 1 << o - 1;

                function c(e, t) {
                    return r || function() {
                        r = new Array(256);
                        for (var e = o - 8, t = 0; t < 256; t++) {
                            for (var i = t << e & h, s = 0; s < 8; s++) 0 != (i & l) ? (i <<= 1, i ^= a) : i <<= 1;
                            r[t] = i & h
                        }
                    }(), r[t >> 8 & 255] ^ (255 & t) << 8 ^ e
                }

                function d(e, t) {
                    if (e.join() !== t.join()) throw new n.Error("crc", t, e)
                }
                n.CRC = {
                    crc16: function(e) {
                        for (var t = e[0], i = 1; i < e.length; i++) t = c(e[i], t);
                        return t = c(0, c(0, t)), n.ENCODELIB.pack_u16_be(t)
                    },
                    crc32: function(e) {
                        return n.ENCODELIB.pack_u32_le(s.buf(e) >>> 0)
                    },
                    verify16: function(e, t) {
                        return d(this.crc16(e), t)
                    },
                    verify32: function(e, t) {
                        try {
                            d(this.crc32(e), t)
                        } catch (t) {
                            throw t.input = e.slice(0), t
                        }
                    }
                }
            },
            846: (e, t, i) => {
                "use strict";
                var s, r, n = e.exports;
                Object.assign(n, i(907));
                const o = n.ZMLIB.ZDLE;
                n.ZDLE = class e {
                    constructor(e) {
                        this._config = {}, e && this.set_escape_ctrl_chars(!!e.escape_ctrl_chars)
                    }
                    set_escape_ctrl_chars(e) {
                        if ("boolean" != typeof e) throw "need boolean!";
                        e !== this._config.escape_ctrl_chars && (this._config.escape_ctrl_chars = e, this._setup_zdle_table())
                    }
                    escapes_ctrl_chars() {
                        return !!this._config.escape_ctrl_chars
                    }
                    encode(e) {
                        if (!this._zdle_table) throw "No ZDLE encode table configured!";
                        var t = this._zdle_table,
                            i = this._lastcode,
                            n = new ArrayBuffer(2 * e.length),
                            a = new Uint8Array(n),
                            h = this._config.escape_ctrl_chars,
                            l = 0;
                        for (s = 0; s < e.length; s++) {
                            if (!(r = t[e[s]])) throw console.trace(), console.error("bad encode() call:", JSON.stringify(e)), this._lastcode = i, "Invalid octet: " + e[s];
                            i = e[s], 1 === r || (h || 2 === r || 64 == (127 & i)) && (a[l] = o, l++, i ^= 64), a[l] = i, l++
                        }
                        return this._lastcode = i, e.splice(0), e.push.apply(e, new Uint8Array(n, 0, l)), e
                    }
                    static decode(e) {
                        for (var t = e.length - 1; t >= 0; t--) e[t] === o && e.splice(t, 2, e[t + 1] - 64);
                        return e
                    }
                    static splice(t, i, s) {
                        var r = 0;
                        i || (i = 0);
                        for (var n = i; n < t.length && r < s; n++) r++, t[n] === o && n++;
                        if (r === s) {
                            if (t.length === n - 1) return;
                            return t.splice(0, i), e.decode(t.splice(0, n - i))
                        }
                    }
                    _setup_zdle_table() {
                        for (var e = new Array(256), t = 0; t < e.length; t++)
                            if (96 & t) e[t] = 1;
                            else switch (t) {
                                case o:
                                case n.ZMLIB.XOFF:
                                case n.ZMLIB.XON:
                                case 128 | n.ZMLIB.XOFF:
                                case 128 | n.ZMLIB.XON:
                                    e[t] = 2;
                                    break;
                                case 16:
                                case 144:
                                    e[t] = this._config.turbo_escape ? 1 : 2;
                                    break;
                                case 13:
                                case 141:
                                    e[t] = this._config.escape_ctrl_chars ? 2 : this._config.turbo_escape ? 1 : 3;
                                    break;
                                default:
                                    e[t] = this._config.escape_ctrl_chars ? 2 : 1
                            }
                        this._zdle_table = e
                    }
                }
            },
            963: e => {
                "use strict";
                var t = e.exports;
                const i = {
                    aborted: "Session aborted",
                    peer_aborted: "Peer aborted session",
                    already_aborted: "Session already aborted",
                    crc: function(e, t) {
                        return this.got = e.slice(0), this.expected = t.slice(0), "CRC check failed! (got: " + e.join() + "; expected: " + t.join() + ")"
                    },
                    validation: function(e) {
                        return e
                    }
                };

                function s(e) {
                    const t = i[e];
                    switch (typeof t) {
                        case "string":
                            return t;
                        case "function":
                            var s = [].slice.call(arguments).slice(1);
                            return t.apply(this, s)
                    }
                    return null
                }
                t.Error = class extends Error {
                    constructor(e) {
                        super();
                        var t = s.apply(this, arguments);
                        t ? (this.type = e, this.message = t) : this.message = e
                    }
                }
            },
            424: (e, t, i) => {
                "use strict";
                var s = e.exports;
                Object.assign(s, i(337), i(846), i(907), i(367), i(963));
                const r = "*".charCodeAt(0),
                    n = "A".charCodeAt(0),
                    o = "B".charCodeAt(0),
                    a = "C".charCodeAt(0),
                    h = [13, 10],
                    l = h.slice(0).concat([s.ZMLIB.XON]),
                    c = [r, r, s.ZMLIB.ZDLE, o],
                    d = [r, s.ZMLIB.ZDLE, n],
                    _ = [r, s.ZMLIB.ZDLE, a];
                s.Header = class {
                    static trim_leading_garbage(e) {
                        var t, i, n = [];
                        e: for (; e.length && !i;) {
                            var o = e.indexOf(r);
                            if (-1 === o) {
                                t = !0;
                                break e
                            }
                            if (n.push.apply(n, e.splice(0, o)), e.length < 2) break e;
                            if (e[1] === r)
                                if (e.length < c.length) {
                                    if (e.join() === c.slice(0, e.length).join()) break e
                                } else e[2] === c[2] && e[3] === c[3] && (i = H);
                            else if (e[1] === s.ZMLIB.ZDLE) {
                                if (e.length < d.length) break e;
                                e[2] === d[2] ? i = O : e[2] === _[2] && (i = F)
                            }
                            i || n.push(e.shift())
                        }
                        return t && n.push.apply(n, e.splice(0)), n
                    }
                    static parse(e) {
                        var t;
                        if (e[1] === r) return (t = H(e)) && [t, 16];
                        if (e[2] === n) return (t = O(e)) && [t, 16];
                        if (e[2] === a) return (t = F(e)) && [t, 32];
                        if (!(e.length < 3)) throw "Unrecognized/unsupported octets: " + e.join()
                    }
                    static build(e) {
                        var t = 1 === arguments.length ? [arguments[0]] : Array.apply(null, arguments),
                            i = k[e];
                        if (!i) throw "No frame class " + e + " is defined!";
                        return t.shift(), new(i.bind.apply(i, [null].concat(t)))
                    }
                    to_hex() {
                        var e = this._crc_bytes();
                        return c.concat(s.ENCODELIB.octets_to_hex(e.concat(s.CRC.crc16(e))), this._hex_header_ending)
                    }
                    to_binary16(e) {
                        return this._to_binary(e, d, s.CRC.crc16)
                    }
                    to_binary32(e) {
                        return this._to_binary(e, _, s.CRC.crc32)
                    }
                    constructor() {
                        this._bytes4 || (this._bytes4 = [0, 0, 0, 0])
                    }
                    _to_binary(e, t, i) {
                        var s = this._crc_bytes();
                        return t.concat(e.encode(s.concat(i(s))))
                    }
                    _crc_bytes() {
                        return [this.TYPENUM].concat(this._bytes4)
                    }
                }, s.Header.prototype._hex_header_ending = l;
                class u extends s.Header {}
                const f = {
                    CANFDX: 1,
                    CANOVIO: 2,
                    CANBRK: 4,
                    CANCRY: 8,
                    CANLZW: 16,
                    CANFC32: 32,
                    ESCCTL: 64,
                    ESC8: 128
                };
                class g extends s.Header {
                    constructor(e, t) {
                        super();
                        var i = 0;
                        t || (t = 0), e.forEach((function(e) {
                            i |= function(e) {
                                if (!f[e]) throw new s.Error("Invalid ZRINIT flag: " + e);
                                return f[e]
                            }(e)
                        })), this._bytes4 = [255 & t, t >> 8, 0, i]
                    }
                    get_buffer_size() {
                        return s.ENCODELIB.unpack_u16_be(this._bytes4.slice(0, 2)) || void 0
                    }
                    can_full_duplex() {
                        return !!(this._bytes4[3] & f.CANFDX)
                    }
                    can_overlap_io() {
                        return !!(this._bytes4[3] & f.CANOVIO)
                    }
                    can_break() {
                        return !!(this._bytes4[3] & f.CANBRK)
                    }
                    can_fcs_32() {
                        return !!(this._bytes4[3] & f.CANFC32)
                    }
                    escape_ctrl_chars() {
                        return !!(this._bytes4[3] & f.ESCCTL)
                    }
                    escape_8th_bit() {
                        return !!(this._bytes4[3] & f.ESC8)
                    }
                }
                const p = {
                    ESCCTL: 64,
                    ESC8: 128
                };
                class v extends s.Header {
                    constructor(e, t) {
                        super();
                        var i = 0;
                        if (e.forEach((function(e) {
                                i |= function(e) {
                                    if (!p[e]) throw "Invalid ZSINIT flag: " + e;
                                    return p[e]
                                }(e)
                            })), this._bytes4 = [0, 0, 0, i], t) {
                            if (t.length > 31) throw "Attn sequence must be <= 31 bytes";
                            if (t.some((function(e) {
                                    return e > 255
                                }))) throw "Attn sequence (" + t + ") must be <256";
                            this._data = t.concat([0])
                        }
                    }
                    escape_ctrl_chars() {
                        return !!(this._bytes4[3] & p.ESCCTL)
                    }
                    escape_8th_bit() {
                        return !!(this._bytes4[3] & p.ESC8)
                    }
                }
                class m extends s.Header {
                    constructor(e) {
                        super(), e && (this._bytes4 = e.slice())
                    }
                }
                m.prototype._hex_header_ending = h;
                const A = {
                        extended: {
                            sparse: 64
                        },
                        transport: [void 0, "compress", "encrypt", "rle"],
                        management: [void 0, "newer_or_longer", "crc", "append", "clobber", "newer", "mtime_or_length", "protect", "rename"],
                        conversion: [void 0, "binary", "text", "resume"]
                    },
                    C = ["extended", "transport", "management", "conversion"];
                class w extends s.Header {
                    get_options() {
                        var e = {
                                sparse: !!(64 & this._bytes4[0])
                            },
                            t = this._bytes4.slice(0);
                        return C.forEach((function(i, s) {
                            if (A[i] instanceof Array) "management" === i && (e.skip_if_absent = !!(128 & t[s]), t[s] &= 31), e[i] = A[i][t[s]];
                            else
                                for (var r in A[i]) e[r] = !!(t[s] & A[i][r]), e[r] && (t[s] ^= A[i][r]);
                            !e[i] && t[s] && (e[i] = "unknown:" + t[s])
                        })), e
                    }
                }
                class b extends s.Header {}
                class y extends s.Header {}
                class S extends s.Header {}
                class E extends s.Header {}
                S.prototype._hex_header_ending = h;
                class x extends s.Header {
                    constructor(e) {
                        super(), this._bytes4 = s.ENCODELIB.pack_u32_le(e)
                    }
                    get_offset() {
                        return s.ENCODELIB.unpack_u32_le(this._bytes4)
                    }
                }
                class L extends x {}
                class I extends x {}
                class B extends x {}
                const D = [
                    [u, "ZRQINIT"],
                    [g, "ZRINIT"],
                    [v, "ZSINIT"],
                    [m, "ZACK"],
                    [w, "ZFILE"],
                    [b, "ZSKIP"], void 0, [y, "ZABORT"],
                    [S, "ZFIN"],
                    [L, "ZRPOS"],
                    [I, "ZDATA"],
                    [B, "ZEOF"],
                    [E, "ZFERR"], void 0, void 0, void 0, void 0, void 0, void 0, void 0
                ];
                for (var k = {}, R = 0; R < D.length; R++) D[R] && (k[D[R][1]] = D[R][0], Object.assign(D[R][0].prototype, {
                    TYPENUM: R,
                    NAME: D[R][1]
                }));
                const M = [u, g, v, m, w, b, "ZNAK", y, S, L, I, B, E, "ZCRC", "ZCHALLENGE", "ZCOMPL", "ZCAN", "ZFREECNT", "ZCOMMAND", "ZSTDERR"];

                function T(e) {
                    var t = M[e];
                    if ("string" == typeof t) throw "Received unsupported header: " + t;
                    return function(e) {
                        if (e.prototype instanceof x) return new e(0);
                        return new e([])
                    }(t)
                }

                function O(e) {
                    var t = s.ZDLE.splice(e, d.length, 7);
                    return t && P(t)
                }

                function P(e) {
                    s.CRC.verify16(e.slice(0, 5), e.slice(5));
                    var t = T(e[0]);
                    return t._bytes4 = e.slice(1, 5), t
                }

                function F(e) {
                    var t = s.ZDLE.splice(e, _.length, 9);
                    if (t) {
                        s.CRC.verify32(t.slice(0, 5), t.slice(5));
                        var i = T(t[0]);
                        return i._bytes4 = t.slice(1, 5), i
                    }
                }

                function H(e) {
                    var t, i, r = e.indexOf(138);
                    if (-1 === r && (r = e.indexOf(10)), -1 !== r) {
                        if (i = e.splice(0, r), e.shift(), 19 === i.length) {
                            var n = i.pop();
                            13 !== n && 141 !== n && (t = "Invalid hex header: (CR/)LF doesnt have CR!")
                        } else 18 !== i.length && (t = "Invalid hex header: invalid number of bytes before LF!");
                        if (t) throw t += " (" + i.length + " bytes: " + i.join() + ")";
                        return i.splice(0, 4), P(s.ENCODELIB.parse_hex_octets(i))
                    }
                    e.length > 11 && (t = "Invalid hex header - no LF detected within 12 bytes!")
                }
                s.Header.parse_hex = H
            },
            907: e => {
                "use strict";
                var t = e.exports;
                t.ZMLIB = {
                    ZDLE: 24,
                    XON: 17,
                    XOFF: 19,
                    ABORT_SEQUENCE: [24, 24, 24, 24, 24],
                    strip_ignored_bytes: function(e) {
                        for (var t = e.length - 1; t >= 0; t--) switch (e[t]) {
                            case 17:
                            case 145:
                            case 19:
                            case 147:
                                e.splice(t, 1);
                                continue
                        }
                        return e
                    },
                    find_subarray: function(e, t) {
                        var i, s = 0;
                        Date.now();
                        e: for (; - 1 !== s && -1 !== (s = e.indexOf(t[0], s));) {
                            for (i = 1; i < t.length; i++)
                                if (e[s + i] !== t[i]) {
                                    s++;
                                    continue e
                                } return s
                        }
                        return -1
                    }
                }
            },
            499: (e, t, i) => {
                Object.assign(e.exports, i(582))
            },
            160: (e, t, i) => {
                "use strict";
                var s = e.exports;

                function r(e) {
                    if (e.aborted()) throw new s.Error("aborted")
                }
                window.Zmodem = s, Object.assign(s, i(499)), s.Browser = {
                    send_files: function(e, t, i) {
                        i || (i = {});
                        for (var s = [], n = 0, o = t.length - 1; o >= 0; o--) {
                            var a = t[o];
                            n += a.size, s[o] = {
                                obj: a,
                                name: a.name,
                                size: a.size,
                                mtime: new Date(a.lastModified),
                                files_remaining: t.length - o,
                                bytes_remaining: n
                            }
                        }
                        var h = 0;
                        return function t() {
                            var n = s[h];
                            return n ? (h++, e.send_offer(n).then((function(s) {
                                return i.on_offer_response && i.on_offer_response(n.obj, s), void 0 === s ? t() : new Promise((function(o) {
                                    var a, h = new FileReader;
                                    h.onerror = function(e) {
                                        throw console.error("file read error", e), "File read error: " + e
                                    }, h.onprogress = function(t) {
                                        t.target.result && (a = new Uint8Array(t.target.result, s.get_offset()), r(e), s.send(a), i.on_progress && i.on_progress(n.obj, s, a))
                                    }, h.onload = function(h) {
                                        a = new Uint8Array(h.target.result, s, a), r(e), s.end(a).then((function() {
                                            i.on_progress && a.length && i.on_progress(n.obj, s, a), i.on_file_complete && i.on_file_complete(n.obj, s), o(t())
                                        }))
                                    }, h.readAsArrayBuffer(n.obj)
                                }))
                            }))) : Promise.resolve()
                        }()
                    },
                    save_to_disk: function(e, t) {
                        var i = new Blob(e),
                            s = URL.createObjectURL(i),
                            r = document.createElement("a");
                        r.style.display = "none", r.href = s, r.download = t, document.body.appendChild(r), r.click(), document.body.removeChild(r)
                    }
                }
            },
            582: (e, t, i) => {
                "use strict";
                var s = e.exports;
                Object.assign(s, i(907), i(1));
                const r = [42, 42, 24, 66, 48],
                    n = ["to_terminal", "on_detect", "on_retract", "sender"];
                class o {
                    constructor(e, t, i, s) {
                        this._confirmer = t, this._denier = i, this._is_valid = s, this._session_type = e
                    }
                    confirm() {
                        return this._confirmer.apply(this, arguments)
                    }
                    deny() {
                        return this._denier.apply(this, arguments)
                    }
                    is_valid() {
                        return this._is_valid.apply(this, arguments)
                    }
                    get_session_role() {
                        return this._session_type
                    }
                }
                s.Sentry = class {
                    constructor(e) {
                        if (!e) throw "Need options!";
                        var t = this;
                        n.forEach((function(i) {
                            if (!e[i]) throw "Need " + i + "!";
                            t["_" + i] = e[i]
                        })), this._cache = []
                    }
                    _after_session_end() {
                        this._zsession = null
                    }
                    consume(e) {
                        if (e instanceof Array || (e = Array.prototype.slice.call(new Uint8Array(e))), this._zsession) {
                            var t = this._zsession;
                            if (t.consume(e), !t.has_ended()) return;
                            e = "receive" === t.type ? t.get_trailing_bytes() : []
                        }
                        var i = this._parse(e),
                            s = e;
                        if (i) {
                            !!this._parsed_session && (this._parsed_session.type === i.type && (s = []), this._on_retract()), this._parsed_session = i;
                            var r = this;

                            function a() {
                                return r._parsed_session === i
                            }

                            function h() {
                                if (!this.is_valid()) throw "Stale ZMODEM session!";
                                return i.on("garbage", r._to_terminal), i.on("session_end", r._after_session_end.bind(r)), i.set_sender(r._sender), delete r._parsed_session, r._zsession = i
                            }
                            this._on_detect(new o(i.type, h, this._send_abort.bind(this), a))
                        } else {
                            var n = this._parsed_session;
                            this._parsed_session = null, n && (1 === s.length && 67 === s[0] && this._send_abort(), this._on_retract())
                        }
                        this._to_terminal(s)
                    }
                    get_confirmed_session() {
                        return this._zsession || null
                    }
                    _send_abort() {
                        this._sender(s.ZMLIB.ABORT_SEQUENCE)
                    }
                    _parse(e) {
                        var t = this._cache;
                        for (t.push.apply(t, e);;) {
                            let e = s.ZMLIB.find_subarray(t, r);
                            if (-1 === e) break;
                            let i;
                            t.splice(0, e);
                            try {
                                i = s.Session.parse(t)
                            } catch (e) {}
                            if (!i) break;
                            return 1 === t.length && t[0] === s.ZMLIB.XON && t.shift(), t.length ? null : i
                        }
                        return t.splice(21), null
                    }
                }
            },
            1: (e, t, i) => {
                "use strict";
                var s = e.exports;
                s.DEBUG = !1, Object.assign(s, i(337), i(536), i(846), i(907), i(424), i(807), i(410), i(963));
                const r = ["CANFDX", "CANOVIO", "CANFC32"],
                    n = "spool_uint8array",
                    o = [79, 79],
                    a = s.ZMLIB.ABORT_SEQUENCE;
                class h {
                    constructor() {
                        this._on_evt = {}, this._evt_once_index = {}
                    }
                    _Add_event(e) {
                        this._on_evt[e] = [], this._evt_once_index[e] = []
                    }
                    _get_evt_queue(e) {
                        if (!this._on_evt[e]) throw "Bad event: " + e;
                        return this._on_evt[e]
                    }
                    on(e, t) {
                        return this._get_evt_queue(e).push(t), this
                    }
                    off(e, t) {
                        var i = this._get_evt_queue(e);
                        if (t) {
                            var s = i.indexOf(t);
                            if (-1 === s) throw "" + t + " is not in the " + e + " queue.";
                            i.splice(s, 1)
                        } else i.pop();
                        return this
                    }
                    _Happen(e) {
                        var t = this._get_evt_queue(e),
                            i = Array.apply(null, arguments);
                        i.shift();
                        var s = this;
                        return t.forEach((function(e) {
                            e.apply(s, i)
                        })), t.length
                    }
                }
                s.Session = class extends h {
                    static parse(e) {
                        var t;
                        try {
                            t = s.Header.parse_hex(e)
                        } catch (e) {
                            return
                        }
                        if (t) switch (t.NAME) {
                            case "ZRQINIT":
                                return new s.Session.Receive;
                            case "ZRINIT":
                                return new s.Session.Send(t)
                        }
                    }
                    set_sender(e) {
                        return this._sender = e, this
                    }
                    has_ended() {
                        return this._has_ended()
                    }
                    consume(e) {
                        if (this._before_consume(e), this._aborted) throw new s.Error("already_aborted");
                        e.length && (this._strip_and_enqueue_input(e), this._check_for_abort_sequence(e) || this._consume_first())
                    }
                    aborted() {
                        return !!this._aborted
                    }
                    constructor() {
                        super(), this._config = {}, this._input_buffer = [], this._Add_event("receive"), this._Add_event("garbage"), this._Add_event("session_end")
                    }
                    get_role() {
                        return this.type
                    }
                    _trim_leading_garbage_until_header() {
                        var e = s.Header.trim_leading_garbage(this._input_buffer);
                        e.length && 0 === this._Happen("garbage", e) && console.debug("Garbage: ", String.fromCharCode.apply(String, e), e)
                    }
                    _parse_and_consume_header() {
                        this._trim_leading_garbage_until_header();
                        var e = s.Header.parse(this._input_buffer);
                        if (e) return s.DEBUG && this._log_header("RECEIVED HEADER", e[0]), this._consume_header(e[0]), this._last_header_name = e[0].NAME, this._last_header_crc = e[1], e[0]
                    }
                    _log_header(e, t) {
                        console.debug(this.type, e, t.NAME, t._bytes4.join())
                    }
                    _consume_header(e) {
                        this._on_receive(e);
                        var t = this._next_header_handler && this._next_header_handler[e.NAME];
                        if (!t) throw console.error("Unhandled header!", e, this._next_header_handler), new s.Error("Unhandled header: " + e.NAME);
                        this._next_header_handler = null, t.call(this, e)
                    }
                    _check_for_abort_sequence() {
                        var e = s.ZMLIB.find_subarray(this._input_buffer, a);
                        if (-1 !== e) throw this._input_buffer.splice(0, e + a.length), this._aborted = !0, this._on_session_end(), new s.Error("peer_aborted")
                    }
                    _send_header(e) {
                        if (!this._sender) throw "Need sender!";
                        var t = Array.apply(null, arguments),
                            i = this._create_header_bytes(t);
                        s.DEBUG && this._log_header("SENDING HEADER", i[1]), this._sender(i[0]), this._last_sent_header = i[1]
                    }
                    _create_header_bytes(e) {
                        var t = s.Header.build.apply(s.Header, e);
                        return [t[this._get_header_formatter(e[0])](this._zencoder), t]
                    }
                    _strip_and_enqueue_input(e) {
                        s.ZMLIB.strip_ignored_bytes(e), this._input_buffer.push.apply(this._input_buffer, e)
                    }
                    abort() {
                        this._sender(a.concat([8, 8, 8, 8, 8])), this._aborted = !0, this._sender = function() {
                            throw new s.Error("already_aborted")
                        }, this._on_session_end()
                    }
                    _on_session_end() {
                        this._Happen("session_end")
                    }
                    _on_receive(e) {
                        this._Happen("receive", e)
                    }
                    _before_consume() {}
                }, s.Session.Receive = class extends s.Session {
                    constructor() {
                        super(), this._Add_event("offer"), this._Add_event("data_in"), this._Add_event("file_end")
                    }
                    _before_consume(e) {
                        if (this._bytes_after_OO) throw "PROTOCOL: Session is completed!";
                        this._bytes_being_consumed = e
                    }
                    get_trailing_bytes() {
                        if (this._aborted) return [];
                        if (!this._bytes_after_OO) throw "PROTOCOL: Session is not completed!";
                        return this._bytes_after_OO.slice(0)
                    }
                    _has_ended() {
                        return this.aborted() || !!this._bytes_after_OO
                    }
                    _get_header_formatter() {
                        return "to_hex"
                    }
                    _parse_and_consume_subpacket() {
                        var e;
                        e = 16 === this._last_header_crc ? "parse16" : "parse32";
                        var t = s.Subpacket[e](this._input_buffer);
                        return t && (s.DEBUG && console.debug(this.type, "RECEIVED SUBPACKET", t), this._consume_data(t), t.frame_end() && (this._next_subpacket_handler = null)), t
                    }
                    _consume_first() {
                        if (this._got_ZFIN) {
                            if (this._input_buffer.length < 2) return;
                            return 0 !== s.ZMLIB.find_subarray(this._input_buffer, o) && console.warn("PROTOCOL: Only thing after ZFIN should be OO (79,79), not: " + this._input_buffer.join()), this._bytes_after_OO = (e = this._bytes_being_consumed.slice(0), 0 === s.ZMLIB.find_subarray(e, o) ? e.splice(0, o.length) : e[0] === o[o.length - 1] && e.splice(0, 1), e), void this._on_session_end()
                        }
                        var e, t;
                        do {
                            t = this._next_subpacket_handler ? this._parse_and_consume_subpacket() : this._parse_and_consume_header()
                        } while (t && this._input_buffer.length)
                    }
                    _consume_data(e) {
                        if (this._on_receive(e), !this._next_subpacket_handler) throw "PROTOCOL: Received unexpected data packet after " + this._last_header_name + " header: " + e.get_payload().join();
                        this._next_subpacket_handler.call(this, e)
                    }
                    _octets_to_string(e) {
                        return this._textdecoder || (this._textdecoder = new s.Text.Decoder), this._textdecoder.decode(new Uint8Array(e))
                    }
                    _consume_ZFILE_data(e, t) {
                        if (this._file_info) throw "PROTOCOL: second ZFILE data subpacket received";
                        var i = t.get_payload(),
                            s = i.indexOf(0),
                            r = this._octets_to_string(i.slice(0, s)),
                            n = this._octets_to_string(i.slice(1 + s)).split(" "),
                            o = n[1] && parseInt(n[1], 8) || void 0;
                        o && (o = new Date(1e3 * o)), this._file_info = {
                            name: r,
                            size: n[0] ? parseInt(n[0], 10) : null,
                            mtime: o || null,
                            mode: n[2] && parseInt(n[2], 8) || null,
                            serial: n[3] && parseInt(n[3], 10) || null,
                            files_remaining: n[4] ? parseInt(n[4], 10) : null,
                            bytes_remaining: n[5] ? parseInt(n[5], 10) : null
                        };
                        var a = new d(e.get_options(), this._file_info, this._accept.bind(this), this._skip.bind(this));
                        this._current_transfer = a
                    }
                    _consume_ZDATA_data(e) {
                        if (!this._accepted_offer) throw "PROTOCOL: Received data without accepting!";
                        if (!this._offset_ok) return console.warn("offset not ok!"), void _send_ZRPOS();
                        this._file_offset += e.get_payload().length, this._on_data_in(e), e.ack_expected() && !e.frame_end() && this._send_header("ZACK", s.ENCODELIB.pack_u32_le(this._file_offset))
                    }
                    _make_promise_for_between_files() {
                        var e = this;
                        return new Promise((function(t) {
                            var i = {
                                ZFILE: function(e) {
                                    this._next_subpacket_handler = function(i) {
                                        this._next_subpacket_handler = null, this._consume_ZFILE_data(e, i), this._Happen("offer", this._current_transfer), t(this._current_transfer)
                                    }
                                },
                                ZSINIT: function(t) {
                                    e._next_subpacket_handler = function(t) {
                                        e._next_subpacket_handler = null, e._consume_ZSINIT_data(t), e._send_header("ZACK"), e._next_header_handler = i
                                    }
                                },
                                ZFIN: function() {
                                    this._consume_ZFIN(), t()
                                }
                            };
                            e._next_header_handler = i
                        }))
                    }
                    _consume_ZSINIT_data(e) {
                        this._attn = e.get_payload()
                    }
                    start() {
                        if (this._started) throw "Already started!";
                        this._started = !0;
                        var e = this._make_promise_for_between_files();
                        return this._send_ZRINIT(), e
                    }
                    _accept(e) {
                        this._accepted_offer = !0, this._file_offset = e || 0;
                        var t = this,
                            i = new Promise((function(e) {
                                t._next_header_handler = {
                                    ZDATA: function(t) {
                                        this._consume_ZDATA(t), this._next_subpacket_handler = this._consume_ZDATA_data, this._next_header_handler = {
                                            ZEOF: function(t) {
                                                this._consume_ZEOF(t), this._next_subpacket_handler = null, this._make_promise_for_between_files(), e(), this._send_ZRINIT()
                                            }
                                        }
                                    }
                                }
                            }));
                        return this._send_ZRPOS(), i
                    }
                    _skip() {
                        var e = this._make_promise_for_between_files();
                        if (this._accepted_offer) {
                            if (!this._current_transfer) return;
                            var t = function() {
                                this._accepted_offer = !1, this._next_subpacket_handler = null, this._make_promise_for_between_files()
                            }.bind(this);
                            Object.assign(this._next_header_handler, {
                                ZEOF: t,
                                ZDATA: function() {
                                    t(), this._next_header_handler.ZEOF = t
                                }.bind(this)
                            })
                        }
                        return this._file_info = null, this._send_header("ZSKIP"), e
                    }
                    _send_ZRINIT() {
                        this._send_header("ZRINIT", r)
                    }
                    _consume_ZFIN() {
                        this._got_ZFIN = !0, this._send_header("ZFIN")
                    }
                    _consume_ZEOF(e) {
                        if (this._file_offset !== e.get_offset()) throw "ZEOF offset mismatch; unimplemented (local: " + this._file_offset + "; ZEOF: " + e.get_offset() + ")";
                        this._on_file_end(), this._file_info = null, this._current_transfer = null
                    }
                    _consume_ZDATA(e) {
                        if (this._file_offset !== e.get_offset()) throw "Error correction is unimplemented.";
                        this._offset_ok = !0
                    }
                    _send_ZRPOS() {
                        this._send_header("ZRPOS", this._file_offset)
                    }
                    _on_file_end() {
                        this._Happen("file_end"), this._current_transfer && (this._current_transfer._Happen("complete"), this._current_transfer = null)
                    }
                    _on_data_in(e) {
                        this._Happen("data_in", e), this._current_transfer && this._current_transfer._Happen("input", e.get_payload())
                    }
                }, Object.assign(s.Session.Receive.prototype, {
                    type: "receive"
                });
                var l = {
                    get_details: function() {
                        return Object.assign({}, this._file_info)
                    },
                    get_options: function() {
                        return Object.assign({}, this._zfile_opts)
                    },
                    get_offset: function() {
                        return this._file_offset
                    }
                };
                class c {
                    constructor(e, t, i, s) {
                        this._file_info = e, this._file_offset = t || 0, this._send = i, this._end = s
                    }
                    send(e) {
                        this._send(e), this._file_offset += e.length
                    }
                    end(e) {
                        var t = this._end(e || []);
                        return e && (this._file_offset += e.length), t
                    }
                }
                Object.assign(c.prototype, l);
                class d extends h {
                    constructor(e, t, i, s) {
                        super(), this._zfile_opts = e, this._file_info = t, this._accept_func = i, this._skip_func = s, this._Add_event("input"), this._Add_event("complete"), this.on("input", this._input_handler)
                    }
                    _verify_not_skipped() {
                        if (this._skipped) throw new s.Error("Already skipped!")
                    }
                    skip() {
                        return this._verify_not_skipped(), this._skipped = !0, this._skip_func.apply(this, arguments)
                    }
                    accept(e) {
                        if (this._verify_not_skipped(), this._accepted) throw new s.Error("Already accepted!");
                        switch (this._accepted = !0, e || (e = {}), this._file_offset = e.offset || 0, e.on_input) {
                            case null:
                            case void 0:
                            case "spool_array":
                            case n:
                                this._spool = [];
                                break;
                            default:
                                if ("function" != typeof e.on_input) throw "Invalid on_input: " + e.on_input
                        }
                        return this._input_handler_mode = e.on_input || n, this._accept_func(this._file_offset).then(this._get_spool.bind(this))
                    }
                    _input_handler(e) {
                        if (this._file_offset += e.length, "function" == typeof this._input_handler_mode) this._input_handler_mode(e);
                        else {
                            if (this._input_handler_mode === n) e = new Uint8Array(e);
                            else if ("spool_array" !== this._input_handler_mode) throw new s.Error("WTF?? _input_handler_mode = " + this._input_handler_mode);
                            this._spool.push(e)
                        }
                    }
                    _get_spool() {
                        return this._spool
                    }
                }
                Object.assign(d.prototype, l);
                const _ = {
                    ZFILE: !0,
                    ZDATA: !0
                };
                s.Session.Send = class extends s.Session {
                    constructor(e) {
                        if (super(), !e) throw "Need first header!";
                        if ("ZRINIT" !== e.NAME) throw "First header should be ZRINIT, not " + e.NAME;
                        this._last_header_name = "ZRINIT", this._subpacket_encode_func = "encode16", this._zencoder = new s.ZDLE, this._consume_ZRINIT(e), this._file_offset = 0;
                        this._start_keepalive_on_set_sender = !0
                    }
                    set_sender(e) {
                        return super.set_sender(e), this._start_keepalive_on_set_sender && (this._start_keepalive_on_set_sender = !1, this._start_keepalive()), this
                    }
                    _get_header_formatter(e) {
                        return _[e] ? "to_binary16" : "to_hex"
                    }
                    _start_keepalive() {
                        if (!this._keepalive_promise) {
                            var e = this;
                            this._keepalive_promise = new Promise((function(t) {
                                e._keepalive_timeout = setTimeout(t, 5e3)
                            })).then((function() {
                                e._next_header_handler = {
                                    ZACK: function() {
                                        e._got_ZSINIT_ZACK = !0
                                    }
                                }, e._send_ZSINIT(), e._keepalive_promise = null, e._start_keepalive()
                            }))
                        }
                    }
                    _stop_keepalive() {
                        this._keepalive_promise && (clearTimeout(this._keepalive_timeout), this._keep_alive_promise = null)
                    }
                    _send_ZSINIT() {
                        var e = [];
                        this._zencoder.escapes_ctrl_chars() && e.push("ESCCTL"), this._send_header_and_data(["ZSINIT", e], [0], "end_ack")
                    }
                    _consume_ZRINIT(e) {
                        if (this._last_ZRINIT = e, e.get_buffer_size()) throw "Buffer size (" + e.get_buffer_size() + ") is unsupported!";
                        if (!e.can_full_duplex()) throw "Half-duplex I/O is unsupported!";
                        if (!e.can_overlap_io()) throw "Non-overlap I/O is unsupported!";
                        if (e.escape_8th_bit()) throw "8-bit escaping is unsupported!";
                        this._zencoder.set_escape_ctrl_chars(!0), e.escape_ctrl_chars() || console.debug("Peer didnt request escape of all control characters. Will send ZSINIT to force recognition of escaped control characters.")
                    }
                    _ensure_receiver_escapes_ctrl_chars() {
                        var e;
                        if (!this._last_ZRINIT.escape_ctrl_chars() && !this._got_ZSINIT_ZACK) {
                            var t = this;
                            e = new Promise((function(e) {
                                t._next_header_handler = {
                                    ZACK: t => {
                                        e()
                                    }
                                }, t._send_ZSINIT()
                            }))
                        } else e = Promise.resolve();
                        return e
                    }
                    _convert_params_to_offer_payload_array(e) {
                        var t = (e = s.Validation.offer_parameters(e)).name + "\0",
                            i = [(e.size || 0).toString(10), e.mtime ? e.mtime.toString(8) : "0", e.mode ? (32768 | e.mode).toString(8) : "0", "0"];
                        return e.files_remaining && (i.push(e.files_remaining), e.bytes_remaining && i.push(e.bytes_remaining)), t += i.join(" "), this._string_to_octets(t)
                    }
                    send_offer(e) {
                        if (s.DEBUG && console.debug("SENDING OFFER", e), !e) throw "need file params!";
                        if (this._sending_file) throw "Already sending file!";
                        var t = this._convert_params_to_offer_payload_array(e);
                        this._stop_keepalive();
                        var i = this;

                        function r() {
                            i._next_header_handler = {
                                ZRPOS: function(e) {
                                    s.DEBUG && console.warn("Mid-transfer ZRPOS  implementation error?"), r()
                                }
                            }
                        }
                        var n = function() {
                            var s = new Promise((function(t) {
                                i._next_header_handler = {
                                    ZSKIP: function() {
                                        i._start_keepalive(), t()
                                    },
                                    ZRPOS: function(s) {
                                        i._sending_file = !0, r(), t(new c(e, s.get_offset(), i._send_interim_file_piece.bind(i), i._end_file.bind(i)))
                                    }
                                }
                            }));
                            return i._send_header_and_data(["ZFILE"], t, "end_ack"), delete i._sent_ZDATA, s
                        };
                        return this._ensure_receiver_escapes_ctrl_chars().then(n)
                    }
                    _send_header_and_data(e, t, i) {
                        var r = this._create_header_bytes(e),
                            n = this._build_subpacket_bytes(t, i);
                        r[0].push.apply(r[0], n), s.DEBUG && (this._log_header("SENDING HEADER", r[1]), console.debug(this.type, "-- HEADER PAYLOAD:", i, n.length)), this._sender(r[0]), this._last_sent_header = r[1]
                    }
                    _build_subpacket_bytes(e, t) {
                        return s.Subpacket.build(e, t)[this._subpacket_encode_func](this._zencoder)
                    }
                    _build_and_send_subpacket(e, t) {
                        this._sender(this._build_subpacket_bytes(e, t))
                    }
                    _string_to_octets(e) {
                        this._textencoder || (this._textencoder = new s.Text.Encoder);
                        var t = this._textencoder.encode(e);
                        return Array.prototype.slice.call(t)
                    }
                    _send_interim_file_piece(e) {
                        return this._send_file_part(e, "no_end_no_ack"), Promise.resolve()
                    }
                    _ensure_we_are_sending() {
                        if (!this._sending_file) throw "Not sending a file currently!"
                    }
                    _end_file(e) {
                        this._ensure_we_are_sending(), this._send_file_part(e, "end_no_ack");
                        var t = this,
                            i = new Promise((function(e) {
                                t._sending_file = !1, t._prepare_to_receive_ZRINIT(e)
                            }));
                        return this._send_header("ZEOF", this._file_offset), this._file_offset = 0, i
                    }
                    _prepare_to_receive_ZRINIT(e) {
                        this._next_header_handler = {
                            ZRINIT: function(t) {
                                this._consume_ZRINIT(t), e && e()
                            }
                        }
                    }
                    close() {
                        var e = "ZRINIT" === this._last_header_name;
                        if (e || (e = "ZSKIP" === this._last_header_name), e || (e = "ZSINIT" === this._last_sent_header.name && "ZACK" === this._last_header_name), !e) throw "Cant close; last received header was " + this._last_header_name + "";
                        var t = this,
                            i = new Promise((function(e, i) {
                                t._next_header_handler = {
                                    ZFIN: function() {
                                        t._sender(o), t._sent_OO = !0, t._on_session_end(), e()
                                    }
                                }
                            }));
                        return this._send_header("ZFIN"), i
                    }
                    _has_ended() {
                        return this.aborted() || !!this._sent_OO
                    }
                    _send_file_part(e, t) {
                        this._sent_ZDATA || (this._send_header("ZDATA", this._file_offset), this._sent_ZDATA = !0);
                        for (var i = 0, s = e.length;;) {
                            var r = Math.min(i + 8192, s) - i,
                                n = r + i >= s,
                                o = e.slice(i, i + r);
                            if (o instanceof Array || (o = Array.prototype.slice.call(o)), this._build_and_send_subpacket(o, n ? t : "no_end_no_ack"), this._file_offset += r, (i += r) >= s) break
                        }
                    }
                    _consume_first() {
                        if (!this._parse_and_consume_header() && "67" === this._input_buffer.join()) throw "Receiver has fallen back to YMODEM."
                    }
                    _on_session_end() {
                        this._stop_keepalive(), super._on_session_end()
                    }
                }, Object.assign(s.Session.Send.prototype, {
                    type: "send"
                })
            },
            807: (e, t, i) => {
                "use strict";
                var s = e.exports;
                Object.assign(s, i(367), i(846), i(907), i(963));
                var r;
                s.Subpacket = class e {
                    static build(e, t) {
                        var i = r[t];
                        if (!i) throw "No subpacket type " + t + " is defined! Try one of: " + Object.keys(r).join(", ");
                        return new i(e)
                    }
                    encode16(e) {
                        return this._encode(e, s.CRC.crc16)
                    }
                    encode32(e) {
                        return this._encode(e, s.CRC.crc32)
                    }
                    get_payload() {
                        return this._payload
                    }
                    static parse16(t) {
                        return e._parse(t, 2)
                    }
                    static parse32(t) {
                        return e._parse(t, 4)
                    }
                    constructor(e) {
                        this._payload = e
                    }
                    _encode(e, t) {
                        return e.encode(this._payload.slice(0)).concat([s.ZMLIB.ZDLE, this._frameend_num], e.encode(t(this._payload.concat(this._frameend_num))))
                    }
                    static _parse(e, t) {
                        for (var i, r, n = {
                                104: a,
                                105: l,
                                106: c,
                                107: h
                            }, o = 0; o < e.length;) {
                            if (-1 === (o = e.indexOf(s.ZMLIB.ZDLE, o))) return;
                            if (r = n[e[o + 1]]) {
                                i = o + 1;
                                break
                            }
                            o++
                        }
                        if (r) {
                            var d = e[i];
                            if (e[i - 1] !== s.ZMLIB.ZDLE) throw "Byte before frame end should be ZDLE, not " + e[i - 1];
                            var _ = e.splice(0, i - 1),
                                u = s.ZDLE.splice(e, 2, t);
                            if (u) {
                                var f = s.ZDLE.decode(_);
                                return s.CRC[2 === t ? "verify16" : "verify32"](f.concat([d]), u), new r(f, u)
                            }
                            e.unshift.apply(e, _)
                        }
                    }
                };
                class n extends s.Subpacket {
                    frame_end() {
                        return !0
                    }
                }
                class o extends s.Subpacket {
                    frame_end() {
                        return !1
                    }
                }
                class a extends n {
                    ack_expected() {
                        return !1
                    }
                }
                a.prototype._frameend_num = 104;
                class h extends n {
                    ack_expected() {
                        return !0
                    }
                }
                h.prototype._frameend_num = 107;
                class l extends o {
                    ack_expected() {
                        return !1
                    }
                }
                l.prototype._frameend_num = 105;
                class c extends o {
                    ack_expected() {
                        return !0
                    }
                }
                c.prototype._frameend_num = 106, r = {
                    end_no_ack: a,
                    end_ack: h,
                    no_end_no_ack: l,
                    no_end_ack: c
                }
            },
            410: (e, t, i) => {
                "use strict";
                var s = e.exports;
                Object.assign(s, i(963));
                const r = /\*\x18[AC]|\*\*\x18B/;

                function n(e, t) {
                    if (t < 0) throw new s.Error("validation", "" + e + " (" + t + ") must be nonnegative.");
                    if (t !== Math.floor(t)) throw new s.Error("validation", "" + e + " (" + t + ") must be an integer.")
                }
                s.Validation = {
                    offer_parameters: function(e) {
                        if (!e.name) throw new s.Error("validation", "Need name!");
                        if ("string" != typeof e.name) throw new s.Error("validation", "name (" + e.name + ") must be a string!");
                        if (e = Object.assign({}, e), r.test(e.name) && console.warn("The filename " + JSON.stringify(name) + " contains characters that look like a ZMODEM header. This could corrupt the ZMODEM session; consider renaming it so that the filename doesnt contain control characters."), null !== e.serial && void 0 !== e.serial) throw new s.Error("validation", "serial is meaningless.");
                        if (e.serial = null, ["size", "mode", "files_remaining", "bytes_remaining"].forEach((function(t) {
                                var i;
                                switch (typeof e[t]) {
                                    case "object":
                                        i = null === e[t];
                                        break;
                                    case "undefined":
                                        e[t] = null, i = !0;
                                        break;
                                    case "number":
                                        n(t, e[t]), i = !0
                                }
                                if (!i) throw new s.Error("validation", "" + t + " (" + e[t] + ") must be null, undefined, or a number.")
                            })), "number" == typeof e.mode && (e.mode |= 32768), 0 === e.files_remaining) throw new s.Error("validation", "files_remaining, if given, must be positive.");
                        var t;
                        switch (typeof e.mtime) {
                            case "object":
                                if (t = !0, e.mtime instanceof Date) {
                                    var i = e.mtime;
                                    if (e.mtime = Math.floor(i.getTime() / 1e3), e.mtime < 0) throw new s.Error("validation", "mtime (" + i + ") must not be earlier than 1970.")
                                } else null !== e.mtime && (t = !1);
                                break;
                            case "undefined":
                                e.mtime = null, t = !0;
                                break;
                            case "number":
                                n("mtime", e.mtime), t = !0
                        }
                        if (!t) throw new s.Error("validation", "mtime (" + e.mtime + ") must be null, undefined, a Date, or a number.");
                        return e
                    }
                }
            },
            549: (e, t, i) => {
                "use strict";

                function s(e, t, i, s) {
                    return new(i || (i = Promise))((function(r, n) {
                        function o(e) {
                            try {
                                h(s.next(e))
                            } catch (e) {
                                n(e)
                            }
                        }

                        function a(e) {
                            try {
                                h(s.throw(e))
                            } catch (e) {
                                n(e)
                            }
                        }

                        function h(e) {
                            var t;
                            e.done ? r(e.value) : (t = e.value, t instanceof i ? t : new i((function(e) {
                                e(t)
                            }))).then(o, a)
                        }
                        h((s = s.apply(e, t || [])).next())
                    }))
                }

                function r(e) {
                    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
                    var t, i = e[Symbol.asyncIterator];
                    return i ? i.call(e) : (e = function(e) {
                        var t = "function" == typeof Symbol && Symbol.iterator,
                            i = t && e[t],
                            s = 0;
                        if (i) return i.call(e);
                        if (e && "number" == typeof e.length) return {
                            next: function() {
                                return e && s >= e.length && (e = void 0), {
                                    value: e && e[s++],
                                    done: !e
                                }
                            }
                        };
                        throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
                    }(e), t = {}, s("next"), s("throw"), s("return"), t[Symbol.asyncIterator] = function() {
                        return this
                    }, t);

                    function s(i) {
                        t[i] = e[i] && function(t) {
                            return new Promise((function(s, r) {
                                ! function(e, t, i, s) {
                                    Promise.resolve(s).then((function(t) {
                                        e({
                                            value: t,
                                            done: i
                                        })
                                    }), t)
                                }(s, r, (t = e[i](t)).done, t.value)
                            }))
                        }
                    }
                }

                function n(e) {
                    let t = e.length;
                    for (; --t >= 0;) e[t] = 0
                }
                i.r(t), i.d(t, {
                    TrzszAddon: () => os,
                    TrzszFilter: () => ns
                }), "function" == typeof SuppressedError && SuppressedError;
                const o = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]),
                    a = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]),
                    h = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]),
                    l = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),
                    c = new Array(576);
                n(c);
                const d = new Array(60);
                n(d);
                const _ = new Array(512);
                n(_);
                const u = new Array(256);
                n(u);
                const f = new Array(29);
                n(f);
                const g = new Array(30);

                function p(e, t, i, s, r) {
                    this.static_tree = e, this.extra_bits = t, this.extra_base = i, this.elems = s, this.max_length = r, this.has_stree = e && e.length
                }
                let v, m, A;

                function C(e, t) {
                    this.dyn_tree = e, this.max_code = 0, this.stat_desc = t
                }
                n(g);
                const w = e => e < 256 ? _[e] : _[256 + (e >>> 7)],
                    b = (e, t) => {
                        e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255
                    },
                    y = (e, t, i) => {
                        e.bi_valid > 16 - i ? (e.bi_buf |= t << e.bi_valid & 65535, b(e, e.bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += i - 16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += i)
                    },
                    S = (e, t, i) => {
                        y(e, i[2 * t], i[2 * t + 1])
                    },
                    E = (e, t) => {
                        let i = 0;
                        do {
                            i |= 1 & e, e >>>= 1, i <<= 1
                        } while (--t > 0);
                        return i >>> 1
                    },
                    x = (e, t, i) => {
                        const s = new Array(16);
                        let r, n, o = 0;
                        for (r = 1; r <= 15; r++) o = o + i[r - 1] << 1, s[r] = o;
                        for (n = 0; n <= t; n++) {
                            let t = e[2 * n + 1];
                            0 !== t && (e[2 * n] = E(s[t]++, t))
                        }
                    },
                    L = e => {
                        let t;
                        for (t = 0; t < 286; t++) e.dyn_ltree[2 * t] = 0;
                        for (t = 0; t < 30; t++) e.dyn_dtree[2 * t] = 0;
                        for (t = 0; t < 19; t++) e.bl_tree[2 * t] = 0;
                        e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.sym_next = e.matches = 0
                    },
                    I = e => {
                        e.bi_valid > 8 ? b(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0
                    },
                    B = (e, t, i, s) => {
                        const r = 2 * t,
                            n = 2 * i;
                        return e[r] < e[n] || e[r] === e[n] && s[t] <= s[i]
                    },
                    D = (e, t, i) => {
                        const s = e.heap[i];
                        let r = i << 1;
                        for (; r <= e.heap_len && (r < e.heap_len && B(t, e.heap[r + 1], e.heap[r], e.depth) && r++, !B(t, s, e.heap[r], e.depth));) e.heap[i] = e.heap[r], i = r, r <<= 1;
                        e.heap[i] = s
                    },
                    k = (e, t, i) => {
                        let s, r, n, h, l = 0;
                        if (0 !== e.sym_next)
                            do {
                                s = 255 & e.pending_buf[e.sym_buf + l++], s += (255 & e.pending_buf[e.sym_buf + l++]) << 8, r = e.pending_buf[e.sym_buf + l++], 0 === s ? S(e, r, t) : (n = u[r], S(e, n + 256 + 1, t), h = o[n], 0 !== h && (r -= f[n], y(e, r, h)), s--, n = w(s), S(e, n, i), h = a[n], 0 !== h && (s -= g[n], y(e, s, h)))
                            } while (l < e.sym_next);
                        S(e, 256, t)
                    },
                    R = (e, t) => {
                        const i = t.dyn_tree,
                            s = t.stat_desc.static_tree,
                            r = t.stat_desc.has_stree,
                            n = t.stat_desc.elems;
                        let o, a, h, l = -1;
                        for (e.heap_len = 0, e.heap_max = 573, o = 0; o < n; o++) 0 !== i[2 * o] ? (e.heap[++e.heap_len] = l = o, e.depth[o] = 0) : i[2 * o + 1] = 0;
                        for (; e.heap_len < 2;) h = e.heap[++e.heap_len] = l < 2 ? ++l : 0, i[2 * h] = 1, e.depth[h] = 0, e.opt_len--, r && (e.static_len -= s[2 * h + 1]);
                        for (t.max_code = l, o = e.heap_len >> 1; o >= 1; o--) D(e, i, o);
                        h = n;
                        do {
                            o = e.heap[1], e.heap[1] = e.heap[e.heap_len--], D(e, i, 1), a = e.heap[1], e.heap[--e.heap_max] = o, e.heap[--e.heap_max] = a, i[2 * h] = i[2 * o] + i[2 * a], e.depth[h] = (e.depth[o] >= e.depth[a] ? e.depth[o] : e.depth[a]) + 1, i[2 * o + 1] = i[2 * a + 1] = h, e.heap[1] = h++, D(e, i, 1)
                        } while (e.heap_len >= 2);
                        e.heap[--e.heap_max] = e.heap[1], ((e, t) => {
                            const i = t.dyn_tree,
                                s = t.max_code,
                                r = t.stat_desc.static_tree,
                                n = t.stat_desc.has_stree,
                                o = t.stat_desc.extra_bits,
                                a = t.stat_desc.extra_base,
                                h = t.stat_desc.max_length;
                            let l, c, d, _, u, f, g = 0;
                            for (_ = 0; _ <= 15; _++) e.bl_count[_] = 0;
                            for (i[2 * e.heap[e.heap_max] + 1] = 0, l = e.heap_max + 1; l < 573; l++) c = e.heap[l], _ = i[2 * i[2 * c + 1] + 1] + 1, _ > h && (_ = h, g++), i[2 * c + 1] = _, c > s || (e.bl_count[_]++, u = 0, c >= a && (u = o[c - a]), f = i[2 * c], e.opt_len += f * (_ + u), n && (e.static_len += f * (r[2 * c + 1] + u)));
                            if (0 !== g) {
                                do {
                                    for (_ = h - 1; 0 === e.bl_count[_];) _--;
                                    e.bl_count[_]--, e.bl_count[_ + 1] += 2, e.bl_count[h]--, g -= 2
                                } while (g > 0);
                                for (_ = h; 0 !== _; _--)
                                    for (c = e.bl_count[_]; 0 !== c;) d = e.heap[--l], d > s || (i[2 * d + 1] !== _ && (e.opt_len += (_ - i[2 * d + 1]) * i[2 * d], i[2 * d + 1] = _), c--)
                            }
                        })(e, t), x(i, l, e.bl_count)
                    },
                    M = (e, t, i) => {
                        let s, r, n = -1,
                            o = t[1],
                            a = 0,
                            h = 7,
                            l = 4;
                        for (0 === o && (h = 138, l = 3), t[2 * (i + 1) + 1] = 65535, s = 0; s <= i; s++) r = o, o = t[2 * (s + 1) + 1], ++a < h && r === o || (a < l ? e.bl_tree[2 * r] += a : 0 !== r ? (r !== n && e.bl_tree[2 * r]++, e.bl_tree[32]++) : a <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++, a = 0, n = r, 0 === o ? (h = 138, l = 3) : r === o ? (h = 6, l = 3) : (h = 7, l = 4))
                    },
                    T = (e, t, i) => {
                        let s, r, n = -1,
                            o = t[1],
                            a = 0,
                            h = 7,
                            l = 4;
                        for (0 === o && (h = 138, l = 3), s = 0; s <= i; s++)
                            if (r = o, o = t[2 * (s + 1) + 1], !(++a < h && r === o)) {
                                if (a < l)
                                    do {
                                        S(e, r, e.bl_tree)
                                    } while (0 != --a);
                                else 0 !== r ? (r !== n && (S(e, r, e.bl_tree), a--), S(e, 16, e.bl_tree), y(e, a - 3, 2)) : a <= 10 ? (S(e, 17, e.bl_tree), y(e, a - 3, 3)) : (S(e, 18, e.bl_tree), y(e, a - 11, 7));
                                a = 0, n = r, 0 === o ? (h = 138, l = 3) : r === o ? (h = 6, l = 3) : (h = 7, l = 4)
                            }
                    };
                let O = !1;
                const P = (e, t, i, s) => {
                    y(e, 0 + (s ? 1 : 0), 3), I(e), b(e, i), b(e, ~i), i && e.pending_buf.set(e.window.subarray(t, t + i), e.pending), e.pending += i
                };
                var F = {
                        _tr_init: e => {
                            O || ((() => {
                                let e, t, i, s, r;
                                const n = new Array(16);
                                for (i = 0, s = 0; s < 28; s++)
                                    for (f[s] = i, e = 0; e < 1 << o[s]; e++) u[i++] = s;
                                for (u[i - 1] = s, r = 0, s = 0; s < 16; s++)
                                    for (g[s] = r, e = 0; e < 1 << a[s]; e++) _[r++] = s;
                                for (r >>= 7; s < 30; s++)
                                    for (g[s] = r << 7, e = 0; e < 1 << a[s] - 7; e++) _[256 + r++] = s;
                                for (t = 0; t <= 15; t++) n[t] = 0;
                                for (e = 0; e <= 143;) c[2 * e + 1] = 8, e++, n[8]++;
                                for (; e <= 255;) c[2 * e + 1] = 9, e++, n[9]++;
                                for (; e <= 279;) c[2 * e + 1] = 7, e++, n[7]++;
                                for (; e <= 287;) c[2 * e + 1] = 8, e++, n[8]++;
                                for (x(c, 287, n), e = 0; e < 30; e++) d[2 * e + 1] = 5, d[2 * e] = E(e, 5);
                                v = new p(c, o, 257, 286, 15), m = new p(d, a, 0, 30, 15), A = new p(new Array(0), h, 0, 19, 7)
                            })(), O = !0), e.l_desc = new C(e.dyn_ltree, v), e.d_desc = new C(e.dyn_dtree, m), e.bl_desc = new C(e.bl_tree, A), e.bi_buf = 0, e.bi_valid = 0, L(e)
                        },
                        _tr_stored_block: P,
                        _tr_flush_block: (e, t, i, s) => {
                            let r, n, o = 0;
                            e.level > 0 ? (2 === e.strm.data_type && (e.strm.data_type = (e => {
                                let t, i = 4093624447;
                                for (t = 0; t <= 31; t++, i >>>= 1)
                                    if (1 & i && 0 !== e.dyn_ltree[2 * t]) return 0;
                                if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return 1;
                                for (t = 32; t < 256; t++)
                                    if (0 !== e.dyn_ltree[2 * t]) return 1;
                                return 0
                            })(e)), R(e, e.l_desc), R(e, e.d_desc), o = (e => {
                                let t;
                                for (M(e, e.dyn_ltree, e.l_desc.max_code), M(e, e.dyn_dtree, e.d_desc.max_code), R(e, e.bl_desc), t = 18; t >= 3 && 0 === e.bl_tree[2 * l[t] + 1]; t--);
                                return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t
                            })(e), r = e.opt_len + 3 + 7 >>> 3, n = e.static_len + 3 + 7 >>> 3, n <= r && (r = n)) : r = n = i + 5, i + 4 <= r && -1 !== t ? P(e, t, i, s) : 4 === e.strategy || n === r ? (y(e, 2 + (s ? 1 : 0), 3), k(e, c, d)) : (y(e, 4 + (s ? 1 : 0), 3), ((e, t, i, s) => {
                                let r;
                                for (y(e, t - 257, 5), y(e, i - 1, 5), y(e, s - 4, 4), r = 0; r < s; r++) y(e, e.bl_tree[2 * l[r] + 1], 3);
                                T(e, e.dyn_ltree, t - 1), T(e, e.dyn_dtree, i - 1)
                            })(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, o + 1), k(e, e.dyn_ltree, e.dyn_dtree)), L(e), s && I(e)
                        },
                        _tr_tally: (e, t, i) => (e.pending_buf[e.sym_buf + e.sym_next++] = t, e.pending_buf[e.sym_buf + e.sym_next++] = t >> 8, e.pending_buf[e.sym_buf + e.sym_next++] = i, 0 === t ? e.dyn_ltree[2 * i]++ : (e.matches++, t--, e.dyn_ltree[2 * (u[i] + 256 + 1)]++, e.dyn_dtree[2 * w(t)]++), e.sym_next === e.sym_end),
                        _tr_align: e => {
                            y(e, 2, 3), S(e, 256, c), (e => {
                                16 === e.bi_valid ? (b(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8)
                            })(e)
                        }
                    },
                    H = (e, t, i, s) => {
                        let r = 65535 & e | 0,
                            n = e >>> 16 & 65535 | 0,
                            o = 0;
                        for (; 0 !== i;) {
                            o = i > 2e3 ? 2e3 : i, i -= o;
                            do {
                                r = r + t[s++] | 0, n = n + r | 0
                            } while (--o);
                            r %= 65521, n %= 65521
                        }
                        return r | n << 16 | 0
                    };
                const Q = new Uint32Array((() => {
                    let e, t = [];
                    for (var i = 0; i < 256; i++) {
                        e = i;
                        for (var s = 0; s < 8; s++) e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1;
                        t[i] = e
                    }
                    return t
                })());
                var N = (e, t, i, s) => {
                        const r = Q,
                            n = s + i;
                        e ^= -1;
                        for (let i = s; i < n; i++) e = e >>> 8 ^ r[255 & (e ^ t[i])];
                        return -1 ^ e
                    },
                    U = {
                        2: "need dictionary",
                        1: "stream end",
                        0: "",
                        "-1": "file error",
                        "-2": "stream error",
                        "-3": "data error",
                        "-4": "insufficient memory",
                        "-5": "buffer error",
                        "-6": "incompatible version"
                    },
                    z = {
                        Z_NO_FLUSH: 0,
                        Z_PARTIAL_FLUSH: 1,
                        Z_SYNC_FLUSH: 2,
                        Z_FULL_FLUSH: 3,
                        Z_FINISH: 4,
                        Z_BLOCK: 5,
                        Z_TREES: 6,
                        Z_OK: 0,
                        Z_STREAM_END: 1,
                        Z_NEED_DICT: 2,
                        Z_ERRNO: -1,
                        Z_STREAM_ERROR: -2,
                        Z_DATA_ERROR: -3,
                        Z_MEM_ERROR: -4,
                        Z_BUF_ERROR: -5,
                        Z_NO_COMPRESSION: 0,
                        Z_BEST_SPEED: 1,
                        Z_BEST_COMPRESSION: 9,
                        Z_DEFAULT_COMPRESSION: -1,
                        Z_FILTERED: 1,
                        Z_HUFFMAN_ONLY: 2,
                        Z_RLE: 3,
                        Z_FIXED: 4,
                        Z_DEFAULT_STRATEGY: 0,
                        Z_BINARY: 0,
                        Z_TEXT: 1,
                        Z_UNKNOWN: 2,
                        Z_DEFLATED: 8
                    };
                const {
                    _tr_init: W,
                    _tr_stored_block: $,
                    _tr_flush_block: G,
                    _tr_tally: j,
                    _tr_align: q
                } = F, {
                    Z_NO_FLUSH: J,
                    Z_PARTIAL_FLUSH: K,
                    Z_FULL_FLUSH: Z,
                    Z_FINISH: V,
                    Z_BLOCK: Y,
                    Z_OK: X,
                    Z_STREAM_END: ee,
                    Z_STREAM_ERROR: te,
                    Z_DATA_ERROR: ie,
                    Z_BUF_ERROR: se,
                    Z_DEFAULT_COMPRESSION: re,
                    Z_FILTERED: ne,
                    Z_HUFFMAN_ONLY: oe,
                    Z_RLE: ae,
                    Z_FIXED: he,
                    Z_DEFAULT_STRATEGY: le,
                    Z_UNKNOWN: ce,
                    Z_DEFLATED: de
                } = z, _e = 258, ue = 262, fe = 42, ge = 113, pe = 666, ve = (e, t) => (e.msg = U[t], t), me = e => 2 * e - (e > 4 ? 9 : 0), Ae = e => {
                    let t = e.length;
                    for (; --t >= 0;) e[t] = 0
                }, Ce = e => {
                    let t, i, s, r = e.w_size;
                    t = e.hash_size, s = t;
                    do {
                        i = e.head[--s], e.head[s] = i >= r ? i - r : 0
                    } while (--t);
                    t = r, s = t;
                    do {
                        i = e.prev[--s], e.prev[s] = i >= r ? i - r : 0
                    } while (--t)
                };
                let we = (e, t, i) => (t << e.hash_shift ^ i) & e.hash_mask;
                const be = e => {
                        const t = e.state;
                        let i = t.pending;
                        i > e.avail_out && (i = e.avail_out), 0 !== i && (e.output.set(t.pending_buf.subarray(t.pending_out, t.pending_out + i), e.next_out), e.next_out += i, t.pending_out += i, e.total_out += i, e.avail_out -= i, t.pending -= i, 0 === t.pending && (t.pending_out = 0))
                    },
                    ye = (e, t) => {
                        G(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, be(e.strm)
                    },
                    Se = (e, t) => {
                        e.pending_buf[e.pending++] = t
                    },
                    Ee = (e, t) => {
                        e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t
                    },
                    xe = (e, t, i, s) => {
                        let r = e.avail_in;
                        return r > s && (r = s), 0 === r ? 0 : (e.avail_in -= r, t.set(e.input.subarray(e.next_in, e.next_in + r), i), 1 === e.state.wrap ? e.adler = H(e.adler, t, r, i) : 2 === e.state.wrap && (e.adler = N(e.adler, t, r, i)), e.next_in += r, e.total_in += r, r)
                    },
                    Le = (e, t) => {
                        let i, s, r = e.max_chain_length,
                            n = e.strstart,
                            o = e.prev_length,
                            a = e.nice_match;
                        const h = e.strstart > e.w_size - ue ? e.strstart - (e.w_size - ue) : 0,
                            l = e.window,
                            c = e.w_mask,
                            d = e.prev,
                            _ = e.strstart + _e;
                        let u = l[n + o - 1],
                            f = l[n + o];
                        e.prev_length >= e.good_match && (r >>= 2), a > e.lookahead && (a = e.lookahead);
                        do {
                            if (i = t, l[i + o] === f && l[i + o - 1] === u && l[i] === l[n] && l[++i] === l[n + 1]) {
                                n += 2, i++;
                                do {} while (l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && n < _);
                                if (s = _e - (_ - n), n = _ - _e, s > o) {
                                    if (e.match_start = t, o = s, s >= a) break;
                                    u = l[n + o - 1], f = l[n + o]
                                }
                            }
                        } while ((t = d[t & c]) > h && 0 != --r);
                        return o <= e.lookahead ? o : e.lookahead
                    },
                    Ie = e => {
                        const t = e.w_size;
                        let i, s, r;
                        do {
                            if (s = e.window_size - e.lookahead - e.strstart, e.strstart >= t + (t - ue) && (e.window.set(e.window.subarray(t, t + t - s), 0), e.match_start -= t, e.strstart -= t, e.block_start -= t, e.insert > e.strstart && (e.insert = e.strstart), Ce(e), s += t), 0 === e.strm.avail_in) break;
                            if (i = xe(e.strm, e.window, e.strstart + e.lookahead, s), e.lookahead += i, e.lookahead + e.insert >= 3)
                                for (r = e.strstart - e.insert, e.ins_h = e.window[r], e.ins_h = we(e, e.ins_h, e.window[r + 1]); e.insert && (e.ins_h = we(e, e.ins_h, e.window[r + 3 - 1]), e.prev[r & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = r, r++, e.insert--, !(e.lookahead + e.insert < 3)););
                        } while (e.lookahead < ue && 0 !== e.strm.avail_in)
                    },
                    Be = (e, t) => {
                        let i, s, r, n = e.pending_buf_size - 5 > e.w_size ? e.w_size : e.pending_buf_size - 5,
                            o = 0,
                            a = e.strm.avail_in;
                        do {
                            if (i = 65535, r = e.bi_valid + 42 >> 3, e.strm.avail_out < r) break;
                            if (r = e.strm.avail_out - r, s = e.strstart - e.block_start, i > s + e.strm.avail_in && (i = s + e.strm.avail_in), i > r && (i = r), i < n && (0 === i && t !== V || t === J || i !== s + e.strm.avail_in)) break;
                            o = t === V && i === s + e.strm.avail_in ? 1 : 0, $(e, 0, 0, o), e.pending_buf[e.pending - 4] = i, e.pending_buf[e.pending - 3] = i >> 8, e.pending_buf[e.pending - 2] = ~i, e.pending_buf[e.pending - 1] = ~i >> 8, be(e.strm), s && (s > i && (s = i), e.strm.output.set(e.window.subarray(e.block_start, e.block_start + s), e.strm.next_out), e.strm.next_out += s, e.strm.avail_out -= s, e.strm.total_out += s, e.block_start += s, i -= s), i && (xe(e.strm, e.strm.output, e.strm.next_out, i), e.strm.next_out += i, e.strm.avail_out -= i, e.strm.total_out += i)
                        } while (0 === o);
                        return a -= e.strm.avail_in, a && (a >= e.w_size ? (e.matches = 2, e.window.set(e.strm.input.subarray(e.strm.next_in - e.w_size, e.strm.next_in), 0), e.strstart = e.w_size, e.insert = e.strstart) : (e.window_size - e.strstart <= a && (e.strstart -= e.w_size, e.window.set(e.window.subarray(e.w_size, e.w_size + e.strstart), 0), e.matches < 2 && e.matches++, e.insert > e.strstart && (e.insert = e.strstart)), e.window.set(e.strm.input.subarray(e.strm.next_in - a, e.strm.next_in), e.strstart), e.strstart += a, e.insert += a > e.w_size - e.insert ? e.w_size - e.insert : a), e.block_start = e.strstart), e.high_water < e.strstart && (e.high_water = e.strstart), o ? 4 : t !== J && t !== V && 0 === e.strm.avail_in && e.strstart === e.block_start ? 2 : (r = e.window_size - e.strstart, e.strm.avail_in > r && e.block_start >= e.w_size && (e.block_start -= e.w_size, e.strstart -= e.w_size, e.window.set(e.window.subarray(e.w_size, e.w_size + e.strstart), 0), e.matches < 2 && e.matches++, r += e.w_size, e.insert > e.strstart && (e.insert = e.strstart)), r > e.strm.avail_in && (r = e.strm.avail_in), r && (xe(e.strm, e.window, e.strstart, r), e.strstart += r, e.insert += r > e.w_size - e.insert ? e.w_size - e.insert : r), e.high_water < e.strstart && (e.high_water = e.strstart), r = e.bi_valid + 42 >> 3, r = e.pending_buf_size - r > 65535 ? 65535 : e.pending_buf_size - r, n = r > e.w_size ? e.w_size : r, s = e.strstart - e.block_start, (s >= n || (s || t === V) && t !== J && 0 === e.strm.avail_in && s <= r) && (i = s > r ? r : s, o = t === V && 0 === e.strm.avail_in && i === s ? 1 : 0, $(e, e.block_start, i, o), e.block_start += i, be(e.strm)), o ? 3 : 1)
                    },
                    De = (e, t) => {
                        let i, s;
                        for (;;) {
                            if (e.lookahead < ue) {
                                if (Ie(e), e.lookahead < ue && t === J) return 1;
                                if (0 === e.lookahead) break
                            }
                            if (i = 0, e.lookahead >= 3 && (e.ins_h = we(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== i && e.strstart - i <= e.w_size - ue && (e.match_length = Le(e, i)), e.match_length >= 3)
                                if (s = j(e, e.strstart - e.match_start, e.match_length - 3), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= 3) {
                                    e.match_length--;
                                    do {
                                        e.strstart++, e.ins_h = we(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart
                                    } while (0 != --e.match_length);
                                    e.strstart++
                                } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = we(e, e.ins_h, e.window[e.strstart + 1]);
                            else s = j(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
                            if (s && (ye(e, !1), 0 === e.strm.avail_out)) return 1
                        }
                        return e.insert = e.strstart < 2 ? e.strstart : 2, t === V ? (ye(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (ye(e, !1), 0 === e.strm.avail_out) ? 1 : 2
                    },
                    ke = (e, t) => {
                        let i, s, r;
                        for (;;) {
                            if (e.lookahead < ue) {
                                if (Ie(e), e.lookahead < ue && t === J) return 1;
                                if (0 === e.lookahead) break
                            }
                            if (i = 0, e.lookahead >= 3 && (e.ins_h = we(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = 2, 0 !== i && e.prev_length < e.max_lazy_match && e.strstart - i <= e.w_size - ue && (e.match_length = Le(e, i), e.match_length <= 5 && (e.strategy === ne || 3 === e.match_length && e.strstart - e.match_start > 4096) && (e.match_length = 2)), e.prev_length >= 3 && e.match_length <= e.prev_length) {
                                r = e.strstart + e.lookahead - 3, s = j(e, e.strstart - 1 - e.prev_match, e.prev_length - 3), e.lookahead -= e.prev_length - 1, e.prev_length -= 2;
                                do {
                                    ++e.strstart <= r && (e.ins_h = we(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart)
                                } while (0 != --e.prev_length);
                                if (e.match_available = 0, e.match_length = 2, e.strstart++, s && (ye(e, !1), 0 === e.strm.avail_out)) return 1
                            } else if (e.match_available) {
                                if (s = j(e, 0, e.window[e.strstart - 1]), s && ye(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return 1
                            } else e.match_available = 1, e.strstart++, e.lookahead--
                        }
                        return e.match_available && (s = j(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < 2 ? e.strstart : 2, t === V ? (ye(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (ye(e, !1), 0 === e.strm.avail_out) ? 1 : 2
                    };

                function Re(e, t, i, s, r) {
                    this.good_length = e, this.max_lazy = t, this.nice_length = i, this.max_chain = s, this.func = r
                }
                const Me = [new Re(0, 0, 0, 0, Be), new Re(4, 4, 8, 4, De), new Re(4, 5, 16, 8, De), new Re(4, 6, 32, 32, De), new Re(4, 4, 16, 16, ke), new Re(8, 16, 32, 32, ke), new Re(8, 16, 128, 128, ke), new Re(8, 32, 128, 256, ke), new Re(32, 128, 258, 1024, ke), new Re(32, 258, 258, 4096, ke)];

                function Te() {
                    this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = de, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), Ae(this.dyn_ltree), Ae(this.dyn_dtree), Ae(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), Ae(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), Ae(this.depth), this.sym_buf = 0, this.lit_bufsize = 0, this.sym_next = 0, this.sym_end = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0
                }
                const Oe = e => {
                        if (!e) return 1;
                        const t = e.state;
                        return !t || t.strm !== e || t.status !== fe && 57 !== t.status && 69 !== t.status && 73 !== t.status && 91 !== t.status && 103 !== t.status && t.status !== ge && t.status !== pe ? 1 : 0
                    },
                    Pe = e => {
                        if (Oe(e)) return ve(e, te);
                        e.total_in = e.total_out = 0, e.data_type = ce;
                        const t = e.state;
                        return t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = 2 === t.wrap ? 57 : t.wrap ? fe : ge, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = -2, W(t), X
                    },
                    Fe = e => {
                        const t = Pe(e);
                        var i;
                        return t === X && ((i = e.state).window_size = 2 * i.w_size, Ae(i.head), i.max_lazy_match = Me[i.level].max_lazy, i.good_match = Me[i.level].good_length, i.nice_match = Me[i.level].nice_length, i.max_chain_length = Me[i.level].max_chain, i.strstart = 0, i.block_start = 0, i.lookahead = 0, i.insert = 0, i.match_length = i.prev_length = 2, i.match_available = 0, i.ins_h = 0), t
                    },
                    He = (e, t, i, s, r, n) => {
                        if (!e) return te;
                        let o = 1;
                        if (t === re && (t = 6), s < 0 ? (o = 0, s = -s) : s > 15 && (o = 2, s -= 16), r < 1 || r > 9 || i !== de || s < 8 || s > 15 || t < 0 || t > 9 || n < 0 || n > he || 8 === s && 1 !== o) return ve(e, te);
                        8 === s && (s = 9);
                        const a = new Te;
                        return e.state = a, a.strm = e, a.status = fe, a.wrap = o, a.gzhead = null, a.w_bits = s, a.w_size = 1 << a.w_bits, a.w_mask = a.w_size - 1, a.hash_bits = r + 7, a.hash_size = 1 << a.hash_bits, a.hash_mask = a.hash_size - 1, a.hash_shift = ~~((a.hash_bits + 3 - 1) / 3), a.window = new Uint8Array(2 * a.w_size), a.head = new Uint16Array(a.hash_size), a.prev = new Uint16Array(a.w_size), a.lit_bufsize = 1 << r + 6, a.pending_buf_size = 4 * a.lit_bufsize, a.pending_buf = new Uint8Array(a.pending_buf_size), a.sym_buf = a.lit_bufsize, a.sym_end = 3 * (a.lit_bufsize - 1), a.level = t, a.strategy = n, a.method = i, Fe(e)
                    };
                var Qe = {
                    deflateInit: (e, t) => He(e, t, de, 15, 8, le),
                    deflateInit2: He,
                    deflateReset: Fe,
                    deflateResetKeep: Pe,
                    deflateSetHeader: (e, t) => Oe(e) || 2 !== e.state.wrap ? te : (e.state.gzhead = t, X),
                    deflate: (e, t) => {
                        if (Oe(e) || t > Y || t < 0) return e ? ve(e, te) : te;
                        const i = e.state;
                        if (!e.output || 0 !== e.avail_in && !e.input || i.status === pe && t !== V) return ve(e, 0 === e.avail_out ? se : te);
                        const s = i.last_flush;
                        if (i.last_flush = t, 0 !== i.pending) {
                            if (be(e), 0 === e.avail_out) return i.last_flush = -1, X
                        } else if (0 === e.avail_in && me(t) <= me(s) && t !== V) return ve(e, se);
                        if (i.status === pe && 0 !== e.avail_in) return ve(e, se);
                        if (i.status === fe && 0 === i.wrap && (i.status = ge), i.status === fe) {
                            let t = de + (i.w_bits - 8 << 4) << 8,
                                s = -1;
                            if (s = i.strategy >= oe || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3, t |= s << 6, 0 !== i.strstart && (t |= 32), t += 31 - t % 31, Ee(i, t), 0 !== i.strstart && (Ee(i, e.adler >>> 16), Ee(i, 65535 & e.adler)), e.adler = 1, i.status = ge, be(e), 0 !== i.pending) return i.last_flush = -1, X
                        }
                        if (57 === i.status)
                            if (e.adler = 0, Se(i, 31), Se(i, 139), Se(i, 8), i.gzhead) Se(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), Se(i, 255 & i.gzhead.time), Se(i, i.gzhead.time >> 8 & 255), Se(i, i.gzhead.time >> 16 & 255), Se(i, i.gzhead.time >> 24 & 255), Se(i, 9 === i.level ? 2 : i.strategy >= oe || i.level < 2 ? 4 : 0), Se(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && (Se(i, 255 & i.gzhead.extra.length), Se(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (e.adler = N(e.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69;
                            else if (Se(i, 0), Se(i, 0), Se(i, 0), Se(i, 0), Se(i, 0), Se(i, 9 === i.level ? 2 : i.strategy >= oe || i.level < 2 ? 4 : 0), Se(i, 3), i.status = ge, be(e), 0 !== i.pending) return i.last_flush = -1, X;
                        if (69 === i.status) {
                            if (i.gzhead.extra) {
                                let t = i.pending,
                                    s = (65535 & i.gzhead.extra.length) - i.gzindex;
                                for (; i.pending + s > i.pending_buf_size;) {
                                    let r = i.pending_buf_size - i.pending;
                                    if (i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex, i.gzindex + r), i.pending), i.pending = i.pending_buf_size, i.gzhead.hcrc && i.pending > t && (e.adler = N(e.adler, i.pending_buf, i.pending - t, t)), i.gzindex += r, be(e), 0 !== i.pending) return i.last_flush = -1, X;
                                    t = 0, s -= r
                                }
                                let r = new Uint8Array(i.gzhead.extra);
                                i.pending_buf.set(r.subarray(i.gzindex, i.gzindex + s), i.pending), i.pending += s, i.gzhead.hcrc && i.pending > t && (e.adler = N(e.adler, i.pending_buf, i.pending - t, t)), i.gzindex = 0
                            }
                            i.status = 73
                        }
                        if (73 === i.status) {
                            if (i.gzhead.name) {
                                let t, s = i.pending;
                                do {
                                    if (i.pending === i.pending_buf_size) {
                                        if (i.gzhead.hcrc && i.pending > s && (e.adler = N(e.adler, i.pending_buf, i.pending - s, s)), be(e), 0 !== i.pending) return i.last_flush = -1, X;
                                        s = 0
                                    }
                                    t = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0, Se(i, t)
                                } while (0 !== t);
                                i.gzhead.hcrc && i.pending > s && (e.adler = N(e.adler, i.pending_buf, i.pending - s, s)), i.gzindex = 0
                            }
                            i.status = 91
                        }
                        if (91 === i.status) {
                            if (i.gzhead.comment) {
                                let t, s = i.pending;
                                do {
                                    if (i.pending === i.pending_buf_size) {
                                        if (i.gzhead.hcrc && i.pending > s && (e.adler = N(e.adler, i.pending_buf, i.pending - s, s)), be(e), 0 !== i.pending) return i.last_flush = -1, X;
                                        s = 0
                                    }
                                    t = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0, Se(i, t)
                                } while (0 !== t);
                                i.gzhead.hcrc && i.pending > s && (e.adler = N(e.adler, i.pending_buf, i.pending - s, s))
                            }
                            i.status = 103
                        }
                        if (103 === i.status) {
                            if (i.gzhead.hcrc) {
                                if (i.pending + 2 > i.pending_buf_size && (be(e), 0 !== i.pending)) return i.last_flush = -1, X;
                                Se(i, 255 & e.adler), Se(i, e.adler >> 8 & 255), e.adler = 0
                            }
                            if (i.status = ge, be(e), 0 !== i.pending) return i.last_flush = -1, X
                        }
                        if (0 !== e.avail_in || 0 !== i.lookahead || t !== J && i.status !== pe) {
                            let s = 0 === i.level ? Be(i, t) : i.strategy === oe ? ((e, t) => {
                                let i;
                                for (;;) {
                                    if (0 === e.lookahead && (Ie(e), 0 === e.lookahead)) {
                                        if (t === J) return 1;
                                        break
                                    }
                                    if (e.match_length = 0, i = j(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, i && (ye(e, !1), 0 === e.strm.avail_out)) return 1
                                }
                                return e.insert = 0, t === V ? (ye(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (ye(e, !1), 0 === e.strm.avail_out) ? 1 : 2
                            })(i, t) : i.strategy === ae ? ((e, t) => {
                                let i, s, r, n;
                                const o = e.window;
                                for (;;) {
                                    if (e.lookahead <= _e) {
                                        if (Ie(e), e.lookahead <= _e && t === J) return 1;
                                        if (0 === e.lookahead) break
                                    }
                                    if (e.match_length = 0, e.lookahead >= 3 && e.strstart > 0 && (r = e.strstart - 1, s = o[r], s === o[++r] && s === o[++r] && s === o[++r])) {
                                        n = e.strstart + _e;
                                        do {} while (s === o[++r] && s === o[++r] && s === o[++r] && s === o[++r] && s === o[++r] && s === o[++r] && s === o[++r] && s === o[++r] && r < n);
                                        e.match_length = _e - (n - r), e.match_length > e.lookahead && (e.match_length = e.lookahead)
                                    }
                                    if (e.match_length >= 3 ? (i = j(e, 1, e.match_length - 3), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (i = j(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), i && (ye(e, !1), 0 === e.strm.avail_out)) return 1
                                }
                                return e.insert = 0, t === V ? (ye(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (ye(e, !1), 0 === e.strm.avail_out) ? 1 : 2
                            })(i, t) : Me[i.level].func(i, t);
                            if (3 !== s && 4 !== s || (i.status = pe), 1 === s || 3 === s) return 0 === e.avail_out && (i.last_flush = -1), X;
                            if (2 === s && (t === K ? q(i) : t !== Y && ($(i, 0, 0, !1), t === Z && (Ae(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), be(e), 0 === e.avail_out)) return i.last_flush = -1, X
                        }
                        return t !== V ? X : i.wrap <= 0 ? ee : (2 === i.wrap ? (Se(i, 255 & e.adler), Se(i, e.adler >> 8 & 255), Se(i, e.adler >> 16 & 255), Se(i, e.adler >> 24 & 255), Se(i, 255 & e.total_in), Se(i, e.total_in >> 8 & 255), Se(i, e.total_in >> 16 & 255), Se(i, e.total_in >> 24 & 255)) : (Ee(i, e.adler >>> 16), Ee(i, 65535 & e.adler)), be(e), i.wrap > 0 && (i.wrap = -i.wrap), 0 !== i.pending ? X : ee)
                    },
                    deflateEnd: e => {
                        if (Oe(e)) return te;
                        const t = e.state.status;
                        return e.state = null, t === ge ? ve(e, ie) : X
                    },
                    deflateSetDictionary: (e, t) => {
                        let i = t.length;
                        if (Oe(e)) return te;
                        const s = e.state,
                            r = s.wrap;
                        if (2 === r || 1 === r && s.status !== fe || s.lookahead) return te;
                        if (1 === r && (e.adler = H(e.adler, t, i, 0)), s.wrap = 0, i >= s.w_size) {
                            0 === r && (Ae(s.head), s.strstart = 0, s.block_start = 0, s.insert = 0);
                            let e = new Uint8Array(s.w_size);
                            e.set(t.subarray(i - s.w_size, i), 0), t = e, i = s.w_size
                        }
                        const n = e.avail_in,
                            o = e.next_in,
                            a = e.input;
                        for (e.avail_in = i, e.next_in = 0, e.input = t, Ie(s); s.lookahead >= 3;) {
                            let e = s.strstart,
                                t = s.lookahead - 2;
                            do {
                                s.ins_h = we(s, s.ins_h, s.window[e + 3 - 1]), s.prev[e & s.w_mask] = s.head[s.ins_h], s.head[s.ins_h] = e, e++
                            } while (--t);
                            s.strstart = e, s.lookahead = 2, Ie(s)
                        }
                        return s.strstart += s.lookahead, s.block_start = s.strstart, s.insert = s.lookahead, s.lookahead = 0, s.match_length = s.prev_length = 2, s.match_available = 0, e.next_in = o, e.input = a, e.avail_in = n, s.wrap = r, X
                    },
                    deflateInfo: "pako deflate (from Nodeca project)"
                };
                const Ne = (e, t) => Object.prototype.hasOwnProperty.call(e, t);
                var Ue = {
                    assign: function(e) {
                        const t = Array.prototype.slice.call(arguments, 1);
                        for (; t.length;) {
                            const i = t.shift();
                            if (i) {
                                if ("object" != typeof i) throw new TypeError(i + "must be non-object");
                                for (const t in i) Ne(i, t) && (e[t] = i[t])
                            }
                        }
                        return e
                    },
                    flattenChunks: e => {
                        let t = 0;
                        for (let i = 0, s = e.length; i < s; i++) t += e[i].length;
                        const i = new Uint8Array(t);
                        for (let t = 0, s = 0, r = e.length; t < r; t++) {
                            let r = e[t];
                            i.set(r, s), s += r.length
                        }
                        return i
                    }
                };
                let ze = !0;
                try {
                    String.fromCharCode.apply(null, new Uint8Array(1))
                } catch (s) {
                    ze = !1
                }
                const We = new Uint8Array(256);
                for (let e = 0; e < 256; e++) We[e] = e >= 252 ? 6 : e >= 248 ? 5 : e >= 240 ? 4 : e >= 224 ? 3 : e >= 192 ? 2 : 1;
                We[254] = We[254] = 1;
                var $e = {
                        string2buf: e => {
                            if ("function" == typeof TextEncoder && TextEncoder.prototype.encode) return (new TextEncoder).encode(e);
                            let t, i, s, r, n, o = e.length,
                                a = 0;
                            for (r = 0; r < o; r++) i = e.charCodeAt(r), 55296 == (64512 & i) && r + 1 < o && (s = e.charCodeAt(r + 1), 56320 == (64512 & s) && (i = 65536 + (i - 55296 << 10) + (s - 56320), r++)), a += i < 128 ? 1 : i < 2048 ? 2 : i < 65536 ? 3 : 4;
                            for (t = new Uint8Array(a), n = 0, r = 0; n < a; r++) i = e.charCodeAt(r), 55296 == (64512 & i) && r + 1 < o && (s = e.charCodeAt(r + 1), 56320 == (64512 & s) && (i = 65536 + (i - 55296 << 10) + (s - 56320), r++)), i < 128 ? t[n++] = i : i < 2048 ? (t[n++] = 192 | i >>> 6, t[n++] = 128 | 63 & i) : i < 65536 ? (t[n++] = 224 | i >>> 12, t[n++] = 128 | i >>> 6 & 63, t[n++] = 128 | 63 & i) : (t[n++] = 240 | i >>> 18, t[n++] = 128 | i >>> 12 & 63, t[n++] = 128 | i >>> 6 & 63, t[n++] = 128 | 63 & i);
                            return t
                        },
                        buf2string: (e, t) => {
                            const i = t || e.length;
                            if ("function" == typeof TextDecoder && TextDecoder.prototype.decode) return (new TextDecoder).decode(e.subarray(0, t));
                            let s, r;
                            const n = new Array(2 * i);
                            for (r = 0, s = 0; s < i;) {
                                let t = e[s++];
                                if (t < 128) {
                                    n[r++] = t;
                                    continue
                                }
                                let o = We[t];
                                if (o > 4) n[r++] = 65533, s += o - 1;
                                else {
                                    for (t &= 2 === o ? 31 : 3 === o ? 15 : 7; o > 1 && s < i;) t = t << 6 | 63 & e[s++], o--;
                                    o > 1 ? n[r++] = 65533 : t < 65536 ? n[r++] = t : (t -= 65536, n[r++] = 55296 | t >> 10 & 1023, n[r++] = 56320 | 1023 & t)
                                }
                            }
                            return ((e, t) => {
                                if (t < 65534 && e.subarray && ze) return String.fromCharCode.apply(null, e.length === t ? e : e.subarray(0, t));
                                let i = "";
                                for (let s = 0; s < t; s++) i += String.fromCharCode(e[s]);
                                return i
                            })(n, r)
                        },
                        utf8border: (e, t) => {
                            (t = t || e.length) > e.length && (t = e.length);
                            let i = t - 1;
                            for (; i >= 0 && 128 == (192 & e[i]);) i--;
                            return i < 0 || 0 === i ? t : i + We[e[i]] > t ? i : t
                        }
                    },
                    Ge = function() {
                        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0
                    };
                const je = Object.prototype.toString,
                    {
                        Z_NO_FLUSH: qe,
                        Z_SYNC_FLUSH: Je,
                        Z_FULL_FLUSH: Ke,
                        Z_FINISH: Ze,
                        Z_OK: Ve,
                        Z_STREAM_END: Ye,
                        Z_DEFAULT_COMPRESSION: Xe,
                        Z_DEFAULT_STRATEGY: et,
                        Z_DEFLATED: tt
                    } = z;

                function it(e) {
                    this.options = Ue.assign({
                        level: Xe,
                        method: tt,
                        chunkSize: 16384,
                        windowBits: 15,
                        memLevel: 8,
                        strategy: et
                    }, e || {});
                    let t = this.options;
                    t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new Ge, this.strm.avail_out = 0;
                    let i = Qe.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
                    if (i !== Ve) throw new Error(U[i]);
                    if (t.header && Qe.deflateSetHeader(this.strm, t.header), t.dictionary) {
                        let e;
                        if (e = "string" == typeof t.dictionary ? $e.string2buf(t.dictionary) : "[object ArrayBuffer]" === je.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary, i = Qe.deflateSetDictionary(this.strm, e), i !== Ve) throw new Error(U[i]);
                        this._dict_set = !0
                    }
                }

                function st(e, t) {
                    const i = new it(t);
                    if (i.push(e, !0), i.err) throw i.msg || U[i.err];
                    return i.result
                }
                it.prototype.push = function(e, t) {
                    const i = this.strm,
                        s = this.options.chunkSize;
                    let r, n;
                    if (this.ended) return !1;
                    for (n = t === ~~t ? t : !0 === t ? Ze : qe, "string" == typeof e ? i.input = $e.string2buf(e) : "[object ArrayBuffer]" === je.call(e) ? i.input = new Uint8Array(e) : i.input = e, i.next_in = 0, i.avail_in = i.input.length;;)
                        if (0 === i.avail_out && (i.output = new Uint8Array(s), i.next_out = 0, i.avail_out = s), (n === Je || n === Ke) && i.avail_out <= 6) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0;
                        else {
                            if (r = Qe.deflate(i, n), r === Ye) return i.next_out > 0 && this.onData(i.output.subarray(0, i.next_out)), r = Qe.deflateEnd(this.strm), this.onEnd(r), this.ended = !0, r === Ve;
                            if (0 !== i.avail_out) {
                                if (n > 0 && i.next_out > 0) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0;
                                else if (0 === i.avail_in) break
                            } else this.onData(i.output)
                        } return !0
                }, it.prototype.onData = function(e) {
                    this.chunks.push(e)
                }, it.prototype.onEnd = function(e) {
                    e === Ve && (this.result = Ue.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
                };
                var rt = {
                    Deflate: it,
                    deflate: st,
                    deflateRaw: function(e, t) {
                        return (t = t || {}).raw = !0, st(e, t)
                    },
                    gzip: function(e, t) {
                        return (t = t || {}).gzip = !0, st(e, t)
                    },
                    constants: z
                };
                const nt = 16209;
                var ot = function(e, t) {
                    let i, s, r, n, o, a, h, l, c, d, _, u, f, g, p, v, m, A, C, w, b, y, S, E;
                    const x = e.state;
                    i = e.next_in, S = e.input, s = i + (e.avail_in - 5), r = e.next_out, E = e.output, n = r - (t - e.avail_out), o = r + (e.avail_out - 257), a = x.dmax, h = x.wsize, l = x.whave, c = x.wnext, d = x.window, _ = x.hold, u = x.bits, f = x.lencode, g = x.distcode, p = (1 << x.lenbits) - 1, v = (1 << x.distbits) - 1;
                    e: do {
                        u < 15 && (_ += S[i++] << u, u += 8, _ += S[i++] << u, u += 8), m = f[_ & p];
                        t: for (;;) {
                            if (A = m >>> 24, _ >>>= A, u -= A, A = m >>> 16 & 255, 0 === A) E[r++] = 65535 & m;
                            else {
                                if (!(16 & A)) {
                                    if (0 == (64 & A)) {
                                        m = f[(65535 & m) + (_ & (1 << A) - 1)];
                                        continue t
                                    }
                                    if (32 & A) {
                                        x.mode = 16191;
                                        break e
                                    }
                                    e.msg = "invalid literal/length code", x.mode = nt;
                                    break e
                                }
                                C = 65535 & m, A &= 15, A && (u < A && (_ += S[i++] << u, u += 8), C += _ & (1 << A) - 1, _ >>>= A, u -= A), u < 15 && (_ += S[i++] << u, u += 8, _ += S[i++] << u, u += 8), m = g[_ & v];
                                i: for (;;) {
                                    if (A = m >>> 24, _ >>>= A, u -= A, A = m >>> 16 & 255, !(16 & A)) {
                                        if (0 == (64 & A)) {
                                            m = g[(65535 & m) + (_ & (1 << A) - 1)];
                                            continue i
                                        }
                                        e.msg = "invalid distance code", x.mode = nt;
                                        break e
                                    }
                                    if (w = 65535 & m, A &= 15, u < A && (_ += S[i++] << u, u += 8, u < A && (_ += S[i++] << u, u += 8)), w += _ & (1 << A) - 1, w > a) {
                                        e.msg = "invalid distance too far back", x.mode = nt;
                                        break e
                                    }
                                    if (_ >>>= A, u -= A, A = r - n, w > A) {
                                        if (A = w - A, A > l && x.sane) {
                                            e.msg = "invalid distance too far back", x.mode = nt;
                                            break e
                                        }
                                        if (b = 0, y = d, 0 === c) {
                                            if (b += h - A, A < C) {
                                                C -= A;
                                                do {
                                                    E[r++] = d[b++]
                                                } while (--A);
                                                b = r - w, y = E
                                            }
                                        } else if (c < A) {
                                            if (b += h + c - A, A -= c, A < C) {
                                                C -= A;
                                                do {
                                                    E[r++] = d[b++]
                                                } while (--A);
                                                if (b = 0, c < C) {
                                                    A = c, C -= A;
                                                    do {
                                                        E[r++] = d[b++]
                                                    } while (--A);
                                                    b = r - w, y = E
                                                }
                                            }
                                        } else if (b += c - A, A < C) {
                                            C -= A;
                                            do {
                                                E[r++] = d[b++]
                                            } while (--A);
                                            b = r - w, y = E
                                        }
                                        for (; C > 2;) E[r++] = y[b++], E[r++] = y[b++], E[r++] = y[b++], C -= 3;
                                        C && (E[r++] = y[b++], C > 1 && (E[r++] = y[b++]))
                                    } else {
                                        b = r - w;
                                        do {
                                            E[r++] = E[b++], E[r++] = E[b++], E[r++] = E[b++], C -= 3
                                        } while (C > 2);
                                        C && (E[r++] = E[b++], C > 1 && (E[r++] = E[b++]))
                                    }
                                    break
                                }
                            }
                            break
                        }
                    } while (i < s && r < o);
                    C = u >> 3, i -= C, u -= C << 3, _ &= (1 << u) - 1, e.next_in = i, e.next_out = r, e.avail_in = i < s ? s - i + 5 : 5 - (i - s), e.avail_out = r < o ? o - r + 257 : 257 - (r - o), x.hold = _, x.bits = u
                };
                const at = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]),
                    ht = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]),
                    lt = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]),
                    ct = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);
                var dt = (e, t, i, s, r, n, o, a) => {
                    const h = a.bits;
                    let l, c, d, _, u, f, g = 0,
                        p = 0,
                        v = 0,
                        m = 0,
                        A = 0,
                        C = 0,
                        w = 0,
                        b = 0,
                        y = 0,
                        S = 0,
                        E = null;
                    const x = new Uint16Array(16),
                        L = new Uint16Array(16);
                    let I, B, D, k = null;
                    for (g = 0; g <= 15; g++) x[g] = 0;
                    for (p = 0; p < s; p++) x[t[i + p]]++;
                    for (A = h, m = 15; m >= 1 && 0 === x[m]; m--);
                    if (A > m && (A = m), 0 === m) return r[n++] = 20971520, r[n++] = 20971520, a.bits = 1, 0;
                    for (v = 1; v < m && 0 === x[v]; v++);
                    for (A < v && (A = v), b = 1, g = 1; g <= 15; g++)
                        if (b <<= 1, b -= x[g], b < 0) return -1;
                    if (b > 0 && (0 === e || 1 !== m)) return -1;
                    for (L[1] = 0, g = 1; g < 15; g++) L[g + 1] = L[g] + x[g];
                    for (p = 0; p < s; p++) 0 !== t[i + p] && (o[L[t[i + p]]++] = p);
                    if (0 === e ? (E = k = o, f = 20) : 1 === e ? (E = at, k = ht, f = 257) : (E = lt, k = ct, f = 0), S = 0, p = 0, g = v, u = n, C = A, w = 0, d = -1, y = 1 << A, _ = y - 1, 1 === e && y > 852 || 2 === e && y > 592) return 1;
                    for (;;) {
                        I = g - w, o[p] + 1 < f ? (B = 0, D = o[p]) : o[p] >= f ? (B = k[o[p] - f], D = E[o[p] - f]) : (B = 96, D = 0), l = 1 << g - w, c = 1 << C, v = c;
                        do {
                            c -= l, r[u + (S >> w) + c] = I << 24 | B << 16 | D | 0
                        } while (0 !== c);
                        for (l = 1 << g - 1; S & l;) l >>= 1;
                        if (0 !== l ? (S &= l - 1, S += l) : S = 0, p++, 0 == --x[g]) {
                            if (g === m) break;
                            g = t[i + o[p]]
                        }
                        if (g > A && (S & _) !== d) {
                            for (0 === w && (w = A), u += v, C = g - w, b = 1 << C; C + w < m && (b -= x[C + w], !(b <= 0));) C++, b <<= 1;
                            if (y += 1 << C, 1 === e && y > 852 || 2 === e && y > 592) return 1;
                            d = S & _, r[d] = A << 24 | C << 16 | u - n | 0
                        }
                    }
                    return 0 !== S && (r[u + S] = g - w << 24 | 64 << 16 | 0), a.bits = A, 0
                };
                const {
                    Z_FINISH: _t,
                    Z_BLOCK: ut,
                    Z_TREES: ft,
                    Z_OK: gt,
                    Z_STREAM_END: pt,
                    Z_NEED_DICT: vt,
                    Z_STREAM_ERROR: mt,
                    Z_DATA_ERROR: At,
                    Z_MEM_ERROR: Ct,
                    Z_BUF_ERROR: wt,
                    Z_DEFLATED: bt
                } = z, yt = 16180, St = 16190, Et = 16191, xt = 16192, Lt = 16194, It = 16199, Bt = 16200, Dt = 16206, kt = 16209, Rt = e => (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24);

                function Mt() {
                    this.strm = null, this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0
                }
                const Tt = e => {
                        if (!e) return 1;
                        const t = e.state;
                        return !t || t.strm !== e || t.mode < yt || t.mode > 16211 ? 1 : 0
                    },
                    Ot = e => {
                        if (Tt(e)) return mt;
                        const t = e.state;
                        return e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = yt, t.last = 0, t.havedict = 0, t.flags = -1, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new Int32Array(852), t.distcode = t.distdyn = new Int32Array(592), t.sane = 1, t.back = -1, gt
                    },
                    Pt = e => {
                        if (Tt(e)) return mt;
                        const t = e.state;
                        return t.wsize = 0, t.whave = 0, t.wnext = 0, Ot(e)
                    },
                    Ft = (e, t) => {
                        let i;
                        if (Tt(e)) return mt;
                        const s = e.state;
                        return t < 0 ? (i = 0, t = -t) : (i = 5 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? mt : (null !== s.window && s.wbits !== t && (s.window = null), s.wrap = i, s.wbits = t, Pt(e))
                    },
                    Ht = (e, t) => {
                        if (!e) return mt;
                        const i = new Mt;
                        e.state = i, i.strm = e, i.window = null, i.mode = yt;
                        const s = Ft(e, t);
                        return s !== gt && (e.state = null), s
                    };
                let Qt, Nt, Ut = !0;
                const zt = e => {
                        if (Ut) {
                            Qt = new Int32Array(512), Nt = new Int32Array(32);
                            let t = 0;
                            for (; t < 144;) e.lens[t++] = 8;
                            for (; t < 256;) e.lens[t++] = 9;
                            for (; t < 280;) e.lens[t++] = 7;
                            for (; t < 288;) e.lens[t++] = 8;
                            for (dt(1, e.lens, 0, 288, Qt, 0, e.work, {
                                    bits: 9
                                }), t = 0; t < 32;) e.lens[t++] = 5;
                            dt(2, e.lens, 0, 32, Nt, 0, e.work, {
                                bits: 5
                            }), Ut = !1
                        }
                        e.lencode = Qt, e.lenbits = 9, e.distcode = Nt, e.distbits = 5
                    },
                    Wt = (e, t, i, s) => {
                        let r;
                        const n = e.state;
                        return null === n.window && (n.wsize = 1 << n.wbits, n.wnext = 0, n.whave = 0, n.window = new Uint8Array(n.wsize)), s >= n.wsize ? (n.window.set(t.subarray(i - n.wsize, i), 0), n.wnext = 0, n.whave = n.wsize) : (r = n.wsize - n.wnext, r > s && (r = s), n.window.set(t.subarray(i - s, i - s + r), n.wnext), (s -= r) ? (n.window.set(t.subarray(i - s, i), 0), n.wnext = s, n.whave = n.wsize) : (n.wnext += r, n.wnext === n.wsize && (n.wnext = 0), n.whave < n.wsize && (n.whave += r))), 0
                    };
                var $t = {
                        inflateReset: Pt,
                        inflateReset2: Ft,
                        inflateResetKeep: Ot,
                        inflateInit: e => Ht(e, 15),
                        inflateInit2: Ht,
                        inflate: (e, t) => {
                            let i, s, r, n, o, a, h, l, c, d, _, u, f, g, p, v, m, A, C, w, b, y, S = 0;
                            const E = new Uint8Array(4);
                            let x, L;
                            const I = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
                            if (Tt(e) || !e.output || !e.input && 0 !== e.avail_in) return mt;
                            i = e.state, i.mode === Et && (i.mode = xt), o = e.next_out, r = e.output, h = e.avail_out, n = e.next_in, s = e.input, a = e.avail_in, l = i.hold, c = i.bits, d = a, _ = h, y = gt;
                            e: for (;;) switch (i.mode) {
                                case yt:
                                    if (0 === i.wrap) {
                                        i.mode = xt;
                                        break
                                    }
                                    for (; c < 16;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if (2 & i.wrap && 35615 === l) {
                                        0 === i.wbits && (i.wbits = 15), i.check = 0, E[0] = 255 & l, E[1] = l >>> 8 & 255, i.check = N(i.check, E, 2, 0), l = 0, c = 0, i.mode = 16181;
                                        break
                                    }
                                    if (i.head && (i.head.done = !1), !(1 & i.wrap) || (((255 & l) << 8) + (l >> 8)) % 31) {
                                        e.msg = "incorrect header check", i.mode = kt;
                                        break
                                    }
                                    if ((15 & l) !== bt) {
                                        e.msg = "unknown compression method", i.mode = kt;
                                        break
                                    }
                                    if (l >>>= 4, c -= 4, b = 8 + (15 & l), 0 === i.wbits && (i.wbits = b), b > 15 || b > i.wbits) {
                                        e.msg = "invalid window size", i.mode = kt;
                                        break
                                    }
                                    i.dmax = 1 << i.wbits, i.flags = 0, e.adler = i.check = 1, i.mode = 512 & l ? 16189 : Et, l = 0, c = 0;
                                    break;
                                case 16181:
                                    for (; c < 16;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if (i.flags = l, (255 & i.flags) !== bt) {
                                        e.msg = "unknown compression method", i.mode = kt;
                                        break
                                    }
                                    if (57344 & i.flags) {
                                        e.msg = "unknown header flags set", i.mode = kt;
                                        break
                                    }
                                    i.head && (i.head.text = l >> 8 & 1), 512 & i.flags && 4 & i.wrap && (E[0] = 255 & l, E[1] = l >>> 8 & 255, i.check = N(i.check, E, 2, 0)), l = 0, c = 0, i.mode = 16182;
                                case 16182:
                                    for (; c < 32;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    i.head && (i.head.time = l), 512 & i.flags && 4 & i.wrap && (E[0] = 255 & l, E[1] = l >>> 8 & 255, E[2] = l >>> 16 & 255, E[3] = l >>> 24 & 255, i.check = N(i.check, E, 4, 0)), l = 0, c = 0, i.mode = 16183;
                                case 16183:
                                    for (; c < 16;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    i.head && (i.head.xflags = 255 & l, i.head.os = l >> 8), 512 & i.flags && 4 & i.wrap && (E[0] = 255 & l, E[1] = l >>> 8 & 255, i.check = N(i.check, E, 2, 0)), l = 0, c = 0, i.mode = 16184;
                                case 16184:
                                    if (1024 & i.flags) {
                                        for (; c < 16;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        i.length = l, i.head && (i.head.extra_len = l), 512 & i.flags && 4 & i.wrap && (E[0] = 255 & l, E[1] = l >>> 8 & 255, i.check = N(i.check, E, 2, 0)), l = 0, c = 0
                                    } else i.head && (i.head.extra = null);
                                    i.mode = 16185;
                                case 16185:
                                    if (1024 & i.flags && (u = i.length, u > a && (u = a), u && (i.head && (b = i.head.extra_len - i.length, i.head.extra || (i.head.extra = new Uint8Array(i.head.extra_len)), i.head.extra.set(s.subarray(n, n + u), b)), 512 & i.flags && 4 & i.wrap && (i.check = N(i.check, s, u, n)), a -= u, n += u, i.length -= u), i.length)) break e;
                                    i.length = 0, i.mode = 16186;
                                case 16186:
                                    if (2048 & i.flags) {
                                        if (0 === a) break e;
                                        u = 0;
                                        do {
                                            b = s[n + u++], i.head && b && i.length < 65536 && (i.head.name += String.fromCharCode(b))
                                        } while (b && u < a);
                                        if (512 & i.flags && 4 & i.wrap && (i.check = N(i.check, s, u, n)), a -= u, n += u, b) break e
                                    } else i.head && (i.head.name = null);
                                    i.length = 0, i.mode = 16187;
                                case 16187:
                                    if (4096 & i.flags) {
                                        if (0 === a) break e;
                                        u = 0;
                                        do {
                                            b = s[n + u++], i.head && b && i.length < 65536 && (i.head.comment += String.fromCharCode(b))
                                        } while (b && u < a);
                                        if (512 & i.flags && 4 & i.wrap && (i.check = N(i.check, s, u, n)), a -= u, n += u, b) break e
                                    } else i.head && (i.head.comment = null);
                                    i.mode = 16188;
                                case 16188:
                                    if (512 & i.flags) {
                                        for (; c < 16;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        if (4 & i.wrap && l !== (65535 & i.check)) {
                                            e.msg = "header crc mismatch", i.mode = kt;
                                            break
                                        }
                                        l = 0, c = 0
                                    }
                                    i.head && (i.head.hcrc = i.flags >> 9 & 1, i.head.done = !0), e.adler = i.check = 0, i.mode = Et;
                                    break;
                                case 16189:
                                    for (; c < 32;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    e.adler = i.check = Rt(l), l = 0, c = 0, i.mode = St;
                                case St:
                                    if (0 === i.havedict) return e.next_out = o, e.avail_out = h, e.next_in = n, e.avail_in = a, i.hold = l, i.bits = c, vt;
                                    e.adler = i.check = 1, i.mode = Et;
                                case Et:
                                    if (t === ut || t === ft) break e;
                                case xt:
                                    if (i.last) {
                                        l >>>= 7 & c, c -= 7 & c, i.mode = Dt;
                                        break
                                    }
                                    for (; c < 3;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    switch (i.last = 1 & l, l >>>= 1, c -= 1, 3 & l) {
                                        case 0:
                                            i.mode = 16193;
                                            break;
                                        case 1:
                                            if (zt(i), i.mode = It, t === ft) {
                                                l >>>= 2, c -= 2;
                                                break e
                                            }
                                            break;
                                        case 2:
                                            i.mode = 16196;
                                            break;
                                        case 3:
                                            e.msg = "invalid block type", i.mode = kt
                                    }
                                    l >>>= 2, c -= 2;
                                    break;
                                case 16193:
                                    for (l >>>= 7 & c, c -= 7 & c; c < 32;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if ((65535 & l) != (l >>> 16 ^ 65535)) {
                                        e.msg = "invalid stored block lengths", i.mode = kt;
                                        break
                                    }
                                    if (i.length = 65535 & l, l = 0, c = 0, i.mode = Lt, t === ft) break e;
                                case Lt:
                                    i.mode = 16195;
                                case 16195:
                                    if (u = i.length, u) {
                                        if (u > a && (u = a), u > h && (u = h), 0 === u) break e;
                                        r.set(s.subarray(n, n + u), o), a -= u, n += u, h -= u, o += u, i.length -= u;
                                        break
                                    }
                                    i.mode = Et;
                                    break;
                                case 16196:
                                    for (; c < 14;) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if (i.nlen = 257 + (31 & l), l >>>= 5, c -= 5, i.ndist = 1 + (31 & l), l >>>= 5, c -= 5, i.ncode = 4 + (15 & l), l >>>= 4, c -= 4, i.nlen > 286 || i.ndist > 30) {
                                        e.msg = "too many length or distance symbols", i.mode = kt;
                                        break
                                    }
                                    i.have = 0, i.mode = 16197;
                                case 16197:
                                    for (; i.have < i.ncode;) {
                                        for (; c < 3;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        i.lens[I[i.have++]] = 7 & l, l >>>= 3, c -= 3
                                    }
                                    for (; i.have < 19;) i.lens[I[i.have++]] = 0;
                                    if (i.lencode = i.lendyn, i.lenbits = 7, x = {
                                            bits: i.lenbits
                                        }, y = dt(0, i.lens, 0, 19, i.lencode, 0, i.work, x), i.lenbits = x.bits, y) {
                                        e.msg = "invalid code lengths set", i.mode = kt;
                                        break
                                    }
                                    i.have = 0, i.mode = 16198;
                                case 16198:
                                    for (; i.have < i.nlen + i.ndist;) {
                                        for (; S = i.lencode[l & (1 << i.lenbits) - 1], p = S >>> 24, v = S >>> 16 & 255, m = 65535 & S, !(p <= c);) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        if (m < 16) l >>>= p, c -= p, i.lens[i.have++] = m;
                                        else {
                                            if (16 === m) {
                                                for (L = p + 2; c < L;) {
                                                    if (0 === a) break e;
                                                    a--, l += s[n++] << c, c += 8
                                                }
                                                if (l >>>= p, c -= p, 0 === i.have) {
                                                    e.msg = "invalid bit length repeat", i.mode = kt;
                                                    break
                                                }
                                                b = i.lens[i.have - 1], u = 3 + (3 & l), l >>>= 2, c -= 2
                                            } else if (17 === m) {
                                                for (L = p + 3; c < L;) {
                                                    if (0 === a) break e;
                                                    a--, l += s[n++] << c, c += 8
                                                }
                                                l >>>= p, c -= p, b = 0, u = 3 + (7 & l), l >>>= 3, c -= 3
                                            } else {
                                                for (L = p + 7; c < L;) {
                                                    if (0 === a) break e;
                                                    a--, l += s[n++] << c, c += 8
                                                }
                                                l >>>= p, c -= p, b = 0, u = 11 + (127 & l), l >>>= 7, c -= 7
                                            }
                                            if (i.have + u > i.nlen + i.ndist) {
                                                e.msg = "invalid bit length repeat", i.mode = kt;
                                                break
                                            }
                                            for (; u--;) i.lens[i.have++] = b
                                        }
                                    }
                                    if (i.mode === kt) break;
                                    if (0 === i.lens[256]) {
                                        e.msg = "invalid code -- missing end-of-block", i.mode = kt;
                                        break
                                    }
                                    if (i.lenbits = 9, x = {
                                            bits: i.lenbits
                                        }, y = dt(1, i.lens, 0, i.nlen, i.lencode, 0, i.work, x), i.lenbits = x.bits, y) {
                                        e.msg = "invalid literal/lengths set", i.mode = kt;
                                        break
                                    }
                                    if (i.distbits = 6, i.distcode = i.distdyn, x = {
                                            bits: i.distbits
                                        }, y = dt(2, i.lens, i.nlen, i.ndist, i.distcode, 0, i.work, x), i.distbits = x.bits, y) {
                                        e.msg = "invalid distances set", i.mode = kt;
                                        break
                                    }
                                    if (i.mode = It, t === ft) break e;
                                case It:
                                    i.mode = Bt;
                                case Bt:
                                    if (a >= 6 && h >= 258) {
                                        e.next_out = o, e.avail_out = h, e.next_in = n, e.avail_in = a, i.hold = l, i.bits = c, ot(e, _), o = e.next_out, r = e.output, h = e.avail_out, n = e.next_in, s = e.input, a = e.avail_in, l = i.hold, c = i.bits, i.mode === Et && (i.back = -1);
                                        break
                                    }
                                    for (i.back = 0; S = i.lencode[l & (1 << i.lenbits) - 1], p = S >>> 24, v = S >>> 16 & 255, m = 65535 & S, !(p <= c);) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if (v && 0 == (240 & v)) {
                                        for (A = p, C = v, w = m; S = i.lencode[w + ((l & (1 << A + C) - 1) >> A)], p = S >>> 24, v = S >>> 16 & 255, m = 65535 & S, !(A + p <= c);) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        l >>>= A, c -= A, i.back += A
                                    }
                                    if (l >>>= p, c -= p, i.back += p, i.length = m, 0 === v) {
                                        i.mode = 16205;
                                        break
                                    }
                                    if (32 & v) {
                                        i.back = -1, i.mode = Et;
                                        break
                                    }
                                    if (64 & v) {
                                        e.msg = "invalid literal/length code", i.mode = kt;
                                        break
                                    }
                                    i.extra = 15 & v, i.mode = 16201;
                                case 16201:
                                    if (i.extra) {
                                        for (L = i.extra; c < L;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        i.length += l & (1 << i.extra) - 1, l >>>= i.extra, c -= i.extra, i.back += i.extra
                                    }
                                    i.was = i.length, i.mode = 16202;
                                case 16202:
                                    for (; S = i.distcode[l & (1 << i.distbits) - 1], p = S >>> 24, v = S >>> 16 & 255, m = 65535 & S, !(p <= c);) {
                                        if (0 === a) break e;
                                        a--, l += s[n++] << c, c += 8
                                    }
                                    if (0 == (240 & v)) {
                                        for (A = p, C = v, w = m; S = i.distcode[w + ((l & (1 << A + C) - 1) >> A)], p = S >>> 24, v = S >>> 16 & 255, m = 65535 & S, !(A + p <= c);) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        l >>>= A, c -= A, i.back += A
                                    }
                                    if (l >>>= p, c -= p, i.back += p, 64 & v) {
                                        e.msg = "invalid distance code", i.mode = kt;
                                        break
                                    }
                                    i.offset = m, i.extra = 15 & v, i.mode = 16203;
                                case 16203:
                                    if (i.extra) {
                                        for (L = i.extra; c < L;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        i.offset += l & (1 << i.extra) - 1, l >>>= i.extra, c -= i.extra, i.back += i.extra
                                    }
                                    if (i.offset > i.dmax) {
                                        e.msg = "invalid distance too far back", i.mode = kt;
                                        break
                                    }
                                    i.mode = 16204;
                                case 16204:
                                    if (0 === h) break e;
                                    if (u = _ - h, i.offset > u) {
                                        if (u = i.offset - u, u > i.whave && i.sane) {
                                            e.msg = "invalid distance too far back", i.mode = kt;
                                            break
                                        }
                                        u > i.wnext ? (u -= i.wnext, f = i.wsize - u) : f = i.wnext - u, u > i.length && (u = i.length), g = i.window
                                    } else g = r, f = o - i.offset, u = i.length;
                                    u > h && (u = h), h -= u, i.length -= u;
                                    do {
                                        r[o++] = g[f++]
                                    } while (--u);
                                    0 === i.length && (i.mode = Bt);
                                    break;
                                case 16205:
                                    if (0 === h) break e;
                                    r[o++] = i.length, h--, i.mode = Bt;
                                    break;
                                case Dt:
                                    if (i.wrap) {
                                        for (; c < 32;) {
                                            if (0 === a) break e;
                                            a--, l |= s[n++] << c, c += 8
                                        }
                                        if (_ -= h, e.total_out += _, i.total += _, 4 & i.wrap && _ && (e.adler = i.check = i.flags ? N(i.check, r, _, o - _) : H(i.check, r, _, o - _)), _ = h, 4 & i.wrap && (i.flags ? l : Rt(l)) !== i.check) {
                                            e.msg = "incorrect data check", i.mode = kt;
                                            break
                                        }
                                        l = 0, c = 0
                                    }
                                    i.mode = 16207;
                                case 16207:
                                    if (i.wrap && i.flags) {
                                        for (; c < 32;) {
                                            if (0 === a) break e;
                                            a--, l += s[n++] << c, c += 8
                                        }
                                        if (4 & i.wrap && l !== (4294967295 & i.total)) {
                                            e.msg = "incorrect length check", i.mode = kt;
                                            break
                                        }
                                        l = 0, c = 0
                                    }
                                    i.mode = 16208;
                                case 16208:
                                    y = pt;
                                    break e;
                                case kt:
                                    y = At;
                                    break e;
                                case 16210:
                                    return Ct;
                                default:
                                    return mt
                            }
                            return e.next_out = o, e.avail_out = h, e.next_in = n, e.avail_in = a, i.hold = l, i.bits = c, (i.wsize || _ !== e.avail_out && i.mode < kt && (i.mode < Dt || t !== _t)) && Wt(e, e.output, e.next_out, _ - e.avail_out), d -= e.avail_in, _ -= e.avail_out, e.total_in += d, e.total_out += _, i.total += _, 4 & i.wrap && _ && (e.adler = i.check = i.flags ? N(i.check, r, _, e.next_out - _) : H(i.check, r, _, e.next_out - _)), e.data_type = i.bits + (i.last ? 64 : 0) + (i.mode === Et ? 128 : 0) + (i.mode === It || i.mode === Lt ? 256 : 0), (0 === d && 0 === _ || t === _t) && y === gt && (y = wt), y
                        },
                        inflateEnd: e => {
                            if (Tt(e)) return mt;
                            let t = e.state;
                            return t.window && (t.window = null), e.state = null, gt
                        },
                        inflateGetHeader: (e, t) => {
                            if (Tt(e)) return mt;
                            const i = e.state;
                            return 0 == (2 & i.wrap) ? mt : (i.head = t, t.done = !1, gt)
                        },
                        inflateSetDictionary: (e, t) => {
                            const i = t.length;
                            let s, r, n;
                            return Tt(e) ? mt : (s = e.state, 0 !== s.wrap && s.mode !== St ? mt : s.mode === St && (r = 1, r = H(r, t, i, 0), r !== s.check) ? At : (n = Wt(e, t, i, i), n ? (s.mode = 16210, Ct) : (s.havedict = 1, gt)))
                        },
                        inflateInfo: "pako inflate (from Nodeca project)"
                    },
                    Gt = function() {
                        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1
                    };
                const jt = Object.prototype.toString,
                    {
                        Z_NO_FLUSH: qt,
                        Z_FINISH: Jt,
                        Z_OK: Kt,
                        Z_STREAM_END: Zt,
                        Z_NEED_DICT: Vt,
                        Z_STREAM_ERROR: Yt,
                        Z_DATA_ERROR: Xt,
                        Z_MEM_ERROR: ei
                    } = z;

                function ti(e) {
                    this.options = Ue.assign({
                        chunkSize: 65536,
                        windowBits: 15,
                        to: ""
                    }, e || {});
                    const t = this.options;
                    t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new Ge, this.strm.avail_out = 0;
                    let i = $t.inflateInit2(this.strm, t.windowBits);
                    if (i !== Kt) throw new Error(U[i]);
                    if (this.header = new Gt, $t.inflateGetHeader(this.strm, this.header), t.dictionary && ("string" == typeof t.dictionary ? t.dictionary = $e.string2buf(t.dictionary) : "[object ArrayBuffer]" === jt.call(t.dictionary) && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (i = $t.inflateSetDictionary(this.strm, t.dictionary), i !== Kt))) throw new Error(U[i])
                }

                function ii(e, t) {
                    const i = new ti(t);
                    if (i.push(e), i.err) throw i.msg || U[i.err];
                    return i.result
                }
                ti.prototype.push = function(e, t) {
                    const i = this.strm,
                        s = this.options.chunkSize,
                        r = this.options.dictionary;
                    let n, o, a;
                    if (this.ended) return !1;
                    for (o = t === ~~t ? t : !0 === t ? Jt : qt, "[object ArrayBuffer]" === jt.call(e) ? i.input = new Uint8Array(e) : i.input = e, i.next_in = 0, i.avail_in = i.input.length;;) {
                        for (0 === i.avail_out && (i.output = new Uint8Array(s), i.next_out = 0, i.avail_out = s), n = $t.inflate(i, o), n === Vt && r && (n = $t.inflateSetDictionary(i, r), n === Kt ? n = $t.inflate(i, o) : n === Xt && (n = Vt)); i.avail_in > 0 && n === Zt && i.state.wrap > 0 && 0 !== e[i.next_in];) $t.inflateReset(i), n = $t.inflate(i, o);
                        switch (n) {
                            case Yt:
                            case Xt:
                            case Vt:
                            case ei:
                                return this.onEnd(n), this.ended = !0, !1
                        }
                        if (a = i.avail_out, i.next_out && (0 === i.avail_out || n === Zt))
                            if ("string" === this.options.to) {
                                let e = $e.utf8border(i.output, i.next_out),
                                    t = i.next_out - e,
                                    r = $e.buf2string(i.output, e);
                                i.next_out = t, i.avail_out = s - t, t && i.output.set(i.output.subarray(e, e + t), 0), this.onData(r)
                            } else this.onData(i.output.length === i.next_out ? i.output : i.output.subarray(0, i.next_out));
                        if (n !== Kt || 0 !== a) {
                            if (n === Zt) return n = $t.inflateEnd(this.strm), this.onEnd(n), this.ended = !0, !0;
                            if (0 === i.avail_in) break
                        }
                    }
                    return !0
                }, ti.prototype.onData = function(e) {
                    this.chunks.push(e)
                }, ti.prototype.onEnd = function(e) {
                    e === Kt && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = Ue.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg
                };
                var si = {
                    Inflate: ti,
                    inflate: ii,
                    inflateRaw: function(e, t) {
                        return (t = t || {}).raw = !0, ii(e, t)
                    },
                    ungzip: ii,
                    constants: z
                };
                const {
                    Deflate: ri,
                    deflate: ni,
                    deflateRaw: oi,
                    gzip: ai
                } = rt, {
                    Inflate: hi,
                    inflate: li,
                    inflateRaw: ci,
                    ungzip: di
                } = si;
                for (var _i = {
                        Deflate: ri,
                        deflate: ni,
                        deflateRaw: oi,
                        gzip: ai,
                        Inflate: hi,
                        inflate: li,
                        inflateRaw: ci,
                        ungzip: di,
                        constants: z
                    }, ui = [], fi = [], gi = "undefined" != typeof Uint8Array ? Uint8Array : Array, pi = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", vi = 0; vi < 64; ++vi) ui[vi] = pi[vi], fi[pi.charCodeAt(vi)] = vi;

                function mi(e, t, i) {
                    for (var s, r, n = [], o = t; o < i; o += 3) s = (e[o] << 16 & 16711680) + (e[o + 1] << 8 & 65280) + (255 & e[o + 2]), n.push(ui[(r = s) >> 18 & 63] + ui[r >> 12 & 63] + ui[r >> 6 & 63] + ui[63 & r]);
                    return n.join("")
                }
                fi["-".charCodeAt(0)] = 62, fi["_".charCodeAt(0)] = 63,
                    function() {
                        try {
                            return "win32" === process.platform
                        } catch (e) {
                            return !1
                        }
                    }();
                const Ai = function() {
                    try {
                        if ("fs" === require.resolve("fs")) return require("fs"), !1
                    } catch (e) {}
                    return !0
                }();

                function Ci(e) {
                    return Uint8Array.from(e, (e => e.charCodeAt(0)))
                }

                function wi(e, t = "binary") {
                    return s(this, void 0, void 0, (function*() {
                        return "function" == typeof Buffer ? Buffer.from(e).toString(t) : new Promise((i => {
                            const s = new FileReader;
                            s.onloadend = () => i(s.result), "binary" == t ? s.readAsBinaryString(new Blob([e])) : s.readAsText(new Blob([e]), t)
                        }))
                    }))
                }
                const bi = "function" == typeof Buffer;

                function yi(e) {
                    const t = _i.deflate(e);
                    return bi ? Buffer.from(t).toString("base64") : function(e) {
                        for (var t, i = e.length, s = i % 3, r = [], n = 16383, o = 0, a = i - s; o < a; o += n) r.push(mi(e, o, o + n > a ? a : o + n));
                        return 1 === s ? (t = e[i - 1], r.push(ui[t >> 2] + ui[t << 4 & 63] + "==")) : 2 === s && (t = (e[i - 2] << 8) + e[i - 1], r.push(ui[t >> 10] + ui[t >> 4 & 63] + ui[t << 2 & 63] + "=")), r.join("")
                    }(t)
                }

                function Si(e) {
                    let t;
                    return t = bi ? Buffer.from(e, "base64") : function(e) {
                        var t, i, s = function(e) {
                                var t = e.length;
                                if (t % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
                                var i = e.indexOf("=");
                                return -1 === i && (i = t), [i, i === t ? 0 : 4 - i % 4]
                            }(e),
                            r = s[0],
                            n = s[1],
                            o = new gi(function(e, t, i) {
                                return 3 * (t + i) / 4 - i
                            }(0, r, n)),
                            a = 0,
                            h = n > 0 ? r - 4 : r;
                        for (i = 0; i < h; i += 4) t = fi[e.charCodeAt(i)] << 18 | fi[e.charCodeAt(i + 1)] << 12 | fi[e.charCodeAt(i + 2)] << 6 | fi[e.charCodeAt(i + 3)], o[a++] = t >> 16 & 255, o[a++] = t >> 8 & 255, o[a++] = 255 & t;
                        return 2 === n && (t = fi[e.charCodeAt(i)] << 2 | fi[e.charCodeAt(i + 1)] >> 4, o[a++] = 255 & t), 1 === n && (t = fi[e.charCodeAt(i)] << 10 | fi[e.charCodeAt(i + 1)] << 4 | fi[e.charCodeAt(i + 2)] >> 2, o[a++] = t >> 8 & 255, o[a++] = 255 & t), o
                    }(e), _i.inflate(t)
                }
                class Ei extends Error {
                    constructor(e, t = null, i = !1) {
                        if ("fail" === t || "FAIL" === t || "EXIT" === t) try {
                            e = (new TextDecoder).decode(Si(e))
                        } catch (t) {
                            e = `decode [${e}] error: ${t}`
                        } else t && (e = `[TrzszError] ${t}: ${e}`);
                        super(e), Object.setPrototypeOf(this, Ei.prototype), Error.captureStackTrace && Error.captureStackTrace(this, Ei), this.name = "TrzszError", this.type = t, this.trace = i
                    }
                    isTraceBack() {
                        return "fail" !== this.type && "EXIT" !== this.type && this.trace
                    }
                    isRemoteExit() {
                        return "EXIT" === this.type
                    }
                    isRemoteFail() {
                        return "fail" === this.type || "FAIL" === this.type
                    }
                    isStopAndDelete() {
                        return "fail" === this.type && "Stopped and deleted" === this.message
                    }
                    static getErrorMessage(e) {
                        return e instanceof Ei && !e.isTraceBack() ? e.message : e.stack ? e.stack.replace("TrzszError: ", "") : e.toString()
                    }
                }

                function xi(e) {
                    return 97 <= e && e <= 122 || 65 <= e && e <= 90
                }

                function Li(e, t) {
                    let i = `Saved ${e.length} ${e.length > 1 ? "files/directories" : "file/directory"}`;
                    return t.length > 0 && (i += ` to ${t}`), [i].concat(e).join("\r\n- ")
                }
                const Ii = Di("fs"),
                    Bi = Di("path");

                function Di(e) {
                    try {
                        return require(e)
                    } catch (e) {
                        return {}
                    }
                }! function(e, t) {
                    for (const t of ["rm", "rmdir", "unlink", "access"]) e[t + "Async"] = (...i) => new Promise((s => {
                        e[t](...i, (e => s(!e)))
                    }))
                }(Ii),
                function(e, t) {
                    for (const t of ["stat", "mkdir", "readdir", "close", "open", "realpath", "write"]) e[t + "Async"] = (...i) => new Promise(((s, r) => {
                        e[t](...i, ((e, t) => {
                            e ? r(e) : s(t)
                        }))
                    }))
                }(Ii);
                class ki {
                    constructor(e, t, i, s, r) {
                        this.closed = !1, this.fd = null, this.pathId = e, this.absPath = t, this.relPath = i, this.dir = s, this.size = r
                    }
                    getPathId() {
                        return this.pathId
                    }
                    getRelPath() {
                        return this.relPath
                    }
                    isDir() {
                        return this.dir
                    }
                    getSize() {
                        return this.size
                    }
                    readFile(e) {
                        return s(this, void 0, void 0, (function*() {
                            if (this.closed) throw new Ei(`File closed: ${this.absPath}`, null, !0);
                            null === this.fd && (this.fd = yield Ii.openAsync(this.absPath, "r"));
                            const t = new Uint8Array(e);
                            return function(e, t, i, r, n) {
                                return s(this, void 0, void 0, (function*() {
                                    return new Promise(((i, s) => Ii.read(e, t, 0, r, null, ((e, t, r) => {
                                        e ? s(e) : i(r.subarray(0, t))
                                    }))))
                                }))
                            }(this.fd, t, 0, t.length)
                        }))
                    }
                    closeFile() {
                        return s(this, void 0, void 0, (function*() {
                            this.closed || (this.closed = !0, null !== this.fd && (yield Ii.closeAsync(this.fd), this.fd = null))
                        }))
                    }
                }

                function Ri(e, t, i, r, n, o) {
                    return s(this, void 0, void 0, (function*() {
                        if (!i.isDirectory()) {
                            if (!i.isFile()) throw new Ei(`Not a regular file: ${t}`);
                            if (!(yield Ii.accessAsync(t, Ii.constants.R_OK))) throw new Ei(`No permission to read: ${t}`);
                            return void r.push(new ki(e, t, n, !1, i.size))
                        }
                        const s = yield Ii.realpathAsync(t);
                        if (o.has(s)) throw new Ei(`Duplicate link: ${t}`);
                        o.add(s), r.push(new ki(e, t, n, !0, 0));
                        const a = yield Ii.readdirAsync(t);
                        for (const i of a) {
                            const s = Bi.join(t, i),
                                a = yield Ii.statAsync(s);
                            yield Ri(e, s, a, r, [...n, i], o)
                        }
                    }))
                }

                function Mi(e, t = !1) {
                    return s(this, void 0, void 0, (function*() {
                        if (!e || !e.length) return;
                        const i = [],
                            s = e.entries();
                        for (const [e, r] of s) {
                            const s = Bi.resolve(r);
                            if (!(yield Ii.accessAsync(s))) throw new Ei(`No such file: ${s}`);
                            const n = yield Ii.statAsync(s);
                            if (!t && n.isDirectory()) throw new Ei(`Is a directory: ${s}`);
                            const o = new Set;
                            yield Ri(e, s, n, i, [Bi.basename(s)], o)
                        }
                        return i
                    }))
                }
                class Ti {
                    constructor(e, t, i, s, r = !1) {
                        this.closed = !1, this.absPath = e, this.fileName = t, this.localName = i, this.fd = s, this.dir = r
                    }
                    getFileName() {
                        return this.fileName
                    }
                    getLocalName() {
                        return this.localName
                    }
                    isDir() {
                        return this.dir
                    }
                    writeFile(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield Ii.writeAsync(this.fd, e)
                        }))
                    }
                    closeFile() {
                        return s(this, void 0, void 0, (function*() {
                            this.closed || (this.closed = !0, null !== this.fd && (yield Ii.closeAsync(this.fd), this.fd = null))
                        }))
                    }
                    deleteFile() {
                        return s(this, void 0, void 0, (function*() {
                            if (!this.absPath || !(yield Ii.accessAsync(this.absPath))) return "";
                            try {
                                if (yield this.closeFile(), "function" == typeof Ii.rm) {
                                    if (yield Ii.rmAsync(this.absPath, {
                                            recursive: !0
                                        })) return this.absPath
                                } else if (this.isDir) {
                                    if (yield Ii.rmdirAsync(this.absPath, {
                                            recursive: !0
                                        })) return this.absPath
                                } else if (yield Ii.unlinkAsync(this.absPath)) return this.absPath
                            } catch (e) {
                                console.log(`delete [${this.absPath}] failed`, e)
                            }
                            return ""
                        }))
                    }
                }

                function Oi(e, t) {
                    return s(this, void 0, void 0, (function*() {
                        if (!(yield Ii.accessAsync(Bi.join(e, t)))) return t;
                        for (let i = 0; i < 1e3; i++) {
                            const s = `${t}.${i}`;
                            if (!(yield Ii.accessAsync(Bi.join(e, s)))) return s
                        }
                        throw new Ei("Fail to assign new file name")
                    }))
                }

                function Pi(e) {
                    return s(this, void 0, void 0, (function*() {
                        try {
                            return yield Ii.openAsync(e, "w")
                        } catch (t) {
                            if (-13 === t.errno || -4048 === t.errno) throw new Ei(`No permission to write: ${e}`);
                            if (-21 === t.errno || -4068 === t.errno) throw new Ei(`Is a directory: ${e}`);
                            throw t
                        }
                    }))
                }

                function Fi(e) {
                    return s(this, void 0, void 0, (function*() {
                        if (!(yield Ii.accessAsync(e))) return yield Ii.mkdirAsync(e, {
                            recursive: !0,
                            mode: 493
                        }), !0;
                        if (!(yield Ii.statAsync(e)).isDirectory()) throw new Ei(`Not a directory: ${e}`);
                        return !1
                    }))
                }

                function Hi(e, t, i, r) {
                    return s(this, void 0, void 0, (function*() {
                        if (!i) return function(e, t, i) {
                            return s(this, void 0, void 0, (function*() {
                                const s = i ? t : yield Oi(e, t), r = Bi.join(e, s), n = yield Pi(r);
                                return new Ti(r, t, s, n)
                            }))
                        }(e.path, t, r);
                        const n = JSON.parse(t);
                        if (!n.hasOwnProperty("path_name") || !n.hasOwnProperty("path_id") || !n.hasOwnProperty("is_dir") || n.path_name.length < 1) throw new Ei(`Invalid name: ${t}`);
                        let o, a;
                        if (t = n.path_name[n.path_name.length - 1], r ? o = n.path_name[0] : e.maps.has(n.path_id) ? o = e.maps.get(n.path_id) : (o = yield Oi(e.path, n.path_name[0]), e.maps.set(n.path_id, o)), n.path_name.length > 1) {
                            const i = Bi.join(e.path, o, ...n.path_name.slice(1, n.path_name.length - 1));
                            yield Fi(i), a = Bi.join(i, t)
                        } else a = Bi.join(e.path, o);
                        if (!0 === n.is_dir) {
                            let e = "";
                            return (yield Fi(a)) && (e = a), new Ti(e, t, o, null, !0)
                        }
                        const h = yield Pi(a);
                        return new Ti(a, t, o, h)
                    }))
                }
                class Qi {
                    constructor(e, t, i, s) {
                        this.closed = !1, this.pos = 0, this.pathId = e, this.relPath = t, this.file = i, this.dir = s
                    }
                    getPathId() {
                        return this.pathId
                    }
                    getRelPath() {
                        return this.relPath
                    }
                    isDir() {
                        return this.dir
                    }
                    getSize() {
                        return this.file.size
                    }
                    readFile(e) {
                        return s(this, void 0, void 0, (function*() {
                            if (this.pos >= this.file.size) return new Uint8Array(0);
                            try {
                                const t = Math.min(e.byteLength, this.file.size - this.pos),
                                    i = this.file.slice(this.pos, this.pos + t);
                                return this.pos += t, new Uint8Array(yield i.arrayBuffer())
                            } catch (e) {
                                if ("NotReadableError" === e.name) throw new Ei(`No permission to read: ${this.relPath.join("/")}`);
                                throw new Ei(`Read ${this.relPath.join("/")} error: ${e.toString()}`)
                            }
                        }))
                    }
                    closeFile() {
                        this.closed || (this.file = null, this.closed = !0)
                    }
                }

                function Ni(e, t, i, n) {
                    var o, a, h, l;
                    return s(this, void 0, void 0, (function*() {
                        if ("file" === t.kind) {
                            const s = yield t.getFile();
                            i.push(new Qi(e, n, s, !1))
                        } else if ("directory" === t.kind) {
                            i.push(new Qi(e, n, null, !0));
                            const _ = t;
                            try {
                                for (var s, c = !0, d = r(_.values()); s = yield d.next(), !(o = s.done); c = !0) {
                                    l = s.value, c = !1;
                                    const t = l,
                                        r = t.name;
                                    "file" === t.kind ? yield Ni(e, yield _.getFileHandle(r), i, [...n, r]): "directory" === t.kind && (yield Ni(e, yield _.getDirectoryHandle(r), i, [...n, r]))
                                }
                            } catch (s) {
                                a = {
                                    error: s
                                }
                            } finally {
                                try {
                                    c || o || !(h = d.return) || (yield h.call(d))
                                } finally {
                                    if (a) throw a.error
                                }
                            }
                        }
                    }))
                }

                function Ui() {
                    return "https:" === window.location.protocol || ["localhost", "127.0.0.1", "[::1]"].includes(window.location.hostname) ? new Ei("The browser doesn't support the File System Access API") : new Ei("The File System Access API requires HTTPS except localhost")
                }
                class zi {
                    constructor(e, t, i, s = !1) {
                        this.closed = !1, this.fileName = e, this.localName = t, this.writer = i, this.dir = s
                    }
                    getFileName() {
                        return this.fileName
                    }
                    getLocalName() {
                        return this.localName
                    }
                    isDir() {
                        return this.dir
                    }
                    writeFile(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.writer.write(e)
                        }))
                    }
                    closeFile() {
                        this.closed || (this.writer.close(), this.writer = null, this.closed = !0)
                    }
                    deleteFile() {
                        return s(this, void 0, void 0, (function*() {
                            return ""
                        }))
                    }
                }

                function Wi(e, t) {
                    var i, n, o, a;
                    return s(this, void 0, void 0, (function*() {
                        const s = new Set;
                        try {
                            for (var h, l = !0, c = r(e.values()); h = yield c.next(), !(i = h.done); l = !0) {
                                a = h.value, l = !1;
                                const e = a;
                                s.add(e.name)
                            }
                        } catch (s) {
                            n = {
                                error: s
                            }
                        } finally {
                            try {
                                l || i || !(o = c.return) || (yield o.call(c))
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        if (!s.has(t)) return t;
                        for (let e = 0; e < 1e3; e++) {
                            const i = `${t}.${e}`;
                            if (!s.has(i)) return i
                        }
                    }))
                }

                function $i(e, t) {
                    return s(this, void 0, void 0, (function*() {
                        try {
                            const i = yield e.getFileHandle(t[t.length - 1], {
                                create: !0
                            });
                            return yield i.createWritable()
                        } catch (e) {
                            if ("NoModificationAllowedError" === e.name) throw new Ei(`No permission to write: ${t.join("/")}`);
                            if ("TypeMismatchError" === e.name) throw new Ei(`Is a directory: ${t.join("/")}`);
                            throw new Ei(`Write ${t.join("/")} error: ${e.toString()}`)
                        }
                    }))
                }

                function Gi(e, t) {
                    return s(this, void 0, void 0, (function*() {
                        try {
                            return yield e.getDirectoryHandle(t[t.length - 1], {
                                create: !0
                            })
                        } catch (e) {
                            if ("InvalidStateError" === e.name) throw new Ei(`No permission to create: ${t.join("/")}`);
                            if ("TypeMismatchError" === e.name) throw new Ei(`Not a directory: ${t.join("/")}`);
                            throw new Ei(`Create ${t.join("/")} error: ${e.toString()}`)
                        }
                    }))
                }

                function ji(e, t, i, r) {
                    return s(this, void 0, void 0, (function*() {
                        const n = e.handle;
                        if (!i) return yield function(e, t, i) {
                            return s(this, void 0, void 0, (function*() {
                                const s = i ? t : yield Wi(e, t), r = yield $i(e, [e.name, s]);
                                return new zi(t, s, r)
                            }))
                        }(n, t, r);
                        const o = JSON.parse(t);
                        if (!o.hasOwnProperty("path_name") || !o.hasOwnProperty("path_id") || !o.hasOwnProperty("is_dir") || o.path_name.length < 1) throw new Ei(`Invalid name: ${t}`);
                        let a;
                        t = o.path_name[o.path_name.length - 1], r ? a = o.path_name[0] : e.maps.has(o.path_id) ? a = e.maps.get(o.path_id) : (a = yield Wi(n, o.path_name[0]), e.maps.set(o.path_id, a));
                        let h = n;
                        const l = [n.name, a];
                        if (o.path_name.length > 1) {
                            h = yield Gi(h, l);
                            for (let e = 1; e < o.path_name.length - 1; e++) l.push(o.path_name[e]), h = yield Gi(h, l);
                            l.push(t)
                        }
                        if (!0 === o.is_dir) return yield Gi(h, l), new zi(t, a, null, !0);
                        const c = yield $i(h, l);
                        return new zi(t, a, c)
                    }))
                }
                class qi {
                    constructor() {
                        this._dataLength = 0, this._bufferLength = 0, this._state = new Int32Array(4), this._buffer = new ArrayBuffer(68), this._buffer8 = new Uint8Array(this._buffer, 0, 68), this._buffer32 = new Uint32Array(this._buffer, 0, 17), this.start()
                    }
                    static hashStr(e, t = !1) {
                        return this.onePassHasher.start().appendStr(e).end(t)
                    }
                    static hashAsciiStr(e, t = !1) {
                        return this.onePassHasher.start().appendAsciiStr(e).end(t)
                    }
                    static _hex(e) {
                        const t = qi.hexChars,
                            i = qi.hexOut;
                        let s, r, n, o;
                        for (o = 0; o < 4; o += 1)
                            for (r = 8 * o, s = e[o], n = 0; n < 8; n += 2) i[r + 1 + n] = t.charAt(15 & s), s >>>= 4, i[r + 0 + n] = t.charAt(15 & s), s >>>= 4;
                        return i.join("")
                    }
                    static _md5cycle(e, t) {
                        let i = e[0],
                            s = e[1],
                            r = e[2],
                            n = e[3];
                        i += (s & r | ~s & n) + t[0] - 680876936 | 0, i = (i << 7 | i >>> 25) + s | 0, n += (i & s | ~i & r) + t[1] - 389564586 | 0, n = (n << 12 | n >>> 20) + i | 0, r += (n & i | ~n & s) + t[2] + 606105819 | 0, r = (r << 17 | r >>> 15) + n | 0, s += (r & n | ~r & i) + t[3] - 1044525330 | 0, s = (s << 22 | s >>> 10) + r | 0, i += (s & r | ~s & n) + t[4] - 176418897 | 0, i = (i << 7 | i >>> 25) + s | 0, n += (i & s | ~i & r) + t[5] + 1200080426 | 0, n = (n << 12 | n >>> 20) + i | 0, r += (n & i | ~n & s) + t[6] - 1473231341 | 0, r = (r << 17 | r >>> 15) + n | 0, s += (r & n | ~r & i) + t[7] - 45705983 | 0, s = (s << 22 | s >>> 10) + r | 0, i += (s & r | ~s & n) + t[8] + 1770035416 | 0, i = (i << 7 | i >>> 25) + s | 0, n += (i & s | ~i & r) + t[9] - 1958414417 | 0, n = (n << 12 | n >>> 20) + i | 0, r += (n & i | ~n & s) + t[10] - 42063 | 0, r = (r << 17 | r >>> 15) + n | 0, s += (r & n | ~r & i) + t[11] - 1990404162 | 0, s = (s << 22 | s >>> 10) + r | 0, i += (s & r | ~s & n) + t[12] + 1804603682 | 0, i = (i << 7 | i >>> 25) + s | 0, n += (i & s | ~i & r) + t[13] - 40341101 | 0, n = (n << 12 | n >>> 20) + i | 0, r += (n & i | ~n & s) + t[14] - 1502002290 | 0, r = (r << 17 | r >>> 15) + n | 0, s += (r & n | ~r & i) + t[15] + 1236535329 | 0, s = (s << 22 | s >>> 10) + r | 0, i += (s & n | r & ~n) + t[1] - 165796510 | 0, i = (i << 5 | i >>> 27) + s | 0, n += (i & r | s & ~r) + t[6] - 1069501632 | 0, n = (n << 9 | n >>> 23) + i | 0, r += (n & s | i & ~s) + t[11] + 643717713 | 0, r = (r << 14 | r >>> 18) + n | 0, s += (r & i | n & ~i) + t[0] - 373897302 | 0, s = (s << 20 | s >>> 12) + r | 0, i += (s & n | r & ~n) + t[5] - 701558691 | 0, i = (i << 5 | i >>> 27) + s | 0, n += (i & r | s & ~r) + t[10] + 38016083 | 0, n = (n << 9 | n >>> 23) + i | 0, r += (n & s | i & ~s) + t[15] - 660478335 | 0, r = (r << 14 | r >>> 18) + n | 0, s += (r & i | n & ~i) + t[4] - 405537848 | 0, s = (s << 20 | s >>> 12) + r | 0, i += (s & n | r & ~n) + t[9] + 568446438 | 0, i = (i << 5 | i >>> 27) + s | 0, n += (i & r | s & ~r) + t[14] - 1019803690 | 0, n = (n << 9 | n >>> 23) + i | 0, r += (n & s | i & ~s) + t[3] - 187363961 | 0, r = (r << 14 | r >>> 18) + n | 0, s += (r & i | n & ~i) + t[8] + 1163531501 | 0, s = (s << 20 | s >>> 12) + r | 0, i += (s & n | r & ~n) + t[13] - 1444681467 | 0, i = (i << 5 | i >>> 27) + s | 0, n += (i & r | s & ~r) + t[2] - 51403784 | 0, n = (n << 9 | n >>> 23) + i | 0, r += (n & s | i & ~s) + t[7] + 1735328473 | 0, r = (r << 14 | r >>> 18) + n | 0, s += (r & i | n & ~i) + t[12] - 1926607734 | 0, s = (s << 20 | s >>> 12) + r | 0, i += (s ^ r ^ n) + t[5] - 378558 | 0, i = (i << 4 | i >>> 28) + s | 0, n += (i ^ s ^ r) + t[8] - 2022574463 | 0, n = (n << 11 | n >>> 21) + i | 0, r += (n ^ i ^ s) + t[11] + 1839030562 | 0, r = (r << 16 | r >>> 16) + n | 0, s += (r ^ n ^ i) + t[14] - 35309556 | 0, s = (s << 23 | s >>> 9) + r | 0, i += (s ^ r ^ n) + t[1] - 1530992060 | 0, i = (i << 4 | i >>> 28) + s | 0, n += (i ^ s ^ r) + t[4] + 1272893353 | 0, n = (n << 11 | n >>> 21) + i | 0, r += (n ^ i ^ s) + t[7] - 155497632 | 0, r = (r << 16 | r >>> 16) + n | 0, s += (r ^ n ^ i) + t[10] - 1094730640 | 0, s = (s << 23 | s >>> 9) + r | 0, i += (s ^ r ^ n) + t[13] + 681279174 | 0, i = (i << 4 | i >>> 28) + s | 0, n += (i ^ s ^ r) + t[0] - 358537222 | 0, n = (n << 11 | n >>> 21) + i | 0, r += (n ^ i ^ s) + t[3] - 722521979 | 0, r = (r << 16 | r >>> 16) + n | 0, s += (r ^ n ^ i) + t[6] + 76029189 | 0, s = (s << 23 | s >>> 9) + r | 0, i += (s ^ r ^ n) + t[9] - 640364487 | 0, i = (i << 4 | i >>> 28) + s | 0, n += (i ^ s ^ r) + t[12] - 421815835 | 0, n = (n << 11 | n >>> 21) + i | 0, r += (n ^ i ^ s) + t[15] + 530742520 | 0, r = (r << 16 | r >>> 16) + n | 0, s += (r ^ n ^ i) + t[2] - 995338651 | 0, s = (s << 23 | s >>> 9) + r | 0, i += (r ^ (s | ~n)) + t[0] - 198630844 | 0, i = (i << 6 | i >>> 26) + s | 0, n += (s ^ (i | ~r)) + t[7] + 1126891415 | 0, n = (n << 10 | n >>> 22) + i | 0, r += (i ^ (n | ~s)) + t[14] - 1416354905 | 0, r = (r << 15 | r >>> 17) + n | 0, s += (n ^ (r | ~i)) + t[5] - 57434055 | 0, s = (s << 21 | s >>> 11) + r | 0, i += (r ^ (s | ~n)) + t[12] + 1700485571 | 0, i = (i << 6 | i >>> 26) + s | 0, n += (s ^ (i | ~r)) + t[3] - 1894986606 | 0, n = (n << 10 | n >>> 22) + i | 0, r += (i ^ (n | ~s)) + t[10] - 1051523 | 0, r = (r << 15 | r >>> 17) + n | 0, s += (n ^ (r | ~i)) + t[1] - 2054922799 | 0, s = (s << 21 | s >>> 11) + r | 0, i += (r ^ (s | ~n)) + t[8] + 1873313359 | 0, i = (i << 6 | i >>> 26) + s | 0, n += (s ^ (i | ~r)) + t[15] - 30611744 | 0, n = (n << 10 | n >>> 22) + i | 0, r += (i ^ (n | ~s)) + t[6] - 1560198380 | 0, r = (r << 15 | r >>> 17) + n | 0, s += (n ^ (r | ~i)) + t[13] + 1309151649 | 0, s = (s << 21 | s >>> 11) + r | 0, i += (r ^ (s | ~n)) + t[4] - 145523070 | 0, i = (i << 6 | i >>> 26) + s | 0, n += (s ^ (i | ~r)) + t[11] - 1120210379 | 0, n = (n << 10 | n >>> 22) + i | 0, r += (i ^ (n | ~s)) + t[2] + 718787259 | 0, r = (r << 15 | r >>> 17) + n | 0, s += (n ^ (r | ~i)) + t[9] - 343485551 | 0, s = (s << 21 | s >>> 11) + r | 0, e[0] = i + e[0] | 0, e[1] = s + e[1] | 0, e[2] = r + e[2] | 0, e[3] = n + e[3] | 0
                    }
                    start() {
                        return this._dataLength = 0, this._bufferLength = 0, this._state.set(qi.stateIdentity), this
                    }
                    appendStr(e) {
                        const t = this._buffer8,
                            i = this._buffer32;
                        let s, r, n = this._bufferLength;
                        for (r = 0; r < e.length; r += 1) {
                            if (s = e.charCodeAt(r), s < 128) t[n++] = s;
                            else if (s < 2048) t[n++] = 192 + (s >>> 6), t[n++] = 63 & s | 128;
                            else if (s < 55296 || s > 56319) t[n++] = 224 + (s >>> 12), t[n++] = s >>> 6 & 63 | 128, t[n++] = 63 & s | 128;
                            else {
                                if (s = 1024 * (s - 55296) + (e.charCodeAt(++r) - 56320) + 65536, s > 1114111) throw new Error("Unicode standard supports code points up to U+10FFFF");
                                t[n++] = 240 + (s >>> 18), t[n++] = s >>> 12 & 63 | 128, t[n++] = s >>> 6 & 63 | 128, t[n++] = 63 & s | 128
                            }
                            n >= 64 && (this._dataLength += 64, qi._md5cycle(this._state, i), n -= 64, i[0] = i[16])
                        }
                        return this._bufferLength = n, this
                    }
                    appendAsciiStr(e) {
                        const t = this._buffer8,
                            i = this._buffer32;
                        let s, r = this._bufferLength,
                            n = 0;
                        for (;;) {
                            for (s = Math.min(e.length - n, 64 - r); s--;) t[r++] = e.charCodeAt(n++);
                            if (r < 64) break;
                            this._dataLength += 64, qi._md5cycle(this._state, i), r = 0
                        }
                        return this._bufferLength = r, this
                    }
                    appendByteArray(e) {
                        const t = this._buffer8,
                            i = this._buffer32;
                        let s, r = this._bufferLength,
                            n = 0;
                        for (;;) {
                            for (s = Math.min(e.length - n, 64 - r); s--;) t[r++] = e[n++];
                            if (r < 64) break;
                            this._dataLength += 64, qi._md5cycle(this._state, i), r = 0
                        }
                        return this._bufferLength = r, this
                    }
                    getState() {
                        const e = this._state;
                        return {
                            buffer: String.fromCharCode.apply(null, Array.from(this._buffer8)),
                            buflen: this._bufferLength,
                            length: this._dataLength,
                            state: [e[0], e[1], e[2], e[3]]
                        }
                    }
                    setState(e) {
                        const t = e.buffer,
                            i = e.state,
                            s = this._state;
                        let r;
                        for (this._dataLength = e.length, this._bufferLength = e.buflen, s[0] = i[0], s[1] = i[1], s[2] = i[2], s[3] = i[3], r = 0; r < t.length; r += 1) this._buffer8[r] = t.charCodeAt(r)
                    }
                    end(e = !1) {
                        const t = this._bufferLength,
                            i = this._buffer8,
                            s = this._buffer32,
                            r = 1 + (t >> 2);
                        this._dataLength += t;
                        const n = 8 * this._dataLength;
                        if (i[t] = 128, i[t + 1] = i[t + 2] = i[t + 3] = 0, s.set(qi.buffer32Identity.subarray(r), r), t > 55 && (qi._md5cycle(this._state, s), s.set(qi.buffer32Identity)), n <= 4294967295) s[14] = n;
                        else {
                            const e = n.toString(16).match(/(.*?)(.{0,8})$/);
                            if (null === e) return;
                            const t = parseInt(e[2], 16),
                                i = parseInt(e[1], 16) || 0;
                            s[14] = t, s[15] = i
                        }
                        return qi._md5cycle(this._state, s), e ? this._state : qi._hex(this._state)
                    }
                }
                if (qi.stateIdentity = new Int32Array([1732584193, -271733879, -1732584194, 271733878]), qi.buffer32Identity = new Int32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), qi.hexChars = "0123456789abcdef", qi.hexOut = [], qi.onePassHasher = new qi, "5d41402abc4b2a76b9719d911017c592" !== qi.hashStr("hello")) throw new Error("Md5 self test failed.");

                function Ji(e) {
                    return 97 <= e && e <= 122 || 65 <= e && e <= 90 || 48 <= e && e <= 57 || 35 == e || 58 == e || 43 == e || 47 == e || 61 == e
                }
                class Ki {
                    constructor() {
                        this.bufArray = [], this.resolve = null, this.reject = null, this.bufHead = 0, this.bufTail = 0, this.nextIdx = 0, this.nextBuf = null, this.arrBuf = new ArrayBuffer(128)
                    }
                    addBuffer(e) {
                        this.bufArray[this.bufTail++] = e, this.resolve && (this.resolve(), this.resolve = null, this.reject = null)
                    }
                    stopBuffer() {
                        this.reject && (this.reject(new Ei("Stopped")), this.reject = null, this.resolve = null)
                    }
                    drainBuffer() {
                        this.bufArray = [], this.bufHead = 0, this.bufTail = 0
                    }
                    toUint8Array(e) {
                        return s(this, void 0, void 0, (function*() {
                            if ("string" == typeof e) return Ci(e);
                            if (e instanceof ArrayBuffer) return new Uint8Array(e);
                            if (e instanceof Uint8Array) return e;
                            if (e instanceof Blob) {
                                const t = yield e.arrayBuffer();
                                return new Uint8Array(t)
                            }
                            throw new Ei("The buffer type is not supported", null, !0)
                        }))
                    }
                    nextBuffer() {
                        return s(this, void 0, void 0, (function*() {
                            if (this.nextBuf && this.nextIdx < this.nextBuf.length) return this.nextBuf.subarray(this.nextIdx);
                            this.bufHead === this.bufTail && (0 !== this.bufHead && (this.bufHead = 0, this.bufTail = 0), yield new Promise(((e, t) => {
                                this.resolve = e, this.reject = t
                            })));
                            const e = this.bufArray[this.bufHead];
                            return this.bufArray[this.bufHead] = null, this.bufHead++, this.nextBuf = yield this.toUint8Array(e), this.nextIdx = 0, this.nextBuf
                        }))
                    }
                    growBuffer(e, t, i) {
                        const s = Math.max(2 * e.length, t + i);
                        this.arrBuf = new ArrayBuffer(s);
                        const r = new Uint8Array(this.arrBuf);
                        return r.set(e.subarray(0, t)), r
                    }
                    appendBuffer(e, t, i) {
                        const s = e.length >= t + i.length ? e : this.growBuffer(e, t, i.length);
                        return s.set(i, t), s
                    }
                    readLine() {
                        return s(this, void 0, void 0, (function*() {
                            let e = new Uint8Array(this.arrBuf),
                                t = 0;
                            for (;;) {
                                let i = yield this.nextBuffer();
                                const s = i.indexOf(10);
                                if (s >= 0 ? (this.nextIdx += s + 1, i = i.subarray(0, s)) : this.nextIdx += i.length, i.includes(3)) throw new Ei("Interrupted");
                                if (e = this.appendBuffer(e, t, i), t += i.length, s >= 0) return wi(e.subarray(0, t))
                            }
                        }))
                    }
                    readBinary(e) {
                        return s(this, void 0, void 0, (function*() {
                            this.arrBuf.byteLength < e && (this.arrBuf = new ArrayBuffer(e));
                            const t = new Uint8Array(this.arrBuf, 0, e);
                            let i = 0;
                            for (; i < e;) {
                                const s = e - i;
                                let r = yield this.nextBuffer();
                                r.length > s ? (this.nextIdx += s, r = r.subarray(0, s)) : this.nextIdx += r.length, t.set(r, i), i += r.length
                            }
                            return t
                        }))
                    }
                    readLineOnWindows() {
                        return s(this, void 0, void 0, (function*() {
                            let e = new Uint8Array(this.arrBuf),
                                t = 27,
                                i = !1,
                                s = !1,
                                r = !1,
                                n = !1,
                                o = !1,
                                a = 0;
                            for (;;) {
                                let h = yield this.nextBuffer();
                                const l = h.indexOf(33);
                                l >= 0 ? (this.nextIdx += l + 1, h = h.subarray(0, l)) : this.nextIdx += h.length;
                                for (let l = 0; l < h.length; l++) {
                                    const c = h[l];
                                    if (3 == c) throw new Ei("Interrupted");
                                    if (10 == c && (s = !0), i) xi(c) && (i = !1, 72 == c && t >= 48 && t <= 57 && (r = !0)), 91 == t && 72 == c && (n = !0), t = c;
                                    else if (27 == c) i = !0, t = c;
                                    else if (Ji(c)) {
                                        if (r && (r = !1, s && a > 0 && (c == e[a - 1] || o))) {
                                            e[a - 1] = c;
                                            continue
                                        }
                                        a >= e.length && (e = this.growBuffer(e, a, h.length)), e[a++] = c, o = n, n = !1, s = !1
                                    }
                                }
                                if (l >= 0 && a > 0 && !i) return wi(e.subarray(0, a))
                            }
                        }))
                    }
                }

                function Zi(e) {
                    const t = [];
                    for (let i = 0; i < e.length; i++) t.push([e[i][0].charCodeAt(0), e[i][1].charCodeAt(0), e[i][1].charCodeAt(1)]);
                    return t
                }
                class Vi {
                    constructor(e, t = !1) {
                        this.buffer = new Ki, this.remoteIsWindows = !1, this.lastInputTime = 0, this.openedFiles = [], this.createdFiles = [], this.tmuxOutputJunk = !1, this.cleanTimeoutInMilliseconds = 100, this.transferConfig = {}, this.stopped = !1, this.maxChunkTimeInMilliseconds = 0, this.protocolNewline = "\n", this.writer = e, this.isWindowsShell = t
                    }
                    cleanup() {
                        for (const e of this.openedFiles) e.closeFile()
                    }
                    addReceivedData(e) {
                        this.stopped || this.buffer.addBuffer(e), this.lastInputTime = Date.now()
                    }
                    stopTransferring() {
                        return s(this, void 0, void 0, (function*() {
                            this.cleanTimeoutInMilliseconds = Math.max(2 * this.maxChunkTimeInMilliseconds, 500), this.stopped = !0, this.buffer.stopBuffer()
                        }))
                    }
                    cleanInput(e) {
                        return s(this, void 0, void 0, (function*() {
                            for (this.stopped = !0, this.buffer.drainBuffer(), this.lastInputTime = Date.now();;) {
                                const t = e - (Date.now() - this.lastInputTime);
                                if (t <= 0) return;
                                yield new Promise((e => setTimeout(e, t)))
                            }
                        }))
                    }
                    sendLine(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            this.writer(`#${e}:${t}${this.protocolNewline}`)
                        }))
                    }
                    recvLine(e, t = !1) {
                        return s(this, void 0, void 0, (function*() {
                            if (this.stopped) throw new Ei("Stopped");
                            if (this.isWindowsShell || this.remoteIsWindows) {
                                let t = yield this.buffer.readLineOnWindows();
                                const i = t.lastIndexOf("#" + e + ":");
                                if (i >= 0) t = t.substring(i);
                                else {
                                    const e = t.lastIndexOf("#");
                                    e > 0 && (t = t.substring(e))
                                }
                                return t
                            }
                            let i = yield this.buffer.readLine();
                            if (this.tmuxOutputJunk || t) {
                                if (i.length > 0)
                                    for (;
                                        "\r" === i[i.length - 1];) i = i.substring(0, i.length - 1) + (yield this.buffer.readLine());
                                const t = i.lastIndexOf("#" + e + ":");
                                if (t >= 0) i = i.substring(t);
                                else {
                                    const e = i.lastIndexOf("#");
                                    e > 0 && (i = i.substring(e))
                                }
                                i = function(e) {
                                    for (;;) {
                                        const t = e.indexOf("P=");
                                        if (t < 0) return e;
                                        let i = t + 3;
                                        const s = e.substring(i).indexOf("P=");
                                        if (s < 0) return e.substring(0, t);
                                        i += s + 3;
                                        const r = e.substring(i).indexOf("\\");
                                        if (r < 0) return e.substring(0, t);
                                        i += r + 2, e = e.substring(0, t) + e.substring(i)
                                    }
                                }(i)
                            }
                            return i
                        }))
                    }
                    recvCheck(e, t = !1) {
                        return s(this, void 0, void 0, (function*() {
                            const i = yield this.recvLine(e, t), s = i.indexOf(":");
                            if (s < 1) throw new Ei(yi(i), "colon", !0);
                            const r = i.substring(1, s),
                                n = i.substring(s + 1);
                            if (r != e) throw new Ei(n, r, !0);
                            return n
                        }))
                    }
                    sendInteger(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendLine(e, t.toString())
                        }))
                    }
                    recvInteger(e, t = !1) {
                        return s(this, void 0, void 0, (function*() {
                            const i = yield this.recvCheck(e, t);
                            return Number(i)
                        }))
                    }
                    checkInteger(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield this.recvInteger("SUCC");
                            if (t !== e) throw new Ei(`Integer check [${t}] <> [${e}]`, null, !0)
                        }))
                    }
                    sendString(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendLine(e, yi(t))
                        }))
                    }
                    recvString(e, t = !1) {
                        return s(this, void 0, void 0, (function*() {
                            return wi(Si(yield this.recvCheck(e, t)), "utf8")
                        }))
                    }
                    checkString(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield this.recvString("SUCC");
                            if (t !== e) throw new Ei(`String check [${t}] <> [${e}]`, null, !0)
                        }))
                    }
                    sendBinary(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendLine(e, yi(t))
                        }))
                    }
                    recvBinary(e, t = !1) {
                        return s(this, void 0, void 0, (function*() {
                            return Si(yield this.recvCheck(e, t))
                        }))
                    }
                    checkBinary(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield this.recvBinary("SUCC");
                            if (t.length != e.length) throw new Ei(`Binary length check [${t.length}] <> [${e.length}]`, null, !0);
                            for (let i = 0; i < t.length; i++)
                                if (t[i] != e[i]) throw new Ei(`Binary check [${t[i]}] <> [${e[i]}]`, null, !0)
                        }))
                    }
                    sendData(e, t, i) {
                        return s(this, void 0, void 0, (function*() {
                            if (!t) return void(yield this.sendBinary("DATA", e));
                            const s = function(e, t) {
                                if (!t.length) return e;
                                const i = new Uint8Array(2 * e.length);
                                let s = 0;
                                for (let r = 0; r < e.length; r++) {
                                    let n = -1;
                                    for (let i = 0; i < t.length; i++)
                                        if (e[r] == t[i][0]) {
                                            n = i;
                                            break
                                        } n < 0 ? i[s++] = e[r] : (i[s++] = t[n][1], i[s++] = t[n][2])
                                }
                                return i.subarray(0, s)
                            }(e, i);
                            this.writer(`#DATA:${s.length}\n`), this.writer(s)
                        }))
                    }
                    recvData(e, t, i) {
                        return s(this, void 0, void 0, (function*() {
                            return yield Promise.race([new Promise(((e, t) => setTimeout((() => {
                                this.cleanTimeoutInMilliseconds = 3e3, t(new Ei("Receive data timeout"))
                            }), i))), (() => s(this, void 0, void 0, (function*() {
                                if (!e) return yield this.recvBinary("DATA");
                                const i = yield this.recvInteger("DATA");
                                return function(e, t) {
                                    if (!t.length) return e;
                                    const i = new Uint8Array(e.length);
                                    let s = 0;
                                    for (let r = 0; r < e.length; r++) {
                                        let n = -1;
                                        if (r < e.length - 1)
                                            for (let i = 0; i < t.length; i++)
                                                if (e[r] == t[i][1] && e[r + 1] == t[i][2]) {
                                                    n = i;
                                                    break
                                                } n < 0 ? i[s++] = e[r] : (i[s++] = t[n][0], r++)
                                    }
                                    return i.subarray(0, s)
                                }(yield this.buffer.readBinary(i), t)
                            })))()])
                        }))
                    }
                    sendAction(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            const i = {
                                lang: "js",
                                confirm: e,
                                version: "1.1.5",
                                support_dir: !0
                            };
                            (this.isWindowsShell || t) && (i.binary = !1, i.newline = "!\n"), t && (this.remoteIsWindows = !0, this.protocolNewline = "!\n"), yield this.sendString("ACT", JSON.stringify(i))
                        }))
                    }
                    recvAction() {
                        return s(this, void 0, void 0, (function*() {
                            const e = yield this.recvString("ACT", !0), t = JSON.parse(e);
                            return t.newline && (this.protocolNewline = t.newline), t
                        }))
                    }
                    sendConfig(e, t, i, r) {
                        return s(this, void 0, void 0, (function*() {
                            const s = {
                                lang: "js"
                            };
                            e.quiet && (s.quiet = !0), e.binary && (s.binary = !0, s.escape_chars = t), e.directory && (s.directory = !0), e.bufsize && (s.bufsize = e.bufsize), e.timeout && (s.timeout = e.timeout), e.overwrite && (s.overwrite = !0), 1 == i && (s.tmux_output_junk = !0), r > 0 && (s.tmux_pane_width = r);
                            let n = JSON.stringify(s);
                            n = n.replace(/[\u007F-\uFFFF]/g, (function(e) {
                                return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
                            })), this.transferConfig = s, yield this.sendString("CFG", n)
                        }))
                    }
                    recvConfig() {
                        return s(this, void 0, void 0, (function*() {
                            const e = yield this.recvString("CFG", !0);
                            return this.transferConfig = JSON.parse(e), this.tmuxOutputJunk = !0 === this.transferConfig.tmux_output_junk, this.transferConfig
                        }))
                    }
                    clientExit(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendString("EXIT", e)
                        }))
                    }
                    recvExit() {
                        return s(this, void 0, void 0, (function*() {
                            return this.recvString("EXIT")
                        }))
                    }
                    serverExit(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.cleanInput(500), yield function() {
                                return s(this, void 0, void 0, (function*() {}))
                            }(), this.isWindowsShell ? (e = e.replace(/\n/g, "\r\n"), process.stdout.write("[H[2J[?1049l")) : process.stdout.write("8[0J"), process.stdout.write(e), process.stdout.write("\r\n"), process.stdout.write("[?25h"), this.transferConfig.tmux_output_junk && (yield function() {
                                return s(this, void 0, void 0, (function*() {
                                    const e = require("util").promisify(require("child_process").exec);
                                    yield e("tmux refresh-client")
                                }))
                            }())
                        }))
                    }
                    deleteCreatedFiles() {
                        return s(this, void 0, void 0, (function*() {
                            const e = [];
                            for (const t of this.createdFiles) {
                                const i = yield t.deleteFile();
                                i && e.push(i)
                            }
                            return e
                        }))
                    }
                    clientError(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.cleanInput(this.cleanTimeoutInMilliseconds);
                            const t = Ei.getErrorMessage(e);
                            let i = !0;
                            if (e instanceof Ei) {
                                if (i = e.isTraceBack(), e.isRemoteExit()) return;
                                if (e.isRemoteFail()) return void(i && console.log(t))
                            }
                            yield this.sendString(i ? "FAIL" : "fail", t), i && console.log(t)
                        }))
                    }
                    serverError(e) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.cleanInput(this.cleanTimeoutInMilliseconds);
                            const t = Ei.getErrorMessage(e);
                            let i = !0;
                            if (e instanceof Ei) {
                                if (e.isStopAndDelete()) {
                                    const t = yield this.deleteCreatedFiles();
                                    if (t && t.length) return void(yield this.serverExit([e.message + ":"].concat(t).join("\r\n- ")))
                                }
                                if (i = e.isTraceBack(), e.isRemoteExit() || e.isRemoteFail()) return void(yield this.serverExit(t))
                            }
                            yield this.sendString(i ? "FAIL" : "fail", t), yield this.serverExit(t)
                        }))
                    }
                    sendFileNum(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendInteger("NUM", e), yield this.checkInteger(e), t && t.onNum(e)
                        }))
                    }
                    sendFileName(e, t, i) {
                        return s(this, void 0, void 0, (function*() {
                            const s = e.getRelPath(),
                                r = s[s.length - 1];
                            if (t) {
                                const t = {
                                    path_id: e.getPathId(),
                                    path_name: s,
                                    is_dir: e.isDir()
                                };
                                yield this.sendString("NAME", JSON.stringify(t))
                            } else yield this.sendString("NAME", r);
                            const n = yield this.recvString("SUCC");
                            return i && i.onName(r), n
                        }))
                    }
                    sendFileSize(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendInteger("SIZE", e), yield this.checkInteger(e), t && t.onSize(e)
                        }))
                    }
                    sendFileData(e, t, i, r, n, o) {
                        return s(this, void 0, void 0, (function*() {
                            let s = 0;
                            o && o.onStep(s);
                            let a = 1024,
                                h = new ArrayBuffer(a);
                            const l = new qi;
                            for (; s < t;) {
                                const t = Date.now(),
                                    c = yield e.readFile(h);
                                yield this.sendData(c, i, r), l.appendByteArray(c), yield this.checkInteger(c.length), s += c.length, o && o.onStep(s);
                                const d = Date.now() - t;
                                c.length == a && d < 500 && a < n ? (a = Math.min(2 * a, n), h = new ArrayBuffer(a)) : d >= 2e3 && a > 1024 && (a = 1024, h = new ArrayBuffer(a)), d > this.maxChunkTimeInMilliseconds && (this.maxChunkTimeInMilliseconds = d)
                            }
                            return new Uint8Array(l.end(!0).buffer)
                        }))
                    }
                    sendFileMD5(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            yield this.sendBinary("MD5", e), yield this.checkBinary(e), t && t.onDone()
                        }))
                    }
                    sendFiles(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            this.openedFiles.push(...e);
                            const i = !0 === this.transferConfig.binary,
                                s = !0 === this.transferConfig.directory,
                                r = this.transferConfig.bufsize || 10485760,
                                n = this.transferConfig.escape_chars ? Zi(this.transferConfig.escape_chars) : [];
                            yield this.sendFileNum(e.length, t);
                            const o = [];
                            for (const a of e) {
                                const e = yield this.sendFileName(a, s, t);
                                if (o.includes(e) || o.push(e), a.isDir()) continue;
                                const h = a.getSize();
                                yield this.sendFileSize(h, t);
                                const l = yield this.sendFileData(a, h, i, n, r, t);
                                a.closeFile(), yield this.sendFileMD5(l, t)
                            }
                            return o
                        }))
                    }
                    recvFileNum(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield this.recvInteger("NUM");
                            return yield this.sendInteger("SUCC", t), e && e.onNum(t), t
                        }))
                    }
                    recvFileName(e, t, i, r, n) {
                        return s(this, void 0, void 0, (function*() {
                            const s = yield this.recvString("NAME"), o = yield t(e, s, i, r);
                            return this.createdFiles.push(o), yield this.sendString("SUCC", o.getLocalName()), n && n.onName(o.getFileName()), o
                        }))
                    }
                    recvFileSize(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield this.recvInteger("SIZE");
                            return yield this.sendInteger("SUCC", t), e && e.onSize(t), t
                        }))
                    }
                    recvFileData(e, t, i, r, n, o) {
                        return s(this, void 0, void 0, (function*() {
                            let s = 0;
                            o && o.onStep(s);
                            const a = new qi;
                            for (; s < t;) {
                                const t = Date.now(),
                                    h = yield this.recvData(i, r, n);
                                yield e.writeFile(h), s += h.length, o && o.onStep(s), yield this.sendInteger("SUCC", h.length), a.appendByteArray(h);
                                const l = Date.now() - t;
                                l > this.maxChunkTimeInMilliseconds && (this.maxChunkTimeInMilliseconds = l)
                            }
                            return new Uint8Array(a.end(!0).buffer)
                        }))
                    }
                    recvFileMD5(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            const i = yield this.recvBinary("MD5");
                            if (e.length != i.length) throw new Ei("Check MD5 failed");
                            for (let t = 0; t < e.length; t++)
                                if (e[t] != i[t]) throw new Ei("Check MD5 failed");
                            yield this.sendBinary("SUCC", e), t && t.onDone()
                        }))
                    }
                    recvFiles(e, t, i) {
                        return s(this, void 0, void 0, (function*() {
                            const s = !0 === this.transferConfig.binary,
                                r = !0 === this.transferConfig.directory,
                                n = !0 === this.transferConfig.overwrite,
                                o = this.transferConfig.timeout ? 1e3 * this.transferConfig.timeout : 1e5,
                                a = this.transferConfig.escape_chars ? Zi(this.transferConfig.escape_chars) : [],
                                h = yield this.recvFileNum(i), l = [];
                            for (let c = 0; c < h; c++) {
                                const h = yield this.recvFileName(e, t, r, n, i);
                                if (l.includes(h.getLocalName()) || l.push(h.getLocalName()), h.isDir()) continue;
                                this.openedFiles.push(h);
                                const c = yield this.recvFileSize(i), d = yield this.recvFileData(h, c, s, a, o, i);
                                h.closeFile(), yield this.recvFileMD5(d, i)
                            }
                            return l
                        }))
                    }
                }

                function Yi(e, t) {
                    t -= 3;
                    let i = 0,
                        s = "";
                    for (let r = 0; r < e.length; r++) {
                        if (e.charCodeAt(r) >= 19968 && e.charCodeAt(r) <= 40869) {
                            if (i + 2 > t) return {
                                sub: s + "...",
                                len: i + 3
                            };
                            i += 2
                        } else {
                            if (i + 1 > t) return {
                                sub: s + "...",
                                len: i + 3
                            };
                            i += 1
                        }
                        s += e[r]
                    }
                    return {
                        sub: s + "...",
                        len: i + 3
                    }
                }

                function Xi(e) {
                    let t = "B";
                    do {
                        if (e < 1024) break;
                        if (t = "KB", (e /= 1024) < 1024) break;
                        if (t = "MB", (e /= 1024) < 1024) break;
                        if (t = "GB", (e /= 1024) < 1024) break;
                        e /= 1024, t = "TB"
                    } while (0);
                    return e >= 100 ? `${e.toFixed(0)} ${t}` : e >= 10 ? `${e.toFixed(1)} ${t}` : `${e.toFixed(2)} ${t}`
                }
                class es {
                    constructor(e, t, i = void 0) {
                        this.lastUpdateTime = 0, this.firstWrite = !0, this.speedCnt = 0, this.speedIdx = 0, this.timeArray = new Array(30), this.stepArray = new Array(30), this.writer = e, this.tmuxPaneColumns = i || 0, this.columns = this.tmuxPaneColumns > 1 ? this.tmuxPaneColumns - 1 : t
                    }
                    setTerminalColumns(e) {
                        this.columns = e, this.tmuxPaneColumns > 0 && (this.tmuxPaneColumns = 0)
                    }
                    onNum(e) {
                        this.fileCount = e, this.fileIdx = 0
                    }
                    onName(e) {
                        this.fileName = e, this.fileIdx += 1, this.startTime = Date.now(), this.timeArray[0] = this.startTime, this.stepArray[0] = 0, this.speedCnt = 1, this.speedIdx = 1, this.fileStep = -1
                    }
                    onSize(e) {
                        this.fileSize = e
                    }
                    onStep(e) {
                        e <= this.fileStep || (this.fileStep = e, this.showProgress())
                    }
                    hideCursor() {
                        this.writer("[?25l")
                    }
                    showCursor() {
                        this.writer("[?25h")
                    }
                    showProgress() {
                        const e = Date.now();
                        if (e - this.lastUpdateTime < 200) return;
                        this.lastUpdateTime = e;
                        let t = "100%";
                        0 != this.fileSize && (t = Math.round(100 * this.fileStep / this.fileSize).toString() + "%");
                        const i = Xi(this.fileStep),
                            s = this.getSpeed(e);
                        let r = "--- B/s",
                            n = "--- ETA";
                        s > 0 && (r = Xi(s) + "/s", n = function(e) {
                            let t = "";
                            e >= 3600 && (t += Math.floor(e / 3600).toString() + ":", e %= 3600);
                            const i = Math.floor(e / 60);
                            t += i >= 10 ? i.toString() : "0" + i.toString(), t += ":";
                            const s = Math.round(e % 60);
                            return t += s >= 10 ? s.toString() : "0" + s.toString(), t
                        }(Math.round((this.fileSize - this.fileStep) / s)) + " ETA");
                        const o = this.getProgressText(t, i, r, n);
                        if (this.firstWrite) return this.firstWrite = !1, void this.writer(o);
                        this.tmuxPaneColumns > 0 ? this.writer(`[${this.columns}D${o}`) : this.writer(`\r${o}`)
                    }
                    getSpeed(e) {
                        let t;
                        return this.speedCnt <= 30 ? (this.speedCnt++, t = 1e3 * (this.fileStep - this.stepArray[0]) / (e - this.timeArray[0])) : t = 1e3 * (this.fileStep - this.stepArray[this.speedIdx]) / (e - this.timeArray[this.speedIdx]), this.timeArray[this.speedIdx] = e, this.stepArray[this.speedIdx] = this.fileStep, this.speedIdx++, this.speedIdx >= 30 && (this.speedIdx %= 30), isFinite(t) ? t : -1
                    }
                    getProgressText(e, t, i, s) {
                        const r = 24;
                        let n = this.fileCount > 1 ? `(${this.fileIdx}/${this.fileCount}) ${this.fileName}` : this.fileName,
                            o = n.replace(/[\u4e00-\u9fa5]/g, "**").length,
                            a = ` ${e} | ${t} | ${i} | ${s}`;
                        do {
                            if (this.columns - o - a.length >= r) break;
                            if (o > 50 && ({
                                    sub: n,
                                    len: o
                                } = Yi(n, 50)), this.columns - o - a.length >= r) break;
                            if (o > 40 && ({
                                    sub: n,
                                    len: o
                                } = Yi(n, 40)), this.columns - o - a.length >= r) break;
                            if (a = ` ${e} | ${i} | ${s}`, this.columns - o - a.length >= r) break;
                            if (o > 30 && ({
                                    sub: n,
                                    len: o
                                } = Yi(n, 30)), this.columns - o - a.length >= r) break;
                            if (a = ` ${e} | ${s}`, this.columns - o - a.length >= r) break;
                            if (a = ` ${e}`, this.columns - o - a.length >= r) break;
                            if (o > 20 && ({
                                    sub: n,
                                    len: o
                                } = Yi(n, 20)), this.columns - o - a.length >= r) break;
                            n = "", o = 0
                        } while (0);
                        let h = this.columns - a.length;
                        return o > 0 && (h -= o + 1, n += " "), (n + this.getProgressBar(h) + a).trim()
                    }
                    getProgressBar(e) {
                        if (e < 12) return "";
                        const t = e - 2;
                        let i = t;
                        return 0 != this.fileSize && (i = Math.round(t * this.fileStep / this.fileSize)), "[[36m" + "".repeat(i) + "".repeat(t - i) + "[0m]"
                    }
                    onDone() {
                        0 != this.fileSize && (this.fileStep = this.fileSize, this.lastUpdateTime = 0, this.showProgress())
                    }
                }

                function ts(e, t, i, r) {
                    return s(this, void 0, void 0, (function*() {
                        t.isFile ? yield new Promise((s => {
                            t.file((t => {
                                i.push(new Qi(e, r, t, !1)), s()
                            }))
                        })): t.isDirectory && (i.push(new Qi(e, r, null, !0)), yield new Promise((n => {
                            t.createReader().readEntries((t => s(this, void 0, void 0, (function*() {
                                for (const s of t) yield ts(e, s, i, [...r, s.name]);
                                n()
                            }))))
                        })))
                    }))
                }
                const is = "::TRZSZ:TRANSFER:",
                    ss = new RegExp(/::TRZSZ:TRANSFER:([SRD]):(\d+\.\d+\.\d+)(:\d+)?/),
                    rs = new Float64Array(Ci(is).buffer, 0, 2);
                class ns {
                    constructor(e) {
                        if (this.trzszTransfer = null, this.textProgressBar = null, this.uniqueIdMaps = new Map, this.uploadFilesList = null, this.uploadFilesResolve = null, this.uploadFilesReject = null, this.uploadInterrupting = !1, this.uploadSkipTrzCommand = !1, !e) throw new Ei("TrzszOptions is required");
                        if (!e.writeToTerminal) throw new Ei("TrzszOptions.writeToTerminal is required");
                        if (this.writeToTerminal = e.writeToTerminal, !e.sendToServer) throw new Ei("TrzszOptions.sendToServer is required");
                        if (this.sendToServer = e.sendToServer, !Ai && !e.chooseSendFiles) throw new Ei("TrzszOptions.chooseSendFiles is required when having a node runtime environment");
                        if (this.chooseSendFiles = e.chooseSendFiles, !Ai && !e.chooseSaveDirectory) throw new Ei("TrzszOptions.chooseSaveDirectory is required when having a node runtime environment");
                        this.chooseSaveDirectory = e.chooseSaveDirectory, this.terminalColumns = e.terminalColumns || 80, this.isWindowsShell = !!e.isWindowsShell, this.dragInitTimeout = e.dragInitTimeout || 3e3
                    }
                    processServerOutput(e) {
                        if (this.isTransferringFiles()) this.trzszTransfer.addReceivedData(e);
                        else if (!this.uploadInterrupting) {
                            if (this.uploadSkipTrzCommand) {
                                this.uploadSkipTrzCommand = !1;
                                const t = function(e) {
                                    let t;
                                    if ("string" == typeof e) t = Ci(e);
                                    else if (e instanceof ArrayBuffer) t = new Uint8Array(e);
                                    else {
                                        if (!(e instanceof Uint8Array)) return e;
                                        t = e
                                    }
                                    const i = new Uint8Array(t.length);
                                    let s = !1,
                                        r = 0;
                                    for (let e = 0; e < t.length; e++) {
                                        const n = t[e];
                                        s ? xi(n) && (s = !1) : 27 == n ? s = !0 : i[r++] = n
                                    }
                                    for (; r > 0;) {
                                        const e = i[r - 1];
                                        if (13 != e && 10 != e) break;
                                        r--
                                    }
                                    const n = i.subarray(0, r);
                                    return n.length > 100 ? e : String.fromCharCode.apply(null, n)
                                }(e);
                                if ("trz" === t || "trz -d" === t) return void this.writeToTerminal("\r\n")
                            }
                            setTimeout((() => this.detectAndHandleTrzsz(e)), 10), this.writeToTerminal(e)
                        }
                    }
                    processTerminalInput(e) {
                        this.isTransferringFiles() ? "" === e && this.stopTransferringFiles() : this.sendToServer(e)
                    }
                    processBinaryInput(e) {
                        this.isTransferringFiles() || this.sendToServer(Ci(e))
                    }
                    setTerminalColumns(e) {
                        this.terminalColumns = e, null != this.textProgressBar && this.textProgressBar.setTerminalColumns(e)
                    }
                    isTransferringFiles() {
                        return null != this.trzszTransfer
                    }
                    stopTransferringFiles() {
                        this.isTransferringFiles() && this.trzszTransfer.stopTransferring()
                    }
                    uploadFiles(e) {
                        return s(this, void 0, void 0, (function*() {
                            if (this.uploadFilesList || this.isTransferringFiles()) throw new Error("The previous upload has not been completed yet");
                            if (e instanceof DataTransferItemList) this.uploadFilesList = yield function(e) {
                                return s(this, void 0, void 0, (function*() {
                                    const t = [],
                                        i = [];
                                    for (const t of e) i.push(t.webkitGetAsEntry());
                                    for (let e = 0; e < i.length; e++) {
                                        const s = i[e];
                                        s && (yield ts(e, s, t, [s.name]))
                                    }
                                    return t
                                }))
                            }(e);
                            else {
                                if (! function(e, t) {
                                        if (!Array.isArray(e)) return !1;
                                        for (const t of e)
                                            if ("string" != typeof t) return !1;
                                        return !0
                                    }(e) || Ai) throw new Error("The upload items type is not supported");
                                this.uploadFilesList = yield Mi(e, !0)
                            }
                            if (!this.uploadFilesList || !this.uploadFilesList.length) throw this.uploadFilesList = null, new Error("No files to upload");
                            let t = !1;
                            for (const e of this.uploadFilesList)
                                if (e.isDir() || e.getRelPath().length > 1) {
                                    t = !0;
                                    break
                                } return this.uploadInterrupting = !0, this.sendToServer(""), yield new Promise((e => setTimeout(e, 200))), this.uploadInterrupting = !1, this.uploadSkipTrzCommand = !0, this.sendToServer(t ? "trz -d\r" : "trz\r"), setTimeout((() => {
                                this.uploadFilesList && (this.uploadFilesList = null, this.uploadFilesResolve = null, this.uploadFilesReject && (this.uploadFilesReject("Upload does not start"), this.uploadFilesReject = null))
                            }), this.dragInitTimeout), new Promise(((e, t) => {
                                this.uploadFilesResolve = e, this.uploadFilesReject = t
                            }))
                        }))
                    }
                    uniqueIdExists(e) {
                        if (e.length < 8) return !1;
                        if (!this.isWindowsShell && 14 == e.length && e.endsWith("00")) return !1;
                        if (this.uniqueIdMaps.has(e)) return !0;
                        if (this.uniqueIdMaps.size >= 100) {
                            const e = new Map;
                            for (const [t, i] of this.uniqueIdMaps) i >= 50 && e.set(t, i - 50);
                            this.uniqueIdMaps = e
                        }
                        return this.uniqueIdMaps.set(e, this.uniqueIdMaps.size), !1
                    }
                    detectAndHandleTrzsz(e) {
                        return s(this, void 0, void 0, (function*() {
                            const t = yield function(e) {
                                return s(this, void 0, void 0, (function*() {
                                    if ("string" == typeof e) {
                                        const t = e.lastIndexOf(is);
                                        return t < 0 ? null : e.substring(t)
                                    }
                                    let t;
                                    if (e instanceof ArrayBuffer) t = new Uint8Array(e);
                                    else if (e instanceof Uint8Array) t = e;
                                    else {
                                        if (!(e instanceof Blob)) return null;
                                        t = new Uint8Array(yield e.arrayBuffer())
                                    }
                                    if (t.length < 26) return null;
                                    let i = -1,
                                        s = -1;
                                    for (;;) {
                                        if (i = t.indexOf(58, i + 1), i < 0 || t.length - i < 26) return s >= 0 ? wi(t.subarray(s)) : null;
                                        const e = new Float64Array(t.buffer.slice(t.byteOffset + i, t.byteOffset + i + 16));
                                        e[0] == rs[0] && e[1] == rs[1] && (s = i, i += 25)
                                    }
                                }))
                            }(e);
                            if (!t) return;
                            const i = t.match(ss);
                            if (!i) return;
                            const r = i.length > 3 ? i[3] : "";
                            if (this.uniqueIdExists(r)) return;
                            const n = i[1],
                                o = i[2];
                            let a = !1;
                            (":1" == r || 14 == r.length && r.endsWith("10")) && (a = !0);
                            try {
                                this.trzszTransfer = new Vi(this.sendToServer, this.isWindowsShell), "S" === n ? yield this.handleTrzszDownloadFiles(o, a): "R" === n ? yield this.handleTrzszUploadFiles(o, !1, a): "D" === n && (yield this.handleTrzszUploadFiles(o, !0, a)), this.uploadFilesResolve && this.uploadFilesResolve()
                            } catch (e) {
                                yield this.trzszTransfer.clientError(e), this.uploadFilesReject && this.uploadFilesReject(e)
                            } finally {
                                this.uploadFilesResolve = null, this.uploadFilesReject = null, this.trzszTransfer.cleanup(), this.textProgressBar && this.textProgressBar.showCursor(), this.textProgressBar = null, this.trzszTransfer = null
                            }
                        }))
                    }
                    createProgressBar(e, t) {
                        !0 !== e ? (this.textProgressBar = new es(this.writeToTerminal, this.terminalColumns, t), this.textProgressBar.hideCursor()) : this.textProgressBar = null
                    }
                    handleTrzszDownloadFiles(e, t) {
                        return s(this, void 0, void 0, (function*() {
                            let e, i, r;
                            if (Ai) {
                                const n = yield function() {
                                    return s(this, void 0, void 0, (function*() {
                                        if ("function" != typeof window.showDirectoryPicker) throw Ui();
                                        try {
                                            return yield window.showDirectoryPicker({
                                                id: "trzsz_download",
                                                startIn: "downloads",
                                                mode: "readwrite"
                                            })
                                        } catch (e) {
                                            if ("AbortError" === e.name) return;
                                            throw e
                                        }
                                    }))
                                }();
                                if (!n) return void(yield this.trzszTransfer.sendAction(!1, t));
                                e = n.name, i = {
                                    handle: n,
                                    maps: new Map
                                }, r = ji
                            } else {
                                if (e = yield this.chooseSaveDirectory(), !e) return void(yield this.trzszTransfer.sendAction(!1, t));
                                yield function(e) {
                                    return s(this, void 0, void 0, (function*() {
                                        if (!e) return !1;
                                        if (!(yield Ii.accessAsync(e))) throw new Ei(`No such directory: ${e}`);
                                        if (!(yield Ii.statAsync(e)).isDirectory()) throw new Ei(`Not a directory: ${e}`);
                                        if (!(yield Ii.accessAsync(e, Ii.constants.W_OK))) throw new Ei(`No permission to write: ${e}`);
                                        return !0
                                    }))
                                }(e), i = {
                                    path: e,
                                    maps: new Map
                                }, r = Hi
                            }
                            yield this.trzszTransfer.sendAction(!0, t);
                            const n = yield this.trzszTransfer.recvConfig();
                            this.createProgressBar(n.quiet, n.tmux_pane_width);
                            const o = yield this.trzszTransfer.recvFiles(i, r, this.textProgressBar);
                            yield this.trzszTransfer.clientExit(Li(o, e))
                        }))
                    }
                    handleTrzszUploadFiles(e, t, i) {
                        return s(this, void 0, void 0, (function*() {
                            let e;
                            if (this.uploadFilesList) e = this.uploadFilesList, this.uploadFilesList = null;
                            else if (Ai) e = t ? yield function() {
                                return s(this, void 0, void 0, (function*() {
                                    if ("function" != typeof window.showDirectoryPicker) throw Ui();
                                    let e;
                                    try {
                                        e = yield window.showDirectoryPicker({
                                            id: "trzsz_upload",
                                            startIn: "documents"
                                        })
                                    } catch (e) {
                                        if ("AbortError" === e.name) return;
                                        throw e
                                    }
                                    const t = [];
                                    return yield Ni(0, e, t, [e.name]), t
                                }))
                            }(): yield function() {
                                return s(this, void 0, void 0, (function*() {
                                    if ("function" != typeof window.showOpenFilePicker) throw Ui();
                                    let e;
                                    try {
                                        e = yield window.showOpenFilePicker({
                                            id: "trzsz_upload",
                                            startIn: "documents",
                                            multiple: !0
                                        })
                                    } catch (e) {
                                        if ("AbortError" === e.name) return;
                                        throw e
                                    }
                                    if (!e || !e.length) return;
                                    const t = [];
                                    for (const [i, s] of e.entries()) {
                                        const e = yield s.getFile();
                                        t.push(new Qi(i, [e.name], e, !1))
                                    }
                                    return t
                                }))
                            }();
                            else {
                                const i = yield this.chooseSendFiles(t);
                                e = yield Mi(i, t)
                            }
                            if (!e || !e.length) return void(yield this.trzszTransfer.sendAction(!1, i));
                            yield this.trzszTransfer.sendAction(!0, i);
                            const r = yield this.trzszTransfer.recvConfig();
                            !0 === r.overwrite && function(e) {
                                const t = new Set;
                                for (const i of e) {
                                    const e = i.getRelPath().join("/");
                                    if (t.has(e)) throw new Ei(`Duplicate name: ${e}`);
                                    t.add(e)
                                }
                            }(e), this.createProgressBar(r.quiet, r.tmux_pane_width);
                            const n = yield this.trzszTransfer.sendFiles(e, this.textProgressBar);
                            yield this.trzszTransfer.clientExit(Li(n, ""))
                        }))
                    }
                }
                class os {
                    constructor(e, t) {
                        this.disposables = [], this.trzsz = null, this.socket = e, this.options = t || {}, this.socket.binaryType = "arraybuffer"
                    }
                    activate(e) {
                        this.trzsz = new ns({
                            writeToTerminal: this.options.writeToTerminal || (t => {
                                e.write("string" == typeof t ? t : new Uint8Array(t))
                            }),
                            sendToServer: this.options.sendToServer || (e => {
                                1 === this.socket.readyState && this.socket.send(e)
                            }),
                            chooseSendFiles: this.options.chooseSendFiles,
                            chooseSaveDirectory: this.options.chooseSaveDirectory,
                            terminalColumns: e.cols,
                            isWindowsShell: this.options.isWindowsShell,
                            dragInitTimeout: this.options.dragInitTimeout
                        }), this.disposables.push(this.addSocketListener(this.socket, "message", (e => this.trzsz.processServerOutput(e.data)))), this.disposables.push(e.onData((e => this.trzsz.processTerminalInput(e)))), this.disposables.push(e.onBinary((e => this.trzsz.processBinaryInput(e)))), this.disposables.push(e.onResize((e => this.trzsz.setTerminalColumns(e.cols)))), this.disposables.push(this.addSocketListener(this.socket, "close", (() => this.dispose()))), this.disposables.push(this.addSocketListener(this.socket, "error", (() => this.dispose())))
                    }
                    dispose() {
                        for (const e of this.disposables) e.dispose();
                        this.trzsz = null
                    }
                    uploadFiles(e) {
                        return s(this, void 0, void 0, (function*() {
                            if (this.trzsz) return this.trzsz.uploadFiles(e);
                            throw new Error("Addon has not been activated")
                        }))
                    }
                    addSocketListener(e, t, i) {
                        return e.addEventListener(t, i), {
                            dispose: () => {
                                i && e.removeEventListener(t, i)
                            }
                        }
                    }
                }
            }
        },
        t = {};

    function i(s) {
        var r = t[s];
        if (void 0 !== r) return r.exports;
        var n = t[s] = {
            exports: {}
        };
        return e[s].call(n.exports, n, n.exports, i), n.exports
    }
    i.d = (e, t) => {
        for (var s in t) i.o(t, s) && !i.o(e, s) && Object.defineProperty(e, s, {
            enumerable: !0,
            get: t[s]
        })
    }, i.g = function() {
        if ("object" == typeof globalThis) return globalThis;
        try {
            return this || new Function("return this")()
        } catch (e) {
            if ("object" == typeof window) return window
        }
    }(), i.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), i.r = e => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    };
    (() => {
        "use strict";
        i(956);
        const e = i(616),
            t = i(211);
        i(423), (0, e.render)((0, e.h)(t.App, null), document.body)
    })()
})();
//# sourceMappingURL=app.c08ea5ee2370501004dc.js.map
    </script>
</body>

</html>