/*
 * Copyright (c) 2021 SAP SE or an SAP affiliate company and Eclipse Dirigible contributors
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v2.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v20.html
 *
 * SPDX-FileCopyrightText: 2021 SAP SE or an SAP affiliate company and Eclipse Dirigible contributors
 * SPDX-License-Identifier: EPL-2.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("acorn")):"function"==typeof define&&define.amd?define(["exports","acorn"],e):e(((t=t||self).acorn=t.acorn||{},t.acorn.loose={}),t.acorn)}(this,function(t,y){"use strict";var a="âœ–";function u(t){return t.name===a}function s(){}function i(t,e){void 0===e&&(e={}),this.toks=this.constructor.BaseParser.tokenizer(t,e),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:y.tokTypes.eof,start:0,end:0},this.tok.validateRegExpFlags=s,this.tok.validateRegExpPattern=s,this.options.locations&&(e=this.toks.curPosition(),this.tok.loc=new y.SourceLocation(this.toks,e,e)),this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.inAsync=!1,this.inFunction=!1}i.prototype.startNode=function(){return new y.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},i.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},i.prototype.startNodeAt=function(t){return this.options.locations?new y.Node(this.toks,t[0],t[1]):new y.Node(this.toks,t)},i.prototype.finishNode=function(t,e){return t.type=e,t.end=this.last.end,this.options.locations&&(t.loc.end=this.last.loc.end),this.options.ranges&&(t.range[1]=this.last.end),t},i.prototype.dummyNode=function(t){var e=this.startNode();return e.type=t,e.end=e.start,this.options.locations&&(e.loc.end=e.loc.start),this.options.ranges&&(e.range[1]=e.start),this.last={type:y.tokTypes.name,start:e.start,end:e.start,loc:e.loc},e},i.prototype.dummyIdent=function(){var t=this.dummyNode("Identifier");return t.name=a,t},i.prototype.dummyString=function(){var t=this.dummyNode("Literal");return t.value=t.raw=a,t},i.prototype.eat=function(t){return this.tok.type===t&&(this.next(),!0)},i.prototype.isContextual=function(t){return this.tok.type===y.tokTypes.name&&this.tok.value===t},i.prototype.eatContextual=function(t){return this.tok.value===t&&this.eat(y.tokTypes.name)},i.prototype.canInsertSemicolon=function(){return this.tok.type===y.tokTypes.eof||this.tok.type===y.tokTypes.braceR||y.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},i.prototype.semicolon=function(){return this.eat(y.tokTypes.semi)},i.prototype.expect=function(t){if(this.eat(t))return!0;for(var e=1;e<=2;e++)if(this.lookAhead(e).type===t){for(var s=0;s<e;s++)this.next();return!0}},i.prototype.pushCx=function(){this.context.push(this.curIndent)},i.prototype.popCx=function(){this.curIndent=this.context.pop()},i.prototype.lineEnd=function(t){for(;t<this.input.length&&!y.isNewLine(this.input.charCodeAt(t));)++t;return t},i.prototype.indentationAfter=function(t){for(var e=0;;++t){var s=this.input.charCodeAt(t);if(32===s)++e;else{if(9!==s)return e;e+=this.options.tabSize}}},i.prototype.closes=function(t,e,s,i){return this.tok.type===t||this.tok.type===y.tokTypes.eof||s!==this.curLineStart&&this.curIndent<e&&this.tokenStartsLine()&&(!i||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<e)},i.prototype.tokenStartsLine=function(){for(var t=this.tok.start-1;t>=this.curLineStart;--t){var e=this.input.charCodeAt(t);if(9!==e&&32!==e)return!1}return!0},i.prototype.extend=function(t,e){this[t]=e(this[t])},i.prototype.parse=function(){return this.next(),this.parseTopLevel()},i.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var s=this,i=0;i<t.length;i++)s=t[i](s);return s},i.parse=function(t,e){return new this(t,e).parse()},i.BaseParser=y.Parser;var e=i.prototype;e.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},e.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===y.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=y.tokTypes.ellipsis),new y.Token(this.toks)}catch(t){if(!(t instanceof SyntaxError))throw t;var e=t.message,s=t.raisedAt,i=!0;if(/unterminated/i.test(e))if(s=this.lineEnd(t.pos+1),/string/.test(e))i={start:t.pos,end:s,type:y.tokTypes.string,value:this.input.slice(t.pos+1,s)};else if(/regular expr/i.test(e)){var r=this.input.slice(t.pos,s);try{r=new RegExp(r)}catch(t){}i={start:t.pos,end:s,type:y.tokTypes.regexp,value:r}}else i=!!/template/.test(e)&&{start:t.pos,end:s,type:y.tokTypes.template,value:this.input.slice(t.pos,s)};else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(e))for(;s<this.input.length&&!((n=this.input.charCodeAt(s))<14&&8<n||32===n||160===n||y.isNewLine(n));)++s;else if(/character escape|expected hexadecimal/i.test(e))for(;s<this.input.length;){var o=this.input.charCodeAt(s++);if(34===o||39===o||y.isNewLine(o))break}else if(/unexpected character/i.test(e))s++,i=!1;else{if(!/regular expression/i.test(e))throw t;i=!0}if(this.resetTo(s),!0===i&&(i={start:s,end:s,type:y.tokTypes.name,value:a}),i)return this.options.locations&&(i.loc=new y.SourceLocation(this.toks,y.getLineInfo(this.input,i.start),y.getLineInfo(this.input,i.end))),i}var n},e.resetTo=function(t){this.toks.pos=t;var e,s=this.input.charAt(t-1);if(this.toks.exprAllowed=!s||/[[{(,;:?/*=+\-~!|&%^<>]/.test(s)||/[enwfd]/.test(s)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(t-10,t)),this.options.locations)for(this.toks.curLine=1,this.toks.lineStart=y.lineBreakG.lastIndex=0;(e=y.lineBreakG.exec(this.input))&&e.index<t;)++this.toks.curLine,this.toks.lineStart=e.index+e[0].length},e.lookAhead=function(t){for(;t>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[t-1]};e=i.prototype;e.parseTopLevel=function(){var t=this.startNodeAt(this.options.locations?[0,y.getLineInfo(this.input,0)]:0);for(t.body=[];this.tok.type!==y.tokTypes.eof;)t.body.push(this.parseStatement());return this.toks.adaptDirectivePrologue(t.body),this.last=this.tok,t.sourceType=this.options.sourceType,this.finishNode(t,"Program")},e.parseStatement=function(){var t,e=this.tok.type,s=this.startNode();switch(this.toks.isLet()&&(e=y.tokTypes._var,t="let"),e){case y.tokTypes._break:case y.tokTypes._continue:this.next();var i=e===y.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?s.label=null:(s.label=this.tok.type===y.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(s,i?"BreakStatement":"ContinueStatement");case y.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(s,"DebuggerStatement");case y.tokTypes._do:return this.next(),s.body=this.parseStatement(),s.test=this.eat(y.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(s,"DoWhileStatement");case y.tokTypes._for:this.next();var r=9<=this.options.ecmaVersion&&this.eatContextual("await");if(this.pushCx(),this.expect(y.tokTypes.parenL),this.tok.type===y.tokTypes.semi)return this.parseFor(s,null);i=this.toks.isLet();if(i||this.tok.type===y.tokTypes._var||this.tok.type===y.tokTypes._const){var o=this.parseVar(this.startNode(),!0,i?"let":this.tok.value);return 1!==o.declarations.length||this.tok.type!==y.tokTypes._in&&!this.isContextual("of")?this.parseFor(s,o):(9<=this.options.ecmaVersion&&this.tok.type!==y.tokTypes._in&&(s.await=r),this.parseForIn(s,o))}var o=this.parseExpression(!0);return this.tok.type===y.tokTypes._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==y.tokTypes._in&&(s.await=r),this.parseForIn(s,this.toAssignable(o))):this.parseFor(s,o);case y.tokTypes._function:return this.next(),this.parseFunction(s,!0);case y.tokTypes._if:return this.next(),s.test=this.parseParenExpression(),s.consequent=this.parseStatement(),s.alternate=this.eat(y.tokTypes._else)?this.parseStatement():null,this.finishNode(s,"IfStatement");case y.tokTypes._return:return this.next(),this.eat(y.tokTypes.semi)||this.canInsertSemicolon()?s.argument=null:(s.argument=this.parseExpression(),this.semicolon()),this.finishNode(s,"ReturnStatement");case y.tokTypes._switch:var n,a,h=this.curIndent,p=this.curLineStart;for(this.next(),s.discriminant=this.parseParenExpression(),s.cases=[],this.pushCx(),this.expect(y.tokTypes.braceL);!this.closes(y.tokTypes.braceR,h,p,!0);)this.tok.type===y.tokTypes._case||this.tok.type===y.tokTypes._default?(a=this.tok.type===y.tokTypes._case,n&&this.finishNode(n,"SwitchCase"),s.cases.push(n=this.startNode()),n.consequent=[],this.next(),n.test=a?this.parseExpression():null,this.expect(y.tokTypes.colon)):(n||(s.cases.push(n=this.startNode()),n.consequent=[],n.test=null),n.consequent.push(this.parseStatement()));return n&&this.finishNode(n,"SwitchCase"),this.popCx(),this.eat(y.tokTypes.braceR),this.finishNode(s,"SwitchStatement");case y.tokTypes._throw:return this.next(),s.argument=this.parseExpression(),this.semicolon(),this.finishNode(s,"ThrowStatement");case y.tokTypes._try:return this.next(),s.block=this.parseBlock(),s.handler=null,this.tok.type===y.tokTypes._catch&&(o=this.startNode(),this.next(),this.eat(y.tokTypes.parenL)?(o.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(y.tokTypes.parenR)):o.param=null,o.body=this.parseBlock(),s.handler=this.finishNode(o,"CatchClause")),s.finalizer=this.eat(y.tokTypes._finally)?this.parseBlock():null,s.handler||s.finalizer?this.finishNode(s,"TryStatement"):s.block;case y.tokTypes._var:case y.tokTypes._const:return this.parseVar(s,!1,t||this.tok.value);case y.tokTypes._while:return this.next(),s.test=this.parseParenExpression(),s.body=this.parseStatement(),this.finishNode(s,"WhileStatement");case y.tokTypes._with:return this.next(),s.object=this.parseParenExpression(),s.body=this.parseStatement(),this.finishNode(s,"WithStatement");case y.tokTypes.braceL:return this.parseBlock();case y.tokTypes.semi:return this.next(),this.finishNode(s,"EmptyStatement");case y.tokTypes._class:return this.parseClass(!0);case y.tokTypes._import:if(10<this.options.ecmaVersion){var c=this.lookAhead(1).type;if(c===y.tokTypes.parenL||c===y.tokTypes.dot)return s.expression=this.parseExpression(),this.semicolon(),this.finishNode(s,"ExpressionStatement")}return this.parseImport();case y.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(s,!0,!0);c=this.parseExpression();return u(c)?(this.next(),this.tok.type===y.tokTypes.eof?this.finishNode(s,"EmptyStatement"):this.parseStatement()):e===y.tokTypes.name&&"Identifier"===c.type&&this.eat(y.tokTypes.colon)?(s.body=this.parseStatement(),s.label=c,this.finishNode(s,"LabeledStatement")):(s.expression=c,this.semicolon(),this.finishNode(s,"ExpressionStatement"))}},e.parseBlock=function(){var t=this.startNode();this.pushCx(),this.expect(y.tokTypes.braceL);var e=this.curIndent,s=this.curLineStart;for(t.body=[];!this.closes(y.tokTypes.braceR,e,s,!0);)t.body.push(this.parseStatement());return this.popCx(),this.eat(y.tokTypes.braceR),this.finishNode(t,"BlockStatement")},e.parseFor=function(t,e){return t.init=e,t.test=t.update=null,this.eat(y.tokTypes.semi)&&this.tok.type!==y.tokTypes.semi&&(t.test=this.parseExpression()),this.eat(y.tokTypes.semi)&&this.tok.type!==y.tokTypes.parenR&&(t.update=this.parseExpression()),this.popCx(),this.expect(y.tokTypes.parenR),t.body=this.parseStatement(),this.finishNode(t,"ForStatement")},e.parseForIn=function(t,e){var s=this.tok.type===y.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.popCx(),this.expect(y.tokTypes.parenR),t.body=this.parseStatement(),this.finishNode(t,s)},e.parseVar=function(t,e,s){t.kind=s,this.next(),t.declarations=[];do{var i=this.startNode()}while(i.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),i.init=this.eat(y.tokTypes.eq)?this.parseMaybeAssign(e):null,t.declarations.push(this.finishNode(i,"VariableDeclarator")),this.eat(y.tokTypes.comma));return t.declarations.length||((s=this.startNode()).id=this.dummyIdent(),t.declarations.push(this.finishNode(s,"VariableDeclarator"))),e||this.semicolon(),this.finishNode(t,"VariableDeclaration")},e.parseClass=function(t){var e=this.startNode();this.next(),this.tok.type===y.tokTypes.name?e.id=this.parseIdent():e.id=!0===t?this.dummyIdent():null,e.superClass=this.eat(y.tokTypes._extends)?this.parseExpression():null,e.body=this.startNode(),e.body.body=[],this.pushCx();var s,i,r,o=this.curIndent+1,n=this.curLineStart;for(this.eat(y.tokTypes.braceL),this.curIndent+1<o&&(o=this.curIndent,n=this.curLineStart);!this.closes(y.tokTypes.braceR,o,n);)this.semicolon()||(s=this.startNode(),r=i=void 0,6<=this.options.ecmaVersion&&(s.static=!1,i=this.eat(y.tokTypes.star)),this.parsePropertyName(s),u(s.key)?(u(this.parseMaybeAssign())&&this.next(),this.eat(y.tokTypes.comma)):("Identifier"!==s.key.type||s.computed||"static"!==s.key.name||this.tok.type===y.tokTypes.parenL||this.tok.type===y.tokTypes.braceL?s.static=!1:(s.static=!0,i=this.eat(y.tokTypes.star),this.parsePropertyName(s)),s.computed||"Identifier"!==s.key.type||"async"!==s.key.name||this.tok.type===y.tokTypes.parenL||this.canInsertSemicolon()?r=!1:(r=!0,i=9<=this.options.ecmaVersion&&this.eat(y.tokTypes.star),this.parsePropertyName(s)),5<=this.options.ecmaVersion&&"Identifier"===s.key.type&&!s.computed&&("get"===s.key.name||"set"===s.key.name)&&this.tok.type!==y.tokTypes.parenL&&this.tok.type!==y.tokTypes.braceL?(s.kind=s.key.name,this.parsePropertyName(s),s.value=this.parseMethod(!1)):(s.computed||s.static||i||r||!("Identifier"===s.key.type&&"constructor"===s.key.name||"Literal"===s.key.type&&"constructor"===s.key.value)?s.kind="method":s.kind="constructor",s.value=this.parseMethod(i,r)),e.body.body.push(this.finishNode(s,"MethodDefinition"))));return this.popCx(),this.eat(y.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(e.body,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},e.parseFunction=function(t,e,s){var i=this.inAsync,r=this.inFunction;return this.initFunction(t),6<=this.options.ecmaVersion&&(t.generator=this.eat(y.tokTypes.star)),8<=this.options.ecmaVersion&&(t.async=!!s),this.tok.type===y.tokTypes.name?t.id=this.parseIdent():!0===e&&(t.id=this.dummyIdent()),this.inAsync=t.async,this.inFunction=!0,t.params=this.parseFunctionParams(),t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body),this.inAsync=i,this.inFunction=r,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},e.parseExport=function(){var t,e,s=this.startNode();return this.next(),this.eat(y.tokTypes.star)?(11<=this.options.ecmaVersion&&(this.eatContextual("as")?s.exported=this.parseExprAtom():s.exported=null),s.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(s,"ExportAllDeclaration")):this.eat(y.tokTypes._default)?(this.tok.type===y.tokTypes._function||(t=this.toks.isAsyncFunction())?(e=this.startNode(),this.next(),t&&this.next(),s.declaration=this.parseFunction(e,"nullableID",t)):this.tok.type===y.tokTypes._class?s.declaration=this.parseClass("nullableID"):(s.declaration=this.parseMaybeAssign(),this.semicolon()),this.finishNode(s,"ExportDefaultDeclaration")):(this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(s.declaration=this.parseStatement(),s.specifiers=[],s.source=null):(s.declaration=null,s.specifiers=this.parseExportSpecifierList(),s.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(s,"ExportNamedDeclaration"))},e.parseImport=function(){var t,e=this.startNode();return this.next(),this.tok.type===y.tokTypes.string?(e.specifiers=[],e.source=this.parseExprAtom()):(this.tok.type===y.tokTypes.name&&"from"!==this.tok.value&&((t=this.startNode()).local=this.parseIdent(),this.finishNode(t,"ImportDefaultSpecifier"),this.eat(y.tokTypes.comma)),e.specifiers=this.parseImportSpecifiers(),e.source=this.eatContextual("from")&&this.tok.type===y.tokTypes.string?this.parseExprAtom():this.dummyString(),t&&e.specifiers.unshift(t)),this.semicolon(),this.finishNode(e,"ImportDeclaration")},e.parseImportSpecifiers=function(){var t=[];if(this.tok.type===y.tokTypes.star){var e=this.startNode();this.next(),e.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),t.push(this.finishNode(e,"ImportNamespaceSpecifier"))}else{var s=this.curIndent,i=this.curLineStart,r=this.nextLineStart;for(this.pushCx(),this.eat(y.tokTypes.braceL),this.curLineStart>r&&(r=this.curLineStart);!this.closes(y.tokTypes.braceR,s+(this.curLineStart<=r?1:0),i);){var o=this.startNode();if(this.eat(y.tokTypes.star))o.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(o,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;if(o.imported=this.parseIdent(),u(o.imported))break;o.local=this.eatContextual("as")?this.parseIdent():o.imported,this.finishNode(o,"ImportSpecifier")}t.push(o),this.eat(y.tokTypes.comma)}this.eat(y.tokTypes.braceR),this.popCx()}return t},e.parseExportSpecifierList=function(){var t=[],e=this.curIndent,s=this.curLineStart,i=this.nextLineStart;for(this.pushCx(),this.eat(y.tokTypes.braceL),this.curLineStart>i&&(i=this.curLineStart);!this.closes(y.tokTypes.braceR,e+(this.curLineStart<=i?1:0),s)&&!this.isContextual("from");){var r=this.startNode();if(r.local=this.parseIdent(),u(r.local))break;r.exported=this.eatContextual("as")?this.parseIdent():r.local,this.finishNode(r,"ExportSpecifier"),t.push(r),this.eat(y.tokTypes.comma)}return this.eat(y.tokTypes.braceR),this.popCx(),t};e=i.prototype;e.checkLVal=function(t){if(!t)return t;switch(t.type){case"Identifier":case"MemberExpression":return t;case"ParenthesizedExpression":return t.expression=this.checkLVal(t.expression),t;default:return this.dummyIdent()}},e.parseExpression=function(t){var e=this.storeCurrentPos(),s=this.parseMaybeAssign(t);if(this.tok.type!==y.tokTypes.comma)return s;var i=this.startNodeAt(e);for(i.expressions=[s];this.eat(y.tokTypes.comma);)i.expressions.push(this.parseMaybeAssign(t));return this.finishNode(i,"SequenceExpression")},e.parseParenExpression=function(){this.pushCx(),this.expect(y.tokTypes.parenL);var t=this.parseExpression();return this.popCx(),this.expect(y.tokTypes.parenR),t},e.parseMaybeAssign=function(t){if(this.toks.isContextual("yield")){var e=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==y.tokTypes.star&&!this.tok.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(y.tokTypes.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")}var s=this.storeCurrentPos(),e=this.parseMaybeConditional(t);if(this.tok.type.isAssign){s=this.startNodeAt(s);return s.operator=this.tok.value,s.left=this.tok.type===y.tokTypes.eq?this.toAssignable(e):this.checkLVal(e),this.next(),s.right=this.parseMaybeAssign(t),this.finishNode(s,"AssignmentExpression")}return e},e.parseMaybeConditional=function(t){var e=this.storeCurrentPos(),s=this.parseExprOps(t);if(this.eat(y.tokTypes.question)){e=this.startNodeAt(e);return e.test=s,e.consequent=this.parseMaybeAssign(),e.alternate=this.expect(y.tokTypes.colon)?this.parseMaybeAssign(t):this.dummyIdent(),this.finishNode(e,"ConditionalExpression")}return s},e.parseExprOps=function(t){var e=this.storeCurrentPos(),s=this.curIndent,i=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),e,-1,t,s,i)},e.parseExprOp=function(t,e,s,i,r,o){if(this.curLineStart!==o&&this.curIndent<r&&this.tokenStartsLine())return t;var n=this.tok.type.binop;if(null==n||i&&this.tok.type===y.tokTypes._in||!(s<n))return t;var a=this.startNodeAt(e);return a.left=t,a.operator=this.tok.value,this.next(),this.curLineStart!==o&&this.curIndent<r&&this.tokenStartsLine()?a.right=this.dummyIdent():(t=this.storeCurrentPos(),a.right=this.parseExprOp(this.parseMaybeUnary(!1),t,n,i,r,o)),this.finishNode(a,/&&|\|\||\?\?/.test(a.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(a,e,s,i,r,o)},e.parseMaybeUnary=function(t){var e,s=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))e=this.parseAwait(),t=!0;else if(this.tok.type.prefix){var i=this.startNode(),r=this.tok.type===y.tokTypes.incDec;r||(t=!0),i.operator=this.tok.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(!0),r&&(i.argument=this.checkLVal(i.argument)),e=this.finishNode(i,r?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===y.tokTypes.ellipsis){r=this.startNode();this.next(),r.argument=this.parseMaybeUnary(t),e=this.finishNode(r,"SpreadElement")}else for(e=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(s);o.operator=this.tok.value,o.prefix=!1,o.argument=this.checkLVal(e),this.next(),e=this.finishNode(o,"UpdateExpression")}if(t||!this.eat(y.tokTypes.starstar))return e;t=this.startNodeAt(s);return t.operator="**",t.left=e,t.right=this.parseMaybeUnary(!1),this.finishNode(t,"BinaryExpression")},e.parseExprSubscripts=function(){var t=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),t,!1,this.curIndent,this.curLineStart)},e.parseSubscripts=function(t,e,s,i,r){for(var o,n=11<=this.options.ecmaVersion,a=!1;;){if(this.curLineStart!==r&&this.curIndent<=i&&this.tokenStartsLine()){if(this.tok.type!==y.tokTypes.dot||this.curIndent!==i)break;--i}var h="Identifier"===t.type&&"async"===t.name&&!this.canInsertSemicolon(),p=n&&this.eat(y.tokTypes.questionDot);if(p&&(a=!0),p&&this.tok.type!==y.tokTypes.parenL&&this.tok.type!==y.tokTypes.bracketL&&this.tok.type!==y.tokTypes.backQuote||this.eat(y.tokTypes.dot)){var c=this.startNodeAt(e);c.object=t,this.curLineStart!==r&&this.curIndent<=i&&this.tokenStartsLine()?c.property=this.dummyIdent():c.property=this.parsePropertyAccessor()||this.dummyIdent(),c.computed=!1,n&&(c.optional=p),t=this.finishNode(c,"MemberExpression")}else if(this.tok.type===y.tokTypes.bracketL){this.pushCx(),this.next();c=this.startNodeAt(e);c.object=t,c.property=this.parseExpression(),c.computed=!0,n&&(c.optional=p),this.popCx(),this.expect(y.tokTypes.bracketR),t=this.finishNode(c,"MemberExpression")}else if(s||this.tok.type!==y.tokTypes.parenL){if(this.tok.type!==y.tokTypes.backQuote)break;var u=this.startNodeAt(e);u.tag=t,u.quasi=this.parseTemplate(),t=this.finishNode(u,"TaggedTemplateExpression")}else{u=this.parseExprList(y.tokTypes.parenR);if(h&&this.eat(y.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(e),u,!0);h=this.startNodeAt(e);h.callee=t,h.arguments=u,n&&(h.optional=p),t=this.finishNode(h,"CallExpression")}}return a&&((o=this.startNodeAt(e)).expression=t,t=this.finishNode(o,"ChainExpression")),t},e.parseExprAtom=function(){switch(this.tok.type){case y.tokTypes._this:case y.tokTypes._super:var t=this.tok.type===y.tokTypes._this?"ThisExpression":"Super",e=this.startNode();return this.next(),this.finishNode(e,t);case y.tokTypes.name:var t=this.storeCurrentPos(),s=this.parseIdent(),i=!1;if("async"===s.name&&!this.canInsertSemicolon()){if(this.eat(y.tokTypes._function))return this.parseFunction(this.startNodeAt(t),!1,!0);this.tok.type===y.tokTypes.name&&(s=this.parseIdent(),i=!0)}return this.eat(y.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(t),[s],i):s;case y.tokTypes.regexp:e=this.startNode();var r=this.tok.value;return e.regex={pattern:r.pattern,flags:r.flags},e.value=r.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case y.tokTypes.num:case y.tokTypes.string:return(e=this.startNode()).value=this.tok.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===y.tokTypes.num&&110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal");case y.tokTypes._null:case y.tokTypes._true:case y.tokTypes._false:return(e=this.startNode()).value=this.tok.type===y.tokTypes._null?null:this.tok.type===y.tokTypes._true,e.raw=this.tok.type.keyword,this.next(),this.finishNode(e,"Literal");case y.tokTypes.parenL:i=this.storeCurrentPos();this.next();s=this.parseExpression();if(this.expect(y.tokTypes.parenR),this.eat(y.tokTypes.arrow)){r=s.expressions||[s];return r.length&&u(r[r.length-1])&&r.pop(),this.parseArrowExpression(this.startNodeAt(i),r)}return this.options.preserveParens&&((i=this.startNodeAt(i)).expression=s,s=this.finishNode(i,"ParenthesizedExpression")),s;case y.tokTypes.bracketL:return(e=this.startNode()).elements=this.parseExprList(y.tokTypes.bracketR,!0),this.finishNode(e,"ArrayExpression");case y.tokTypes.braceL:return this.parseObj();case y.tokTypes._class:return this.parseClass(!1);case y.tokTypes._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case y.tokTypes._new:return this.parseNew();case y.tokTypes.backQuote:return this.parseTemplate();case y.tokTypes._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}},e.parseExprImport=function(){var t=this.startNode(),e=this.parseIdent(!0);switch(this.tok.type){case y.tokTypes.parenL:return this.parseDynamicImport(t);case y.tokTypes.dot:return t.meta=e,this.parseImportMeta(t);default:return t.name="import",this.finishNode(t,"Identifier")}},e.parseDynamicImport=function(t){return t.source=this.parseExprList(y.tokTypes.parenR)[0]||this.dummyString(),this.finishNode(t,"ImportExpression")},e.parseImportMeta=function(t){return this.next(),t.property=this.parseIdent(!0),this.finishNode(t,"MetaProperty")},e.parseNew=function(){var t=this.startNode(),e=this.curIndent,s=this.curLineStart,i=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(y.tokTypes.dot))return t.meta=i,t.property=this.parseIdent(!0),this.finishNode(t,"MetaProperty");i=this.storeCurrentPos();return t.callee=this.parseSubscripts(this.parseExprAtom(),i,!0,e,s),this.tok.type===y.tokTypes.parenL?t.arguments=this.parseExprList(y.tokTypes.parenR):t.arguments=[],this.finishNode(t,"NewExpression")},e.parseTemplateElement=function(){var t=this.startNode();return this.tok.type===y.tokTypes.invalidTemplate?t.value={raw:this.tok.value,cooked:null}:t.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),t.tail=this.tok.type===y.tokTypes.backQuote,this.finishNode(t,"TemplateElement")},e.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.next(),t.expressions.push(this.parseExpression()),this.expect(y.tokTypes.braceR)?e=this.parseTemplateElement():((e=this.startNode()).value={cooked:"",raw:""},e.tail=!0,this.finishNode(e,"TemplateElement")),t.quasis.push(e);return this.expect(y.tokTypes.backQuote),this.finishNode(t,"TemplateLiteral")},e.parseObj=function(){var t=this.startNode();t.properties=[],this.pushCx();var e=this.curIndent+1,s=this.curLineStart;for(this.eat(y.tokTypes.braceL),this.curIndent+1<e&&(e=this.curIndent,s=this.curLineStart);!this.closes(y.tokTypes.braceR,e,s);){var i=this.startNode(),r=void 0,o=void 0,n=void 0;9<=this.options.ecmaVersion&&this.eat(y.tokTypes.ellipsis)?(i.argument=this.parseMaybeAssign(),t.properties.push(this.finishNode(i,"SpreadElement")),this.eat(y.tokTypes.comma)):(6<=this.options.ecmaVersion&&(n=this.storeCurrentPos(),i.method=!1,i.shorthand=!1,r=this.eat(y.tokTypes.star)),this.parsePropertyName(i),this.toks.isAsyncProp(i)?(o=!0,r=9<=this.options.ecmaVersion&&this.eat(y.tokTypes.star),this.parsePropertyName(i)):o=!1,u(i.key)?u(this.parseMaybeAssign())&&this.next():(this.eat(y.tokTypes.colon)?(i.kind="init",i.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===y.tokTypes.parenL||this.tok.type===y.tokTypes.braceL)?(i.kind="init",i.method=!0,i.value=this.parseMethod(r,o)):5<=this.options.ecmaVersion&&"Identifier"===i.key.type&&!i.computed&&("get"===i.key.name||"set"===i.key.name)&&this.tok.type!==y.tokTypes.comma&&this.tok.type!==y.tokTypes.braceR&&this.tok.type!==y.tokTypes.eq?(i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1)):(i.kind="init",6<=this.options.ecmaVersion?this.eat(y.tokTypes.eq)?((n=this.startNodeAt(n)).operator="=",n.left=i.key,n.right=this.parseMaybeAssign(),i.value=this.finishNode(n,"AssignmentExpression")):i.value=i.key:i.value=this.dummyIdent(),i.shorthand=!0),t.properties.push(this.finishNode(i,"Property"))),this.eat(y.tokTypes.comma))}return this.popCx(),this.eat(y.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(t,"ObjectExpression")},e.parsePropertyName=function(t){if(6<=this.options.ecmaVersion){if(this.eat(y.tokTypes.bracketL))return t.computed=!0,t.key=this.parseExpression(),void this.expect(y.tokTypes.bracketR);t.computed=!1}var e=this.tok.type===y.tokTypes.num||this.tok.type===y.tokTypes.string?this.parseExprAtom():this.parseIdent();t.key=e||this.dummyIdent()},e.parsePropertyAccessor=function(){if(this.tok.type===y.tokTypes.name||this.tok.type.keyword)return this.parseIdent()},e.parseIdent=function(){var t=this.tok.type===y.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!t)return this.dummyIdent();var e=this.startNode();return this.next(),e.name=t,this.finishNode(e,"Identifier")},e.initFunction=function(t){t.id=null,t.params=[],6<=this.options.ecmaVersion&&(t.generator=!1,t.expression=!1),8<=this.options.ecmaVersion&&(t.async=!1)},e.toAssignable=function(t,e){if(t&&"Identifier"!==t.type&&("MemberExpression"!==t.type||e))if("ParenthesizedExpression"===t.type)this.toAssignable(t.expression,e);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if("ObjectExpression"===t.type){t.type="ObjectPattern";for(var s=0,i=t.properties;s<i.length;s+=1){var r=i[s];this.toAssignable(r,e)}}else if("ArrayExpression"===t.type)t.type="ArrayPattern",this.toAssignableList(t.elements,e);else if("Property"===t.type)this.toAssignable(t.value,e);else if("SpreadElement"===t.type)t.type="RestElement",this.toAssignable(t.argument,e);else{if("AssignmentExpression"!==t.type)return this.dummyIdent();t.type="AssignmentPattern",delete t.operator}}return t},e.toAssignableList=function(t,e){for(var s=0,i=t;s<i.length;s+=1){var r=i[s];this.toAssignable(r,e)}return t},e.parseFunctionParams=function(t){return t=this.parseExprList(y.tokTypes.parenR),this.toAssignableList(t,!0)},e.parseMethod=function(t,e){var s=this.startNode(),i=this.inAsync,r=this.inFunction;return this.initFunction(s),6<=this.options.ecmaVersion&&(s.generator=!!t),8<=this.options.ecmaVersion&&(s.async=!!e),this.inAsync=s.async,this.inFunction=!0,s.params=this.parseFunctionParams(),s.body=this.parseBlock(),this.toks.adaptDirectivePrologue(s.body.body),this.inAsync=i,this.inFunction=r,this.finishNode(s,"FunctionExpression")},e.parseArrowExpression=function(t,e,s){var i=this.inAsync,r=this.inFunction;return this.initFunction(t),8<=this.options.ecmaVersion&&(t.async=!!s),this.inAsync=t.async,this.inFunction=!0,t.params=this.toAssignableList(e,!0),t.expression=this.tok.type!==y.tokTypes.braceL,t.expression?t.body=this.parseMaybeAssign():(t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body)),this.inAsync=i,this.inFunction=r,this.finishNode(t,"ArrowFunctionExpression")},e.parseExprList=function(t,e){this.pushCx();var s=this.curIndent,i=this.curLineStart,r=[];for(this.next();!this.closes(t,s+1,i);)if(this.eat(y.tokTypes.comma))r.push(e?null:this.dummyIdent());else{var o=this.parseMaybeAssign();if(u(o)){if(this.closes(t,s,i))break;this.next()}else r.push(o);this.eat(y.tokTypes.comma)}return this.popCx(),this.eat(t)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),r},e.parseAwait=function(){var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(),this.finishNode(t,"AwaitExpression")},y.defaultOptions.tabSize=4,t.LooseParser=i,t.isDummy=u,t.parse=function(t,e){return i.parse(t,e)},Object.defineProperty(t,"__esModule",{value:!0})});